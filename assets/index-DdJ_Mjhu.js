var O1=Object.defineProperty;var F1=(t,e,n)=>e in t?O1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Aa=(t,e,n)=>F1(t,typeof e!="symbol"?e+"":e,n);function U1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function B1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u0={exports:{}},lc={},d0={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Go=Symbol.for("react.element"),z1=Symbol.for("react.portal"),$1=Symbol.for("react.fragment"),H1=Symbol.for("react.strict_mode"),q1=Symbol.for("react.profiler"),W1=Symbol.for("react.provider"),Q1=Symbol.for("react.context"),G1=Symbol.for("react.forward_ref"),K1=Symbol.for("react.suspense"),Y1=Symbol.for("react.memo"),X1=Symbol.for("react.lazy"),km=Symbol.iterator;function J1(t){return t===null||typeof t!="object"?null:(t=km&&t[km]||t["@@iterator"],typeof t=="function"?t:null)}var h0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f0=Object.assign,m0={};function hi(t,e,n){this.props=t,this.context=e,this.refs=m0,this.updater=n||h0}hi.prototype.isReactComponent={};hi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function p0(){}p0.prototype=hi.prototype;function vh(t,e,n){this.props=t,this.context=e,this.refs=m0,this.updater=n||h0}var wh=vh.prototype=new p0;wh.constructor=vh;f0(wh,hi.prototype);wh.isPureReactComponent=!0;var Pm=Array.isArray,g0=Object.prototype.hasOwnProperty,_h={current:null},x0={key:!0,ref:!0,__self:!0,__source:!0};function y0(t,e,n){var r,s={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)g0.call(e,r)&&!x0.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Go,type:t,key:o,ref:a,props:s,_owner:_h.current}}function Z1(t,e){return{$$typeof:Go,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Go}function ew(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rm=/\/+/g;function fu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ew(""+t.key):e.toString(36)}function nl(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Go:case z1:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+fu(a,0):r,Pm(s)?(n="",t!=null&&(n=t.replace(Rm,"$&/")+"/"),nl(s,e,n,"",function(d){return d})):s!=null&&(jh(s)&&(s=Z1(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Rm,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Pm(t))for(var c=0;c<t.length;c++){o=t[c];var u=r+fu(o,c);a+=nl(o,e,n,u,s)}else if(u=J1(t),typeof u=="function")for(t=u.call(t),c=0;!(o=t.next()).done;)o=o.value,u=r+fu(o,c++),a+=nl(o,e,n,u,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ka(t,e,n){if(t==null)return t;var r=[],s=0;return nl(t,r,"","",function(o){return e.call(n,o,s++)}),r}function tw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kt={current:null},rl={transition:null},nw={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:rl,ReactCurrentOwner:_h};function v0(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:ka,forEach:function(t,e,n){ka(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ka(t,function(){e++}),e},toArray:function(t){return ka(t,function(e){return e})||[]},only:function(t){if(!jh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=hi;me.Fragment=$1;me.Profiler=q1;me.PureComponent=vh;me.StrictMode=H1;me.Suspense=K1;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nw;me.act=v0;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=f0({},t.props),s=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=_h.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)g0.call(e,u)&&!x0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Go,type:t.type,key:s,ref:o,props:r,_owner:a}};me.createContext=function(t){return t={$$typeof:Q1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:W1,_context:t},t.Consumer=t};me.createElement=y0;me.createFactory=function(t){var e=y0.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:G1,render:t}};me.isValidElement=jh;me.lazy=function(t){return{$$typeof:X1,_payload:{_status:-1,_result:t},_init:tw}};me.memo=function(t,e){return{$$typeof:Y1,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=rl.transition;rl.transition={};try{t()}finally{rl.transition=e}};me.unstable_act=v0;me.useCallback=function(t,e){return kt.current.useCallback(t,e)};me.useContext=function(t){return kt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return kt.current.useDeferredValue(t)};me.useEffect=function(t,e){return kt.current.useEffect(t,e)};me.useId=function(){return kt.current.useId()};me.useImperativeHandle=function(t,e,n){return kt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return kt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return kt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return kt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return kt.current.useReducer(t,e,n)};me.useRef=function(t){return kt.current.useRef(t)};me.useState=function(t){return kt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return kt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return kt.current.useTransition()};me.version="18.3.1";d0.exports=me;var R=d0.exports;const w0=B1(R),rw=U1({__proto__:null,default:w0},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw=R,iw=Symbol.for("react.element"),ow=Symbol.for("react.fragment"),aw=Object.prototype.hasOwnProperty,lw=sw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cw={key:!0,ref:!0,__self:!0,__source:!0};function _0(t,e,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)aw.call(e,r)&&!cw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:iw,type:t,key:o,ref:a,props:s,_owner:lw.current}}lc.Fragment=ow;lc.jsx=_0;lc.jsxs=_0;u0.exports=lc;var i=u0.exports,Zu={},j0={exports:{}},Kt={},E0={exports:{}},b0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,K){var re=H.length;H.push(K);e:for(;0<re;){var U=re-1>>>1,ne=H[U];if(0<s(ne,K))H[U]=K,H[re]=ne,re=U;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var K=H[0],re=H.pop();if(re!==K){H[0]=re;e:for(var U=0,ne=H.length,Y=ne>>>1;U<Y;){var de=2*(U+1)-1,Q=H[de],J=de+1,we=H[J];if(0>s(Q,re))J<ne&&0>s(we,Q)?(H[U]=we,H[J]=re,U=J):(H[U]=Q,H[de]=re,U=de);else if(J<ne&&0>s(we,re))H[U]=we,H[J]=re,U=J;else break e}}return K}function s(H,K){var re=H.sortIndex-K.sortIndex;return re!==0?re:H.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],m=1,p=null,f=3,y=!1,N=!1,I=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(H){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=H)r(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(d)}}function k(H){if(I=!1,j(H),!N)if(n(u)!==null)N=!0,Ie(L);else{var K=n(d);K!==null&&xe(k,K.startTime-H)}}function L(H,K){N=!1,I&&(I=!1,x(v),v=-1),y=!0;var re=f;try{for(j(K),p=n(u);p!==null&&(!(p.expirationTime>K)||H&&!S());){var U=p.callback;if(typeof U=="function"){p.callback=null,f=p.priorityLevel;var ne=U(p.expirationTime<=K);K=t.unstable_now(),typeof ne=="function"?p.callback=ne:p===n(u)&&r(u),j(K)}else r(u);p=n(u)}if(p!==null)var Y=!0;else{var de=n(d);de!==null&&xe(k,de.startTime-K),Y=!1}return Y}finally{p=null,f=re,y=!1}}var P=!1,w=null,v=-1,T=5,A=-1;function S(){return!(t.unstable_now()-A<T)}function D(){if(w!==null){var H=t.unstable_now();A=H;var K=!0;try{K=w(!0,H)}finally{K?b():(P=!1,w=null)}}else P=!1}var b;if(typeof _=="function")b=function(){_(D)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ae=oe.port2;oe.port1.onmessage=D,b=function(){ae.postMessage(null)}}else b=function(){C(D,0)};function Ie(H){w=H,P||(P=!0,b())}function xe(H,K){v=C(function(){H(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){N||y||(N=!0,Ie(L))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var re=f;f=K;try{return H()}finally{f=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var re=f;f=H;try{return K()}finally{f=re}},t.unstable_scheduleCallback=function(H,K,re){var U=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?U+re:U):re=U,H){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=re+ne,H={id:m++,callback:K,priorityLevel:H,startTime:re,expirationTime:ne,sortIndex:-1},re>U?(H.sortIndex=re,e(d,H),n(u)===null&&H===n(d)&&(I?(x(v),v=-1):I=!0,xe(k,re-U))):(H.sortIndex=ne,e(u,H),N||y||(N=!0,Ie(L))),H},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(H){var K=f;return function(){var re=f;f=K;try{return H.apply(this,arguments)}finally{f=re}}}})(b0);E0.exports=b0;var uw=E0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw=R,Gt=uw;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var N0=new Set,vo={};function hs(t,e){Js(t,e),Js(t+"Capture",e)}function Js(t,e){for(vo[t]=e,t=0;t<e.length;t++)N0.add(e[t])}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ed=Object.prototype.hasOwnProperty,hw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dm={},Lm={};function fw(t){return ed.call(Lm,t)?!0:ed.call(Dm,t)?!1:hw.test(t)?Lm[t]=!0:(Dm[t]=!0,!1)}function mw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pw(t,e,n,r){if(e===null||typeof e>"u"||mw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pt(t,e,n,r,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vt[t]=new Pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vt[e]=new Pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vt[t]=new Pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vt[t]=new Pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vt[t]=new Pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vt[t]=new Pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vt[t]=new Pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vt[t]=new Pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vt[t]=new Pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Eh=/[\-:]([a-z])/g;function bh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Eh,bh);vt[e]=new Pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Eh,bh);vt[e]=new Pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Eh,bh);vt[e]=new Pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vt[t]=new Pt(t,1,!1,t.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vt[t]=new Pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Nh(t,e,n,r){var s=vt.hasOwnProperty(e)?vt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pw(e,n,s,r)&&(n=null),r||s===null?fw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wn=dw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pa=Symbol.for("react.element"),ks=Symbol.for("react.portal"),Ps=Symbol.for("react.fragment"),Th=Symbol.for("react.strict_mode"),td=Symbol.for("react.profiler"),T0=Symbol.for("react.provider"),S0=Symbol.for("react.context"),Sh=Symbol.for("react.forward_ref"),nd=Symbol.for("react.suspense"),rd=Symbol.for("react.suspense_list"),Ch=Symbol.for("react.memo"),tr=Symbol.for("react.lazy"),C0=Symbol.for("react.offscreen"),Vm=Symbol.iterator;function Fi(t){return t===null||typeof t!="object"?null:(t=Vm&&t[Vm]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,mu;function Ki(t){if(mu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mu=e&&e[1]||""}return`
`+mu+t}var pu=!1;function gu(t,e){if(!t||pu)return"";pu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,c=o.length-1;1<=a&&0<=c&&s[a]!==o[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==o[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==o[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{pu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ki(t):""}function gw(t){switch(t.tag){case 5:return Ki(t.type);case 16:return Ki("Lazy");case 13:return Ki("Suspense");case 19:return Ki("SuspenseList");case 0:case 2:case 15:return t=gu(t.type,!1),t;case 11:return t=gu(t.type.render,!1),t;case 1:return t=gu(t.type,!0),t;default:return""}}function sd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ps:return"Fragment";case ks:return"Portal";case td:return"Profiler";case Th:return"StrictMode";case nd:return"Suspense";case rd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case S0:return(t.displayName||"Context")+".Consumer";case T0:return(t._context.displayName||"Context")+".Provider";case Sh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ch:return e=t.displayName||null,e!==null?e:sd(t.type)||"Memo";case tr:e=t._payload,t=t._init;try{return sd(t(e))}catch{}}return null}function xw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sd(e);case 8:return e===Th?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Er(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function I0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yw(t){var e=I0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ra(t){t._valueTracker||(t._valueTracker=yw(t))}function A0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=I0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function wl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function id(t,e){var n=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Mm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Er(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function k0(t,e){e=e.checked,e!=null&&Nh(t,"checked",e,!1)}function od(t,e){k0(t,e);var n=Er(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ad(t,e.type,n):e.hasOwnProperty("defaultValue")&&ad(t,e.type,Er(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Om(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ad(t,e,n){(e!=="number"||wl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yi=Array.isArray;function $s(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Er(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ld(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Yi(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Er(n)}}function P0(t,e){var n=Er(e.value),r=Er(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Um(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function R0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?R0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Da,D0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Da=Da||document.createElement("div"),Da.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Da.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var so={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vw=["Webkit","ms","Moz","O"];Object.keys(so).forEach(function(t){vw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),so[e]=so[t]})});function L0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||so.hasOwnProperty(t)&&so[t]?(""+e).trim():e+"px"}function V0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=L0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ww=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ud(t,e){if(e){if(ww[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function dd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hd=null;function Ih(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fd=null,Hs=null,qs=null;function Bm(t){if(t=Xo(t)){if(typeof fd!="function")throw Error($(280));var e=t.stateNode;e&&(e=fc(e),fd(t.stateNode,t.type,e))}}function M0(t){Hs?qs?qs.push(t):qs=[t]:Hs=t}function O0(){if(Hs){var t=Hs,e=qs;if(qs=Hs=null,Bm(t),e)for(t=0;t<e.length;t++)Bm(e[t])}}function F0(t,e){return t(e)}function U0(){}var xu=!1;function B0(t,e,n){if(xu)return t(e,n);xu=!0;try{return F0(t,e,n)}finally{xu=!1,(Hs!==null||qs!==null)&&(U0(),O0())}}function _o(t,e){var n=t.stateNode;if(n===null)return null;var r=fc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var md=!1;if(Fn)try{var Ui={};Object.defineProperty(Ui,"passive",{get:function(){md=!0}}),window.addEventListener("test",Ui,Ui),window.removeEventListener("test",Ui,Ui)}catch{md=!1}function _w(t,e,n,r,s,o,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var io=!1,_l=null,jl=!1,pd=null,jw={onError:function(t){io=!0,_l=t}};function Ew(t,e,n,r,s,o,a,c,u){io=!1,_l=null,_w.apply(jw,arguments)}function bw(t,e,n,r,s,o,a,c,u){if(Ew.apply(this,arguments),io){if(io){var d=_l;io=!1,_l=null}else throw Error($(198));jl||(jl=!0,pd=d)}}function fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function z0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zm(t){if(fs(t)!==t)throw Error($(188))}function Nw(t){var e=t.alternate;if(!e){if(e=fs(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return zm(s),t;if(o===r)return zm(s),e;o=o.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=o;break}if(c===r){a=!0,r=s,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=s;break}if(c===r){a=!0,r=o,n=s;break}c=c.sibling}if(!a)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function $0(t){return t=Nw(t),t!==null?H0(t):null}function H0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=H0(t);if(e!==null)return e;t=t.sibling}return null}var q0=Gt.unstable_scheduleCallback,$m=Gt.unstable_cancelCallback,Tw=Gt.unstable_shouldYield,Sw=Gt.unstable_requestPaint,Ge=Gt.unstable_now,Cw=Gt.unstable_getCurrentPriorityLevel,Ah=Gt.unstable_ImmediatePriority,W0=Gt.unstable_UserBlockingPriority,El=Gt.unstable_NormalPriority,Iw=Gt.unstable_LowPriority,Q0=Gt.unstable_IdlePriority,cc=null,jn=null;function Aw(t){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(cc,t,void 0,(t.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:Rw,kw=Math.log,Pw=Math.LN2;function Rw(t){return t>>>=0,t===0?32:31-(kw(t)/Pw|0)|0}var La=64,Va=4194304;function Xi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=Xi(c):(o&=a,o!==0&&(r=Xi(o)))}else a=n&~s,a!==0?r=Xi(a):o!==0&&(r=Xi(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-dn(e),s=1<<n,r|=t[n],e&=~s;return r}function Dw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-dn(o),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=Dw(c,e)):u<=e&&(t.expiredLanes|=c),o&=~c}}function gd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function G0(){var t=La;return La<<=1,!(La&4194240)&&(La=64),t}function yu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ko(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dn(e),t[e]=n}function Vw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-dn(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function kh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-dn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Se=0;function K0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Y0,Ph,X0,J0,Z0,xd=!1,Ma=[],cr=null,ur=null,dr=null,jo=new Map,Eo=new Map,rr=[],Mw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hm(t,e){switch(t){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":jo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eo.delete(e.pointerId)}}function Bi(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Xo(e),e!==null&&Ph(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ow(t,e,n,r,s){switch(e){case"focusin":return cr=Bi(cr,t,e,n,r,s),!0;case"dragenter":return ur=Bi(ur,t,e,n,r,s),!0;case"mouseover":return dr=Bi(dr,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return jo.set(o,Bi(jo.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Eo.set(o,Bi(Eo.get(o)||null,t,e,n,r,s)),!0}return!1}function ex(t){var e=Jr(t.target);if(e!==null){var n=fs(e);if(n!==null){if(e=n.tag,e===13){if(e=z0(n),e!==null){t.blockedOn=e,Z0(t.priority,function(){X0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hd=r,n.target.dispatchEvent(r),hd=null}else return e=Xo(n),e!==null&&Ph(e),t.blockedOn=n,!1;e.shift()}return!0}function qm(t,e,n){sl(t)&&n.delete(e)}function Fw(){xd=!1,cr!==null&&sl(cr)&&(cr=null),ur!==null&&sl(ur)&&(ur=null),dr!==null&&sl(dr)&&(dr=null),jo.forEach(qm),Eo.forEach(qm)}function zi(t,e){t.blockedOn===e&&(t.blockedOn=null,xd||(xd=!0,Gt.unstable_scheduleCallback(Gt.unstable_NormalPriority,Fw)))}function bo(t){function e(s){return zi(s,t)}if(0<Ma.length){zi(Ma[0],t);for(var n=1;n<Ma.length;n++){var r=Ma[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cr!==null&&zi(cr,t),ur!==null&&zi(ur,t),dr!==null&&zi(dr,t),jo.forEach(e),Eo.forEach(e),n=0;n<rr.length;n++)r=rr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rr.length&&(n=rr[0],n.blockedOn===null);)ex(n),n.blockedOn===null&&rr.shift()}var Ws=Wn.ReactCurrentBatchConfig,Nl=!0;function Uw(t,e,n,r){var s=Se,o=Ws.transition;Ws.transition=null;try{Se=1,Rh(t,e,n,r)}finally{Se=s,Ws.transition=o}}function Bw(t,e,n,r){var s=Se,o=Ws.transition;Ws.transition=null;try{Se=4,Rh(t,e,n,r)}finally{Se=s,Ws.transition=o}}function Rh(t,e,n,r){if(Nl){var s=yd(t,e,n,r);if(s===null)Cu(t,e,r,Tl,n),Hm(t,r);else if(Ow(s,t,e,n,r))r.stopPropagation();else if(Hm(t,r),e&4&&-1<Mw.indexOf(t)){for(;s!==null;){var o=Xo(s);if(o!==null&&Y0(o),o=yd(t,e,n,r),o===null&&Cu(t,e,r,Tl,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Cu(t,e,r,null,n)}}var Tl=null;function yd(t,e,n,r){if(Tl=null,t=Ih(r),t=Jr(t),t!==null)if(e=fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=z0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tl=t,null}function tx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cw()){case Ah:return 1;case W0:return 4;case El:case Iw:return 16;case Q0:return 536870912;default:return 16}default:return 16}}var ir=null,Dh=null,il=null;function nx(){if(il)return il;var t,e=Dh,n=e.length,r,s="value"in ir?ir.value:ir.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[o-r];r++);return il=s.slice(t,1<r?1-r:void 0)}function ol(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oa(){return!0}function Wm(){return!1}function Yt(t){function e(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Oa:Wm,this.isPropagationStopped=Wm,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oa)},persist:function(){},isPersistent:Oa}),e}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lh=Yt(fi),Yo=$e({},fi,{view:0,detail:0}),zw=Yt(Yo),vu,wu,$i,uc=$e({},Yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$i&&($i&&t.type==="mousemove"?(vu=t.screenX-$i.screenX,wu=t.screenY-$i.screenY):wu=vu=0,$i=t),vu)},movementY:function(t){return"movementY"in t?t.movementY:wu}}),Qm=Yt(uc),$w=$e({},uc,{dataTransfer:0}),Hw=Yt($w),qw=$e({},Yo,{relatedTarget:0}),_u=Yt(qw),Ww=$e({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),Qw=Yt(Ww),Gw=$e({},fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kw=Yt(Gw),Yw=$e({},fi,{data:0}),Gm=Yt(Yw),Xw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Zw[t])?!!e[t]:!1}function Vh(){return e_}var t_=$e({},Yo,{key:function(t){if(t.key){var e=Xw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ol(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Jw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vh,charCode:function(t){return t.type==="keypress"?ol(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ol(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),n_=Yt(t_),r_=$e({},uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Km=Yt(r_),s_=$e({},Yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vh}),i_=Yt(s_),o_=$e({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),a_=Yt(o_),l_=$e({},uc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),c_=Yt(l_),u_=[9,13,27,32],Mh=Fn&&"CompositionEvent"in window,oo=null;Fn&&"documentMode"in document&&(oo=document.documentMode);var d_=Fn&&"TextEvent"in window&&!oo,rx=Fn&&(!Mh||oo&&8<oo&&11>=oo),Ym=" ",Xm=!1;function sx(t,e){switch(t){case"keyup":return u_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ix(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rs=!1;function h_(t,e){switch(t){case"compositionend":return ix(e);case"keypress":return e.which!==32?null:(Xm=!0,Ym);case"textInput":return t=e.data,t===Ym&&Xm?null:t;default:return null}}function f_(t,e){if(Rs)return t==="compositionend"||!Mh&&sx(t,e)?(t=nx(),il=Dh=ir=null,Rs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rx&&e.locale!=="ko"?null:e.data;default:return null}}var m_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!m_[t.type]:e==="textarea"}function ox(t,e,n,r){M0(r),e=Sl(e,"onChange"),0<e.length&&(n=new Lh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ao=null,No=null;function p_(t){xx(t,0)}function dc(t){var e=Vs(t);if(A0(e))return t}function g_(t,e){if(t==="change")return e}var ax=!1;if(Fn){var ju;if(Fn){var Eu="oninput"in document;if(!Eu){var Zm=document.createElement("div");Zm.setAttribute("oninput","return;"),Eu=typeof Zm.oninput=="function"}ju=Eu}else ju=!1;ax=ju&&(!document.documentMode||9<document.documentMode)}function ep(){ao&&(ao.detachEvent("onpropertychange",lx),No=ao=null)}function lx(t){if(t.propertyName==="value"&&dc(No)){var e=[];ox(e,No,t,Ih(t)),B0(p_,e)}}function x_(t,e,n){t==="focusin"?(ep(),ao=e,No=n,ao.attachEvent("onpropertychange",lx)):t==="focusout"&&ep()}function y_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dc(No)}function v_(t,e){if(t==="click")return dc(e)}function w_(t,e){if(t==="input"||t==="change")return dc(e)}function __(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fn=typeof Object.is=="function"?Object.is:__;function To(t,e){if(fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ed.call(e,s)||!fn(t[s],e[s]))return!1}return!0}function tp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function np(t,e){var n=tp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tp(n)}}function cx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ux(){for(var t=window,e=wl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wl(t.document)}return e}function Oh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function j_(t){var e=ux(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cx(n.ownerDocument.documentElement,n)){if(r!==null&&Oh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=np(n,o);var a=np(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var E_=Fn&&"documentMode"in document&&11>=document.documentMode,Ds=null,vd=null,lo=null,wd=!1;function rp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wd||Ds==null||Ds!==wl(r)||(r=Ds,"selectionStart"in r&&Oh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lo&&To(lo,r)||(lo=r,r=Sl(vd,"onSelect"),0<r.length&&(e=new Lh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ds)))}function Fa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ls={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionend:Fa("Transition","TransitionEnd")},bu={},dx={};Fn&&(dx=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function hc(t){if(bu[t])return bu[t];if(!Ls[t])return t;var e=Ls[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dx)return bu[t]=e[n];return t}var hx=hc("animationend"),fx=hc("animationiteration"),mx=hc("animationstart"),px=hc("transitionend"),gx=new Map,sp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(t,e){gx.set(t,e),hs(e,[t])}for(var Nu=0;Nu<sp.length;Nu++){var Tu=sp[Nu],b_=Tu.toLowerCase(),N_=Tu[0].toUpperCase()+Tu.slice(1);Pr(b_,"on"+N_)}Pr(hx,"onAnimationEnd");Pr(fx,"onAnimationIteration");Pr(mx,"onAnimationStart");Pr("dblclick","onDoubleClick");Pr("focusin","onFocus");Pr("focusout","onBlur");Pr(px,"onTransitionEnd");Js("onMouseEnter",["mouseout","mouseover"]);Js("onMouseLeave",["mouseout","mouseover"]);Js("onPointerEnter",["pointerout","pointerover"]);Js("onPointerLeave",["pointerout","pointerover"]);hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ji));function ip(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bw(r,e,void 0,t),t.currentTarget=null}function xx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==o&&s.isPropagationStopped())break e;ip(s,c,d),o=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==o&&s.isPropagationStopped())break e;ip(s,c,d),o=u}}}if(jl)throw t=pd,jl=!1,pd=null,t}function De(t,e){var n=e[Nd];n===void 0&&(n=e[Nd]=new Set);var r=t+"__bubble";n.has(r)||(yx(e,t,2,!1),n.add(r))}function Su(t,e,n){var r=0;e&&(r|=4),yx(n,t,r,e)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function So(t){if(!t[Ua]){t[Ua]=!0,N0.forEach(function(n){n!=="selectionchange"&&(T_.has(n)||Su(n,!1,t),Su(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ua]||(e[Ua]=!0,Su("selectionchange",!1,e))}}function yx(t,e,n,r){switch(tx(e)){case 1:var s=Uw;break;case 4:s=Bw;break;default:s=Rh}n=s.bind(null,e,n,t),s=void 0,!md||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Cu(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=Jr(c),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}c=c.parentNode}}r=r.return}B0(function(){var d=o,m=Ih(n),p=[];e:{var f=gx.get(t);if(f!==void 0){var y=Lh,N=t;switch(t){case"keypress":if(ol(n)===0)break e;case"keydown":case"keyup":y=n_;break;case"focusin":N="focus",y=_u;break;case"focusout":N="blur",y=_u;break;case"beforeblur":case"afterblur":y=_u;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Qm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Hw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=i_;break;case hx:case fx:case mx:y=Qw;break;case px:y=a_;break;case"scroll":y=zw;break;case"wheel":y=c_;break;case"copy":case"cut":case"paste":y=Kw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Km}var I=(e&4)!==0,C=!I&&t==="scroll",x=I?f!==null?f+"Capture":null:f;I=[];for(var _=d,j;_!==null;){j=_;var k=j.stateNode;if(j.tag===5&&k!==null&&(j=k,x!==null&&(k=_o(_,x),k!=null&&I.push(Co(_,k,j)))),C)break;_=_.return}0<I.length&&(f=new y(f,N,null,n,m),p.push({event:f,listeners:I}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==hd&&(N=n.relatedTarget||n.fromElement)&&(Jr(N)||N[Un]))break e;if((y||f)&&(f=m.window===m?m:(f=m.ownerDocument)?f.defaultView||f.parentWindow:window,y?(N=n.relatedTarget||n.toElement,y=d,N=N?Jr(N):null,N!==null&&(C=fs(N),N!==C||N.tag!==5&&N.tag!==6)&&(N=null)):(y=null,N=d),y!==N)){if(I=Qm,k="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(I=Km,k="onPointerLeave",x="onPointerEnter",_="pointer"),C=y==null?f:Vs(y),j=N==null?f:Vs(N),f=new I(k,_+"leave",y,n,m),f.target=C,f.relatedTarget=j,k=null,Jr(m)===d&&(I=new I(x,_+"enter",N,n,m),I.target=j,I.relatedTarget=C,k=I),C=k,y&&N)t:{for(I=y,x=N,_=0,j=I;j;j=Ts(j))_++;for(j=0,k=x;k;k=Ts(k))j++;for(;0<_-j;)I=Ts(I),_--;for(;0<j-_;)x=Ts(x),j--;for(;_--;){if(I===x||x!==null&&I===x.alternate)break t;I=Ts(I),x=Ts(x)}I=null}else I=null;y!==null&&op(p,f,y,I,!1),N!==null&&C!==null&&op(p,C,N,I,!0)}}e:{if(f=d?Vs(d):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var L=g_;else if(Jm(f))if(ax)L=w_;else{L=y_;var P=x_}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(L=v_);if(L&&(L=L(t,d))){ox(p,L,n,m);break e}P&&P(t,f,d),t==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&ad(f,"number",f.value)}switch(P=d?Vs(d):window,t){case"focusin":(Jm(P)||P.contentEditable==="true")&&(Ds=P,vd=d,lo=null);break;case"focusout":lo=vd=Ds=null;break;case"mousedown":wd=!0;break;case"contextmenu":case"mouseup":case"dragend":wd=!1,rp(p,n,m);break;case"selectionchange":if(E_)break;case"keydown":case"keyup":rp(p,n,m)}var w;if(Mh)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Rs?sx(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(rx&&n.locale!=="ko"&&(Rs||v!=="onCompositionStart"?v==="onCompositionEnd"&&Rs&&(w=nx()):(ir=m,Dh="value"in ir?ir.value:ir.textContent,Rs=!0)),P=Sl(d,v),0<P.length&&(v=new Gm(v,t,null,n,m),p.push({event:v,listeners:P}),w?v.data=w:(w=ix(n),w!==null&&(v.data=w)))),(w=d_?h_(t,n):f_(t,n))&&(d=Sl(d,"onBeforeInput"),0<d.length&&(m=new Gm("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=w))}xx(p,e)})}function Co(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=_o(t,n),o!=null&&r.unshift(Co(t,o,s)),o=_o(t,e),o!=null&&r.push(Co(t,o,s))),t=t.return}return r}function Ts(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function op(t,e,n,r,s){for(var o=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=_o(n,o),u!=null&&a.unshift(Co(n,u,c))):s||(u=_o(n,o),u!=null&&a.push(Co(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var S_=/\r\n?/g,C_=/\u0000|\uFFFD/g;function ap(t){return(typeof t=="string"?t:""+t).replace(S_,`
`).replace(C_,"")}function Ba(t,e,n){if(e=ap(e),ap(t)!==e&&n)throw Error($(425))}function Cl(){}var _d=null,jd=null;function Ed(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bd=typeof setTimeout=="function"?setTimeout:void 0,I_=typeof clearTimeout=="function"?clearTimeout:void 0,lp=typeof Promise=="function"?Promise:void 0,A_=typeof queueMicrotask=="function"?queueMicrotask:typeof lp<"u"?function(t){return lp.resolve(null).then(t).catch(k_)}:bd;function k_(t){setTimeout(function(){throw t})}function Iu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),bo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);bo(e)}function hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mi=Math.random().toString(36).slice(2),_n="__reactFiber$"+mi,Io="__reactProps$"+mi,Un="__reactContainer$"+mi,Nd="__reactEvents$"+mi,P_="__reactListeners$"+mi,R_="__reactHandles$"+mi;function Jr(t){var e=t[_n];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Un]||n[_n]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cp(t);t!==null;){if(n=t[_n])return n;t=cp(t)}return e}t=n,n=t.parentNode}return null}function Xo(t){return t=t[_n]||t[Un],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function fc(t){return t[Io]||null}var Td=[],Ms=-1;function Rr(t){return{current:t}}function Me(t){0>Ms||(t.current=Td[Ms],Td[Ms]=null,Ms--)}function Pe(t,e){Ms++,Td[Ms]=t.current,t.current=e}var br={},St=Rr(br),Mt=Rr(!1),is=br;function Zs(t,e){var n=t.type.contextTypes;if(!n)return br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ot(t){return t=t.childContextTypes,t!=null}function Il(){Me(Mt),Me(St)}function up(t,e,n){if(St.current!==br)throw Error($(168));Pe(St,e),Pe(Mt,n)}function vx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,xw(t)||"Unknown",s));return $e({},n,r)}function Al(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||br,is=St.current,Pe(St,t),Pe(Mt,Mt.current),!0}function dp(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=vx(t,e,is),r.__reactInternalMemoizedMergedChildContext=t,Me(Mt),Me(St),Pe(St,t)):Me(Mt),Pe(Mt,n)}var Ln=null,mc=!1,Au=!1;function wx(t){Ln===null?Ln=[t]:Ln.push(t)}function D_(t){mc=!0,wx(t)}function Dr(){if(!Au&&Ln!==null){Au=!0;var t=0,e=Se;try{var n=Ln;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ln=null,mc=!1}catch(s){throw Ln!==null&&(Ln=Ln.slice(t+1)),q0(Ah,Dr),s}finally{Se=e,Au=!1}}return null}var Os=[],Fs=0,kl=null,Pl=0,Xt=[],Jt=0,os=null,Vn=1,Mn="";function Kr(t,e){Os[Fs++]=Pl,Os[Fs++]=kl,kl=t,Pl=e}function _x(t,e,n){Xt[Jt++]=Vn,Xt[Jt++]=Mn,Xt[Jt++]=os,os=t;var r=Vn;t=Mn;var s=32-dn(r)-1;r&=~(1<<s),n+=1;var o=32-dn(e)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Vn=1<<32-dn(e)+s|n<<s|r,Mn=o+t}else Vn=1<<o|n<<s|r,Mn=t}function Fh(t){t.return!==null&&(Kr(t,1),_x(t,1,0))}function Uh(t){for(;t===kl;)kl=Os[--Fs],Os[Fs]=null,Pl=Os[--Fs],Os[Fs]=null;for(;t===os;)os=Xt[--Jt],Xt[Jt]=null,Mn=Xt[--Jt],Xt[Jt]=null,Vn=Xt[--Jt],Xt[Jt]=null}var Wt=null,Ht=null,Oe=!1,un=null;function jx(t,e){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,Ht=hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,Ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=os!==null?{id:Vn,overflow:Mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,Ht=null,!0):!1;default:return!1}}function Sd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Cd(t){if(Oe){var e=Ht;if(e){var n=e;if(!hp(t,e)){if(Sd(t))throw Error($(418));e=hr(n.nextSibling);var r=Wt;e&&hp(t,e)?jx(r,n):(t.flags=t.flags&-4097|2,Oe=!1,Wt=t)}}else{if(Sd(t))throw Error($(418));t.flags=t.flags&-4097|2,Oe=!1,Wt=t}}}function fp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function za(t){if(t!==Wt)return!1;if(!Oe)return fp(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ed(t.type,t.memoizedProps)),e&&(e=Ht)){if(Sd(t))throw Ex(),Error($(418));for(;e;)jx(t,e),e=hr(e.nextSibling)}if(fp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ht=hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ht=null}}else Ht=Wt?hr(t.stateNode.nextSibling):null;return!0}function Ex(){for(var t=Ht;t;)t=hr(t.nextSibling)}function ei(){Ht=Wt=null,Oe=!1}function Bh(t){un===null?un=[t]:un.push(t)}var L_=Wn.ReactCurrentBatchConfig;function Hi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var c=s.refs;a===null?delete c[o]:c[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function $a(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mp(t){var e=t._init;return e(t._payload)}function bx(t){function e(x,_){if(t){var j=x.deletions;j===null?(x.deletions=[_],x.flags|=16):j.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function s(x,_){return x=gr(x,_),x.index=0,x.sibling=null,x}function o(x,_,j){return x.index=j,t?(j=x.alternate,j!==null?(j=j.index,j<_?(x.flags|=2,_):j):(x.flags|=2,_)):(x.flags|=1048576,_)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function c(x,_,j,k){return _===null||_.tag!==6?(_=Mu(j,x.mode,k),_.return=x,_):(_=s(_,j),_.return=x,_)}function u(x,_,j,k){var L=j.type;return L===Ps?m(x,_,j.props.children,k,j.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===tr&&mp(L)===_.type)?(k=s(_,j.props),k.ref=Hi(x,_,j),k.return=x,k):(k=fl(j.type,j.key,j.props,null,x.mode,k),k.ref=Hi(x,_,j),k.return=x,k)}function d(x,_,j,k){return _===null||_.tag!==4||_.stateNode.containerInfo!==j.containerInfo||_.stateNode.implementation!==j.implementation?(_=Ou(j,x.mode,k),_.return=x,_):(_=s(_,j.children||[]),_.return=x,_)}function m(x,_,j,k,L){return _===null||_.tag!==7?(_=rs(j,x.mode,k,L),_.return=x,_):(_=s(_,j),_.return=x,_)}function p(x,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Mu(""+_,x.mode,j),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Pa:return j=fl(_.type,_.key,_.props,null,x.mode,j),j.ref=Hi(x,null,_),j.return=x,j;case ks:return _=Ou(_,x.mode,j),_.return=x,_;case tr:var k=_._init;return p(x,k(_._payload),j)}if(Yi(_)||Fi(_))return _=rs(_,x.mode,j,null),_.return=x,_;$a(x,_)}return null}function f(x,_,j,k){var L=_!==null?_.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return L!==null?null:c(x,_,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Pa:return j.key===L?u(x,_,j,k):null;case ks:return j.key===L?d(x,_,j,k):null;case tr:return L=j._init,f(x,_,L(j._payload),k)}if(Yi(j)||Fi(j))return L!==null?null:m(x,_,j,k,null);$a(x,j)}return null}function y(x,_,j,k,L){if(typeof k=="string"&&k!==""||typeof k=="number")return x=x.get(j)||null,c(_,x,""+k,L);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Pa:return x=x.get(k.key===null?j:k.key)||null,u(_,x,k,L);case ks:return x=x.get(k.key===null?j:k.key)||null,d(_,x,k,L);case tr:var P=k._init;return y(x,_,j,P(k._payload),L)}if(Yi(k)||Fi(k))return x=x.get(j)||null,m(_,x,k,L,null);$a(_,k)}return null}function N(x,_,j,k){for(var L=null,P=null,w=_,v=_=0,T=null;w!==null&&v<j.length;v++){w.index>v?(T=w,w=null):T=w.sibling;var A=f(x,w,j[v],k);if(A===null){w===null&&(w=T);break}t&&w&&A.alternate===null&&e(x,w),_=o(A,_,v),P===null?L=A:P.sibling=A,P=A,w=T}if(v===j.length)return n(x,w),Oe&&Kr(x,v),L;if(w===null){for(;v<j.length;v++)w=p(x,j[v],k),w!==null&&(_=o(w,_,v),P===null?L=w:P.sibling=w,P=w);return Oe&&Kr(x,v),L}for(w=r(x,w);v<j.length;v++)T=y(w,x,v,j[v],k),T!==null&&(t&&T.alternate!==null&&w.delete(T.key===null?v:T.key),_=o(T,_,v),P===null?L=T:P.sibling=T,P=T);return t&&w.forEach(function(S){return e(x,S)}),Oe&&Kr(x,v),L}function I(x,_,j,k){var L=Fi(j);if(typeof L!="function")throw Error($(150));if(j=L.call(j),j==null)throw Error($(151));for(var P=L=null,w=_,v=_=0,T=null,A=j.next();w!==null&&!A.done;v++,A=j.next()){w.index>v?(T=w,w=null):T=w.sibling;var S=f(x,w,A.value,k);if(S===null){w===null&&(w=T);break}t&&w&&S.alternate===null&&e(x,w),_=o(S,_,v),P===null?L=S:P.sibling=S,P=S,w=T}if(A.done)return n(x,w),Oe&&Kr(x,v),L;if(w===null){for(;!A.done;v++,A=j.next())A=p(x,A.value,k),A!==null&&(_=o(A,_,v),P===null?L=A:P.sibling=A,P=A);return Oe&&Kr(x,v),L}for(w=r(x,w);!A.done;v++,A=j.next())A=y(w,x,v,A.value,k),A!==null&&(t&&A.alternate!==null&&w.delete(A.key===null?v:A.key),_=o(A,_,v),P===null?L=A:P.sibling=A,P=A);return t&&w.forEach(function(D){return e(x,D)}),Oe&&Kr(x,v),L}function C(x,_,j,k){if(typeof j=="object"&&j!==null&&j.type===Ps&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Pa:e:{for(var L=j.key,P=_;P!==null;){if(P.key===L){if(L=j.type,L===Ps){if(P.tag===7){n(x,P.sibling),_=s(P,j.props.children),_.return=x,x=_;break e}}else if(P.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===tr&&mp(L)===P.type){n(x,P.sibling),_=s(P,j.props),_.ref=Hi(x,P,j),_.return=x,x=_;break e}n(x,P);break}else e(x,P);P=P.sibling}j.type===Ps?(_=rs(j.props.children,x.mode,k,j.key),_.return=x,x=_):(k=fl(j.type,j.key,j.props,null,x.mode,k),k.ref=Hi(x,_,j),k.return=x,x=k)}return a(x);case ks:e:{for(P=j.key;_!==null;){if(_.key===P)if(_.tag===4&&_.stateNode.containerInfo===j.containerInfo&&_.stateNode.implementation===j.implementation){n(x,_.sibling),_=s(_,j.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=Ou(j,x.mode,k),_.return=x,x=_}return a(x);case tr:return P=j._init,C(x,_,P(j._payload),k)}if(Yi(j))return N(x,_,j,k);if(Fi(j))return I(x,_,j,k);$a(x,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,_!==null&&_.tag===6?(n(x,_.sibling),_=s(_,j),_.return=x,x=_):(n(x,_),_=Mu(j,x.mode,k),_.return=x,x=_),a(x)):n(x,_)}return C}var ti=bx(!0),Nx=bx(!1),Rl=Rr(null),Dl=null,Us=null,zh=null;function $h(){zh=Us=Dl=null}function Hh(t){var e=Rl.current;Me(Rl),t._currentValue=e}function Id(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qs(t,e){Dl=t,zh=Us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function sn(t){var e=t._currentValue;if(zh!==t)if(t={context:t,memoizedValue:e,next:null},Us===null){if(Dl===null)throw Error($(308));Us=t,Dl.dependencies={lanes:0,firstContext:t}}else Us=Us.next=t;return e}var Zr=null;function qh(t){Zr===null?Zr=[t]:Zr.push(t)}function Tx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,qh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Bn(t,r)}function Bn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var nr=!1;function Wh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function On(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Bn(t,n)}return s=r.interleaved,s===null?(e.next=e,qh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Bn(t,n)}function al(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kh(t,n)}}function pp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ll(t,e,n,r){var s=t.updateQueue;nr=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?o=d:a.next=d,a=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==a&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=u))}if(o!==null){var p=s.baseState;a=0,m=d=u=null,c=o;do{var f=c.lane,y=c.eventTime;if((r&f)===f){m!==null&&(m=m.next={eventTime:y,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var N=t,I=c;switch(f=e,y=n,I.tag){case 1:if(N=I.payload,typeof N=="function"){p=N.call(y,p,f);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=I.payload,f=typeof N=="function"?N.call(y,p,f):N,f==null)break e;p=$e({},p,f);break e;case 2:nr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[c]:f.push(c))}else y={eventTime:y,lane:f,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=y,u=p):m=m.next=y,a|=f;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;f=c,c=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);ls|=a,t.lanes=a,t.memoizedState=p}}function gp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Jo={},En=Rr(Jo),Ao=Rr(Jo),ko=Rr(Jo);function es(t){if(t===Jo)throw Error($(174));return t}function Qh(t,e){switch(Pe(ko,e),Pe(Ao,t),Pe(En,Jo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cd(e,t)}Me(En),Pe(En,e)}function ni(){Me(En),Me(Ao),Me(ko)}function Cx(t){es(ko.current);var e=es(En.current),n=cd(e,t.type);e!==n&&(Pe(Ao,t),Pe(En,n))}function Gh(t){Ao.current===t&&(Me(En),Me(Ao))}var Be=Rr(0);function Vl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ku=[];function Kh(){for(var t=0;t<ku.length;t++)ku[t]._workInProgressVersionPrimary=null;ku.length=0}var ll=Wn.ReactCurrentDispatcher,Pu=Wn.ReactCurrentBatchConfig,as=0,ze=null,nt=null,ut=null,Ml=!1,co=!1,Po=0,V_=0;function _t(){throw Error($(321))}function Yh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fn(t[n],e[n]))return!1;return!0}function Xh(t,e,n,r,s,o){if(as=o,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ll.current=t===null||t.memoizedState===null?U_:B_,t=n(r,s),co){o=0;do{if(co=!1,Po=0,25<=o)throw Error($(301));o+=1,ut=nt=null,e.updateQueue=null,ll.current=z_,t=n(r,s)}while(co)}if(ll.current=Ol,e=nt!==null&&nt.next!==null,as=0,ut=nt=ze=null,Ml=!1,e)throw Error($(300));return t}function Jh(){var t=Po!==0;return Po=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?ze.memoizedState=ut=t:ut=ut.next=t,ut}function on(){if(nt===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=ut===null?ze.memoizedState:ut.next;if(e!==null)ut=e,nt=t;else{if(t===null)throw Error($(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ut===null?ze.memoizedState=ut=t:ut=ut.next=t}return ut}function Ro(t,e){return typeof e=="function"?e(t):e}function Ru(t){var e=on(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=nt,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var c=a=null,u=null,d=o;do{var m=d.lane;if((as&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,a=r):u=u.next=p,ze.lanes|=m,ls|=m}d=d.next}while(d!==null&&d!==o);u===null?a=r:u.next=c,fn(r,e.memoizedState)||(Vt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,ze.lanes|=o,ls|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Du(t){var e=on(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=t(o,a.action),a=a.next;while(a!==s);fn(o,e.memoizedState)||(Vt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Ix(){}function Ax(t,e){var n=ze,r=on(),s=e(),o=!fn(r.memoizedState,s);if(o&&(r.memoizedState=s,Vt=!0),r=r.queue,Zh(Rx.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ut!==null&&ut.memoizedState.tag&1){if(n.flags|=2048,Do(9,Px.bind(null,n,r,s,e),void 0,null),ht===null)throw Error($(349));as&30||kx(n,e,s)}return s}function kx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Px(t,e,n,r){e.value=n,e.getSnapshot=r,Dx(e)&&Lx(t)}function Rx(t,e,n){return n(function(){Dx(e)&&Lx(t)})}function Dx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fn(t,n)}catch{return!0}}function Lx(t){var e=Bn(t,1);e!==null&&hn(e,t,1,-1)}function xp(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:t},e.queue=t,t=t.dispatch=F_.bind(null,ze,t),[e.memoizedState,t]}function Do(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Vx(){return on().memoizedState}function cl(t,e,n,r){var s=vn();ze.flags|=t,s.memoizedState=Do(1|e,n,void 0,r===void 0?null:r)}function pc(t,e,n,r){var s=on();r=r===void 0?null:r;var o=void 0;if(nt!==null){var a=nt.memoizedState;if(o=a.destroy,r!==null&&Yh(r,a.deps)){s.memoizedState=Do(e,n,o,r);return}}ze.flags|=t,s.memoizedState=Do(1|e,n,o,r)}function yp(t,e){return cl(8390656,8,t,e)}function Zh(t,e){return pc(2048,8,t,e)}function Mx(t,e){return pc(4,2,t,e)}function Ox(t,e){return pc(4,4,t,e)}function Fx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ux(t,e,n){return n=n!=null?n.concat([t]):null,pc(4,4,Fx.bind(null,e,t),n)}function ef(){}function Bx(t,e){var n=on();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zx(t,e){var n=on();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $x(t,e,n){return as&21?(fn(n,e)||(n=G0(),ze.lanes|=n,ls|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=n)}function M_(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=Pu.transition;Pu.transition={};try{t(!1),e()}finally{Se=n,Pu.transition=r}}function Hx(){return on().memoizedState}function O_(t,e,n){var r=pr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qx(t))Wx(e,n);else if(n=Tx(t,e,n,r),n!==null){var s=At();hn(n,t,r,s),Qx(n,e,r)}}function F_(t,e,n){var r=pr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qx(t))Wx(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,c=o(a,n);if(s.hasEagerState=!0,s.eagerState=c,fn(c,a)){var u=e.interleaved;u===null?(s.next=s,qh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Tx(t,e,s,r),n!==null&&(s=At(),hn(n,t,r,s),Qx(n,e,r))}}function qx(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function Wx(t,e){co=Ml=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kh(t,n)}}var Ol={readContext:sn,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},U_={readContext:sn,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:sn,useEffect:yp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cl(4194308,4,Fx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cl(4194308,4,t,e)},useInsertionEffect:function(t,e){return cl(4,2,t,e)},useMemo:function(t,e){var n=vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=O_.bind(null,ze,t),[r.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:xp,useDebugValue:ef,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=xp(!1),e=t[0];return t=M_.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ze,s=vn();if(Oe){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),ht===null)throw Error($(349));as&30||kx(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,yp(Rx.bind(null,r,o,t),[t]),r.flags|=2048,Do(9,Px.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=vn(),e=ht.identifierPrefix;if(Oe){var n=Mn,r=Vn;n=(r&~(1<<32-dn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Po++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=V_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},B_={readContext:sn,useCallback:Bx,useContext:sn,useEffect:Zh,useImperativeHandle:Ux,useInsertionEffect:Mx,useLayoutEffect:Ox,useMemo:zx,useReducer:Ru,useRef:Vx,useState:function(){return Ru(Ro)},useDebugValue:ef,useDeferredValue:function(t){var e=on();return $x(e,nt.memoizedState,t)},useTransition:function(){var t=Ru(Ro)[0],e=on().memoizedState;return[t,e]},useMutableSource:Ix,useSyncExternalStore:Ax,useId:Hx,unstable_isNewReconciler:!1},z_={readContext:sn,useCallback:Bx,useContext:sn,useEffect:Zh,useImperativeHandle:Ux,useInsertionEffect:Mx,useLayoutEffect:Ox,useMemo:zx,useReducer:Du,useRef:Vx,useState:function(){return Du(Ro)},useDebugValue:ef,useDeferredValue:function(t){var e=on();return nt===null?e.memoizedState=t:$x(e,nt.memoizedState,t)},useTransition:function(){var t=Du(Ro)[0],e=on().memoizedState;return[t,e]},useMutableSource:Ix,useSyncExternalStore:Ax,useId:Hx,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ad(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gc={isMounted:function(t){return(t=t._reactInternals)?fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=At(),s=pr(t),o=On(r,s);o.payload=e,n!=null&&(o.callback=n),e=fr(t,o,s),e!==null&&(hn(e,t,s,r),al(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=At(),s=pr(t),o=On(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=fr(t,o,s),e!==null&&(hn(e,t,s,r),al(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=At(),r=pr(t),s=On(n,r);s.tag=2,e!=null&&(s.callback=e),e=fr(t,s,r),e!==null&&(hn(e,t,r,n),al(e,t,r))}};function vp(t,e,n,r,s,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!To(n,r)||!To(s,o):!0}function Gx(t,e,n){var r=!1,s=br,o=e.contextType;return typeof o=="object"&&o!==null?o=sn(o):(s=Ot(e)?is:St.current,r=e.contextTypes,o=(r=r!=null)?Zs(t,s):br),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function wp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gc.enqueueReplaceState(e,e.state,null)}function kd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Wh(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=sn(o):(o=Ot(e)?is:St.current,s.context=Zs(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Ad(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&gc.enqueueReplaceState(s,s.state,null),Ll(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ri(t,e){try{var n="",r=e;do n+=gw(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function Lu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Pd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $_=typeof WeakMap=="function"?WeakMap:Map;function Kx(t,e,n){n=On(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ul||(Ul=!0,zd=r),Pd(t,e)},n}function Yx(t,e,n){n=On(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Pd(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Pd(t,e),typeof r!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function _p(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new $_;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=r2.bind(null,t,e,n),e.then(t,t))}function jp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ep(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=On(-1,1),e.tag=2,fr(n,e,1))),n.lanes|=1),t)}var H_=Wn.ReactCurrentOwner,Vt=!1;function It(t,e,n,r){e.child=t===null?Nx(e,null,n,r):ti(e,t.child,n,r)}function bp(t,e,n,r,s){n=n.render;var o=e.ref;return Qs(e,s),r=Xh(t,e,n,r,o,s),n=Jh(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zn(t,e,s)):(Oe&&n&&Fh(e),e.flags|=1,It(t,e,r,s),e.child)}function Np(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!cf(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Xx(t,e,o,r,s)):(t=fl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:To,n(a,r)&&t.ref===e.ref)return zn(t,e,s)}return e.flags|=1,t=gr(o,r),t.ref=e.ref,t.return=e,e.child=t}function Xx(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(To(o,r)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,zn(t,e,s)}return Rd(t,e,n,r,s)}function Jx(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(zs,$t),$t|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(zs,$t),$t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Pe(zs,$t),$t|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Pe(zs,$t),$t|=r;return It(t,e,s,n),e.child}function Zx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rd(t,e,n,r,s){var o=Ot(n)?is:St.current;return o=Zs(e,o),Qs(e,s),n=Xh(t,e,n,r,o,s),r=Jh(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zn(t,e,s)):(Oe&&r&&Fh(e),e.flags|=1,It(t,e,n,s),e.child)}function Tp(t,e,n,r,s){if(Ot(n)){var o=!0;Al(e)}else o=!1;if(Qs(e,s),e.stateNode===null)ul(t,e),Gx(e,n,r),kd(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=sn(d):(d=Ot(n)?is:St.current,d=Zs(e,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&wp(e,a,r,d),nr=!1;var f=e.memoizedState;a.state=f,Ll(e,r,a,s),u=e.memoizedState,c!==r||f!==u||Mt.current||nr?(typeof m=="function"&&(Ad(e,n,m,r),u=e.memoizedState),(c=nr||vp(e,n,c,r,f,u,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Sx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:ln(e.type,c),a.props=d,p=e.pendingProps,f=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=sn(u):(u=Ot(n)?is:St.current,u=Zs(e,u));var y=n.getDerivedStateFromProps;(m=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==p||f!==u)&&wp(e,a,r,u),nr=!1,f=e.memoizedState,a.state=f,Ll(e,r,a,s);var N=e.memoizedState;c!==p||f!==N||Mt.current||nr?(typeof y=="function"&&(Ad(e,n,y,r),N=e.memoizedState),(d=nr||vp(e,n,d,r,f,N,u)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,N,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,N,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),a.props=r,a.state=N,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Dd(t,e,n,r,o,s)}function Dd(t,e,n,r,s,o){Zx(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&dp(e,n,!1),zn(t,e,o);r=e.stateNode,H_.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=ti(e,t.child,null,o),e.child=ti(e,null,c,o)):It(t,e,c,o),e.memoizedState=r.state,s&&dp(e,n,!0),e.child}function ey(t){var e=t.stateNode;e.pendingContext?up(t,e.pendingContext,e.pendingContext!==e.context):e.context&&up(t,e.context,!1),Qh(t,e.containerInfo)}function Sp(t,e,n,r,s){return ei(),Bh(s),e.flags|=256,It(t,e,n,r),e.child}var Ld={dehydrated:null,treeContext:null,retryLane:0};function Vd(t){return{baseLanes:t,cachePool:null,transitions:null}}function ty(t,e,n){var r=e.pendingProps,s=Be.current,o=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Pe(Be,s&1),t===null)return Cd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=vc(a,r,0,null),t=rs(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Vd(n),e.memoizedState=Ld,t):tf(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return q_(t,e,a,r,c,s,n);if(o){o=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=gr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?o=gr(c,o):(o=rs(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?Vd(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Ld,r}return o=t.child,t=o.sibling,r=gr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function tf(t,e){return e=vc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ha(t,e,n,r){return r!==null&&Bh(r),ti(e,t.child,null,n),t=tf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function q_(t,e,n,r,s,o,a){if(n)return e.flags&256?(e.flags&=-257,r=Lu(Error($(422))),Ha(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=vc({mode:"visible",children:r.children},s,0,null),o=rs(o,s,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&ti(e,t.child,null,a),e.child.memoizedState=Vd(a),e.memoizedState=Ld,o);if(!(e.mode&1))return Ha(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,o=Error($(419)),r=Lu(o,r,void 0),Ha(t,e,a,r)}if(c=(a&t.childLanes)!==0,Vt||c){if(r=ht,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Bn(t,s),hn(r,t,s,-1))}return lf(),r=Lu(Error($(421))),Ha(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=s2.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Ht=hr(s.nextSibling),Wt=e,Oe=!0,un=null,t!==null&&(Xt[Jt++]=Vn,Xt[Jt++]=Mn,Xt[Jt++]=os,Vn=t.id,Mn=t.overflow,os=e),e=tf(e,r.children),e.flags|=4096,e)}function Cp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Id(t.return,e,n)}function Vu(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function ny(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(It(t,e,r.children,n),r=Be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cp(t,n,e);else if(t.tag===19)Cp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(Be,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Vl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Vu(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Vl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Vu(e,!0,n,null,o);break;case"together":Vu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ul(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ls|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function W_(t,e,n){switch(e.tag){case 3:ey(e),ei();break;case 5:Cx(e);break;case 1:Ot(e.type)&&Al(e);break;case 4:Qh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Pe(Rl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(Be,Be.current&1),e.flags|=128,null):n&e.child.childLanes?ty(t,e,n):(Pe(Be,Be.current&1),t=zn(t,e,n),t!==null?t.sibling:null);Pe(Be,Be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ny(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Pe(Be,Be.current),r)break;return null;case 22:case 23:return e.lanes=0,Jx(t,e,n)}return zn(t,e,n)}var ry,Md,sy,iy;ry=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Md=function(){};sy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,es(En.current);var o=null;switch(n){case"input":s=id(t,s),r=id(t,r),o=[];break;case"select":s=$e({},s,{value:void 0}),r=$e({},r,{value:void 0}),o=[];break;case"textarea":s=ld(t,s),r=ld(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cl)}ud(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(vo.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(vo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&De("scroll",t),o||c===u||(o=[])):(o=o||[]).push(d,u))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};iy=function(t,e,n,r){n!==r&&(e.flags|=4)};function qi(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Q_(t,e,n){var r=e.pendingProps;switch(Uh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return Ot(e.type)&&Il(),jt(e),null;case 3:return r=e.stateNode,ni(),Me(Mt),Me(St),Kh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(za(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,un!==null&&(qd(un),un=null))),Md(t,e),jt(e),null;case 5:Gh(e);var s=es(ko.current);if(n=e.type,t!==null&&e.stateNode!=null)sy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return jt(e),null}if(t=es(En.current),za(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[_n]=e,r[Io]=o,t=(e.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(s=0;s<Ji.length;s++)De(Ji[s],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":Mm(r,o),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},De("invalid",r);break;case"textarea":Fm(r,o),De("invalid",r)}ud(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="children"?typeof c=="string"?r.textContent!==c&&(o.suppressHydrationWarning!==!0&&Ba(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&Ba(r.textContent,c,t),s=["children",""+c]):vo.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&De("scroll",r)}switch(n){case"input":Ra(r),Om(r,o,!0);break;case"textarea":Ra(r),Um(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Cl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=R0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[_n]=e,t[Io]=r,ry(t,e,!1,!1),e.stateNode=t;e:{switch(a=dd(n,r),n){case"dialog":De("cancel",t),De("close",t),s=r;break;case"iframe":case"object":case"embed":De("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ji.length;s++)De(Ji[s],t);s=r;break;case"source":De("error",t),s=r;break;case"img":case"image":case"link":De("error",t),De("load",t),s=r;break;case"details":De("toggle",t),s=r;break;case"input":Mm(t,r),s=id(t,r),De("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=$e({},r,{value:void 0}),De("invalid",t);break;case"textarea":Fm(t,r),s=ld(t,r),De("invalid",t);break;default:s=r}ud(n,s),c=s;for(o in c)if(c.hasOwnProperty(o)){var u=c[o];o==="style"?V0(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&D0(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&wo(t,u):typeof u=="number"&&wo(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(vo.hasOwnProperty(o)?u!=null&&o==="onScroll"&&De("scroll",t):u!=null&&Nh(t,o,u,a))}switch(n){case"input":Ra(t),Om(t,r,!1);break;case"textarea":Ra(t),Um(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Er(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?$s(t,!!r.multiple,o,!1):r.defaultValue!=null&&$s(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Cl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(t&&e.stateNode!=null)iy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=es(ko.current),es(En.current),za(e)){if(r=e.stateNode,n=e.memoizedProps,r[_n]=e,(o=r.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:Ba(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ba(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_n]=e,e.stateNode=r}return jt(e),null;case 13:if(Me(Be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&Ht!==null&&e.mode&1&&!(e.flags&128))Ex(),ei(),e.flags|=98560,o=!1;else if(o=za(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error($(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error($(317));o[_n]=e}else ei(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jt(e),o=!1}else un!==null&&(qd(un),un=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Be.current&1?st===0&&(st=3):lf())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return ni(),Md(t,e),t===null&&So(e.stateNode.containerInfo),jt(e),null;case 10:return Hh(e.type._context),jt(e),null;case 17:return Ot(e.type)&&Il(),jt(e),null;case 19:if(Me(Be),o=e.memoizedState,o===null)return jt(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)qi(o,!1);else{if(st!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Vl(t),a!==null){for(e.flags|=128,qi(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(Be,Be.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ge()>si&&(e.flags|=128,r=!0,qi(o,!1),e.lanes=4194304)}else{if(!r)if(t=Vl(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Oe)return jt(e),null}else 2*Ge()-o.renderingStartTime>si&&n!==1073741824&&(e.flags|=128,r=!0,qi(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ge(),e.sibling=null,n=Be.current,Pe(Be,r?n&1|2:n&1),e):(jt(e),null);case 22:case 23:return af(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$t&1073741824&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function G_(t,e){switch(Uh(e),e.tag){case 1:return Ot(e.type)&&Il(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ni(),Me(Mt),Me(St),Kh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gh(e),null;case 13:if(Me(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));ei()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Me(Be),null;case 4:return ni(),null;case 10:return Hh(e.type._context),null;case 22:case 23:return af(),null;case 24:return null;default:return null}}var qa=!1,Nt=!1,K_=typeof WeakSet=="function"?WeakSet:Set,X=null;function Bs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(t,e,r)}else n.current=null}function Od(t,e,n){try{n()}catch(r){We(t,e,r)}}var Ip=!1;function Y_(t,e){if(_d=Nl,t=ux(),Oh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,m=0,p=t,f=null;t:for(;;){for(var y;p!==n||s!==0&&p.nodeType!==3||(c=a+s),p!==o||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(y=p.firstChild)!==null;)f=p,p=y;for(;;){if(p===t)break t;if(f===n&&++d===s&&(c=a),f===o&&++m===r&&(u=a),(y=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=y}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(jd={focusedElem:t,selectionRange:n},Nl=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var I=N.memoizedProps,C=N.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?I:ln(e.type,I),C);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(k){We(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return N=Ip,Ip=!1,N}function uo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Od(e,n,o)}s=s.next}while(s!==r)}}function xc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Fd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oy(t){var e=t.alternate;e!==null&&(t.alternate=null,oy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_n],delete e[Io],delete e[Nd],delete e[P_],delete e[R_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ay(t){return t.tag===5||t.tag===3||t.tag===4}function Ap(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ay(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ud(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cl));else if(r!==4&&(t=t.child,t!==null))for(Ud(t,e,n),t=t.sibling;t!==null;)Ud(t,e,n),t=t.sibling}function Bd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Bd(t,e,n),t=t.sibling;t!==null;)Bd(t,e,n),t=t.sibling}var pt=null,cn=!1;function er(t,e,n){for(n=n.child;n!==null;)ly(t,e,n),n=n.sibling}function ly(t,e,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(cc,n)}catch{}switch(n.tag){case 5:Nt||Bs(n,e);case 6:var r=pt,s=cn;pt=null,er(t,e,n),pt=r,cn=s,pt!==null&&(cn?(t=pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(cn?(t=pt,n=n.stateNode,t.nodeType===8?Iu(t.parentNode,n):t.nodeType===1&&Iu(t,n),bo(t)):Iu(pt,n.stateNode));break;case 4:r=pt,s=cn,pt=n.stateNode.containerInfo,cn=!0,er(t,e,n),pt=r,cn=s;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Od(n,e,a),s=s.next}while(s!==r)}er(t,e,n);break;case 1:if(!Nt&&(Bs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){We(n,e,c)}er(t,e,n);break;case 21:er(t,e,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,er(t,e,n),Nt=r):er(t,e,n);break;default:er(t,e,n)}}function kp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new K_),e.forEach(function(r){var s=i2.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function an(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:pt=c.stateNode,cn=!1;break e;case 3:pt=c.stateNode.containerInfo,cn=!0;break e;case 4:pt=c.stateNode.containerInfo,cn=!0;break e}c=c.return}if(pt===null)throw Error($(160));ly(o,a,s),pt=null,cn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){We(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cy(e,t),e=e.sibling}function cy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(an(e,t),yn(t),r&4){try{uo(3,t,t.return),xc(3,t)}catch(I){We(t,t.return,I)}try{uo(5,t,t.return)}catch(I){We(t,t.return,I)}}break;case 1:an(e,t),yn(t),r&512&&n!==null&&Bs(n,n.return);break;case 5:if(an(e,t),yn(t),r&512&&n!==null&&Bs(n,n.return),t.flags&32){var s=t.stateNode;try{wo(s,"")}catch(I){We(t,t.return,I)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&k0(s,o),dd(c,a);var d=dd(c,o);for(a=0;a<u.length;a+=2){var m=u[a],p=u[a+1];m==="style"?V0(s,p):m==="dangerouslySetInnerHTML"?D0(s,p):m==="children"?wo(s,p):Nh(s,m,p,d)}switch(c){case"input":od(s,o);break;case"textarea":P0(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?$s(s,!!o.multiple,y,!1):f!==!!o.multiple&&(o.defaultValue!=null?$s(s,!!o.multiple,o.defaultValue,!0):$s(s,!!o.multiple,o.multiple?[]:"",!1))}s[Io]=o}catch(I){We(t,t.return,I)}}break;case 6:if(an(e,t),yn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(I){We(t,t.return,I)}}break;case 3:if(an(e,t),yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bo(e.containerInfo)}catch(I){We(t,t.return,I)}break;case 4:an(e,t),yn(t);break;case 13:an(e,t),yn(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(sf=Ge())),r&4&&kp(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(d=Nt)||m,an(e,t),Nt=d):an(e,t),yn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(X=t,m=t.child;m!==null;){for(p=X=m;X!==null;){switch(f=X,y=f.child,f.tag){case 0:case 11:case 14:case 15:uo(4,f,f.return);break;case 1:Bs(f,f.return);var N=f.stateNode;if(typeof N.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(I){We(r,n,I)}}break;case 5:Bs(f,f.return);break;case 22:if(f.memoizedState!==null){Rp(p);continue}}y!==null?(y.return=f,X=y):Rp(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=L0("display",a))}catch(I){We(t,t.return,I)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(I){We(t,t.return,I)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:an(e,t),yn(t),r&4&&kp(t);break;case 21:break;default:an(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ay(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(wo(s,""),r.flags&=-33);var o=Ap(t);Bd(t,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=Ap(t);Ud(t,c,a);break;default:throw Error($(161))}}catch(u){We(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function X_(t,e,n){X=t,uy(t)}function uy(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||qa;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Nt;c=qa;var d=Nt;if(qa=a,(Nt=u)&&!d)for(X=s;X!==null;)a=X,u=a.child,a.tag===22&&a.memoizedState!==null?Dp(s):u!==null?(u.return=a,X=u):Dp(s);for(;o!==null;)X=o,uy(o),o=o.sibling;X=s,qa=c,Nt=d}Pp(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,X=o):Pp(t)}}function Pp(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||xc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&gp(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gp(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&bo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Nt||e.flags&512&&Fd(e)}catch(f){We(e,e.return,f)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Rp(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function Dp(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xc(4,e)}catch(u){We(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){We(e,s,u)}}var o=e.return;try{Fd(e)}catch(u){We(e,o,u)}break;case 5:var a=e.return;try{Fd(e)}catch(u){We(e,a,u)}}}catch(u){We(e,e.return,u)}if(e===t){X=null;break}var c=e.sibling;if(c!==null){c.return=e.return,X=c;break}X=e.return}}var J_=Math.ceil,Fl=Wn.ReactCurrentDispatcher,nf=Wn.ReactCurrentOwner,tn=Wn.ReactCurrentBatchConfig,je=0,ht=null,Ze=null,yt=0,$t=0,zs=Rr(0),st=0,Lo=null,ls=0,yc=0,rf=0,ho=null,Dt=null,sf=0,si=1/0,Dn=null,Ul=!1,zd=null,mr=null,Wa=!1,or=null,Bl=0,fo=0,$d=null,dl=-1,hl=0;function At(){return je&6?Ge():dl!==-1?dl:dl=Ge()}function pr(t){return t.mode&1?je&2&&yt!==0?yt&-yt:L_.transition!==null?(hl===0&&(hl=G0()),hl):(t=Se,t!==0||(t=window.event,t=t===void 0?16:tx(t.type)),t):1}function hn(t,e,n,r){if(50<fo)throw fo=0,$d=null,Error($(185));Ko(t,n,r),(!(je&2)||t!==ht)&&(t===ht&&(!(je&2)&&(yc|=n),st===4&&sr(t,yt)),Ft(t,r),n===1&&je===0&&!(e.mode&1)&&(si=Ge()+500,mc&&Dr()))}function Ft(t,e){var n=t.callbackNode;Lw(t,e);var r=bl(t,t===ht?yt:0);if(r===0)n!==null&&$m(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$m(n),e===1)t.tag===0?D_(Lp.bind(null,t)):wx(Lp.bind(null,t)),A_(function(){!(je&6)&&Dr()}),n=null;else{switch(K0(r)){case 1:n=Ah;break;case 4:n=W0;break;case 16:n=El;break;case 536870912:n=Q0;break;default:n=El}n=yy(n,dy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dy(t,e){if(dl=-1,hl=0,je&6)throw Error($(327));var n=t.callbackNode;if(Gs()&&t.callbackNode!==n)return null;var r=bl(t,t===ht?yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zl(t,r);else{e=r;var s=je;je|=2;var o=fy();(ht!==t||yt!==e)&&(Dn=null,si=Ge()+500,ns(t,e));do try{t2();break}catch(c){hy(t,c)}while(!0);$h(),Fl.current=o,je=s,Ze!==null?e=0:(ht=null,yt=0,e=st)}if(e!==0){if(e===2&&(s=gd(t),s!==0&&(r=s,e=Hd(t,s))),e===1)throw n=Lo,ns(t,0),sr(t,r),Ft(t,Ge()),n;if(e===6)sr(t,r);else{if(s=t.current.alternate,!(r&30)&&!Z_(s)&&(e=zl(t,r),e===2&&(o=gd(t),o!==0&&(r=o,e=Hd(t,o))),e===1))throw n=Lo,ns(t,0),sr(t,r),Ft(t,Ge()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Yr(t,Dt,Dn);break;case 3:if(sr(t,r),(r&130023424)===r&&(e=sf+500-Ge(),10<e)){if(bl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){At(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bd(Yr.bind(null,t,Dt,Dn),e);break}Yr(t,Dt,Dn);break;case 4:if(sr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-dn(r);o=1<<a,a=e[a],a>s&&(s=a),r&=~o}if(r=s,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*J_(r/1960))-r,10<r){t.timeoutHandle=bd(Yr.bind(null,t,Dt,Dn),r);break}Yr(t,Dt,Dn);break;case 5:Yr(t,Dt,Dn);break;default:throw Error($(329))}}}return Ft(t,Ge()),t.callbackNode===n?dy.bind(null,t):null}function Hd(t,e){var n=ho;return t.current.memoizedState.isDehydrated&&(ns(t,e).flags|=256),t=zl(t,e),t!==2&&(e=Dt,Dt=n,e!==null&&qd(e)),t}function qd(t){Dt===null?Dt=t:Dt.push.apply(Dt,t)}function Z_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!fn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sr(t,e){for(e&=~rf,e&=~yc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dn(e),r=1<<n;t[n]=-1,e&=~r}}function Lp(t){if(je&6)throw Error($(327));Gs();var e=bl(t,0);if(!(e&1))return Ft(t,Ge()),null;var n=zl(t,e);if(t.tag!==0&&n===2){var r=gd(t);r!==0&&(e=r,n=Hd(t,r))}if(n===1)throw n=Lo,ns(t,0),sr(t,e),Ft(t,Ge()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yr(t,Dt,Dn),Ft(t,Ge()),null}function of(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(si=Ge()+500,mc&&Dr())}}function cs(t){or!==null&&or.tag===0&&!(je&6)&&Gs();var e=je;je|=1;var n=tn.transition,r=Se;try{if(tn.transition=null,Se=1,t)return t()}finally{Se=r,tn.transition=n,je=e,!(je&6)&&Dr()}}function af(){$t=zs.current,Me(zs)}function ns(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,I_(n)),Ze!==null)for(n=Ze.return;n!==null;){var r=n;switch(Uh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Il();break;case 3:ni(),Me(Mt),Me(St),Kh();break;case 5:Gh(r);break;case 4:ni();break;case 13:Me(Be);break;case 19:Me(Be);break;case 10:Hh(r.type._context);break;case 22:case 23:af()}n=n.return}if(ht=t,Ze=t=gr(t.current,null),yt=$t=e,st=0,Lo=null,rf=yc=ls=0,Dt=ho=null,Zr!==null){for(e=0;e<Zr.length;e++)if(n=Zr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}Zr=null}return t}function hy(t,e){do{var n=Ze;try{if($h(),ll.current=Ol,Ml){for(var r=ze.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ml=!1}if(as=0,ut=nt=ze=null,co=!1,Po=0,nf.current=null,n===null||n.return===null){st=1,Lo=e,Ze=null;break}e:{var o=t,a=n.return,c=n,u=e;if(e=yt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=c,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var f=m.alternate;f?(m.updateQueue=f.updateQueue,m.memoizedState=f.memoizedState,m.lanes=f.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=jp(a);if(y!==null){y.flags&=-257,Ep(y,a,c,o,e),y.mode&1&&_p(o,d,e),e=y,u=d;var N=e.updateQueue;if(N===null){var I=new Set;I.add(u),e.updateQueue=I}else N.add(u);break e}else{if(!(e&1)){_p(o,d,e),lf();break e}u=Error($(426))}}else if(Oe&&c.mode&1){var C=jp(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Ep(C,a,c,o,e),Bh(ri(u,c));break e}}o=u=ri(u,c),st!==4&&(st=2),ho===null?ho=[o]:ho.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=Kx(o,u,e);pp(o,x);break e;case 1:c=u;var _=o.type,j=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(mr===null||!mr.has(j)))){o.flags|=65536,e&=-e,o.lanes|=e;var k=Yx(o,c,e);pp(o,k);break e}}o=o.return}while(o!==null)}py(n)}catch(L){e=L,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(!0)}function fy(){var t=Fl.current;return Fl.current=Ol,t===null?Ol:t}function lf(){(st===0||st===3||st===2)&&(st=4),ht===null||!(ls&268435455)&&!(yc&268435455)||sr(ht,yt)}function zl(t,e){var n=je;je|=2;var r=fy();(ht!==t||yt!==e)&&(Dn=null,ns(t,e));do try{e2();break}catch(s){hy(t,s)}while(!0);if($h(),je=n,Fl.current=r,Ze!==null)throw Error($(261));return ht=null,yt=0,st}function e2(){for(;Ze!==null;)my(Ze)}function t2(){for(;Ze!==null&&!Tw();)my(Ze)}function my(t){var e=xy(t.alternate,t,$t);t.memoizedProps=t.pendingProps,e===null?py(t):Ze=e,nf.current=null}function py(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=G_(n,e),n!==null){n.flags&=32767,Ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{st=6,Ze=null;return}}else if(n=Q_(n,e,$t),n!==null){Ze=n;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=t}while(e!==null);st===0&&(st=5)}function Yr(t,e,n){var r=Se,s=tn.transition;try{tn.transition=null,Se=1,n2(t,e,n,r)}finally{tn.transition=s,Se=r}return null}function n2(t,e,n,r){do Gs();while(or!==null);if(je&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Vw(t,o),t===ht&&(Ze=ht=null,yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wa||(Wa=!0,yy(El,function(){return Gs(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=tn.transition,tn.transition=null;var a=Se;Se=1;var c=je;je|=4,nf.current=null,Y_(t,n),cy(n,t),j_(jd),Nl=!!_d,jd=_d=null,t.current=n,X_(n),Sw(),je=c,Se=a,tn.transition=o}else t.current=n;if(Wa&&(Wa=!1,or=t,Bl=s),o=t.pendingLanes,o===0&&(mr=null),Aw(n.stateNode),Ft(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ul)throw Ul=!1,t=zd,zd=null,t;return Bl&1&&t.tag!==0&&Gs(),o=t.pendingLanes,o&1?t===$d?fo++:(fo=0,$d=t):fo=0,Dr(),null}function Gs(){if(or!==null){var t=K0(Bl),e=tn.transition,n=Se;try{if(tn.transition=null,Se=16>t?16:t,or===null)var r=!1;else{if(t=or,or=null,Bl=0,je&6)throw Error($(331));var s=je;for(je|=4,X=t.current;X!==null;){var o=X,a=o.child;if(X.flags&16){var c=o.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(X=d;X!==null;){var m=X;switch(m.tag){case 0:case 11:case 15:uo(8,m,o)}var p=m.child;if(p!==null)p.return=m,X=p;else for(;X!==null;){m=X;var f=m.sibling,y=m.return;if(oy(m),m===d){X=null;break}if(f!==null){f.return=y,X=f;break}X=y}}}var N=o.alternate;if(N!==null){var I=N.child;if(I!==null){N.child=null;do{var C=I.sibling;I.sibling=null,I=C}while(I!==null)}}X=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,X=a;else e:for(;X!==null;){if(o=X,o.flags&2048)switch(o.tag){case 0:case 11:case 15:uo(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,X=x;break e}X=o.return}}var _=t.current;for(X=_;X!==null;){a=X;var j=a.child;if(a.subtreeFlags&2064&&j!==null)j.return=a,X=j;else e:for(a=_;X!==null;){if(c=X,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:xc(9,c)}}catch(L){We(c,c.return,L)}if(c===a){X=null;break e}var k=c.sibling;if(k!==null){k.return=c.return,X=k;break e}X=c.return}}if(je=s,Dr(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(cc,t)}catch{}r=!0}return r}finally{Se=n,tn.transition=e}}return!1}function Vp(t,e,n){e=ri(n,e),e=Kx(t,e,1),t=fr(t,e,1),e=At(),t!==null&&(Ko(t,1,e),Ft(t,e))}function We(t,e,n){if(t.tag===3)Vp(t,t,n);else for(;e!==null;){if(e.tag===3){Vp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mr===null||!mr.has(r))){t=ri(n,t),t=Yx(e,t,1),e=fr(e,t,1),t=At(),e!==null&&(Ko(e,1,t),Ft(e,t));break}}e=e.return}}function r2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=At(),t.pingedLanes|=t.suspendedLanes&n,ht===t&&(yt&n)===n&&(st===4||st===3&&(yt&130023424)===yt&&500>Ge()-sf?ns(t,0):rf|=n),Ft(t,e)}function gy(t,e){e===0&&(t.mode&1?(e=Va,Va<<=1,!(Va&130023424)&&(Va=4194304)):e=1);var n=At();t=Bn(t,e),t!==null&&(Ko(t,e,n),Ft(t,n))}function s2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gy(t,n)}function i2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),gy(t,n)}var xy;xy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)Vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vt=!1,W_(t,e,n);Vt=!!(t.flags&131072)}else Vt=!1,Oe&&e.flags&1048576&&_x(e,Pl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ul(t,e),t=e.pendingProps;var s=Zs(e,St.current);Qs(e,n),s=Xh(null,e,r,t,s,n);var o=Jh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(r)?(o=!0,Al(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Wh(e),s.updater=gc,e.stateNode=s,s._reactInternals=e,kd(e,r,t,n),e=Dd(null,e,r,!0,o,n)):(e.tag=0,Oe&&o&&Fh(e),It(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ul(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=a2(r),t=ln(r,t),s){case 0:e=Rd(null,e,r,t,n);break e;case 1:e=Tp(null,e,r,t,n);break e;case 11:e=bp(null,e,r,t,n);break e;case 14:e=Np(null,e,r,ln(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),Rd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),Tp(t,e,r,s,n);case 3:e:{if(ey(e),t===null)throw Error($(387));r=e.pendingProps,o=e.memoizedState,s=o.element,Sx(t,e),Ll(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=ri(Error($(423)),e),e=Sp(t,e,r,n,s);break e}else if(r!==s){s=ri(Error($(424)),e),e=Sp(t,e,r,n,s);break e}else for(Ht=hr(e.stateNode.containerInfo.firstChild),Wt=e,Oe=!0,un=null,n=Nx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ei(),r===s){e=zn(t,e,n);break e}It(t,e,r,n)}e=e.child}return e;case 5:return Cx(e),t===null&&Cd(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,a=s.children,Ed(r,s)?a=null:o!==null&&Ed(r,o)&&(e.flags|=32),Zx(t,e),It(t,e,a,n),e.child;case 6:return t===null&&Cd(e),null;case 13:return ty(t,e,n);case 4:return Qh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ti(e,null,r,n):It(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),bp(t,e,r,s,n);case 7:return It(t,e,e.pendingProps,n),e.child;case 8:return It(t,e,e.pendingProps.children,n),e.child;case 12:return It(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,Pe(Rl,r._currentValue),r._currentValue=a,o!==null)if(fn(o.value,a)){if(o.children===s.children&&!Mt.current){e=zn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){a=o.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=On(-1,n&-n),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Id(o.return,n,e),c.lanes|=n;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error($(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Id(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}It(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Qs(e,n),s=sn(s),r=r(s),e.flags|=1,It(t,e,r,n),e.child;case 14:return r=e.type,s=ln(r,e.pendingProps),s=ln(r.type,s),Np(t,e,r,s,n);case 15:return Xx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),ul(t,e),e.tag=1,Ot(r)?(t=!0,Al(e)):t=!1,Qs(e,n),Gx(e,r,s),kd(e,r,s,n),Dd(null,e,r,!0,t,n);case 19:return ny(t,e,n);case 22:return Jx(t,e,n)}throw Error($(156,e.tag))};function yy(t,e){return q0(t,e)}function o2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,r){return new o2(t,e,n,r)}function cf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function a2(t){if(typeof t=="function")return cf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sh)return 11;if(t===Ch)return 14}return 2}function gr(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fl(t,e,n,r,s,o){var a=2;if(r=t,typeof t=="function")cf(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ps:return rs(n.children,s,o,e);case Th:a=8,s|=8;break;case td:return t=en(12,n,e,s|2),t.elementType=td,t.lanes=o,t;case nd:return t=en(13,n,e,s),t.elementType=nd,t.lanes=o,t;case rd:return t=en(19,n,e,s),t.elementType=rd,t.lanes=o,t;case C0:return vc(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case T0:a=10;break e;case S0:a=9;break e;case Sh:a=11;break e;case Ch:a=14;break e;case tr:a=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=en(a,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function rs(t,e,n,r){return t=en(7,t,r,e),t.lanes=n,t}function vc(t,e,n,r){return t=en(22,t,r,e),t.elementType=C0,t.lanes=n,t.stateNode={isHidden:!1},t}function Mu(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function Ou(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function l2(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yu(0),this.expirationTimes=yu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function uf(t,e,n,r,s,o,a,c,u){return t=new l2(t,e,n,c,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=en(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wh(o),t}function c2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ks,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vy(t){if(!t)return br;t=t._reactInternals;e:{if(fs(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Ot(n))return vx(t,n,e)}return e}function wy(t,e,n,r,s,o,a,c,u){return t=uf(n,r,!0,t,s,o,a,c,u),t.context=vy(null),n=t.current,r=At(),s=pr(n),o=On(r,s),o.callback=e??null,fr(n,o,s),t.current.lanes=s,Ko(t,s,r),Ft(t,r),t}function wc(t,e,n,r){var s=e.current,o=At(),a=pr(s);return n=vy(n),e.context===null?e.context=n:e.pendingContext=n,e=On(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fr(s,e,a),t!==null&&(hn(t,s,a,o),al(t,s,a)),a}function $l(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function df(t,e){Mp(t,e),(t=t.alternate)&&Mp(t,e)}function u2(){return null}var _y=typeof reportError=="function"?reportError:function(t){console.error(t)};function hf(t){this._internalRoot=t}_c.prototype.render=hf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));wc(t,e,null,null)};_c.prototype.unmount=hf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cs(function(){wc(null,t,null,null)}),e[Un]=null}};function _c(t){this._internalRoot=t}_c.prototype.unstable_scheduleHydration=function(t){if(t){var e=J0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rr.length&&e!==0&&e<rr[n].priority;n++);rr.splice(n,0,t),n===0&&ex(t)}};function ff(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Op(){}function d2(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=$l(a);o.call(d)}}var a=wy(e,r,t,0,null,!1,!1,"",Op);return t._reactRootContainer=a,t[Un]=a.current,So(t.nodeType===8?t.parentNode:t),cs(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=$l(u);c.call(d)}}var u=uf(t,0,!1,null,null,!1,!1,"",Op);return t._reactRootContainer=u,t[Un]=u.current,So(t.nodeType===8?t.parentNode:t),cs(function(){wc(e,u,n,r)}),u}function Ec(t,e,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var c=s;s=function(){var u=$l(a);c.call(u)}}wc(e,a,t,s)}else a=d2(n,e,t,s,r);return $l(a)}Y0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xi(e.pendingLanes);n!==0&&(kh(e,n|1),Ft(e,Ge()),!(je&6)&&(si=Ge()+500,Dr()))}break;case 13:cs(function(){var r=Bn(t,1);if(r!==null){var s=At();hn(r,t,1,s)}}),df(t,1)}};Ph=function(t){if(t.tag===13){var e=Bn(t,134217728);if(e!==null){var n=At();hn(e,t,134217728,n)}df(t,134217728)}};X0=function(t){if(t.tag===13){var e=pr(t),n=Bn(t,e);if(n!==null){var r=At();hn(n,t,e,r)}df(t,e)}};J0=function(){return Se};Z0=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};fd=function(t,e,n){switch(e){case"input":if(od(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=fc(r);if(!s)throw Error($(90));A0(r),od(r,s)}}}break;case"textarea":P0(t,n);break;case"select":e=n.value,e!=null&&$s(t,!!n.multiple,e,!1)}};F0=of;U0=cs;var h2={usingClientEntryPoint:!1,Events:[Xo,Vs,fc,M0,O0,of]},Wi={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},f2={bundleType:Wi.bundleType,version:Wi.version,rendererPackageName:Wi.rendererPackageName,rendererConfig:Wi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$0(t),t===null?null:t.stateNode},findFiberByHostInstance:Wi.findFiberByHostInstance||u2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qa.isDisabled&&Qa.supportsFiber)try{cc=Qa.inject(f2),jn=Qa}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h2;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ff(e))throw Error($(200));return c2(t,e,null,n)};Kt.createRoot=function(t,e){if(!ff(t))throw Error($(299));var n=!1,r="",s=_y;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=uf(t,1,!1,null,null,n,!1,r,s),t[Un]=e.current,So(t.nodeType===8?t.parentNode:t),new hf(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=$0(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return cs(t)};Kt.hydrate=function(t,e,n){if(!jc(e))throw Error($(200));return Ec(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!ff(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=_y;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=wy(e,null,t,1,n??null,s,!1,o,a),t[Un]=e.current,So(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new _c(e)};Kt.render=function(t,e,n){if(!jc(e))throw Error($(200));return Ec(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!jc(t))throw Error($(40));return t._reactRootContainer?(cs(function(){Ec(null,null,t,!1,function(){t._reactRootContainer=null,t[Un]=null})}),!0):!1};Kt.unstable_batchedUpdates=of;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!jc(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Ec(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function jy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jy)}catch(t){console.error(t)}}jy(),j0.exports=Kt;var m2=j0.exports,Fp=m2;Zu.createRoot=Fp.createRoot,Zu.hydrateRoot=Fp.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vo(){return Vo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vo.apply(this,arguments)}var ar;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ar||(ar={}));const Up="popstate";function p2(t){t===void 0&&(t={});function e(s,o){let{pathname:a="/",search:c="",hash:u=""}=ms(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Wd("",{pathname:a,search:c,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let a=s.document.querySelector("base"),c="";if(a&&a.getAttribute("href")){let u=s.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof o=="string"?o:Hl(o))}function r(s,o){bc(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return x2(e,n,r,t)}function Ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function g2(){return Math.random().toString(36).substr(2,8)}function Bp(t,e){return{usr:t.state,key:t.key,idx:e}}function Wd(t,e,n,r){return n===void 0&&(n=null),Vo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ms(e):e,{state:n,key:e&&e.key||r||g2()})}function Hl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ms(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function x2(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,c=ar.Pop,u=null,d=m();d==null&&(d=0,a.replaceState(Vo({},a.state,{idx:d}),""));function m(){return(a.state||{idx:null}).idx}function p(){c=ar.Pop;let C=m(),x=C==null?null:C-d;d=C,u&&u({action:c,location:I.location,delta:x})}function f(C,x){c=ar.Push;let _=Wd(I.location,C,x);n&&n(_,C),d=m()+1;let j=Bp(_,d),k=I.createHref(_);try{a.pushState(j,"",k)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(k)}o&&u&&u({action:c,location:I.location,delta:1})}function y(C,x){c=ar.Replace;let _=Wd(I.location,C,x);n&&n(_,C),d=m();let j=Bp(_,d),k=I.createHref(_);a.replaceState(j,"",k),o&&u&&u({action:c,location:I.location,delta:0})}function N(C){let x=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof C=="string"?C:Hl(C);return _=_.replace(/ $/,"%20"),Ye(x,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,x)}let I={get action(){return c},get location(){return t(s,a)},listen(C){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Up,p),u=C,()=>{s.removeEventListener(Up,p),u=null}},createHref(C){return e(s,C)},createURL:N,encodeLocation(C){let x=N(C);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:y,go(C){return a.go(C)}};return I}var zp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(zp||(zp={}));function y2(t,e,n){return n===void 0&&(n="/"),v2(t,e,n)}function v2(t,e,n,r){let s=typeof e=="string"?ms(e):e,o=mf(s.pathname||"/",n);if(o==null)return null;let a=Ey(t);w2(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=P2(o);c=I2(a[u],d)}return c}function Ey(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(Ye(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=xr([r,u.relativePath]),m=n.concat(u);o.children&&o.children.length>0&&(Ye(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Ey(o.children,e,m,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:S2(d,o.index),routesMeta:m})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,a);else for(let u of by(o.path))s(o,a,u)}),e}function by(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=by(r.join("/")),c=[];return c.push(...a.map(u=>u===""?o:[o,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function w2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:C2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _2=/^:[\w-]+$/,j2=3,E2=2,b2=1,N2=10,T2=-2,$p=t=>t==="*";function S2(t,e){let n=t.split("/"),r=n.length;return n.some($p)&&(r+=T2),e&&(r+=E2),n.filter(s=>!$p(s)).reduce((s,o)=>s+(_2.test(o)?j2:o===""?b2:N2),r)}function C2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function I2(t,e,n){let{routesMeta:r}=t,s={},o="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",p=A2({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},m),f=u.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:xr([o,p.pathname]),pathnameBase:M2(xr([o,p.pathnameBase])),route:f}),p.pathnameBase!=="/"&&(o=xr([o,p.pathnameBase]))}return a}function A2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=k2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,m,p)=>{let{paramName:f,isOptional:y}=m;if(f==="*"){let I=c[p]||"";a=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const N=c[p];return y&&!N?d[f]=void 0:d[f]=(N||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:t}}function k2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),bc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function P2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function mf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const R2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,D2=t=>R2.test(t);function L2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ms(t):t,o;if(n)if(D2(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),bc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=Hp(n.substring(1),"/"):o=Hp(n,e)}else o=e;return{pathname:o,search:O2(r),hash:F2(s)}}function Hp(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Fu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function V2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function pf(t,e){let n=V2(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function gf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ms(t):(s=Vo({},t),Ye(!s.pathname||!s.pathname.includes("?"),Fu("?","pathname","search",s)),Ye(!s.pathname||!s.pathname.includes("#"),Fu("#","pathname","hash",s)),Ye(!s.search||!s.search.includes("#"),Fu("#","search","hash",s)));let o=t===""||s.pathname==="",a=o?"/":s.pathname,c;if(a==null)c=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),p-=1;s.pathname=f.join("/")}c=p>=0?e[p]:"/"}let u=L2(s,c),d=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||m)&&(u.pathname+="/"),u}const xr=t=>t.join("/").replace(/\/\/+/g,"/"),M2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),O2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,F2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function U2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ny=["post","put","patch","delete"];new Set(Ny);const B2=["get",...Ny];new Set(B2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mo(){return Mo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mo.apply(this,arguments)}const xf=R.createContext(null),z2=R.createContext(null),Lr=R.createContext(null),Nc=R.createContext(null),Qn=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Ty=R.createContext(null);function $2(t,e){let{relative:n}=e===void 0?{}:e;pi()||Ye(!1);let{basename:r,navigator:s}=R.useContext(Lr),{hash:o,pathname:a,search:c}=Cy(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:xr([r,a])),s.createHref({pathname:u,search:c,hash:o})}function pi(){return R.useContext(Nc)!=null}function ps(){return pi()||Ye(!1),R.useContext(Nc).location}function Sy(t){R.useContext(Lr).static||R.useLayoutEffect(t)}function Ct(){let{isDataRoute:t}=R.useContext(Qn);return t?nj():H2()}function H2(){pi()||Ye(!1);let t=R.useContext(xf),{basename:e,future:n,navigator:r}=R.useContext(Lr),{matches:s}=R.useContext(Qn),{pathname:o}=ps(),a=JSON.stringify(pf(s,n.v7_relativeSplatPath)),c=R.useRef(!1);return Sy(()=>{c.current=!0}),R.useCallback(function(d,m){if(m===void 0&&(m={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let p=gf(d,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:xr([e,p.pathname])),(m.replace?r.replace:r.push)(p,m.state,m)},[e,r,a,o,t])}function gs(){let{matches:t}=R.useContext(Qn),e=t[t.length-1];return e?e.params:{}}function Cy(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(Lr),{matches:s}=R.useContext(Qn),{pathname:o}=ps(),a=JSON.stringify(pf(s,r.v7_relativeSplatPath));return R.useMemo(()=>gf(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function q2(t,e){return W2(t,e)}function W2(t,e,n,r){pi()||Ye(!1);let{navigator:s}=R.useContext(Lr),{matches:o}=R.useContext(Qn),a=o[o.length-1],c=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=ps(),m;if(e){var p;let C=typeof e=="string"?ms(e):e;u==="/"||(p=C.pathname)!=null&&p.startsWith(u)||Ye(!1),m=C}else m=d;let f=m.pathname||"/",y=f;if(u!=="/"){let C=u.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(C.length).join("/")}let N=y2(t,{pathname:y}),I=X2(N&&N.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:xr([u,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:xr([u,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,r);return e&&I?R.createElement(Nc.Provider,{value:{location:Mo({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:ar.Pop}},I):I}function Q2(){let t=tj(),e=U2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:s},n):null,null)}const G2=R.createElement(Q2,null);class K2 extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(Qn.Provider,{value:this.props.routeContext},R.createElement(Ty.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Y2(t){let{routeContext:e,match:n,children:r}=t,s=R.useContext(xf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Qn.Provider,{value:e},r)}function X2(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let m=a.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);m>=0||Ye(!1),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:f,errors:y}=n,N=p.route.loader&&f[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||N){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,p,f)=>{let y,N=!1,I=null,C=null;n&&(y=c&&p.route.id?c[p.route.id]:void 0,I=p.route.errorElement||G2,u&&(d<0&&f===0?(rj("route-fallback"),N=!0,C=null):d===f&&(N=!0,C=p.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,f+1)),_=()=>{let j;return y?j=I:N?j=C:p.route.Component?j=R.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=m,R.createElement(Y2,{match:p,routeContext:{outlet:m,matches:x,isDataRoute:n!=null},children:j})};return n&&(p.route.ErrorBoundary||p.route.errorElement||f===0)?R.createElement(K2,{location:n.location,revalidation:n.revalidation,component:I,error:y,children:_(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):_()},null)}var Iy=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Iy||{}),Ay=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ay||{});function J2(t){let e=R.useContext(xf);return e||Ye(!1),e}function Z2(t){let e=R.useContext(z2);return e||Ye(!1),e}function ej(t){let e=R.useContext(Qn);return e||Ye(!1),e}function ky(t){let e=ej(),n=e.matches[e.matches.length-1];return n.route.id||Ye(!1),n.route.id}function tj(){var t;let e=R.useContext(Ty),n=Z2(),r=ky();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function nj(){let{router:t}=J2(Iy.UseNavigateStable),e=ky(Ay.UseNavigateStable),n=R.useRef(!1);return Sy(()=>{n.current=!0}),R.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Mo({fromRouteId:e},o)))},[t,e])}const qp={};function rj(t,e,n){qp[t]||(qp[t]=!0)}function sj(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Oo(t){let{to:e,replace:n,state:r,relative:s}=t;pi()||Ye(!1);let{future:o,static:a}=R.useContext(Lr),{matches:c}=R.useContext(Qn),{pathname:u}=ps(),d=Ct(),m=gf(e,pf(c,o.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(m);return R.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function _e(t){Ye(!1)}function ij(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ar.Pop,navigator:o,static:a=!1,future:c}=t;pi()&&Ye(!1);let u=e.replace(/^\/*/,"/"),d=R.useMemo(()=>({basename:u,navigator:o,static:a,future:Mo({v7_relativeSplatPath:!1},c)}),[u,c,o,a]);typeof r=="string"&&(r=ms(r));let{pathname:m="/",search:p="",hash:f="",state:y=null,key:N="default"}=r,I=R.useMemo(()=>{let C=mf(m,u);return C==null?null:{location:{pathname:C,search:p,hash:f,state:y,key:N},navigationType:s}},[u,m,p,f,y,N,s]);return I==null?null:R.createElement(Lr.Provider,{value:d},R.createElement(Nc.Provider,{children:n,value:I}))}function oj(t){let{children:e,location:n}=t;return q2(Qd(e),n)}new Promise(()=>{});function Qd(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,s)=>{if(!R.isValidElement(r))return;let o=[...e,s];if(r.type===R.Fragment){n.push.apply(n,Qd(r.props.children,o));return}r.type!==_e&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Qd(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gd(){return Gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gd.apply(this,arguments)}function aj(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function lj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function cj(t,e){return t.button===0&&(!e||e==="_self")&&!lj(t)}const uj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dj="6";try{window.__reactRouterVersion=dj}catch{}const hj="startTransition",Wp=rw[hj];function fj(t){let{basename:e,children:n,future:r,window:s}=t,o=R.useRef();o.current==null&&(o.current=p2({window:s,v5Compat:!0}));let a=o.current,[c,u]=R.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},m=R.useCallback(p=>{d&&Wp?Wp(()=>u(p)):u(p)},[u,d]);return R.useLayoutEffect(()=>a.listen(m),[a,m]),R.useEffect(()=>sj(r),[r]),R.createElement(ij,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}const mj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nn=R.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:o,replace:a,state:c,target:u,to:d,preventScrollReset:m,viewTransition:p}=e,f=aj(e,uj),{basename:y}=R.useContext(Lr),N,I=!1;if(typeof d=="string"&&pj.test(d)&&(N=d,mj))try{let j=new URL(window.location.href),k=d.startsWith("//")?new URL(j.protocol+d):new URL(d),L=mf(k.pathname,y);k.origin===j.origin&&L!=null?d=L+k.search+k.hash:I=!0}catch{}let C=$2(d,{relative:s}),x=gj(d,{replace:a,state:c,target:u,preventScrollReset:m,relative:s,viewTransition:p});function _(j){r&&r(j),j.defaultPrevented||x(j)}return R.createElement("a",Gd({},f,{href:N||C,onClick:I||o?r:_,ref:n,target:u}))});var Qp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Qp||(Qp={}));var Gp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Gp||(Gp={}));function gj(t,e){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:c}=e===void 0?{}:e,u=Ct(),d=ps(),m=Cy(t,{relative:a});return R.useCallback(p=>{if(cj(p,n)){p.preventDefault();let f=r!==void 0?r:Hl(d)===Hl(m);u(t,{replace:f,state:s,preventScrollReset:o,relative:a,viewTransition:c})}},[d,u,m,r,s,n,t,o,a,c])}var dt=(t=>(t.Training="Training",t.ReadyForInterview="Ready for Interview",t.Placed="Placed",t.Discontinued="Discontinued",t))(dt||{}),ke=(t=>(t.Bank="Bank",t.Cash="Cash",t.Debtor="Debtor",t.Creditor="Creditor",t.Expense="Expense",t.Salary="Salary",t.Income="Income",t.Equity="Equity",t))(ke||{}),Te=(t=>(t.Income="Income",t.Expense="Expense",t.Transfer="Transfer",t.Refund="Refund",t))(Te||{});const he=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(t),Bt=()=>Math.random().toString(36).substr(2,9),xj=(t,e)=>{const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)},Fo=(t,e)=>{if(t.length===0)return;const n=Object.keys(t[0]).join(","),r=t.map(u=>Object.values(u).map(d=>`"${d}"`).join(",")).join(`
`),s=`${n}
${r}`,o=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(o),c=document.createElement("a");c.href=a,c.download=e,document.body.appendChild(c),c.click(),document.body.removeChild(c)},Zi=(t,e,n,r=0)=>{let s=0;return e==="Account"&&(s+=r),n.forEach(o=>{o.toEntityId===t&&o.toEntityType===e&&(s+=o.amount),o.fromEntityId===t&&o.fromEntityType===e&&(s-=o.amount)}),s},yj=()=>{};var Kp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vj=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},Ry={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=o>>2,p=(o&3)<<4|c>>4;let f=(c&15)<<2|d>>6,y=d&63;u||(y=64,a||(f=64)),r.push(n[m],n[p],n[f],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Py(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||c==null||d==null||p==null)throw new wj;const f=o<<2|c>>4;if(r.push(f),d!==64){const y=c<<4&240|d>>2;if(r.push(y),p!==64){const N=d<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _j=function(t){const e=Py(t);return Ry.encodeByteArray(e,!0)},ql=function(t){return _j(t).replace(/\./g,"")},jj=function(t){try{return Ry.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=()=>Ej().__FIREBASE_DEFAULTS__,Nj=()=>{if(typeof process>"u"||typeof Kp>"u")return;const t=Kp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Tj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jj(t[1]);return e&&JSON.parse(e)},yf=()=>{try{return yj()||bj()||Nj()||Tj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Sj=t=>{var e,n;return(n=(e=yf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Cj=t=>{const e=Sj(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Dy=()=>{var t;return(t=yf())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Aj(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ql(JSON.stringify(n)),ql(JSON.stringify(a)),""].join(".")}const mo={};function Pj(){const t={prod:[],emulator:[]};for(const e of Object.keys(mo))mo[e]?t.emulator.push(e):t.prod.push(e);return t}function Rj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Yp=!1;function Dj(t,e){if(typeof window>"u"||typeof document>"u"||!vf(window.location.host)||mo[t]===e||mo[t]||Yp)return;mo[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",o=Pj().prod.length>0;function a(){const f=document.getElementById(r);f&&f.remove()}function c(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function u(f,y){f.setAttribute("width","24"),f.setAttribute("id",y),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function d(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Yp=!0,a()},f}function m(f,y){f.setAttribute("id",y),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function p(){const f=Rj(r),y=n("text"),N=document.getElementById(y)||document.createElement("span"),I=n("learnmore"),C=document.getElementById(I)||document.createElement("a"),x=n("preprendIcon"),_=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const j=f.element;c(j),m(C,I);const k=d();u(_,x),j.append(_,N,C,k),document.body.appendChild(j)}o?(N.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vj(){var e;const t=(e=yf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mj(){return!Vj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oj(){try{return typeof indexedDB=="object"}catch{return!1}}function Fj(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj="FirebaseError";class gi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Uj,Object.setPrototypeOf(this,gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ly.prototype.create)}}class Ly{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?Bj(o,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new gi(s,c,r)}}function Bj(t,e){return t.replace(zj,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const zj=/\{\$([^}]+)}/g;function Wl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],a=e[s];if(Xp(o)&&Xp(a)){if(!Wl(o,a))return!1}else if(o!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Xp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t){return t&&t._delegate?t._delegate:t}class Uo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ij;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qj(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Hj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Hj(t){return t===Xr?void 0:t}function qj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $j(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const Qj={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},Gj=ve.INFO,Kj={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},Yj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Kj[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vy{constructor(e){this.name=e,this._logLevel=Gj,this._logHandler=Yj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Qj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const Xj=(t,e)=>e.some(n=>t instanceof n);let Jp,Zp;function Jj(){return Jp||(Jp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zj(){return Zp||(Zp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const My=new WeakMap,Kd=new WeakMap,Oy=new WeakMap,Uu=new WeakMap,wf=new WeakMap;function eE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(yr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&My.set(n,t)}).catch(()=>{}),wf.set(e,t),e}function tE(t){if(Kd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Kd.set(t,e)}let Yd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Oy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nE(t){Yd=t(Yd)}function rE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bu(this),e,...n);return Oy.set(r,e.sort?e.sort():[e]),yr(r)}:Zj().includes(t)?function(...e){return t.apply(Bu(this),e),yr(My.get(this))}:function(...e){return yr(t.apply(Bu(this),e))}}function sE(t){return typeof t=="function"?rE(t):(t instanceof IDBTransaction&&tE(t),Xj(t,Jj())?new Proxy(t,Yd):t)}function yr(t){if(t instanceof IDBRequest)return eE(t);if(Uu.has(t))return Uu.get(t);const e=sE(t);return e!==t&&(Uu.set(t,e),wf.set(e,t)),e}const Bu=t=>wf.get(t);function iE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const a=indexedDB.open(t,e),c=yr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(yr(a.result),u.oldVersion,u.newVersion,yr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const oE=["get","getKey","getAll","getAllKeys","count"],aE=["put","add","delete","clear"],zu=new Map;function eg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zu.get(e))return zu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=aE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||oE.includes(n)))return;const o=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return zu.set(e,o),o}nE(t=>({...t,get:(e,n,r)=>eg(e,n)||t.get(e,n,r),has:(e,n)=>!!eg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xd="@firebase/app",tg="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=new Vy("@firebase/app"),uE="@firebase/app-compat",dE="@firebase/analytics-compat",hE="@firebase/analytics",fE="@firebase/app-check-compat",mE="@firebase/app-check",pE="@firebase/auth",gE="@firebase/auth-compat",xE="@firebase/database",yE="@firebase/data-connect",vE="@firebase/database-compat",wE="@firebase/functions",_E="@firebase/functions-compat",jE="@firebase/installations",EE="@firebase/installations-compat",bE="@firebase/messaging",NE="@firebase/messaging-compat",TE="@firebase/performance",SE="@firebase/performance-compat",CE="@firebase/remote-config",IE="@firebase/remote-config-compat",AE="@firebase/storage",kE="@firebase/storage-compat",PE="@firebase/firestore",RE="@firebase/ai",DE="@firebase/firestore-compat",LE="firebase",VE="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="[DEFAULT]",ME={[Xd]:"fire-core",[uE]:"fire-core-compat",[hE]:"fire-analytics",[dE]:"fire-analytics-compat",[mE]:"fire-app-check",[fE]:"fire-app-check-compat",[pE]:"fire-auth",[gE]:"fire-auth-compat",[xE]:"fire-rtdb",[yE]:"fire-data-connect",[vE]:"fire-rtdb-compat",[wE]:"fire-fn",[_E]:"fire-fn-compat",[jE]:"fire-iid",[EE]:"fire-iid-compat",[bE]:"fire-fcm",[NE]:"fire-fcm-compat",[TE]:"fire-perf",[SE]:"fire-perf-compat",[CE]:"fire-rc",[IE]:"fire-rc-compat",[AE]:"fire-gcs",[kE]:"fire-gcs-compat",[PE]:"fire-fst",[DE]:"fire-fst-compat",[RE]:"fire-vertex","fire-js":"fire-js",[LE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=new Map,OE=new Map,Zd=new Map;function ng(t,e){try{t.container.addComponent(e)}catch(n){$n.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gl(t){const e=t.name;if(Zd.has(e))return $n.debug(`There were multiple attempts to register component ${e}.`),!1;Zd.set(e,t);for(const n of Ql.values())ng(n,t);for(const n of OE.values())ng(n,t);return!0}function FE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function UE(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new Ly("app","Firebase",BE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=VE;function eh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Jd,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw vr.create("bad-app-name",{appName:String(s)});if(n||(n=Dy()),!n)throw vr.create("no-options");const o=Ql.get(s);if(o){if(Wl(n,o.options)&&Wl(r,o.config))return o;throw vr.create("duplicate-app",{appName:s})}const a=new Wj(s);for(const u of Zd.values())a.addComponent(u);const c=new zE(n,r,a);return Ql.set(s,c),c}function HE(t=Jd){const e=Ql.get(t);if(!e&&t===Jd&&Dy())return eh();if(!e)throw vr.create("no-app",{appName:t});return e}function Ks(t,e,n){let r=ME[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$n.warn(a.join(" "));return}Gl(new Uo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="firebase-heartbeat-database",WE=1,Bo="firebase-heartbeat-store";let $u=null;function Fy(){return $u||($u=iE(qE,WE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bo)}catch(n){console.warn(n)}}}}).catch(t=>{throw vr.create("idb-open",{originalErrorMessage:t.message})})),$u}async function QE(t){try{const n=(await Fy()).transaction(Bo),r=await n.objectStore(Bo).get(Uy(t));return await n.done,r}catch(e){if(e instanceof gi)$n.warn(e.message);else{const n=vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$n.warn(n.message)}}}async function rg(t,e){try{const r=(await Fy()).transaction(Bo,"readwrite");await r.objectStore(Bo).put(e,Uy(t)),await r.done}catch(n){if(n instanceof gi)$n.warn(n.message);else{const r=vr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$n.warn(r.message)}}}function Uy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=1024,KE=30;class YE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=sg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>KE){const a=ZE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){$n.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sg(),{heartbeatsToSend:r,unsentEntries:s}=XE(this._heartbeatsCache.heartbeats),o=ql(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return $n.warn(n),""}}}function sg(){return new Date().toISOString().substring(0,10)}function XE(t,e=GE){const n=[];let r=t.slice();for(const s of t){const o=n.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),ig(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ig(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Oj()?Fj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ig(t){return ql(JSON.stringify({version:2,heartbeats:t})).length}function ZE(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t){Gl(new Uo("platform-logger",e=>new lE(e),"PRIVATE")),Gl(new Uo("heartbeat",e=>new YE(e),"PRIVATE")),Ks(Xd,tg,t),Ks(Xd,tg,"esm2020"),Ks("fire-js","")}eb("");var tb="firebase",nb="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ks(tb,nb,"app");var og=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wr,By;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,v){function T(){}T.prototype=v.prototype,w.F=v.prototype,w.prototype=new T,w.prototype.constructor=w,w.D=function(A,S,D){for(var b=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)b[oe-2]=arguments[oe];return v.prototype[S].apply(A,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,v,T){T||(T=0);const A=Array(16);if(typeof v=="string")for(var S=0;S<16;++S)A[S]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(S=0;S<16;++S)A[S]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=w.g[0],T=w.g[1],S=w.g[2];let D=w.g[3],b;b=v+(D^T&(S^D))+A[0]+3614090360&4294967295,v=T+(b<<7&4294967295|b>>>25),b=D+(S^v&(T^S))+A[1]+3905402710&4294967295,D=v+(b<<12&4294967295|b>>>20),b=S+(T^D&(v^T))+A[2]+606105819&4294967295,S=D+(b<<17&4294967295|b>>>15),b=T+(v^S&(D^v))+A[3]+3250441966&4294967295,T=S+(b<<22&4294967295|b>>>10),b=v+(D^T&(S^D))+A[4]+4118548399&4294967295,v=T+(b<<7&4294967295|b>>>25),b=D+(S^v&(T^S))+A[5]+1200080426&4294967295,D=v+(b<<12&4294967295|b>>>20),b=S+(T^D&(v^T))+A[6]+2821735955&4294967295,S=D+(b<<17&4294967295|b>>>15),b=T+(v^S&(D^v))+A[7]+4249261313&4294967295,T=S+(b<<22&4294967295|b>>>10),b=v+(D^T&(S^D))+A[8]+1770035416&4294967295,v=T+(b<<7&4294967295|b>>>25),b=D+(S^v&(T^S))+A[9]+2336552879&4294967295,D=v+(b<<12&4294967295|b>>>20),b=S+(T^D&(v^T))+A[10]+4294925233&4294967295,S=D+(b<<17&4294967295|b>>>15),b=T+(v^S&(D^v))+A[11]+2304563134&4294967295,T=S+(b<<22&4294967295|b>>>10),b=v+(D^T&(S^D))+A[12]+1804603682&4294967295,v=T+(b<<7&4294967295|b>>>25),b=D+(S^v&(T^S))+A[13]+4254626195&4294967295,D=v+(b<<12&4294967295|b>>>20),b=S+(T^D&(v^T))+A[14]+2792965006&4294967295,S=D+(b<<17&4294967295|b>>>15),b=T+(v^S&(D^v))+A[15]+1236535329&4294967295,T=S+(b<<22&4294967295|b>>>10),b=v+(S^D&(T^S))+A[1]+4129170786&4294967295,v=T+(b<<5&4294967295|b>>>27),b=D+(T^S&(v^T))+A[6]+3225465664&4294967295,D=v+(b<<9&4294967295|b>>>23),b=S+(v^T&(D^v))+A[11]+643717713&4294967295,S=D+(b<<14&4294967295|b>>>18),b=T+(D^v&(S^D))+A[0]+3921069994&4294967295,T=S+(b<<20&4294967295|b>>>12),b=v+(S^D&(T^S))+A[5]+3593408605&4294967295,v=T+(b<<5&4294967295|b>>>27),b=D+(T^S&(v^T))+A[10]+38016083&4294967295,D=v+(b<<9&4294967295|b>>>23),b=S+(v^T&(D^v))+A[15]+3634488961&4294967295,S=D+(b<<14&4294967295|b>>>18),b=T+(D^v&(S^D))+A[4]+3889429448&4294967295,T=S+(b<<20&4294967295|b>>>12),b=v+(S^D&(T^S))+A[9]+568446438&4294967295,v=T+(b<<5&4294967295|b>>>27),b=D+(T^S&(v^T))+A[14]+3275163606&4294967295,D=v+(b<<9&4294967295|b>>>23),b=S+(v^T&(D^v))+A[3]+4107603335&4294967295,S=D+(b<<14&4294967295|b>>>18),b=T+(D^v&(S^D))+A[8]+1163531501&4294967295,T=S+(b<<20&4294967295|b>>>12),b=v+(S^D&(T^S))+A[13]+2850285829&4294967295,v=T+(b<<5&4294967295|b>>>27),b=D+(T^S&(v^T))+A[2]+4243563512&4294967295,D=v+(b<<9&4294967295|b>>>23),b=S+(v^T&(D^v))+A[7]+1735328473&4294967295,S=D+(b<<14&4294967295|b>>>18),b=T+(D^v&(S^D))+A[12]+2368359562&4294967295,T=S+(b<<20&4294967295|b>>>12),b=v+(T^S^D)+A[5]+4294588738&4294967295,v=T+(b<<4&4294967295|b>>>28),b=D+(v^T^S)+A[8]+2272392833&4294967295,D=v+(b<<11&4294967295|b>>>21),b=S+(D^v^T)+A[11]+1839030562&4294967295,S=D+(b<<16&4294967295|b>>>16),b=T+(S^D^v)+A[14]+4259657740&4294967295,T=S+(b<<23&4294967295|b>>>9),b=v+(T^S^D)+A[1]+2763975236&4294967295,v=T+(b<<4&4294967295|b>>>28),b=D+(v^T^S)+A[4]+1272893353&4294967295,D=v+(b<<11&4294967295|b>>>21),b=S+(D^v^T)+A[7]+4139469664&4294967295,S=D+(b<<16&4294967295|b>>>16),b=T+(S^D^v)+A[10]+3200236656&4294967295,T=S+(b<<23&4294967295|b>>>9),b=v+(T^S^D)+A[13]+681279174&4294967295,v=T+(b<<4&4294967295|b>>>28),b=D+(v^T^S)+A[0]+3936430074&4294967295,D=v+(b<<11&4294967295|b>>>21),b=S+(D^v^T)+A[3]+3572445317&4294967295,S=D+(b<<16&4294967295|b>>>16),b=T+(S^D^v)+A[6]+76029189&4294967295,T=S+(b<<23&4294967295|b>>>9),b=v+(T^S^D)+A[9]+3654602809&4294967295,v=T+(b<<4&4294967295|b>>>28),b=D+(v^T^S)+A[12]+3873151461&4294967295,D=v+(b<<11&4294967295|b>>>21),b=S+(D^v^T)+A[15]+530742520&4294967295,S=D+(b<<16&4294967295|b>>>16),b=T+(S^D^v)+A[2]+3299628645&4294967295,T=S+(b<<23&4294967295|b>>>9),b=v+(S^(T|~D))+A[0]+4096336452&4294967295,v=T+(b<<6&4294967295|b>>>26),b=D+(T^(v|~S))+A[7]+1126891415&4294967295,D=v+(b<<10&4294967295|b>>>22),b=S+(v^(D|~T))+A[14]+2878612391&4294967295,S=D+(b<<15&4294967295|b>>>17),b=T+(D^(S|~v))+A[5]+4237533241&4294967295,T=S+(b<<21&4294967295|b>>>11),b=v+(S^(T|~D))+A[12]+1700485571&4294967295,v=T+(b<<6&4294967295|b>>>26),b=D+(T^(v|~S))+A[3]+2399980690&4294967295,D=v+(b<<10&4294967295|b>>>22),b=S+(v^(D|~T))+A[10]+4293915773&4294967295,S=D+(b<<15&4294967295|b>>>17),b=T+(D^(S|~v))+A[1]+2240044497&4294967295,T=S+(b<<21&4294967295|b>>>11),b=v+(S^(T|~D))+A[8]+1873313359&4294967295,v=T+(b<<6&4294967295|b>>>26),b=D+(T^(v|~S))+A[15]+4264355552&4294967295,D=v+(b<<10&4294967295|b>>>22),b=S+(v^(D|~T))+A[6]+2734768916&4294967295,S=D+(b<<15&4294967295|b>>>17),b=T+(D^(S|~v))+A[13]+1309151649&4294967295,T=S+(b<<21&4294967295|b>>>11),b=v+(S^(T|~D))+A[4]+4149444226&4294967295,v=T+(b<<6&4294967295|b>>>26),b=D+(T^(v|~S))+A[11]+3174756917&4294967295,D=v+(b<<10&4294967295|b>>>22),b=S+(v^(D|~T))+A[2]+718787259&4294967295,S=D+(b<<15&4294967295|b>>>17),b=T+(D^(S|~v))+A[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,w.g[2]=w.g[2]+S&4294967295,w.g[3]=w.g[3]+D&4294967295}r.prototype.v=function(w,v){v===void 0&&(v=w.length);const T=v-this.blockSize,A=this.C;let S=this.h,D=0;for(;D<v;){if(S==0)for(;D<=T;)s(this,w,D),D+=this.blockSize;if(typeof w=="string"){for(;D<v;)if(A[S++]=w.charCodeAt(D++),S==this.blockSize){s(this,A),S=0;break}}else for(;D<v;)if(A[S++]=w[D++],S==this.blockSize){s(this,A),S=0;break}}this.h=S,this.o+=v},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var T=w.length-8;T<w.length;++T)w[T]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,T=0;T<4;++T)for(let A=0;A<32;A+=8)w[v++]=this.g[T]>>>A&255;return w};function o(w,v){var T=c;return Object.prototype.hasOwnProperty.call(T,w)?T[w]:T[w]=v(w)}function a(w,v){this.h=v;const T=[];let A=!0;for(let S=w.length-1;S>=0;S--){const D=w[S]|0;A&&D==v||(T[S]=D,A=!1)}this.g=T}var c={};function u(w){return-128<=w&&w<128?o(w,function(v){return new a([v|0],v<0?-1:0)}):new a([w|0],w<0?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return C(d(-w));const v=[];let T=1;for(let A=0;w>=T;A++)v[A]=w/T|0,T*=4294967296;return new a(v,0)}function m(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return C(m(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(v,8));let A=p;for(let D=0;D<w.length;D+=8){var S=Math.min(8,w.length-D);const b=parseInt(w.substring(D,D+S),v);S<8?(S=d(Math.pow(v,S)),A=A.j(S).add(d(b))):(A=A.j(T),A=A.add(d(b)))}return A}var p=u(0),f=u(1),y=u(16777216);t=a.prototype,t.m=function(){if(I(this))return-C(this).m();let w=0,v=1;for(let T=0;T<this.g.length;T++){const A=this.i(T);w+=(A>=0?A:4294967296+A)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(N(this))return"0";if(I(this))return"-"+C(this).toString(w);const v=d(Math.pow(w,6));var T=this;let A="";for(;;){const S=k(T,v).g;T=x(T,S.j(v));let D=((T.g.length>0?T.g[0]:T.h)>>>0).toString(w);if(T=S,N(T))return D+A;for(;D.length<6;)D="0"+D;A=D+A}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function N(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function I(w){return w.h==-1}t.l=function(w){return w=x(this,w),I(w)?-1:N(w)?0:1};function C(w){const v=w.g.length,T=[];for(let A=0;A<v;A++)T[A]=~w.g[A];return new a(T,~w.h).add(f)}t.abs=function(){return I(this)?C(this):this},t.add=function(w){const v=Math.max(this.g.length,w.g.length),T=[];let A=0;for(let S=0;S<=v;S++){let D=A+(this.i(S)&65535)+(w.i(S)&65535),b=(D>>>16)+(this.i(S)>>>16)+(w.i(S)>>>16);A=b>>>16,D&=65535,b&=65535,T[S]=b<<16|D}return new a(T,T[T.length-1]&-2147483648?-1:0)};function x(w,v){return w.add(C(v))}t.j=function(w){if(N(this)||N(w))return p;if(I(this))return I(w)?C(this).j(C(w)):C(C(this).j(w));if(I(w))return C(this.j(C(w)));if(this.l(y)<0&&w.l(y)<0)return d(this.m()*w.m());const v=this.g.length+w.g.length,T=[];for(var A=0;A<2*v;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(let S=0;S<w.g.length;S++){const D=this.i(A)>>>16,b=this.i(A)&65535,oe=w.i(S)>>>16,ae=w.i(S)&65535;T[2*A+2*S]+=b*ae,_(T,2*A+2*S),T[2*A+2*S+1]+=D*ae,_(T,2*A+2*S+1),T[2*A+2*S+1]+=b*oe,_(T,2*A+2*S+1),T[2*A+2*S+2]+=D*oe,_(T,2*A+2*S+2)}for(w=0;w<v;w++)T[w]=T[2*w+1]<<16|T[2*w];for(w=v;w<2*v;w++)T[w]=0;return new a(T,0)};function _(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function j(w,v){this.g=w,this.h=v}function k(w,v){if(N(v))throw Error("division by zero");if(N(w))return new j(p,p);if(I(w))return v=k(C(w),v),new j(C(v.g),C(v.h));if(I(v))return v=k(w,C(v)),new j(C(v.g),v.h);if(w.g.length>30){if(I(w)||I(v))throw Error("slowDivide_ only works with positive integers.");for(var T=f,A=v;A.l(w)<=0;)T=L(T),A=L(A);var S=P(T,1),D=P(A,1);for(A=P(A,2),T=P(T,2);!N(A);){var b=D.add(A);b.l(w)<=0&&(S=S.add(T),D=b),A=P(A,1),T=P(T,1)}return v=x(w,S.j(v)),new j(S,v)}for(S=p;w.l(v)>=0;){for(T=Math.max(1,Math.floor(w.m()/v.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),D=d(T),b=D.j(v);I(b)||b.l(w)>0;)T-=A,D=d(T),b=D.j(v);N(D)&&(D=f),S=S.add(D),w=x(w,b)}return new j(S,w)}t.B=function(w){return k(this,w).h},t.and=function(w){const v=Math.max(this.g.length,w.g.length),T=[];for(let A=0;A<v;A++)T[A]=this.i(A)&w.i(A);return new a(T,this.h&w.h)},t.or=function(w){const v=Math.max(this.g.length,w.g.length),T=[];for(let A=0;A<v;A++)T[A]=this.i(A)|w.i(A);return new a(T,this.h|w.h)},t.xor=function(w){const v=Math.max(this.g.length,w.g.length),T=[];for(let A=0;A<v;A++)T[A]=this.i(A)^w.i(A);return new a(T,this.h^w.h)};function L(w){const v=w.g.length+1,T=[];for(let A=0;A<v;A++)T[A]=w.i(A)<<1|w.i(A-1)>>>31;return new a(T,w.h)}function P(w,v){const T=v>>5;v%=32;const A=w.g.length-T,S=[];for(let D=0;D<A;D++)S[D]=v>0?w.i(D+T)>>>v|w.i(D+T+1)<<32-v:w.i(D+T);return new a(S,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,By=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=m,wr=a}).apply(typeof og<"u"?og:typeof self<"u"?self:typeof window<"u"?window:{});var Ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zy,eo,$y,ml,th,Hy,qy,Wy;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ga=="object"&&Ga];for(var h=0;h<l.length;++h){var g=l[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var g=r;l=l.split(".");for(var E=0;E<l.length-1;E++){var M=l[E];if(!(M in g))break e;g=g[M]}l=l[l.length-1],E=g[l],h=h(E),h!=E&&h!=null&&e(g,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var g=[],E;for(E in h)Object.prototype.hasOwnProperty.call(h,E)&&g.push([E,h[E]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,g){return l.call.apply(l.bind,arguments)}function d(l,h,g){return d=u,d.apply(null,arguments)}function m(l,h){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function p(l,h){function g(){}g.prototype=h.prototype,l.Z=h.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(E,M,O){for(var W=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)W[fe-2]=arguments[fe];return h.prototype[M].apply(E,W)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function y(l){const h=l.length;if(h>0){const g=Array(h);for(let E=0;E<h;E++)g[E]=l[E];return g}return[]}function N(l,h){for(let E=1;E<arguments.length;E++){const M=arguments[E];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=l.length||0;const O=M.length||0;l.length=g+O;for(let W=0;W<O;W++)l[g+W]=M[W]}else l.push(M)}}class I{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function C(l){a.setTimeout(()=>{throw l},0)}function x(){var l=w;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class _{constructor(){this.h=this.g=null}add(h,g){const E=j.get();E.set(h,g),this.h?this.h.next=E:this.g=E,this.h=E}}var j=new I(()=>new k,l=>l.reset());class k{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let L,P=!1,w=new _,v=()=>{const l=Promise.resolve(void 0);L=()=>{l.then(T)}};function T(){for(var l;l=x();){try{l.h.call(l.g)}catch(g){C(g)}var h=j;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}P=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,h),a.removeEventListener("test",g,h)}catch{}return l}();function b(l){return/^[\s\xa0]*$/.test(l)}function oe(l,h){S.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}p(oe,S),oe.prototype.init=function(l,h){const g=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(g=="mouseover"?h=l.fromElement:g=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),Ie=0;function xe(l,h,g,E,M){this.listener=l,this.proxy=null,this.src=h,this.type=g,this.capture=!!E,this.ha=M,this.key=++Ie,this.da=this.fa=!1}function H(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function K(l,h,g){for(const E in l)h.call(g,l[E],E,l)}function re(l,h){for(const g in l)h.call(void 0,l[g],g,l)}function U(l){const h={};for(const g in l)h[g]=l[g];return h}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(l,h){let g,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(g in E)l[g]=E[g];for(let O=0;O<ne.length;O++)g=ne[O],Object.prototype.hasOwnProperty.call(E,g)&&(l[g]=E[g])}}function de(l){this.src=l,this.g={},this.h=0}de.prototype.add=function(l,h,g,E,M){const O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);const W=J(l,h,E,M);return W>-1?(h=l[W],g||(h.fa=!1)):(h=new xe(h,this.src,O,!!E,M),h.fa=g,l.push(h)),h};function Q(l,h){const g=h.type;if(g in l.g){var E=l.g[g],M=Array.prototype.indexOf.call(E,h,void 0),O;(O=M>=0)&&Array.prototype.splice.call(E,M,1),O&&(H(h),l.g[g].length==0&&(delete l.g[g],l.h--))}}function J(l,h,g,E){for(let M=0;M<l.length;++M){const O=l[M];if(!O.da&&O.listener==h&&O.capture==!!g&&O.ha==E)return M}return-1}var we="closure_lm_"+(Math.random()*1e6|0),Fr={};function pn(l,h,g,E,M){if(Array.isArray(h)){for(let O=0;O<h.length;O++)pn(l,h[O],g,E,M);return null}return g=oa(g),l&&l[ae]?l.J(h,g,c(E)?!!E.capture:!1,M):An(l,h,g,!1,E,M)}function An(l,h,g,E,M,O){if(!h)throw Error("Invalid event type");const W=c(M)?!!M.capture:!!M;let fe=ji(l);if(fe||(l[we]=fe=new de(l)),g=fe.add(h,g,E,W,O),g.proxy)return g;if(E=Wc(),g.proxy=E,E.src=l,E.listener=g,l.addEventListener)D||(M=W),M===void 0&&(M=!1),l.addEventListener(h.toString(),E,M);else if(l.attachEvent)l.attachEvent(ws(h.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Wc(){function l(g){return h.call(l.src,l.listener,g)}const h=Qc;return l}function ia(l,h,g,E,M){if(Array.isArray(h))for(var O=0;O<h.length;O++)ia(l,h[O],g,E,M);else E=c(E)?!!E.capture:!!E,g=oa(g),l&&l[ae]?(l=l.i,O=String(h).toString(),O in l.g&&(h=l.g[O],g=J(h,g,E,M),g>-1&&(H(h[g]),Array.prototype.splice.call(h,g,1),h.length==0&&(delete l.g[O],l.h--)))):l&&(l=ji(l))&&(h=l.g[h.toString()],l=-1,h&&(l=J(h,g,E,M)),(g=l>-1?h[l]:null)&&_i(g))}function _i(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[ae])Q(h.i,l);else{var g=l.type,E=l.proxy;h.removeEventListener?h.removeEventListener(g,E,l.capture):h.detachEvent?h.detachEvent(ws(g),E):h.addListener&&h.removeListener&&h.removeListener(E),(g=ji(h))?(Q(g,l),g.h==0&&(g.src=null,h[we]=null)):H(l)}}}function ws(l){return l in Fr?Fr[l]:Fr[l]="on"+l}function Qc(l,h){if(l.da)l=!0;else{h=new oe(h,this);const g=l.listener,E=l.ha||l.src;l.fa&&_i(l),l=g.call(E,h)}return l}function ji(l){return l=l[we],l instanceof de?l:null}var Ei="__closure_events_fn_"+(Math.random()*1e9>>>0);function oa(l){return typeof l=="function"?l:(l[Ei]||(l[Ei]=function(h){return l.handleEvent(h)}),l[Ei])}function ot(){A.call(this),this.i=new de(this),this.M=this,this.G=null}p(ot,A),ot.prototype[ae]=!0,ot.prototype.removeEventListener=function(l,h,g,E){ia(this,l,h,g,E)};function ft(l,h){var g,E=l.G;if(E)for(g=[];E;E=E.G)g.push(E);if(l=l.M,E=h.type||h,typeof h=="string")h=new S(h,l);else if(h instanceof S)h.target=h.target||l;else{var M=h;h=new S(E,l),Y(h,M)}M=!0;let O,W;if(g)for(W=g.length-1;W>=0;W--)O=h.g=g[W],M=_s(O,E,!0,h)&&M;if(O=h.g=l,M=_s(O,E,!0,h)&&M,M=_s(O,E,!1,h)&&M,g)for(W=0;W<g.length;W++)O=h.g=g[W],M=_s(O,E,!1,h)&&M}ot.prototype.N=function(){if(ot.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const g=l.g[h];for(let E=0;E<g.length;E++)H(g[E]);delete l.g[h],l.h--}}this.G=null},ot.prototype.J=function(l,h,g,E){return this.i.add(String(l),h,!1,g,E)},ot.prototype.K=function(l,h,g,E){return this.i.add(String(l),h,!0,g,E)};function _s(l,h,g,E){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let M=!0;for(let O=0;O<h.length;++O){const W=h[O];if(W&&!W.da&&W.capture==g){const fe=W.listener,tt=W.ha||W.src;W.fa&&Q(l.i,W),M=fe.call(tt,E)!==!1&&M}}return M&&!E.defaultPrevented}function Gc(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:a.setTimeout(l,h||0)}function aa(l){l.g=Gc(()=>{l.g=null,l.i&&(l.i=!1,aa(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class la extends A{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:aa(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ur(l){A.call(this),this.h=l,this.g={}}p(Ur,A);var ca=[];function ua(l){K(l.g,function(h,g){this.g.hasOwnProperty(g)&&_i(h)},l),l.g={}}Ur.prototype.N=function(){Ur.Z.N.call(this),ua(this)},Ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bi=a.JSON.stringify,Kc=a.JSON.parse,Yc=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function da(){}function ha(){}var Br={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ni(){S.call(this,"d")}p(Ni,S);function Ti(){S.call(this,"c")}p(Ti,S);var kn={},fa=null;function js(){return fa=fa||new ot}kn.Ia="serverreachability";function ma(l){S.call(this,kn.Ia,l)}p(ma,S);function zr(l){const h=js();ft(h,new ma(h))}kn.STAT_EVENT="statevent";function pa(l,h){S.call(this,kn.STAT_EVENT,l),this.stat=h}p(pa,S);function mt(l){const h=js();ft(h,new pa(h,l))}kn.Ja="timingevent";function ga(l,h){S.call(this,kn.Ja,l),this.size=h}p(ga,S);function $r(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Hr(){this.g=!0}Hr.prototype.ua=function(){this.g=!1};function Xc(l,h,g,E,M,O){l.info(function(){if(l.g)if(O){var W="",fe=O.split("&");for(let Ae=0;Ae<fe.length;Ae++){var tt=fe[Ae].split("=");if(tt.length>1){const lt=tt[0];tt=tt[1];const xn=lt.split("_");W=xn.length>=2&&xn[1]=="type"?W+(lt+"="+tt+"&"):W+(lt+"=redacted&")}}}else W=null;else W=O;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+h+`
`+g+`
`+W})}function Jc(l,h,g,E,M,O,W){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+h+`
`+g+`
`+O+" "+W})}function Gn(l,h,g,E){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+eu(l,g)+(E?" "+E:"")})}function Zc(l,h){l.info(function(){return"TIMEOUT: "+h})}Hr.prototype.info=function(){};function eu(l,h){if(!l.g)return h;if(!h)return null;try{const O=JSON.parse(h);if(O){for(l=0;l<O.length;l++)if(Array.isArray(O[l])){var g=O[l];if(!(g.length<2)){var E=g[1];if(Array.isArray(E)&&!(E.length<1)){var M=E[0];if(M!="noop"&&M!="stop"&&M!="close")for(let W=1;W<E.length;W++)E[W]=""}}}}return bi(O)}catch{return h}}var Es={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},V={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},B;function q(){}p(q,da),q.prototype.g=function(){return new XMLHttpRequest},B=new q;function be(l){return encodeURIComponent(String(l))}function Pn(l){var h=1;l=l.split(":");const g=[];for(;h>0&&l.length;)g.push(l.shift()),h--;return l.length&&g.push(l.join(":")),g}function at(l,h,g,E){this.j=l,this.i=h,this.l=g,this.S=E||1,this.V=new Ur(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xa}function xa(){this.i=null,this.g="",this.h=!1}var ya={},Si={};function Ci(l,h,g){l.M=1,l.A=ja(gn(h)),l.u=g,l.R=!0,va(l,null)}function va(l,h){l.F=Date.now(),_a(l),l.B=gn(l.A);var g=l.B,E=l.S;Array.isArray(E)||(E=[String(E)]),cm(g.i,"t",E),l.C=0,g=l.j.L,l.h=new xa,l.g=Sm(l.j,g?h:null,!l.u),l.P>0&&(l.O=new la(d(l.Y,l,l.g),l.P)),h=l.V,g=l.g,E=l.ba;var M="readystatechange";Array.isArray(M)||(M&&(ca[0]=M.toString()),M=ca);for(let O=0;O<M.length;O++){const W=pn(g,M[O],E||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=l.J?U(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),zr(),Xc(l.i,l.v,l.B,l.l,l.S,l.u)}at.prototype.ba=function(l){l=l.target;const h=this.O;h&&Xn(l)==3?h.j():this.Y(l)},at.prototype.Y=function(l){try{if(l==this.g)e:{const fe=Xn(this.g),tt=this.g.ya(),Ae=this.g.ca();if(!(fe<3)&&(fe!=3||this.g&&(this.h.h||this.g.la()||gm(this.g)))){this.K||fe!=4||tt==7||(tt==8||Ae<=0?zr(3):zr(2)),nu(this);var h=this.g.ca();this.X=h;var g=tu(this);if(this.o=h==200,Jc(this.i,this.v,this.B,this.l,this.S,fe,h),this.o){if(this.U&&!this.L){t:{if(this.g){var E,M=this.g;if((E=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(E)){var O=E;break t}}O=null}if(l=O)Gn(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ru(this,l);else{this.o=!1,this.m=3,mt(12),qr(this),Ii(this);break e}}if(this.R){l=!0;let lt;for(;!this.K&&this.C<g.length;)if(lt=Rn(this,g),lt==Si){fe==4&&(this.m=4,mt(14),l=!1),Gn(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==ya){this.m=4,mt(15),Gn(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else Gn(this.i,this.l,lt,null),ru(this,lt);if(wa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fe!=4||g.length!=0||this.h.h||(this.m=1,mt(16),l=!1),this.o=this.o&&l,!l)Gn(this.i,this.l,g,"[Invalid Chunked Response]"),qr(this),Ii(this);else if(g.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),du(W),W.P=!0,mt(11))}}else Gn(this.i,this.l,g,null),ru(this,g);fe==4&&qr(this),this.o&&!this.K&&(fe==4?Em(this.j,this):(this.o=!1,_a(this)))}else V1(this.g),h==400&&g.indexOf("Unknown SID")>0?(this.m=3,mt(12)):(this.m=0,mt(13)),qr(this),Ii(this)}}}catch{}finally{}};function tu(l){if(!wa(l))return l.g.la();const h=gm(l.g);if(h==="")return"";let g="";const E=h.length,M=Xn(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return qr(l),Ii(l),"";l.h.i=new a.TextDecoder}for(let O=0;O<E;O++)l.h.h=!0,g+=l.h.i.decode(h[O],{stream:!(M&&O==E-1)});return h.length=0,l.h.g+=g,l.C=0,l.h.g}function wa(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function Rn(l,h){var g=l.C,E=h.indexOf(`
`,g);return E==-1?Si:(g=Number(h.substring(g,E)),isNaN(g)?ya:(E+=1,E+g>h.length?Si:(h=h.slice(E,E+g),l.C=E+g,h)))}at.prototype.cancel=function(){this.K=!0,qr(this)};function _a(l){l.T=Date.now()+l.H,Jf(l,l.H)}function Jf(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=$r(d(l.aa,l),h)}function nu(l){l.D&&(a.clearTimeout(l.D),l.D=null)}at.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(Zc(this.i,this.B),this.M!=2&&(zr(),mt(17)),qr(this),this.m=2,Ii(this)):Jf(this,this.T-l)};function Ii(l){l.j.I==0||l.K||Em(l.j,l)}function qr(l){nu(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,ua(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function ru(l,h){try{var g=l.j;if(g.I!=0&&(g.g==l||su(g.h,l))){if(!l.L&&su(g.h,l)&&g.I==3){try{var E=g.Ba.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)Sa(g),Na(g);else break e;uu(g),mt(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=$r(d(g.Va,g),6e3));tm(g.h)<=1&&g.ta&&(g.ta=void 0)}else Qr(g,11)}else if((l.L||g.g==l)&&Sa(g),!b(h))for(M=g.Ba.g.parse(h),h=0;h<M.length;h++){let Ae=M[h];const lt=Ae[0];if(!(lt<=g.K))if(g.K=lt,Ae=Ae[1],g.I==2)if(Ae[0]=="c"){g.M=Ae[1],g.ba=Ae[2];const xn=Ae[3];xn!=null&&(g.ka=xn,g.j.info("VER="+g.ka));const Gr=Ae[4];Gr!=null&&(g.za=Gr,g.j.info("SVER="+g.za));const Jn=Ae[5];Jn!=null&&typeof Jn=="number"&&Jn>0&&(E=1.5*Jn,g.O=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const Zn=l.g;if(Zn){const Ia=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ia){var O=E.h;O.g||Ia.indexOf("spdy")==-1&&Ia.indexOf("quic")==-1&&Ia.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(iu(O,O.h),O.h=null))}if(E.G){const hu=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;hu&&(E.wa=hu,Re(E.J,E.G,hu))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),E=g;var W=l;if(E.na=Tm(E,E.L?E.ba:null,E.W),W.L){nm(E.h,W);var fe=W,tt=E.O;tt&&(fe.H=tt),fe.D&&(nu(fe),_a(fe)),E.g=W}else _m(E);g.i.length>0&&Ta(g)}else Ae[0]!="stop"&&Ae[0]!="close"||Qr(g,7);else g.I==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?Qr(g,7):cu(g):Ae[0]!="noop"&&g.l&&g.l.qa(Ae),g.A=0)}}zr(4)}catch{}}var E1=class{constructor(l,h){this.g=l,this.map=h}};function Zf(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function em(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function tm(l){return l.h?1:l.g?l.g.size:0}function su(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function iu(l,h){l.g?l.g.add(h):l.h=h}function nm(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Zf.prototype.cancel=function(){if(this.i=rm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function rm(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const g of l.g.values())h=h.concat(g.G);return h}return y(l.i)}var sm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function b1(l,h){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const E=l[g].indexOf("=");let M,O=null;E>=0?(M=l[g].substring(0,E),O=l[g].substring(E+1)):M=l[g],h(M,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Kn(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof Kn?(this.l=l.l,Ai(this,l.j),this.o=l.o,this.g=l.g,ki(this,l.u),this.h=l.h,ou(this,um(l.i)),this.m=l.m):l&&(h=String(l).match(sm))?(this.l=!1,Ai(this,h[1]||"",!0),this.o=Pi(h[2]||""),this.g=Pi(h[3]||"",!0),ki(this,h[4]),this.h=Pi(h[5]||"",!0),ou(this,h[6]||"",!0),this.m=Pi(h[7]||"")):(this.l=!1,this.i=new Di(null,this.l))}Kn.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(Ri(h,im,!0),":");var g=this.g;return(g||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Ri(h,im,!0),"@"),l.push(be(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Ri(g,g.charAt(0)=="/"?S1:T1,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Ri(g,I1)),l.join("")},Kn.prototype.resolve=function(l){const h=gn(this);let g=!!l.j;g?Ai(h,l.j):g=!!l.o,g?h.o=l.o:g=!!l.g,g?h.g=l.g:g=l.u!=null;var E=l.h;if(g)ki(h,l.u);else if(g=!!l.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var M=h.h.lastIndexOf("/");M!=-1&&(E=h.h.slice(0,M+1)+E)}if(M=E,M==".."||M==".")E="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){E=M.lastIndexOf("/",0)==0,M=M.split("/");const O=[];for(let W=0;W<M.length;){const fe=M[W++];fe=="."?E&&W==M.length&&O.push(""):fe==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),E&&W==M.length&&O.push("")):(O.push(fe),E=!0)}E=O.join("/")}else E=M}return g?h.h=E:g=l.i.toString()!=="",g?ou(h,um(l.i)):g=!!l.m,g&&(h.m=l.m),h};function gn(l){return new Kn(l)}function Ai(l,h,g){l.j=g?Pi(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function ki(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function ou(l,h,g){h instanceof Di?(l.i=h,A1(l.i,l.l)):(g||(h=Ri(h,C1)),l.i=new Di(h,l.l))}function Re(l,h,g){l.i.set(h,g)}function ja(l){return Re(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Pi(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ri(l,h,g){return typeof l=="string"?(l=encodeURI(l).replace(h,N1),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function N1(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var im=/[#\/\?@]/g,T1=/[#\?:]/g,S1=/[#\?]/g,C1=/[#\?@]/g,I1=/#/g;function Di(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Wr(l){l.g||(l.g=new Map,l.h=0,l.i&&b1(l.i,function(h,g){l.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=Di.prototype,t.add=function(l,h){Wr(this),this.i=null,l=bs(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(h),this.h+=1,this};function om(l,h){Wr(l),h=bs(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function am(l,h){return Wr(l),h=bs(l,h),l.g.has(h)}t.forEach=function(l,h){Wr(this),this.g.forEach(function(g,E){g.forEach(function(M){l.call(h,M,E,this)},this)},this)};function lm(l,h){Wr(l);let g=[];if(typeof h=="string")am(l,h)&&(g=g.concat(l.g.get(bs(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)g=g.concat(l[h]);return g}t.set=function(l,h){return Wr(this),this.i=null,l=bs(this,l),am(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=lm(this,l),l.length>0?String(l[0]):h):h};function cm(l,h,g){om(l,h),g.length>0&&(l.i=null,l.g.set(bs(l,h),y(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let E=0;E<h.length;E++){var g=h[E];const M=be(g);g=lm(this,g);for(let O=0;O<g.length;O++){let W=M;g[O]!==""&&(W+="="+be(g[O])),l.push(W)}}return this.i=l.join("&")};function um(l){const h=new Di;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function bs(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function A1(l,h){h&&!l.j&&(Wr(l),l.i=null,l.g.forEach(function(g,E){const M=E.toLowerCase();E!=M&&(om(this,E),cm(this,M,g))},l)),l.j=h}function k1(l,h){const g=new Hr;if(a.Image){const E=new Image;E.onload=m(Yn,g,"TestLoadImage: loaded",!0,h,E),E.onerror=m(Yn,g,"TestLoadImage: error",!1,h,E),E.onabort=m(Yn,g,"TestLoadImage: abort",!1,h,E),E.ontimeout=m(Yn,g,"TestLoadImage: timeout",!1,h,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else h(!1)}function P1(l,h){const g=new Hr,E=new AbortController,M=setTimeout(()=>{E.abort(),Yn(g,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:E.signal}).then(O=>{clearTimeout(M),O.ok?Yn(g,"TestPingServer: ok",!0,h):Yn(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),Yn(g,"TestPingServer: error",!1,h)})}function Yn(l,h,g,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(g)}catch{}}function R1(){this.g=new Yc}function au(l){this.i=l.Sb||null,this.h=l.ab||!1}p(au,da),au.prototype.g=function(){return new Ea(this.i,this.h)};function Ea(l,h){ot.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Ea,ot),t=Ea.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,Vi(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||a).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Li(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Vi(this)),this.g&&(this.readyState=3,Vi(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;dm(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function dm(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Li(this):Vi(this),this.readyState==3&&dm(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Li(this))},t.Na=function(l){this.g&&(this.response=l,Li(this))},t.ga=function(){this.g&&Li(this)};function Li(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Vi(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=h.next();return l.join(`\r
`)};function Vi(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ea.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function hm(l){let h="";return K(l,function(g,E){h+=E,h+=":",h+=g,h+=`\r
`}),h}function lu(l,h,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=hm(g),typeof l=="string"?g!=null&&be(g):Re(l,h,g))}function qe(l){ot.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(qe,ot);var D1=/^https?$/i,L1=["POST","PUT"];t=qe.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():B.g(),this.g.onreadystatechange=f(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){fm(this,O);return}if(l=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)g.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const O of E.keys())g.set(O,E.get(O));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),M=a.FormData&&l instanceof a.FormData,!(Array.prototype.indexOf.call(L1,h,void 0)>=0)||E||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,W]of g)this.g.setRequestHeader(O,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(O){fm(this,O)}};function fm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,mm(l),ba(l)}function mm(l){l.A||(l.A=!0,ft(l,"complete"),ft(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,ft(this,"complete"),ft(this,"abort"),ba(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ba(this,!0)),qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?pm(this):this.Xa())},t.Xa=function(){pm(this)};function pm(l){if(l.h&&typeof o<"u"){if(l.v&&Xn(l)==4)setTimeout(l.Ca.bind(l),0);else if(ft(l,"readystatechange"),Xn(l)==4){l.h=!1;try{const O=l.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var E;if(E=O===0){let W=String(l.D).match(sm)[1]||null;!W&&a.self&&a.self.location&&(W=a.self.location.protocol.slice(0,-1)),E=!D1.test(W?W.toLowerCase():"")}g=E}if(g)ft(l,"complete"),ft(l,"success");else{l.o=6;try{var M=Xn(l)>2?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.ca()+"]",mm(l)}}finally{ba(l)}}}}function ba(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,h||ft(l,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Xn(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Xn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),Kc(h)}};function gm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function V1(l){const h={};l=(l.g&&Xn(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(b(l[E]))continue;var g=Pn(l[E]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const O=h[M]||[];h[M]=O,O.push(g)}re(h,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mi(l,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||h}function xm(l){this.za=0,this.i=[],this.j=new Hr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mi("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mi("baseRetryDelayMs",5e3,l),this.Za=Mi("retryDelaySeedMs",1e4,l),this.Ta=Mi("forwardChannelMaxRetries",2,l),this.va=Mi("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Zf(l&&l.concurrentRequestLimit),this.Ba=new R1,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=xm.prototype,t.ka=8,t.I=1,t.connect=function(l,h,g,E){mt(0),this.W=l,this.H=h||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.J=Tm(this,null,this.W),Ta(this)};function cu(l){if(ym(l),l.I==3){var h=l.V++,g=gn(l.J);if(Re(g,"SID",l.M),Re(g,"RID",h),Re(g,"TYPE","terminate"),Oi(l,g),h=new at(l,l.j,h),h.M=2,h.A=ja(gn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(h.A.toString(),"")}catch{}!g&&a.Image&&(new Image().src=h.A,g=!0),g||(h.g=Sm(h.j,null),h.g.ea(h.A)),h.F=Date.now(),_a(h)}Nm(l)}function Na(l){l.g&&(du(l),l.g.cancel(),l.g=null)}function ym(l){Na(l),l.v&&(a.clearTimeout(l.v),l.v=null),Sa(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&a.clearTimeout(l.m),l.m=null)}function Ta(l){if(!em(l.h)&&!l.m){l.m=!0;var h=l.Ea;L||v(),P||(L(),P=!0),w.add(h,l),l.D=0}}function M1(l,h){return tm(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=$r(d(l.Ea,l,h),bm(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const M=new at(this,this.j,l);let O=this.o;if(this.U&&(O?(O=U(O),Y(O,this.U)):O=this.U),this.u!==null||this.R||(M.J=O,O=null),this.S)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,h>4096){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=wm(this,M,h),g=gn(this.J),Re(g,"RID",l),Re(g,"CVER",22),this.G&&Re(g,"X-HTTP-Session-Id",this.G),Oi(this,g),O&&(this.R?h="headers="+be(hm(O))+"&"+h:this.u&&lu(g,this.u,O)),iu(this.h,M),this.Ra&&Re(g,"TYPE","init"),this.S?(Re(g,"$req",h),Re(g,"SID","null"),M.U=!0,Ci(M,g,null)):Ci(M,g,h),this.I=2}}else this.I==3&&(l?vm(this,l):this.i.length==0||em(this.h)||vm(this))};function vm(l,h){var g;h?g=h.l:g=l.V++;const E=gn(l.J);Re(E,"SID",l.M),Re(E,"RID",g),Re(E,"AID",l.K),Oi(l,E),l.u&&l.o&&lu(E,l.u,l.o),g=new at(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),h&&(l.i=h.G.concat(l.i)),h=wm(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),iu(l.h,g),Ci(g,E,h)}function Oi(l,h){l.H&&K(l.H,function(g,E){Re(h,E,g)}),l.l&&K({},function(g,E){Re(h,E,g)})}function wm(l,h,g){g=Math.min(l.i.length,g);const E=l.l?d(l.l.Ka,l.l,l):null;e:{var M=l.i;let fe=-1;for(;;){const tt=["count="+g];fe==-1?g>0?(fe=M[0].g,tt.push("ofs="+fe)):fe=0:tt.push("ofs="+fe);let Ae=!0;for(let lt=0;lt<g;lt++){var O=M[lt].g;const xn=M[lt].map;if(O-=fe,O<0)fe=Math.max(0,M[lt].g-100),Ae=!1;else try{O="req"+O+"_"||"";try{var W=xn instanceof Map?xn:Object.entries(xn);for(const[Gr,Jn]of W){let Zn=Jn;c(Jn)&&(Zn=bi(Jn)),tt.push(O+Gr+"="+encodeURIComponent(Zn))}}catch(Gr){throw tt.push(O+"type="+encodeURIComponent("_badmap")),Gr}}catch{E&&E(xn)}}if(Ae){W=tt.join("&");break e}}W=void 0}return l=l.i.splice(0,g),h.G=l,W}function _m(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;L||v(),P||(L(),P=!0),w.add(h,l),l.A=0}}function uu(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=$r(d(l.Da,l),bm(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,jm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=$r(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,mt(10),Na(this),jm(this))};function du(l){l.B!=null&&(a.clearTimeout(l.B),l.B=null)}function jm(l){l.g=new at(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=gn(l.na);Re(h,"RID","rpc"),Re(h,"SID",l.M),Re(h,"AID",l.K),Re(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&Re(h,"TO",l.ia),Re(h,"TYPE","xmlhttp"),Oi(l,h),l.u&&l.o&&lu(h,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=ja(gn(h)),g.u=null,g.R=!0,va(g,l)}t.Va=function(){this.C!=null&&(this.C=null,Na(this),uu(this),mt(19))};function Sa(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Em(l,h){var g=null;if(l.g==h){Sa(l),du(l),l.g=null;var E=2}else if(su(l.h,h))g=h.G,nm(l.h,h),E=1;else return;if(l.I!=0){if(h.o)if(E==1){g=h.u?h.u.length:0,h=Date.now()-h.F;var M=l.D;E=js(),ft(E,new ga(E,g)),Ta(l)}else _m(l);else if(M=h.m,M==3||M==0&&h.X>0||!(E==1&&M1(l,h)||E==2&&uu(l)))switch(g&&g.length>0&&(h=l.h,h.i=h.i.concat(g)),M){case 1:Qr(l,5);break;case 4:Qr(l,10);break;case 3:Qr(l,6);break;default:Qr(l,2)}}}function bm(l,h){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*h}function Qr(l,h){if(l.j.info("Error code "+h),h==2){var g=d(l.bb,l),E=l.Ua;const M=!E;E=new Kn(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ai(E,"https"),ja(E),M?k1(E.toString(),g):P1(E.toString(),g)}else mt(2);l.I=0,l.l&&l.l.pa(h),Nm(l),ym(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Nm(l){if(l.I=0,l.ja=[],l.l){const h=rm(l.h);(h.length!=0||l.i.length!=0)&&(N(l.ja,h),N(l.ja,l.i),l.h.i.length=0,y(l.i),l.i.length=0),l.l.oa()}}function Tm(l,h,g){var E=g instanceof Kn?gn(g):new Kn(g);if(E.g!="")h&&(E.g=h+"."+E.g),ki(E,E.u);else{var M=a.location;E=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;const O=new Kn(null);E&&Ai(O,E),h&&(O.g=h),M&&ki(O,M),g&&(O.h=g),E=O}return g=l.G,h=l.wa,g&&h&&Re(E,g,h),Re(E,"VER",l.ka),Oi(l,E),E}function Sm(l,h,g){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new qe(new au({ab:g})):new qe(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cm(){}t=Cm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ca(){}Ca.prototype.g=function(l,h){return new zt(l,h)};function zt(l,h){ot.call(this),this.g=new xm(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!b(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!b(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ns(this)}p(zt,ot),zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){cu(this.g)},zt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=bi(l),l=g);h.i.push(new E1(h.Ya++,l)),h.I==3&&Ta(h)},zt.prototype.N=function(){this.g.l=null,delete this.j,cu(this.g),delete this.g,zt.Z.N.call(this)};function Im(l){Ni.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const g in h){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}p(Im,Ni);function Am(){Ti.call(this),this.status=1}p(Am,Ti);function Ns(l){this.g=l}p(Ns,Cm),Ns.prototype.ra=function(){ft(this.g,"a")},Ns.prototype.qa=function(l){ft(this.g,new Im(l))},Ns.prototype.pa=function(l){ft(this.g,new Am)},Ns.prototype.oa=function(){ft(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,Wy=function(){return new Ca},qy=function(){return js()},Hy=kn,th={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Es.NO_ERROR=0,Es.TIMEOUT=8,Es.HTTP_ERROR=6,ml=Es,V.COMPLETE="complete",$y=V,ha.EventType=Br,Br.OPEN="a",Br.CLOSE="b",Br.ERROR="c",Br.MESSAGE="d",ot.prototype.listen=ot.prototype.J,eo=ha,qe.prototype.listenOnce=qe.prototype.K,qe.prototype.getLastError=qe.prototype.Ha,qe.prototype.getLastErrorCode=qe.prototype.ya,qe.prototype.getStatus=qe.prototype.ca,qe.prototype.getResponseJson=qe.prototype.La,qe.prototype.getResponseText=qe.prototype.la,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Fa,zy=qe}).apply(typeof Ga<"u"?Ga:typeof self<"u"?self:typeof window<"u"?window:{});const ag="@firebase/firestore",lg="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xi="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Vy("@firebase/firestore");function Ss(){return us.logLevel}function G(t,...e){if(us.logLevel<=ve.DEBUG){const n=e.map(_f);us.debug(`Firestore (${xi}): ${t}`,...n)}}function Hn(t,...e){if(us.logLevel<=ve.ERROR){const n=e.map(_f);us.error(`Firestore (${xi}): ${t}`,...n)}}function ii(t,...e){if(us.logLevel<=ve.WARN){const n=e.map(_f);us.warn(`Firestore (${xi}): ${t}`,...n)}}function _f(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Qy(t,r,n)}function Qy(t,e,n){let r=`FIRESTORE (${xi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Hn(r),new Error(r)}function Ne(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Qy(e,s,r)}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends gi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}}class sb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ib{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ne(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new _r,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new _r)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string",31837,{l:r}),new Gy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new bt(e)}}class ob{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ab{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ob(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lb{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,UE(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ne(this.o===void 0,3512);const r=o=>{o.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,G("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new cg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new cg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=cb(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function nh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),o=e.charAt(r);if(s!==o)return Hu(s)===Hu(o)?pe(s,o):Hu(s)?1:-1}return pe(t.length,e.length)}const ub=55296,db=57343;function Hu(t){const e=t.charCodeAt(0);return e>=ub&&e<=db}function oi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="__name__";class wn{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=wn.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return pe(e.length,n.length)}static compareSegments(e,n){const r=wn.isNumericId(e),s=wn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?wn.extractNumericId(e).compare(wn.extractNumericId(n)):nh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wr.fromString(e.substring(4,e.length-2))}}class Le extends wn{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const hb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends wn{construct(e,n,r){return new xt(e,n,r)}static isValidIdentifier(e){return hb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ug}static keyField(){return new xt([ug])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Z(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Z(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Z(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(o(),s++)}if(o(),a)throw new Z(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(n)}static emptyPath(){return new xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Le.fromString(e))}static fromName(e){return new te(Le.fromString(e).popFirst(5))}static empty(){return new te(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Le(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(t,e,n){if(!n)throw new Z(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fb(t,e,n,r){if(e===!0&&r===!0)throw new Z(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dg(t){if(!te.isDocumentKey(t))throw new Z(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hg(t){if(te.isDocumentKey(t))throw new Z(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yy(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ef(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se(12329,{type:typeof t})}function rn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ef(t);throw new Z(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(t,e){const n={typeString:t};return e&&(n.value=e),n}function Zo(t,e){if(!Yy(t))throw new Z(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new Z(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=-62135596800,mg=1e6;class Ve{static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*mg);return new Ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<fg)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mg}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zo(e,Ve._jsonSchema))return new Ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ve._jsonSchemaVersion="firestore/timestamp/1.0",Ve._jsonSchema={type:et("string",Ve._jsonSchemaVersion),seconds:et("number"),nanoseconds:et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new Ve(0,0))}static max(){return new le(new Ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=-1;function mb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new Ve(n+1,0):new Ve(n,r));return new Nr(s,te.empty(),e)}function pb(t){return new Nr(t.readTime,t.key,zo)}class Nr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Nr(le.min(),te.empty(),zo)}static max(){return new Nr(le.max(),te.empty(),zo)}}function gb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yi(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==xb)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,o=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++o,a&&o===s&&n()},u=>r(u))}),a=!0,o===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const o=e.length,a=new Array(o);let c=0;for(let u=0;u<o;u++){const d=u;n(e[d]).next(m=>{a[d]=m,++c,c===o&&r(a)},m=>s(m))}})}static doWhile(e,n){return new F((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function vb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Tc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=-1;function Sc(t){return t==null}function Kl(t){return t===0&&1/t==-1/0}function wb(t){return typeof t=="number"&&Number.isInteger(t)&&!Kl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="";function _b(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pg(e)),e=jb(t.get(n),e);return pg(e)}function jb(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case Xy:n+="";break;default:n+=o}}return n}function pg(t){return t+Xy+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){this.comparator=e,this.root=n||gt.EMPTY}insert(e,n){return new He(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gt.BLACK,null,null))}remove(e){return new He(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ka(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ka(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ka(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ka(this.root,e,this.comparator,!0)}}class Ka{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gt{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??gt.RED,this.left=s??gt.EMPTY,this.right=o??gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new gt(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return gt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}}gt.EMPTY=null,gt.RED=!0,gt.BLACK=!1;gt.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xg(this.data.getIterator())}getIteratorFrom(e){return new xg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class xg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new qt([])}unionWith(e){let n=new it(xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new qt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Zy("Invalid base64 string: "+o):o}}(e);return new wt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(e);return new wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const Eb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tr(t){if(Ne(!!t,39018),typeof t=="string"){let e=0;const n=Eb.exec(t);if(Ne(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sr(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="server_timestamp",tv="__type__",nv="__previous_value__",rv="__local_write_time__";function Nf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[tv])==null?void 0:r.stringValue)===ev}function Cc(t){const e=t.mapValue.fields[nv];return Nf(e)?Cc(e):e}function $o(t){const e=Tr(t.mapValue.fields[rv].timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n,r,s,o,a,c,u,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const Yl="(default)";class Ho{constructor(e,n){this.projectId=e,this.database=n||Yl}static empty(){return new Ho("","")}get isDefaultDatabase(){return this.database===Yl}isEqual(e){return e instanceof Ho&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="__type__",Nb="__max__",Ya={mapValue:{}},iv="__vector__",Xl="value";function Cr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nf(t)?4:Sb(t)?9007199254740991:Tb(t)?10:11:se(28295,{value:t})}function Cn(t,e){if(t===e)return!0;const n=Cr(t);if(n!==Cr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $o(t).isEqual($o(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=Tr(s.timestampValue),c=Tr(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Sr(s.bytesValue).isEqual(Sr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return Qe(s.geoPointValue.latitude)===Qe(o.geoPointValue.latitude)&&Qe(s.geoPointValue.longitude)===Qe(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Qe(s.integerValue)===Qe(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=Qe(s.doubleValue),c=Qe(o.doubleValue);return a===c?Kl(a)===Kl(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return oi(t.arrayValue.values||[],e.arrayValue.values||[],Cn);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},c=o.mapValue.fields||{};if(gg(a)!==gg(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Cn(a[u],c[u])))return!1;return!0}(t,e);default:return se(52216,{left:t})}}function qo(t,e){return(t.values||[]).find(n=>Cn(n,e))!==void 0}function ai(t,e){if(t===e)return 0;const n=Cr(t),r=Cr(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(o,a){const c=Qe(o.integerValue||o.doubleValue),u=Qe(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return yg(t.timestampValue,e.timestampValue);case 4:return yg($o(t),$o(e));case 5:return nh(t.stringValue,e.stringValue);case 6:return function(o,a){const c=Sr(o),u=Sr(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const c=o.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=pe(c[d],u[d]);if(m!==0)return m}return pe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const c=pe(Qe(o.latitude),Qe(a.latitude));return c!==0?c:pe(Qe(o.longitude),Qe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vg(t.arrayValue,e.arrayValue);case 10:return function(o,a){var f,y,N,I;const c=o.fields||{},u=a.fields||{},d=(f=c[Xl])==null?void 0:f.arrayValue,m=(y=u[Xl])==null?void 0:y.arrayValue,p=pe(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((I=m==null?void 0:m.values)==null?void 0:I.length)||0);return p!==0?p:vg(d,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Ya.mapValue&&a===Ya.mapValue)return 0;if(o===Ya.mapValue)return 1;if(a===Ya.mapValue)return-1;const c=o.fields||{},u=Object.keys(c),d=a.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const f=nh(u[p],m[p]);if(f!==0)return f;const y=ai(c[u[p]],d[m[p]]);if(y!==0)return y}return pe(u.length,m.length)}(t.mapValue,e.mapValue);default:throw se(23264,{he:n})}}function yg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=Tr(t),r=Tr(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function vg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=ai(n[s],r[s]);if(o)return o}return pe(n.length,r.length)}function li(t){return rh(t)}function rh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Tr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Sr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=rh(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${rh(n.fields[a])}`;return s+"}"}(t.mapValue):se(61005,{value:t})}function pl(t){switch(Cr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cc(t);return e?16+pl(e):16;case 5:return 2*t.stringValue.length;case 6:return Sr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+pl(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Vr(r.fields,(o,a)=>{s+=o.length+pl(a)}),s}(t.mapValue);default:throw se(13486,{value:t})}}function sh(t){return!!t&&"integerValue"in t}function Tf(t){return!!t&&"arrayValue"in t}function wg(t){return!!t&&"nullValue"in t}function _g(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gl(t){return!!t&&"mapValue"in t}function Tb(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sv])==null?void 0:r.stringValue)===iv}function po(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Vr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=po(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=po(t.arrayValue.values[n]);return e}return{...t}}function Sb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Nb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=po(n)}setAll(e){let n=xt.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=po(a):s.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());gl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];gl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Vr(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Lt(po(this.value))}}function ov(t){const e=[];return Vr(t.fields,(n,r)=>{const s=new xt([n]);if(gl(r)){const o=ov(r.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)}),new qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,r,s,o,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Tt(e,0,le.min(),le.min(),le.min(),Lt.empty(),0)}static newFoundDocument(e,n,r,s){return new Tt(e,1,n,le.min(),r,s,0)}static newNoDocument(e,n){return new Tt(e,2,n,le.min(),le.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new Tt(e,3,n,le.min(),le.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n){this.position=e,this.inclusive=n}}function jg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],a=t.position[s];if(o.field.isKeyField()?r=te.comparator(te.fromName(a.referenceValue),n.key):r=ai(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Eg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n="asc"){this.field=e,this.dir=n}}function Cb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{}class rt extends av{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Ab(e,n,r):n==="array-contains"?new Rb(e,r):n==="in"?new Db(e,r):n==="not-in"?new Lb(e,r):n==="array-contains-any"?new Vb(e,r):new rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new kb(e,r):new Pb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ai(n,this.value)):n!==null&&Cr(this.value)===Cr(n)&&this.matchesComparison(ai(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class In extends av{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new In(e,n)}matches(e){return lv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lv(t){return t.op==="and"}function cv(t){return Ib(t)&&lv(t)}function Ib(t){for(const e of t.filters)if(e instanceof In)return!1;return!0}function ih(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+li(t.value);if(cv(t))return t.filters.map(e=>ih(e)).join(",");{const e=t.filters.map(n=>ih(n)).join(",");return`${t.op}(${e})`}}function uv(t,e){return t instanceof rt?function(r,s){return s instanceof rt&&r.op===s.op&&r.field.isEqual(s.field)&&Cn(r.value,s.value)}(t,e):t instanceof In?function(r,s){return s instanceof In&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,a,c)=>o&&uv(a,s.filters[c]),!0):!1}(t,e):void se(19439)}function dv(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${li(n.value)}`}(t):t instanceof In?function(n){return n.op.toString()+" {"+n.getFilters().map(dv).join(" ,")+"}"}(t):"Filter"}class Ab extends rt{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class kb extends rt{constructor(e,n){super(e,"in",n),this.keys=hv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Pb extends rt{constructor(e,n){super(e,"not-in",n),this.keys=hv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class Rb extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tf(n)&&qo(n.arrayValue,this.value)}}class Db extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qo(this.value.arrayValue,n)}}class Lb extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qo(this.value.arrayValue,n)}}class Vb extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n=null,r=[],s=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=a,this.endAt=c,this.Te=null}}function bg(t,e=null,n=[],r=[],s=null,o=null,a=null){return new Mb(t,e,n,r,s,o,a)}function Sf(t){const e=ce(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ih(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Sc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>li(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>li(r)).join(",")),e.Te=n}return e.Te}function Cf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Cb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Eg(t.startAt,e.startAt)&&Eg(t.endAt,e.endAt)}function oh(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n=null,r=[],s=[],o=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ob(t,e,n,r,s,o,a,c){return new Ic(t,e,n,r,s,o,a,c)}function Ac(t){return new Ic(t)}function Ng(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Fb(t){return t.collectionGroup!==null}function go(t){const e=ce(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new it(xt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Zl(o,r))}),n.has(xt.keyField().canonicalString())||e.Ie.push(new Zl(xt.keyField(),r))}return e.Ie}function bn(t){const e=ce(t);return e.Ee||(e.Ee=Ub(e,go(t))),e.Ee}function Ub(t,e){if(t.limitType==="F")return bg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Zl(s.field,o)});const n=t.endAt?new Jl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jl(t.startAt.position,t.startAt.inclusive):null;return bg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ah(t,e,n){return new Ic(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kc(t,e){return Cf(bn(t),bn(e))&&t.limitType===e.limitType}function fv(t){return`${Sf(bn(t))}|lt:${t.limitType}`}function Cs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>dv(s)).join(", ")}]`),Sc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>li(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>li(s)).join(",")),`Target(${r})`}(bn(t))}; limitType=${t.limitType})`}function Pc(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of go(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=jg(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,go(r),s)||r.endAt&&!function(a,c,u){const d=jg(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,go(r),s))}(t,e)}function Bb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mv(t){return(e,n)=>{let r=!1;for(const s of go(t)){const o=zb(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function zb(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(o,a,c){const u=a.data.field(o),d=c.data.field(o);return u!==null&&d!==null?ai(u,d):se(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Vr(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return Jy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=new He(te.comparator);function qn(){return $b}const pv=new He(te.comparator);function to(...t){let e=pv;for(const n of t)e=e.insert(n.key,n);return e}function gv(t){let e=pv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ts(){return xo()}function xv(){return xo()}function xo(){return new xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const Hb=new He(te.comparator),qb=new it(te.comparator);function ge(...t){let e=qb;for(const n of t)e=e.add(n);return e}const Wb=new it(pe);function Qb(){return Wb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kl(e)?"-0":e}}function yv(t){return{integerValue:""+t}}function Gb(t,e){return wb(e)?yv(e):If(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(){this._=void 0}}function Kb(t,e,n){return t instanceof ec?function(s,o){const a={fields:{[tv]:{stringValue:ev},[rv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Nf(o)&&(o=Cc(o)),o&&(a.fields[nv]=o),{mapValue:a}}(n,e):t instanceof Wo?wv(t,e):t instanceof Qo?_v(t,e):function(s,o){const a=vv(s,o),c=Tg(a)+Tg(s.Ae);return sh(a)&&sh(s.Ae)?yv(c):If(s.serializer,c)}(t,e)}function Yb(t,e,n){return t instanceof Wo?wv(t,e):t instanceof Qo?_v(t,e):n}function vv(t,e){return t instanceof tc?function(r){return sh(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ec extends Rc{}class Wo extends Rc{constructor(e){super(),this.elements=e}}function wv(t,e){const n=jv(e);for(const r of t.elements)n.some(s=>Cn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Qo extends Rc{constructor(e){super(),this.elements=e}}function _v(t,e){let n=jv(e);for(const r of t.elements)n=n.filter(s=>!Cn(s,r));return{arrayValue:{values:n}}}class tc extends Rc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Tg(t){return Qe(t.integerValue||t.doubleValue)}function jv(t){return Tf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Xb(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Wo&&s instanceof Wo||r instanceof Qo&&s instanceof Qo?oi(r.elements,s.elements,Cn):r instanceof tc&&s instanceof tc?Cn(r.Ae,s.Ae):r instanceof ec&&s instanceof ec}(t.transform,e.transform)}class Jb{constructor(e,n){this.version=e,this.transformResults=n}}class Ut{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ut}static exists(e){return new Ut(void 0,e)}static updateTime(e){return new Ut(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dc{}function Ev(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lc(t.key,Ut.none()):new ea(t.key,t.data,Ut.none());{const n=t.data,r=Lt.empty();let s=new it(xt.comparator);for(let o of e.fields)if(!s.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),s=s.add(o)}return new Mr(t.key,r,new qt(s.toArray()),Ut.none())}}function Zb(t,e,n){t instanceof ea?function(s,o,a){const c=s.value.clone(),u=Cg(s.fieldTransforms,o,a.transformResults);c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Mr?function(s,o,a){if(!xl(s.precondition,o))return void o.convertToUnknownDocument(a.version);const c=Cg(s.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(bv(s)),u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function yo(t,e,n,r){return t instanceof ea?function(o,a,c,u){if(!xl(o.precondition,a))return c;const d=o.value.clone(),m=Ig(o.fieldTransforms,u,a);return d.setAll(m),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mr?function(o,a,c,u){if(!xl(o.precondition,a))return c;const d=Ig(o.fieldTransforms,u,a),m=a.data;return m.setAll(bv(o)),m.setAll(d),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,a,c){return xl(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function eN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=vv(r.transform,s||null);o!=null&&(n===null&&(n=Lt.empty()),n.set(r.field,o))}return n||null}function Sg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&oi(r,s,(o,a)=>Xb(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ea extends Dc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Mr extends Dc{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function bv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Cg(t,e,n){const r=new Map;Ne(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],a=o.transform,c=e.data.field(o.field);r.set(o.field,Yb(a,c,n[s]))}return r}function Ig(t,e,n){const r=new Map;for(const s of t){const o=s.transform,a=n.data.field(s.field);r.set(s.field,Kb(o,a,e))}return r}class Lc extends Dc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tN extends Dc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&Zb(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=yo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=yo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xv();return this.mutations.forEach(s=>{const o=e.get(s.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=n.has(s.key)?null:c;const u=Ev(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&oi(this.mutations,e.mutations,(n,r)=>Sg(n,r))&&oi(this.baseMutations,e.baseMutations,(n,r)=>Sg(n,r))}}class Af{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ne(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return Hb}();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,r[a].version);return new Af(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,ye;function iN(t){switch(t){case z.OK:return se(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return se(15467,{code:t})}}function Nv(t){if(t===void 0)return Hn("GRPC error has no .code"),z.UNKNOWN;switch(t){case Je.OK:return z.OK;case Je.CANCELLED:return z.CANCELLED;case Je.UNKNOWN:return z.UNKNOWN;case Je.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Je.INTERNAL:return z.INTERNAL;case Je.UNAVAILABLE:return z.UNAVAILABLE;case Je.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Je.NOT_FOUND:return z.NOT_FOUND;case Je.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Je.ABORTED:return z.ABORTED;case Je.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Je.DATA_LOSS:return z.DATA_LOSS;default:return se(39323,{code:t})}}(ye=Je||(Je={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new wr([4294967295,4294967295],0);function Ag(t){const e=oN().encode(t),n=new By;return n.update(e),new Uint8Array(n.digest())}function kg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wr([n,r],0),new wr([s,o],0)]}class kf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new no(`Invalid padding: ${n}`);if(r<0)throw new no(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new no(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new no(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=wr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(wr.fromNumber(r)));return s.compare(aN)===1&&(s=new wr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ag(e),[r,s]=kg(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(r,s,o);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new kf(o,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.ge===0)return;const n=Ag(e),[r,s]=kg(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(r,s,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class no extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ta.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vc(le.min(),s,new He(pe),qn(),ge())}}class ta{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ta(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Tv{constructor(e,n){this.targetId=e,this.Ce=n}}class Sv{constructor(e,n,r=wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Pg{constructor(){this.ve=0,this.Fe=Rg(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ge(),n=ge(),r=ge();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:se(38017,{changeType:o})}}),new ta(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Rg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ne(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lN{constructor(e){this.Ge=e,this.ze=new Map,this.je=qn(),this.Je=Xa(),this.He=Xa(),this.Ye=new He(pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(oh(o))if(r===0){const a=new te(o.path);this.et(n,a,Tt.newNoDocument(a,le.min()))}else Ne(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let a,c;try{a=Sr(r).toUint8Array()}catch(u){if(u instanceof Zy)return ii("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new kf(a,s,o)}catch(u){return ii(u instanceof no?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(n,o,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const c=this.ot(a);if(c){if(o.current&&oh(c.target)){const u=new te(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Tt.newNoDocument(u,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let r=ge();this.He.forEach((o,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const s=new Vc(e,n,this.Ye,this.je,r);return this.je=qn(),this.Je=Xa(),this.He=Xa(),this.Ye=new He(pe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Pg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new it(pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new it(pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Pg),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xa(){return new He(te.comparator)}function Rg(){return new He(te.comparator)}const cN={asc:"ASCENDING",desc:"DESCENDING"},uN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dN={and:"AND",or:"OR"};class hN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lh(t,e){return t.useProto3Json||Sc(e)?e:{value:e}}function nc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fN(t,e){return nc(t,e.toTimestamp())}function Nn(t){return Ne(!!t,49232),le.fromTimestamp(function(n){const r=Tr(n);return new Ve(r.seconds,r.nanos)}(t))}function Pf(t,e){return ch(t,e).canonicalString()}function ch(t,e){const n=function(s){return new Le(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Iv(t){const e=Le.fromString(t);return Ne(Dv(e),10190,{key:e.toString()}),e}function uh(t,e){return Pf(t.databaseId,e.path)}function qu(t,e){const n=Iv(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(kv(n))}function Av(t,e){return Pf(t.databaseId,e)}function mN(t){const e=Iv(t);return e.length===4?Le.emptyPath():kv(e)}function dh(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kv(t){return Ne(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Dg(t,e,n){return{name:uh(t,e),fields:n.value.mapValue.fields}}function pN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:se(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(d,m){return d.useProto3Json?(Ne(m===void 0||typeof m=="string",58123),wt.fromBase64String(m||"")):(Ne(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),wt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const m=d.code===void 0?z.UNKNOWN:Nv(d.code);return new Z(m,d.message||"")}(a);n=new Sv(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=qu(t,r.document.name),o=Nn(r.document.updateTime),a=r.document.createTime?Nn(r.document.createTime):le.min(),c=new Lt({mapValue:{fields:r.document.fields}}),u=Tt.newFoundDocument(s,o,a,c),d=r.targetIds||[],m=r.removedTargetIds||[];n=new yl(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=qu(t,r.document),o=r.readTime?Nn(r.readTime):le.min(),a=Tt.newNoDocument(s,o),c=r.removedTargetIds||[];n=new yl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=qu(t,r.document),o=r.removedTargetIds||[];n=new yl([],o,s,null)}else{if(!("filter"in e))return se(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,a=new sN(s,o),c=r.targetId;n=new Tv(c,a)}}return n}function gN(t,e){let n;if(e instanceof ea)n={update:Dg(t,e.key,e.value)};else if(e instanceof Lc)n={delete:uh(t,e.key)};else if(e instanceof Mr)n={update:Dg(t,e.key,e.data),updateMask:NN(e.fieldMask)};else{if(!(e instanceof tN))return se(16599,{Vt:e.type});n={verify:uh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const c=a.transform;if(c instanceof ec)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Wo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Qo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof tc)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw se(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:fN(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:se(27497)}(t,e.precondition)),n}function xN(t,e){return t&&t.length>0?(Ne(e!==void 0,14353),t.map(n=>function(s,o){let a=s.updateTime?Nn(s.updateTime):Nn(o);return a.isEqual(le.min())&&(a=Nn(o)),new Jb(a,s.transformResults||[])}(n,e))):[]}function yN(t,e){return{documents:[Av(t,e.path)]}}function vN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Av(t,s);const o=function(d){if(d.length!==0)return Rv(In.create(d,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(d){if(d.length!==0)return d.map(m=>function(f){return{field:Is(f.field),direction:jN(f.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=lh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function wN(t){let e=mN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ne(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(p){const f=Pv(p);return f instanceof In&&cv(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(f=>function(N){return new Zl(As(N.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(f))}(n.orderBy));let c=null;n.limit&&(c=function(p){let f;return f=typeof p=="object"?p.value:p,Sc(f)?null:f}(n.limit));let u=null;n.startAt&&(u=function(p){const f=!!p.before,y=p.values||[];return new Jl(y,f)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const f=!p.before,y=p.values||[];return new Jl(y,f)}(n.endAt)),Ob(e,s,a,o,c,"F",u,d)}function _N(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Pv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=As(n.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=As(n.unaryFilter.field);return rt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=As(n.unaryFilter.field);return rt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=As(n.unaryFilter.field);return rt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}}(t):t.fieldFilter!==void 0?function(n){return rt.create(As(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return In.create(n.compositeFilter.filters.map(r=>Pv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return se(1026)}}(n.compositeFilter.op))}(t):se(30097,{filter:t})}function jN(t){return cN[t]}function EN(t){return uN[t]}function bN(t){return dN[t]}function Is(t){return{fieldPath:t.canonicalString()}}function As(t){return xt.fromServerFormat(t.fieldPath)}function Rv(t){return t instanceof rt?function(n){if(n.op==="=="){if(_g(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NAN"}};if(wg(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_g(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NAN"}};if(wg(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Is(n.field),op:EN(n.op),value:n.value}}}(t):t instanceof In?function(n){const r=n.getFilters().map(s=>Rv(s));return r.length===1?r[0]:{compositeFilter:{op:bN(n.op),filters:r}}}(t):se(54877,{filter:t})}function NN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Dv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n,r,s,o=le.min(),a=le.min(),c=wt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.yt=e}}function SN(t){const e=wN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ah(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.Cn=new IN}addToCollectionParentIndex(e,n){return this.Cn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Nr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class IN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new it(Le.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new it(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lv=41943040;class Rt{static withCacheSize(e){return new Rt(e,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(Lv,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ci(0)}static cr(){return new ci(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="LruGarbageCollector",AN=1048576;function Mg([t,e],[n,r]){const s=pe(t,n);return s===0?pe(e,r):s}class kN{constructor(e){this.Ir=e,this.buffer=new it(Mg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Mg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class PN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){G(Vg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vi(n)?G(Vg,"Ignoring IndexedDB error during garbage collection: ",n):await yi(n)}await this.Vr(3e5)})}}class RN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Tc.ce);const r=new kN(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Lg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lg):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,o,a,c,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Ss()<=ve.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:p})))}}function DN(t,e){return new RN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.changes=new xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&yo(r.mutation,s,qt.empty(),Ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=ts();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let a=to();return o.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let o=qn();const a=xo(),c=function(){return xo()}();return n.forEach((u,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof Mr)?o=o.insert(d.key,d):m!==void 0?(a.set(d.key,m.mutation.getFieldMask()),yo(m.mutation,d,m.mutation.getFieldMask(),Ve.now())):a.set(d.key,qt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,m)=>a.set(d,m)),n.forEach((d,m)=>c.set(d,new VN(m,a.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=xo();let s=new He((a,c)=>a-c),o=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||qt.empty();m=c.applyToLocalView(d,m),r.set(u,m);const p=(s.get(c.batchId)||ge()).add(u);s=s.insert(c.batchId,p)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,p=xv();m.forEach(f=>{if(!o.has(f)){const y=Ev(n.get(f),r.get(f));y!==null&&p.set(f,y),o=o.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return F.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Fb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):F.resolve(ts());let c=zo,u=o;return a.next(d=>F.forEach(d,(m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(m)?F.resolve():this.remoteDocumentCache.getEntry(e,m).next(f=>{u=u.insert(m,f)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,ge())).next(m=>({batchId:c,changes:gv(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=to();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let a=to();return this.indexManager.getCollectionParents(e,o).next(c=>F.forEach(c,u=>{const d=function(p,f){return new Ic(f,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((p,f)=>{a=a.insert(p,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(a=>{o.forEach((u,d)=>{const m=d.getKey();a.get(m)===null&&(a=a.insert(m,Tt.newInvalidDocument(m)))});let c=to();return a.forEach((u,d)=>{const m=o.get(u);m!==void 0&&yo(m.mutation,d,qt.empty(),Ve.now()),Pc(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return F.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Nn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:SN(s.bundledQuery),readTime:Nn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.overlays=new He(te.comparator),this.qr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ts();return F.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=ts(),o=n.length+1,a=new te(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new He((d,m)=>d-m);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=o.get(d.largestBatchId);m===null&&(m=ts(),o=o.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=ts(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=s)););return F.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new rN(n,r));let o=this.qr.get(n);o===void 0&&(o=ge(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this.Qr=new it(ct.$r),this.Ur=new it(ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ct(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new ct(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new te(new Le([])),r=new ct(n,e),s=new ct(n,e+1),o=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new te(new Le([])),r=new ct(n,e),s=new ct(n,e+1);let o=ge();return this.Ur.forEachInRange([r,s],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new ct(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ct{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return te.comparator(e.key,n.key)||pe(e.Yr,n.Yr)}static Kr(e,n){return pe(e.Yr,n.Yr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new it(ct.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new nN(o,n,r,s);this.mutationQueue.push(a);for(const c of s)this.Zr=this.Zr.add(new ct(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),o=s<0?0:s;return F.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?bf:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ct(n,0),s=new ct(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],a=>{const c=this.Xr(a.Yr);o.push(c)}),F.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(pe);return n.forEach(s=>{const o=new ct(s,0),a=new ct(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],c=>{r=r.add(c.Yr)})}),F.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;te.isDocumentKey(o)||(o=o.child(""));const a=new ct(new te(o),0);let c=new it(pe);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},a),F.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ne(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return F.forEach(n.mutations,s=>{const o=new ct(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new ct(n,0),s=this.Zr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.ri=e,this.docs=function(){return new He(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let r=qn();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Tt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=qn();const a=n.path,c=new te(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||gb(pb(m),r)<=0||(s.has(m.key)||Pc(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return F.resolve(o)}getAllFromCollectionGroup(e,n,r,s){se(9500)}ii(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $N(this)}getSize(e){return F.resolve(this.size)}}class $N extends LN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.persistence=e,this.si=new xs(n=>Sf(n),Cf),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.oi=0,this._i=new Rf,this.targetCount=0,this.ai=ci.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),F.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ci(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Pr(n),F.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.si.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),F.waitFor(o).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(a=>{o.push(s.markPotentiallyOrphaned(e,a))}),F.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n){this.ui={},this.overlays={},this.ci=new Tc(0),this.li=!1,this.li=!0,this.hi=new UN,this.referenceDelegate=e(this),this.Pi=new HN(this),this.indexManager=new CN,this.remoteDocumentCache=function(s){return new zN(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new TN(n),this.Ii=new ON(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new FN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new BN(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new qN(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(e,n){return F.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class qN extends yb{constructor(e){super(),this.currentSequenceNumber=e}}class Df{constructor(e){this.persistence=e,this.Ri=new Rf,this.Vi=null}static mi(e){return new Df(e)}get fi(){if(this.Vi)return this.Vi;throw se(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,r=>{const s=te.fromPath(r);return this.gi(e,s).next(o=>{o||n.removeEntry(s,le.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class rc{constructor(e,n){this.persistence=e,this.pi=new xs(r=>_b(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=DN(this,n)}static mi(e,n){return new rc(e,n)}Ei(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return F.forEach(this.pi,(r,s)=>this.br(e,r,s).next(o=>o?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(c=>{c||(r++,o.removeEntry(a,le.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pl(e.data.value)),n}br(e,n,r){return F.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ge(),s=ge();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Lf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Mj()?8:vb(Lj())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,s,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new WN;return this.Ss(e,n,a).next(c=>{if(o.result=c,this.Vs)return this.bs(e,n,a,c.size)})}).next(()=>o.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ss()<=ve.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Cs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(Ss()<=ve.DEBUG&&G("QueryEngine","Query:",Cs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ss()<=ve.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Cs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(n))):F.resolve())}ys(e,n){if(Ng(n))return F.resolve(null);let r=bn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ah(n,null,"F"),r=bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=ge(...o);return this.ps.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,a,u.readTime)?this.ys(e,ah(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return Ng(n)||s.isEqual(le.min())?F.resolve(null):this.ps.getDocuments(e,r).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,r,s)?F.resolve(null):(Ss()<=ve.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Cs(n)),this.vs(e,a,n,mb(s,zo)).next(c=>c))})}Ds(e,n){let r=new it(mv(e));return n.forEach((s,o)=>{Pc(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return Ss()<=ve.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Cs(n)),this.ps.getDocumentsMatchingQuery(e,n,Nr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="LocalStore",GN=3e8;class KN{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new He(pe),this.xs=new xs(o=>Sf(o),Cf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function YN(t,e,n,r){return new KN(t,e,n,r)}async function Mv(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],c=[];let u=ge();for(const d of s){a.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of o){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:c}))})})}function XN(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,m){const p=d.batch,f=p.keys();let y=F.resolve();return f.forEach(N=>{y=y.next(()=>m.getEntry(u,N)).next(I=>{const C=d.docVersions.get(N);Ne(C!==null,48541),I.version.compareTo(C)<0&&(p.applyToRemoteDocument(I,d),I.isValidDocument()&&(I.setReadTime(d.commitVersion),m.addEntry(I)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ge();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Ov(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function JN(t,e){const n=ce(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((m,p)=>{const f=s.get(p);if(!f)return;c.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,p)));let y=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(wt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):m.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(m.resumeToken,r)),s=s.insert(p,y),function(I,C,x){return I.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=GN?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,y,m)&&c.push(n.Pi.updateTargetData(o,y))});let u=qn(),d=ge();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(ZN(o,a,e.documentUpdates).next(m=>{u=m.ks,d=m.qs})),!r.isEqual(le.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return F.waitFor(c).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(n.Ms=s,o))}function ZN(t,e,n){let r=ge(),s=ge();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let a=qn();return n.forEach((c,u)=>{const d=o.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(le.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):G(Vf,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:a,qs:s}})}function eT(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=bf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tT(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(o=>o?(s=o,F.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new lr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function hh(t,e,n){const r=ce(t),s=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!vi(a))throw a;G(Vf,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Og(t,e,n){const r=ce(t);let s=le.min(),o=ge();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,m){const p=ce(u),f=p.xs.get(m);return f!==void 0?F.resolve(p.Ms.get(f)):p.Pi.getTargetData(d,m)}(r,a,bn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,c.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:le.min(),n?o:ge())).next(c=>(nT(r,Bb(e),c),{documents:c,Qs:o})))}function nT(t,e,n){let r=t.Os.get(e)||le.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class Fg{constructor(){this.activeTargetIds=Qb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rT{constructor(){this.Mo=new Fg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Fg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="ConnectivityMonitor";class Bg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){G(Ug,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){G(Ug,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja=null;function fh(){return Ja===null?Ja=function(){return 268435456+Math.round(2147483648*Math.random())}():Ja++,"0x"+Ja.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu="RestConnection",iT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oT{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Yl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,o){const a=fh(),c=this.zo(e,n.toUriEncodedString());G(Wu,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,o);const{host:d}=new URL(c),m=vf(d);return this.Jo(e,c,u,r,m).then(p=>(G(Wu,`Received RPC '${e}' ${a}: `,p),p),p=>{throw ii(Wu,`RPC '${e}' ${a} failed with error: `,p,"url: ",c,"request:",r),p})}Ho(e,n,r,s,o,a){return this.Go(e,n,r,s,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}zo(e,n){const r=iT[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="WebChannelConnection";class lT extends oT{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const a=fh();return new Promise((c,u)=>{const d=new zy;d.setWithCredentials(!0),d.listenOnce($y.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ml.NO_ERROR:const p=d.getResponseJson();G(Et,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),c(p);break;case ml.TIMEOUT:G(Et,`RPC '${e}' ${a} timed out`),u(new Z(z.DEADLINE_EXCEEDED,"Request time out"));break;case ml.HTTP_ERROR:const f=d.getStatus();if(G(Et,`RPC '${e}' ${a} failed with status:`,f,"response text:",d.getResponseText()),f>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const N=y==null?void 0:y.error;if(N&&N.status&&N.message){const I=function(x){const _=x.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(_)>=0?_:z.UNKNOWN}(N.status);u(new Z(I,N.message))}else u(new Z(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Z(z.UNAVAILABLE,"Connection failed."));break;default:se(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{G(Et,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(s);G(Et,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",m,r,15)})}T_(e,n,r){const s=fh(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Wy(),c=qy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=o.join("");G(Et,`Creating RPC '${e}' stream ${s}: ${m}`,u);const p=a.createWebChannel(m,u);this.I_(p);let f=!1,y=!1;const N=new aT({Yo:C=>{y?G(Et,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(f||(G(Et,`Opening RPC '${e}' stream ${s} transport.`),p.open(),f=!0),G(Et,`RPC '${e}' stream ${s} sending:`,C),p.send(C))},Zo:()=>p.close()}),I=(C,x,_)=>{C.listen(x,j=>{try{_(j)}catch(k){setTimeout(()=>{throw k},0)}})};return I(p,eo.EventType.OPEN,()=>{y||(G(Et,`RPC '${e}' stream ${s} transport opened.`),N.o_())}),I(p,eo.EventType.CLOSE,()=>{y||(y=!0,G(Et,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(p))}),I(p,eo.EventType.ERROR,C=>{y||(y=!0,ii(Et,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),N.a_(new Z(z.UNAVAILABLE,"The operation could not be completed")))}),I(p,eo.EventType.MESSAGE,C=>{var x;if(!y){const _=C.data[0];Ne(!!_,16349);const j=_,k=(j==null?void 0:j.error)||((x=j[0])==null?void 0:x.error);if(k){G(Et,`RPC '${e}' stream ${s} received error:`,k);const L=k.status;let P=function(T){const A=Je[T];if(A!==void 0)return Nv(A)}(L),w=k.message;P===void 0&&(P=z.INTERNAL,w="Unknown error status: "+L+" with message "+k.message),y=!0,N.a_(new Z(P,w)),p.close()}else G(Et,`RPC '${e}' stream ${s} received:`,_),N.u_(_)}}),I(c,Hy.STAT_EVENT,C=>{C.stat===th.PROXY?G(Et,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===th.NOPROXY&&G(Et,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Qu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t){return new hN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="PersistentStream";class Uv{constructor(e,n,r,s,o,a,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Fv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Hn(n.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Z(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return G(zg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(G(zg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cT extends Uv{constructor(e,n,r,s,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=pN(this.serializer,e),r=function(o){if(!("targetChange"in o))return le.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?le.min():a.readTime?Nn(a.readTime):le.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=dh(this.serializer),n.addTarget=function(o,a){let c;const u=a.target;if(c=oh(u)?{documents:yN(o,u)}:{query:vN(o,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Cv(o,a.resumeToken);const d=lh(o,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(le.min())>0){c.readTime=nc(o,a.snapshotVersion.toTimestamp());const d=lh(o,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=_N(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=dh(this.serializer),n.removeTarget=e,this.q_(n)}}class uT extends Uv{constructor(e,n,r,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=xN(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=dh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>gN(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{}class hT extends dT{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,ch(n,r),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(z.UNKNOWN,o.toString())})}Ho(e,n,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Ho(e,ch(n,r),s,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(z.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class fT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hn(n),this.aa=!1):G("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="RemoteStore";class mT{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{ys(this)&&(G(ds,"Restarting streams for network reachability change."),await async function(u){const d=ce(u);d.Ea.add(4),await na(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Oc(d)}(this))})}),this.Ra=new fT(r,s)}}async function Oc(t){if(ys(t))for(const e of t.da)await e(!0)}async function na(t){for(const e of t.da)await e(!1)}function Bv(t,e){const n=ce(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Uf(n)?Ff(n):wi(n).O_()&&Of(n,e))}function Mf(t,e){const n=ce(t),r=wi(n);n.Ia.delete(e),r.O_()&&zv(n,e),n.Ia.size===0&&(r.O_()?r.L_():ys(n)&&n.Ra.set("Unknown"))}function Of(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wi(t).Y_(e)}function zv(t,e){t.Va.Ue(e),wi(t).Z_(e)}function Ff(t){t.Va=new lN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),wi(t).start(),t.Ra.ua()}function Uf(t){return ys(t)&&!wi(t).x_()&&t.Ia.size>0}function ys(t){return ce(t).Ea.size===0}function $v(t){t.Va=void 0}async function pT(t){t.Ra.set("Online")}async function gT(t){t.Ia.forEach((e,n)=>{Of(t,e)})}async function xT(t,e){$v(t),Uf(t)?(t.Ra.ha(e),Ff(t)):t.Ra.set("Unknown")}async function yT(t,e,n){if(t.Ra.set("Online"),e instanceof Sv&&e.state===2&&e.cause)try{await async function(s,o){const a=o.cause;for(const c of o.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){G(ds,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sc(t,r)}else if(e instanceof yl?t.Va.Ze(e):e instanceof Tv?t.Va.st(e):t.Va.tt(e),!n.isEqual(le.min()))try{const r=await Ov(t.localStore);n.compareTo(r)>=0&&await function(o,a){const c=o.Va.Tt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=o.Ia.get(d);m&&o.Ia.set(d,m.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const m=o.Ia.get(u);if(!m)return;o.Ia.set(u,m.withResumeToken(wt.EMPTY_BYTE_STRING,m.snapshotVersion)),zv(o,u);const p=new lr(m.target,u,d,m.sequenceNumber);Of(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){G(ds,"Failed to raise snapshot:",r),await sc(t,r)}}async function sc(t,e,n){if(!vi(e))throw e;t.Ea.add(1),await na(t),t.Ra.set("Offline"),n||(n=()=>Ov(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(ds,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Oc(t)})}function Hv(t,e){return e().catch(n=>sc(t,n,e))}async function Fc(t){const e=ce(t),n=Ir(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bf;for(;vT(e);)try{const s=await eT(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,wT(e,s)}catch(s){await sc(e,s)}qv(e)&&Wv(e)}function vT(t){return ys(t)&&t.Ta.length<10}function wT(t,e){t.Ta.push(e);const n=Ir(t);n.O_()&&n.X_&&n.ea(e.mutations)}function qv(t){return ys(t)&&!Ir(t).x_()&&t.Ta.length>0}function Wv(t){Ir(t).start()}async function _T(t){Ir(t).ra()}async function jT(t){const e=Ir(t);for(const n of t.Ta)e.ea(n.mutations)}async function ET(t,e,n){const r=t.Ta.shift(),s=Af.from(r,e,n);await Hv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Fc(t)}async function bT(t,e){e&&Ir(t).X_&&await async function(r,s){if(function(a){return iN(a)&&a!==z.ABORTED}(s.code)){const o=r.Ta.shift();Ir(r).B_(),await Hv(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Fc(r)}}(t,e),qv(t)&&Wv(t)}async function $g(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),G(ds,"RemoteStore received new credentials");const r=ys(n);n.Ea.add(3),await na(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Oc(n)}async function NT(t,e){const n=ce(t);e?(n.Ea.delete(2),await Oc(n)):e||(n.Ea.add(2),await na(n),n.Ra.set("Unknown"))}function wi(t){return t.ma||(t.ma=function(n,r,s){const o=ce(n);return o.sa(),new cT(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:pT.bind(null,t),t_:gT.bind(null,t),r_:xT.bind(null,t),H_:yT.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Uf(t)?Ff(t):t.Ra.set("Unknown")):(await t.ma.stop(),$v(t))})),t.ma}function Ir(t){return t.fa||(t.fa=function(n,r,s){const o=ce(n);return o.sa(),new uT(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_T.bind(null,t),r_:bT.bind(null,t),ta:jT.bind(null,t),na:ET.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Fc(t)):(await t.fa.stop(),t.Ta.length>0&&(G(ds,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const a=Date.now()+r,c=new Bf(e,n,a,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zf(t,e){if(Hn("AsyncQueue",`${e}: ${t}`),vi(t))return new Z(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{static emptySet(e){return new Ys(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=to(),this.sortedSet=new He(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ys)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ys;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(){this.ga=new He(te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):se(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ui{constructor(e,n,r,s,o,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,o){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new ui(e,n,Ys.emptySet(n),a,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class ST{constructor(){this.queries=qg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ce(n),o=s.queries;s.queries=qg(),o.forEach((a,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new Z(z.ABORTED,"Firestore shutting down"))}}function qg(){return new xs(t=>fv(t),kc)}async function Qv(t,e){const n=ce(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new TT,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=zf(a,`Initialization of query '${Cs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&$f(n)}async function Gv(t,e){const n=ce(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function CT(t,e){const n=ce(t);let r=!1;for(const s of e){const o=s.query,a=n.queries.get(o);if(a){for(const c of a.Sa)c.Fa(s)&&(r=!0);a.wa=s}}r&&$f(n)}function IT(t,e,n){const r=ce(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function $f(t){t.Ca.forEach(e=>{e.next()})}var mh,Wg;(Wg=mh||(mh={})).Ma="default",Wg.Cache="cache";class Kv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ui(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ui.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this.key=e}}class Xv{constructor(e){this.key=e}}class AT{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ge(),this.mutatedKeys=ge(),this.eu=mv(e),this.tu=new Ys(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Hg,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const f=s.get(m),y=Pc(this.query,p)?p:null,N=!!f&&this.mutatedKeys.has(f.key),I=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let C=!1;f&&y?f.data.isEqual(y.data)?N!==I&&(r.track({type:3,doc:y}),C=!0):this.su(f,y)||(r.track({type:2,doc:y}),C=!0,(u&&this.eu(y,u)>0||d&&this.eu(y,d)<0)&&(c=!0)):!f&&y?(r.track({type:0,doc:y}),C=!0):f&&!y&&(r.track({type:1,doc:f}),C=!0,(u||d)&&(c=!0)),C&&(y?(a=a.add(y),o=I?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:a,iu:r,Cs:c,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,p)=>function(y,N){const I=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{Rt:C})}};return I(y)-I(N)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,a.length!==0||d?{snapshot:new ui(this.query,e.tu,o,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Xv(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Yv(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ui.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hf="SyncEngine";class kT{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class PT{constructor(e){this.key=e,this.hu=!1}}class RT{constructor(e,n,r,s,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new xs(c=>fv(c),kc),this.Iu=new Map,this.Eu=new Set,this.du=new He(te.comparator),this.Au=new Map,this.Ru=new Rf,this.Vu={},this.mu=new Map,this.fu=ci.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function DT(t,e,n=!0){const r=r1(t);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await Jv(r,e,n,!0),s}async function LT(t,e){const n=r1(t);await Jv(n,e,!0,!1)}async function Jv(t,e,n,r){const s=await tT(t.localStore,bn(e)),o=s.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let c;return r&&(c=await VT(t,e,o,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Bv(t.remoteStore,s),c}async function VT(t,e,n,r,s){t.pu=(p,f,y)=>async function(I,C,x,_){let j=C.view.ru(x);j.Cs&&(j=await Og(I.localStore,C.query,!1).then(({documents:w})=>C.view.ru(w,j)));const k=_&&_.targetChanges.get(C.targetId),L=_&&_.targetMismatches.get(C.targetId)!=null,P=C.view.applyChanges(j,I.isPrimaryClient,k,L);return Gg(I,C.targetId,P.au),P.snapshot}(t,p,f,y);const o=await Og(t.localStore,e,!0),a=new AT(e,o.Qs),c=a.ru(o.documents),u=ta.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);Gg(t,n,d.au);const m=new kT(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function MT(t,e,n){const r=ce(t),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter(a=>!kc(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await hh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Mf(r.remoteStore,s.targetId),ph(r,s.targetId)}).catch(yi)):(ph(r,s.targetId),await hh(r.localStore,s.targetId,!0))}async function OT(t,e){const n=ce(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mf(n.remoteStore,r.targetId))}async function FT(t,e,n){const r=WT(t);try{const s=await function(a,c){const u=ce(a),d=Ve.now(),m=c.reduce((y,N)=>y.add(N.key),ge());let p,f;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let N=qn(),I=ge();return u.Ns.getEntries(y,m).next(C=>{N=C,N.forEach((x,_)=>{_.isValidDocument()||(I=I.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,N)).next(C=>{p=C;const x=[];for(const _ of c){const j=eN(_,p.get(_.key).overlayedDocument);j!=null&&x.push(new Mr(_.key,j,ov(j.value.mapValue),Ut.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,x,c)}).next(C=>{f=C;const x=C.applyToLocalDocumentSet(p,I);return u.documentOverlayCache.saveOverlays(y,C.batchId,x)})}).then(()=>({batchId:f.batchId,changes:gv(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Vu[a.currentUser.toKey()];d||(d=new He(pe)),d=d.insert(c,u),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await ra(r,s.changes),await Fc(r.remoteStore)}catch(s){const o=zf(s,"Failed to persist write");n.reject(o)}}async function Zv(t,e){const n=ce(t);try{const r=await JN(n.localStore,e);e.targetChanges.forEach((s,o)=>{const a=n.Au.get(o);a&&(Ne(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Ne(a.hu,14607):s.removedDocuments.size>0&&(Ne(a.hu,42227),a.hu=!1))}),await ra(n,r,e)}catch(r){await yi(r)}}function Qg(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((o,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=ce(a);u.onlineState=c;let d=!1;u.queries.forEach((m,p)=>{for(const f of p.Sa)f.va(c)&&(d=!0)}),d&&$f(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UT(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),o=s&&s.key;if(o){let a=new He(te.comparator);a=a.insert(o,Tt.newNoDocument(o,le.min()));const c=ge().add(o),u=new Vc(le.min(),new Map,new He(pe),a,c);await Zv(r,u),r.du=r.du.remove(o),r.Au.delete(e),qf(r)}else await hh(r.localStore,e,!1).then(()=>ph(r,e,n)).catch(yi)}async function BT(t,e){const n=ce(t),r=e.batch.batchId;try{const s=await XN(n.localStore,e);t1(n,r,null),e1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ra(n,s)}catch(s){await yi(s)}}async function zT(t,e,n){const r=ce(t);try{const s=await function(a,c){const u=ce(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(Ne(p!==null,37113),m=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);t1(r,e,n),e1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ra(r,s)}catch(s){await yi(s)}}function e1(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function t1(t,e,n){const r=ce(t);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function ph(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||n1(t,r)})}function n1(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Mf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),qf(t))}function Gg(t,e,n){for(const r of n)r instanceof Yv?(t.Ru.addReference(r.key,e),$T(t,r)):r instanceof Xv?(G(Hf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||n1(t,r.key)):se(19791,{wu:r})}function $T(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(G(Hf,"New document in limbo: "+n),t.Eu.add(r),qf(t))}function qf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new te(Le.fromString(e)),r=t.fu.next();t.Au.set(r,new PT(n)),t.du=t.du.insert(n,r),Bv(t.remoteStore,new lr(bn(Ac(n.path)),r,"TargetPurposeLimboResolution",Tc.ce))}}async function ra(t,e,n){const r=ce(t),s=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{a.push(r.pu(u,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Lf.As(u.targetId,d);o.push(p)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(u,d){const m=ce(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(d,f=>F.forEach(f.Es,y=>m.persistence.referenceDelegate.addReference(p,f.targetId,y)).next(()=>F.forEach(f.ds,y=>m.persistence.referenceDelegate.removeReference(p,f.targetId,y)))))}catch(p){if(!vi(p))throw p;G(Vf,"Failed to update sequence numbers: "+p)}for(const p of d){const f=p.targetId;if(!p.fromCache){const y=m.Ms.get(f),N=y.snapshotVersion,I=y.withLastLimboFreeSnapshotVersion(N);m.Ms=m.Ms.insert(f,I)}}}(r.localStore,o))}async function HT(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){G(Hf,"User change. New user:",e.toKey());const r=await Mv(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new Z(z.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ra(n,r.Ls)}}function qT(t,e){const n=ce(t),r=n.Au.get(e);if(r&&r.hu)return ge().add(r.key);{let s=ge();const o=n.Iu.get(e);if(!o)return s;for(const a of o){const c=n.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function r1(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UT.bind(null,e),e.Pu.H_=CT.bind(null,e.eventManager),e.Pu.yu=IT.bind(null,e.eventManager),e}function WT(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zT.bind(null,e),e}class ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return YN(this.persistence,new QN,e.initialUser,this.serializer)}Cu(e){return new Vv(Df.mi,this.serializer)}Du(e){return new rT}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ic.provider={build:()=>new ic};class QT extends ic{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ne(this.persistence.referenceDelegate instanceof rc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new PN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new Vv(r=>rc.mi(r,n),this.serializer)}}class gh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HT.bind(null,this.syncEngine),await NT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ST}()}createDatastore(e){const n=Mc(e.databaseInfo.databaseId),r=function(o){return new lT(o)}(e.databaseInfo);return function(o,a,c,u){return new hT(o,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,a,c){return new mT(r,s,o,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Qg(this.syncEngine,n,0),function(){return Bg.v()?new Bg:new sT}())}createSyncEngine(e,n){return function(s,o,a,c,u,d,m){const p=new RT(s,o,a,c,u,d);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=ce(s);G(ds,"RemoteStore shutting down."),o.Ea.add(5),await na(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}gh.provider={build:()=>new gh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="FirestoreClient";class GT{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=bt.UNAUTHENTICATED,this.clientId=jf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{G(Ar,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(G(Ar,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=zf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gu(t,e){t.asyncQueue.verifyOperationInProgress(),G(Ar,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Mv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Kg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await KT(t);G(Ar,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$g(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>$g(e.remoteStore,s)),t._onlineComponents=e}async function KT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(Ar,"Using user provided OfflineComponentProvider");try{await Gu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ii("Error using user provided cache. Falling back to memory cache: "+n),await Gu(t,new ic)}}else G(Ar,"Using default OfflineComponentProvider"),await Gu(t,new QT(void 0));return t._offlineComponents}async function i1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(Ar,"Using user provided OnlineComponentProvider"),await Kg(t,t._uninitializedComponentsProvider._online)):(G(Ar,"Using default OnlineComponentProvider"),await Kg(t,new gh))),t._onlineComponents}function YT(t){return i1(t).then(e=>e.syncEngine)}async function xh(t){const e=await i1(t),n=e.eventManager;return n.onListen=DT.bind(null,e.syncEngine),n.onUnlisten=MT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=LT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OT.bind(null,e.syncEngine),n}function XT(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,c,u,d){const m=new s1({next:f=>{m.Nu(),a.enqueueAndForget(()=>Gv(o,p));const y=f.docs.has(c);!y&&f.fromCache?d.reject(new Z(z.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&f.fromCache&&u&&u.source==="server"?d.reject(new Z(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(f)},error:f=>d.reject(f)}),p=new Kv(Ac(c.path),m,{includeMetadataChanges:!0,qa:!0});return Qv(o,p)}(await xh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="firestore.googleapis.com",Xg=!0;class Jg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Z(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=a1,this.ssl=Xg}else this.host=e.host,this.ssl=e.ssl??Xg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Lv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AN)throw new Z(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=o1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rb;switch(r.type){case"firstParty":return new ab(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Yg.get(n);r&&(G("ComponentProvider","Removing Datastore"),Yg.delete(n),r.terminate())}(this),Promise.resolve()}}function JT(t,e,n,r={}){var d;t=rn(t,Uc);const s=vf(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Aj(`https://${c}`),Dj("Firestore",!0)),o.host!==a1&&o.host!==c&&ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:c,ssl:s,emulatorOptions:r};if(!Wl(u,a)&&(t._setSettings(u),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=bt.MOCK_USER;else{m=kj(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Z(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new bt(f)}t._authCredentials=new sb(new Gy(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bc(this.firestore,e,this._query)}}class Ke{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ke(this.firestore,e,this._key)}toJSON(){return{type:Ke._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Zo(n,Ke._jsonSchema))return new Ke(e,r||null,new te(Le.fromString(n.referencePath)))}}Ke._jsonSchemaVersion="firestore/documentReference/1.0",Ke._jsonSchema={type:et("string",Ke._jsonSchemaVersion),referencePath:et("string")};class jr extends Bc{constructor(e,n,r){super(e,n,Ac(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ke(this.firestore,null,new te(e))}withConverter(e){return new jr(this.firestore,e,this._path)}}function ZT(t,e,...n){if(t=mn(t),Ky("collection","path",e),t instanceof Uc){const r=Le.fromString(e,...n);return hg(r),new jr(t,null,r)}{if(!(t instanceof Ke||t instanceof jr))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return hg(r),new jr(t.firestore,null,r)}}function Qi(t,e,...n){if(t=mn(t),arguments.length===1&&(e=jf.newId()),Ky("doc","path",e),t instanceof Uc){const r=Le.fromString(e,...n);return dg(r),new Ke(t,null,new te(r))}{if(!(t instanceof Ke||t instanceof jr))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return dg(r),new Ke(t.firestore,t instanceof jr?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="AsyncQueue";class e0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Fv(this,"async_queue_retry"),this._c=()=>{const r=Qu();r&&G(Zg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Qu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Qu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new _r;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!vi(e))throw e;G(Zg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Hn("INTERNAL UNHANDLED ERROR: ",t0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Bf.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&se(47125,{Pc:t0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function t0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1}(t,["next","error","complete"])}class kr extends Uc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new e0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e0(e),this._firestoreClient=void 0,await e}}}function r0(t,e){const n=typeof t=="object"?t:HE(),r=typeof t=="string"?t:Yl,s=FE(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=Cj("firestore");o&&JT(s,...o)}return s}function zc(t){if(t._terminated)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eS(t),t._firestoreClient}function eS(t){var r,s,o;const e=t._freezeSettings(),n=function(c,u,d,m){return new bb(c,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,o1(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new GT(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zt(wt.fromBase64String(e))}catch(n){throw new Z(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zt(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zo(e,Zt._jsonSchema))return Zt.fromBase64String(e.bytes)}}Zt._jsonSchemaVersion="firestore/bytes/1.0",Zt._jsonSchema={type:et("string",Zt._jsonSchemaVersion),bytes:et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tn._jsonSchemaVersion}}static fromJSON(e){if(Zo(e,Tn._jsonSchema))return new Tn(e.latitude,e.longitude)}}Tn._jsonSchemaVersion="firestore/geoPoint/1.0",Tn._jsonSchema={type:et("string",Tn._jsonSchemaVersion),latitude:et("number"),longitude:et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Sn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zo(e,Sn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Sn(e.vectorValues);throw new Z(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sn._jsonSchemaVersion="firestore/vectorValue/1.0",Sn._jsonSchema={type:et("string",Sn._jsonSchemaVersion),vectorValues:et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=/^__.*__$/;class nS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ea(e,this.data,n,this.fieldTransforms)}}class l1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function c1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{Ac:t})}}class Qf{constructor(e,n,r,s,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return oc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(c1(this.Ac)&&tS.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rS{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mc(e)}Cc(e,n,r,s=!1){return new Qf({Ac:e,methodName:n,Dc:r,path:xt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gf(t){const e=t._freezeSettings(),n=Mc(t._databaseId);return new rS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function u1(t,e,n,r,s,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);Kf("Data must be an object, but it was:",a,r);const c=f1(r,a);let u,d;if(o.merge)u=new qt(a.fieldMask),d=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const p of o.mergeFields){const f=yh(e,p,n);if(!a.contains(f))throw new Z(z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);p1(m,f)||m.push(f)}u=new qt(m),d=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=a.fieldTransforms;return new nS(new Lt(c),u,d)}class $c extends Wf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $c}}function d1(t,e,n,r){const s=t.Cc(1,e,n);Kf("Data must be an object, but it was:",s,r);const o=[],a=Lt.empty();Vr(r,(u,d)=>{const m=Yf(e,u,n);d=mn(d);const p=s.yc(m);if(d instanceof $c)o.push(m);else{const f=Hc(d,p);f!=null&&(o.push(m),a.set(m,f))}});const c=new qt(o);return new l1(a,c,s.fieldTransforms)}function h1(t,e,n,r,s,o){const a=t.Cc(1,e,n),c=[yh(e,r,n)],u=[s];if(o.length%2!=0)throw new Z(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)c.push(yh(e,o[f])),u.push(o[f+1]);const d=[],m=Lt.empty();for(let f=c.length-1;f>=0;--f)if(!p1(d,c[f])){const y=c[f];let N=u[f];N=mn(N);const I=a.yc(y);if(N instanceof $c)d.push(y);else{const C=Hc(N,I);C!=null&&(d.push(y),m.set(y,C))}}const p=new qt(d);return new l1(m,p,a.fieldTransforms)}function Hc(t,e){if(m1(t=mn(t)))return Kf("Unsupported field value:",e,t),f1(t,e);if(t instanceof Wf)return function(r,s){if(!c1(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const o=[];let a=0;for(const c of r){let u=Hc(c,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=mn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Gb(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ve.fromDate(r);return{timestampValue:nc(s.serializer,o)}}if(r instanceof Ve){const o=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nc(s.serializer,o)}}if(r instanceof Tn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zt)return{bytesValue:Cv(s.serializer,r._byteString)};if(r instanceof Ke){const o=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Pf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Sn)return function(a,c){return{mapValue:{fields:{[sv]:{stringValue:iv},[Xl]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return If(c.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Ef(r)}`)}(t,e)}function f1(t,e){const n={};return Jy(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vr(t,(r,s)=>{const o=Hc(s,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function m1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof Tn||t instanceof Zt||t instanceof Ke||t instanceof Wf||t instanceof Sn)}function Kf(t,e,n){if(!m1(n)||!Yy(n)){const r=Ef(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function yh(t,e,n){if((e=mn(e))instanceof sa)return e._internalPath;if(typeof e=="string")return Yf(t,e);throw oc("Field path arguments must be of type string or ",t,!1,void 0,n)}const sS=new RegExp("[~\\*/\\[\\]]");function Yf(t,e,n){if(e.search(sS)>=0)throw oc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sa(...e.split("."))._internalPath}catch{throw oc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function oc(t,e,n,r,s){const o=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new Z(z.INVALID_ARGUMENT,c+t+u)}function p1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(x1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iS extends g1{data(){return super.data()}}function x1(t,e){return typeof e=="string"?Yf(t,e):e instanceof sa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aS{convertValue(e,n="none"){switch(Cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Vr(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,s,o;const n=(o=(s=(r=e.fields)==null?void 0:r[Xl].arrayValue)==null?void 0:s.values)==null?void 0:o.map(a=>Qe(a.doubleValue));return new Sn(n)}convertGeoPoint(e){return new Tn(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Cc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($o(e));default:return null}}convertTimestamp(e){const n=Tr(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);Ne(Dv(r),9688,{name:e});const s=new Ho(r.get(1),r.get(3)),o=new te(r.popFirst(5));return s.isEqual(n)||Hn(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ro{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ss extends g1{constructor(e,n,r,s,o,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(x1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ss._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",ss._jsonSchema={type:et("string",ss._jsonSchemaVersion),bundleSource:et("string","DocumentSnapshot"),bundleName:et("string"),bundle:et("string")};class vl extends ss{data(e={}){return super.data(e)}}class Xs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ro(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vl(this._firestore,this._userDataWriter,r.key,r,new ro(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new vl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ro(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const u=new vl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ro(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:lS(c.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(t){t=rn(t,Ke);const e=rn(t.firestore,kr);return XT(zc(e),t._key).then(n=>w1(e,t,n))}Xs._jsonSchemaVersion="firestore/querySnapshot/1.0",Xs._jsonSchema={type:et("string",Xs._jsonSchemaVersion),bundleSource:et("string","QuerySnapshot"),bundleName:et("string"),bundle:et("string")};class v1 extends aS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ke(this.firestore,null,n)}}function uS(t,e,n){t=rn(t,Ke);const r=rn(t.firestore,kr),s=y1(t.converter,e,n);return qc(r,[u1(Gf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ut.none())])}function dS(t,e,n,...r){t=rn(t,Ke);const s=rn(t.firestore,kr),o=Gf(s);let a;return a=typeof(e=mn(e))=="string"||e instanceof sa?h1(o,"updateDoc",t._key,e,n,r):d1(o,"updateDoc",t._key,e),qc(s,[a.toMutation(t._key,Ut.exists(!0))])}function hS(t){return qc(rn(t.firestore,kr),[new Lc(t._key,Ut.none())])}function fS(t,...e){var u,d,m;t=mn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||n0(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(n0(e[r])){const p=e[r];e[r]=(u=p.next)==null?void 0:u.bind(p),e[r+1]=(d=p.error)==null?void 0:d.bind(p),e[r+2]=(m=p.complete)==null?void 0:m.bind(p)}let o,a,c;if(t instanceof Ke)a=rn(t.firestore,kr),c=Ac(t._key.path),o={next:p=>{e[r]&&e[r](w1(a,t,p))},error:e[r+1],complete:e[r+2]};else{const p=rn(t,Bc);a=rn(p.firestore,kr),c=p._query;const f=new v1(a);o={next:y=>{e[r]&&e[r](new Xs(a,f,p,y))},error:e[r+1],complete:e[r+2]},oS(t._query)}return function(f,y,N,I){const C=new s1(I),x=new Kv(y,C,N);return f.asyncQueue.enqueueAndForget(async()=>Qv(await xh(f),x)),()=>{C.Nu(),f.asyncQueue.enqueueAndForget(async()=>Gv(await xh(f),x))}}(zc(a),c,s,o)}function qc(t,e){return function(r,s){const o=new _r;return r.asyncQueue.enqueueAndForget(async()=>FT(await YT(r),s,o)),o.promise}(zc(t),e)}function w1(t,e,n){const r=n.docs.get(e._key),s=new v1(t);return new ss(t,s,e._key,r,new ro(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Gf(e)}set(e,n,r){this._verifyNotCommitted();const s=Ku(e,this._firestore),o=y1(s.converter,n,r),a=u1(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,Ut.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=Ku(e,this._firestore);let a;return a=typeof(n=mn(n))=="string"||n instanceof sa?h1(this._dataReader,"WriteBatch.update",o._key,n,r,s):d1(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(a.toMutation(o._key,Ut.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ku(e,this._firestore);return this._mutations=this._mutations.concat(new Lc(n._key,Ut.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ku(t,e){if((t=mn(t)).firestore!==e)throw new Z(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t){return zc(t=rn(t,kr)),new mS(t,e=>qc(t,e))}(function(e,n=!0){(function(s){xi=s})($E),Gl(new Uo("firestore",(r,{instanceIdentifier:s,options:o})=>{const a=r.getProvider("app").getImmediate(),c=new kr(new ib(r.getProvider("auth-internal")),new lb(a,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Z(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(d.options.projectId,m)}(a,s),a);return o={useFetchStreams:n,...o},c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Ks(ag,lg,e),Ks(ag,lg,"esm2020")})();const Za="SPR_TECHFORGE_FIREBASE_CONFIG",s0={apiKey:"AIzaSyDWiI7gQ-sCLiMfoNPAmbqrT_XNAH2SxL8",authDomain:"sprtechforge.firebaseapp.com",projectId:"sprtechforge",storageBucket:"sprtechforge.firebasestorage.app",messagingSenderId:"576106145208",appId:"1:576106145208:web:fcd3c869f30544efca2bcd",measurementId:"G-JN6S6L5KH5"};class gS{constructor(){Aa(this,"app",null);Aa(this,"db",null);Aa(this,"isInitialized",!1);this.tryInit()}tryInit(){try{const e=localStorage.getItem(Za);let n=s0;if(e&&(n=JSON.parse(e)),n.projectId&&n.apiKey)try{this.app=eh(n),this.db=r0(this.app),this.isInitialized=!0,console.log("Firebase Firestore Initialized")}catch(r){console.error("Firebase initialization failed:",r),this.isInitialized=!1}}catch(e){console.error("Failed to initialize firebase",e)}}saveConfig(e){localStorage.setItem(Za,JSON.stringify(e)),window.location.reload()}clearConfig(){localStorage.removeItem(Za),window.location.reload()}isConfigured(){return this.isInitialized&&!!this.db}getConfig(){const e=localStorage.getItem(Za);return e?JSON.parse(e):s0}async testConfig(e){try{const n=JSON.parse(e);if(!n.projectId||!n.apiKey||!n.appId)return{success:!1,error:"Invalid Configuration object. Missing projectId, apiKey, or appId."};const r=eh(n,"testApp"),s=r0(r);try{const o=Qi(s,"system_check","connection_test");await cS(o)}catch(o){if(o.code==="unavailable"||o.code==="failed-precondition")return{success:!1,error:"Could not reach Firebase. Check your internet connection."}}return{success:!0}}catch(n){return{success:!1,error:n.message||"Invalid JSON format."}}}sanitizeData(e){if(e==null)return e;if(Array.isArray(e))return e.map(n=>this.sanitizeData(n));if(typeof e=="object"){if(typeof e.toDate=="function")return e.toDate().toISOString();if("seconds"in e&&"nanoseconds"in e&&Object.keys(e).length<=2)return new Date(e.seconds*1e3).toISOString();if(e.firestore&&typeof e.path=="string")return e.path;const n={};return Object.keys(e).forEach(r=>{n[r]=this.sanitizeData(e[r])}),n}return e}cleanForSave(e){return JSON.parse(JSON.stringify(e))}subscribe(e,n,r){if(!this.db)return()=>{};const s=ZT(this.db,e);return fS(s,a=>{const c=[];a.forEach(u=>{const d=u.data(),m=this.sanitizeData(d);c.push({...m,id:u.id})}),console.log(`Sync: Received ${c.length} items from ${e}`),n(c)},a=>{console.error(`Error subscribing to ${e}:`,a),r&&r(a)})}async saveItem(e,n){if(!this.db)throw new Error("DB not configured");if(!n.id)throw new Error("Item must have an ID");const r=this.cleanForSave(n);await uS(Qi(this.db,e,n.id),r)}async updateItem(e,n,r){if(!this.db)throw new Error("DB not configured");if(!n)throw new Error("ID required for update");const s=this.cleanForSave(r),o=Qi(this.db,e,n);await dS(o,s)}async deleteItem(e,n){if(!this.db)throw new Error("DB not configured");await hS(Qi(this.db,e,n))}async uploadBatch(e,n){if(!this.db)throw new Error("DB not configured");if(n.length===0)return;const r=500;for(let s=0;s<n.length;s+=r){const o=n.slice(s,s+r),a=pS(this.db);o.forEach(c=>{const u=Qi(this.db,e,c.id),d=this.cleanForSave(c);a.set(u,d)}),await a.commit(),console.log(`Uploaded batch of ${o.length} to ${e}`)}}getSchemaSQL(){return"Firestore is a NoSQL database. No Schema definition is required. Collections are created automatically when you add data."}}const Ue=new gS,_1=R.createContext(void 0),Ee=()=>{const t=R.useContext(_1);if(!t)throw new Error("useApp must be used within an AppProvider");return t},i0="SPR_TECHFORGE_FRESH_V9",Yu="SPR_TECHFORGE_SESSION_V4",xS=60*60*1e3,el={id:"admin-01",name:"Thirumal Reddy",username:"thirumalreddy@sprtechforge.com",password:"Shooter@2026",role:"admin",modules:["candidates","finance","users","training"],authProvider:"local",isPasswordChanged:!0},tl=[{id:"cash-01",name:"Office Cash",type:ke.Cash,openingBalance:0,isSystem:!0}],yS=[dt.Training,dt.ReadyForInterview,dt.Placed,dt.Discontinued],vS=({children:t})=>{const[e,n]=R.useState(null),[r,s]=R.useState(!1),[o,a]=R.useState([el]),[c,u]=R.useState([]),[d,m]=R.useState([]),[p,f]=R.useState([]),[y,N]=R.useState(tl),[I,C]=R.useState([]),[x,_]=R.useState(yS),[j,k]=R.useState([]),[L,P]=R.useState([]),[w,v]=R.useState([]),[T,A]=R.useState([]),[S,D]=R.useState([]),[b,oe]=R.useState([]),[ae,Ie]=R.useState([]),[xe,H]=R.useState(null),[K,re]=R.useState(null),[U,ne]=R.useState(!1),Y=Ue.isConfigured(),de=(V,B="success")=>{const q=Date.now().toString();H({id:q,message:V,type:B}),setTimeout(()=>{H(be=>(be==null?void 0:be.id)===q?null:be)},3e3)},Q=(V,B)=>{Y&&Ue.saveItem(V,B).catch(q=>console.error(q))},J=(V,B,q)=>{Y&&Ue.updateItem(V,B,q).catch(be=>console.error(be))},we=(V,B)=>{Y&&Ue.deleteItem(V,B).catch(q=>console.error(q))};R.useEffect(()=>{if(Y){const V=Rn=>{re(Rn.message),ne(!0)},B=Ue.subscribe("users",Rn=>{Rn.length>0?a(Rn):a([el]),ne(!0)},V),q=Ue.subscribe("candidates",u),be=Ue.subscribe("candidateProfiles",m),Pn=Ue.subscribe("interviews",f),at=Ue.subscribe("accounts",Rn=>{Rn.length>0?N(Rn):N(tl)}),xa=Ue.subscribe("transactions",C),ya=Ue.subscribe("trainingModules",v),Si=Ue.subscribe("trainingTopics",A),Ci=Ue.subscribe("trainingLogs",D),va=Ue.subscribe("interviewModules",oe),tu=Ue.subscribe("interviewQuestions",Ie),wa=Ue.subscribe("activityLogs",P);return()=>{B(),q(),be(),Pn(),at(),xa(),ya(),Si(),Ci(),va(),tu(),wa()}}else{try{const V=localStorage.getItem(i0);if(V){const B=JSON.parse(V);a(B.users||[el]),u(B.candidates||[]),m(B.candidateProfiles||[]),f(B.interviews||[]),N(B.accounts||tl),C(B.transactions||[]),v(B.trainingModules||[]),A(B.trainingTopics||[]),D(B.trainingLogs||[]),oe(B.interviewModules||[]),Ie(B.interviewQuestions||[]),P(B.activityLogs||[])}else a([el]),N(tl)}catch{}ne(!0)}},[Y]),R.useEffect(()=>{if(U&&!e){const V=localStorage.getItem(Yu);if(V)try{const B=JSON.parse(V);if(Date.now()-B.timestamp<xS){const q=o.find(be=>be.id===B.userId);q&&n(q)}}catch{}s(!0)}},[U,o]),R.useEffect(()=>{if(!Y&&U)try{localStorage.setItem(i0,JSON.stringify({users:o,candidates:c,candidateProfiles:d,interviews:p,accounts:y,transactions:I,trainingModules:w,trainingTopics:T,trainingLogs:S,interviewModules:b,interviewQuestions:ae,activityLogs:L}))}catch(V){V instanceof DOMException&&V.name==="QuotaExceededError"&&de("Browser Storage Full. Some data may not be saved locally.","error")}},[o,c,d,p,y,I,w,T,S,b,ae,L,Y,U]);const Fr=async(V,B)=>{if(!V||!B)return{success:!1,message:"Missing credentials"};const q=o.find(be=>be.username.toLowerCase()===V.toLowerCase());return q&&q.password===B?(n(q),localStorage.setItem(Yu,JSON.stringify({userId:q.id,timestamp:Date.now()})),{success:!0}):{success:!1,message:"Invalid credentials"}},pn=()=>{n(null),localStorage.removeItem(Yu)},An=V=>{a(B=>[...B,V]),Q("users",V)},Wc=V=>{a(B=>B.map(q=>q.id===V.id?V:q)),J("users",V.id,V),(e==null?void 0:e.id)===V.id&&n(V)},ia=V=>{a(B=>B.filter(q=>q.id!==V)),we("users",V)},_i=V=>{u(B=>[...B,V]),Q("candidates",V)},ws=V=>{u(B=>B.map(q=>q.id===V.id?V:q)),J("candidates",V.id,V)},Qc=V=>{u(B=>B.filter(q=>q.id!==V)),we("candidates",V)},ji=V=>{d.find(q=>q.candidateId===V.candidateId)?(m(q=>q.map(be=>be.candidateId===V.candidateId?V:be)),Y&&Ue.saveItem("candidateProfiles",{...V,id:V.candidateId})):(m(q=>[...q,V]),Y&&Ue.saveItem("candidateProfiles",{...V,id:V.candidateId}))},Ei=V=>{f(B=>[...B,V]),Q("interviews",V)},oa=V=>{f(B=>B.map(q=>q.id===V.id?V:q)),J("interviews",V.id,V)},ot=V=>{f(B=>B.filter(q=>q.id!==V)),we("interviews",V)},ft=V=>{N(B=>[...B,V]),Q("accounts",V)},_s=V=>{N(B=>B.map(q=>q.id===V.id?V:q)),J("accounts",V.id,V)},Gc=V=>{N(B=>B.filter(q=>q.id!==V)),we("accounts",V)},aa=V=>{C(B=>[...B,V]),Q("transactions",V)},la=V=>{C(B=>B.map(q=>q.id===V.id?V:q)),J("transactions",V.id,V)},Ur=V=>{C(B=>B.filter(q=>q.id!==V)),we("transactions",V)},ca=V=>{const B=I.find(q=>q.id===V);B&&la({...B,isLocked:!0})},ua=()=>{P([])},bi=V=>{v(B=>[...B,V]),Q("trainingModules",V)},Kc=V=>{v(B=>B.map(q=>q.id===V.id?V:q)),J("trainingModules",V.id,V)},Yc=V=>{v(B=>B.filter(q=>q.id!==V)),we("trainingModules",V)},da=V=>{A(B=>[...B,V]),Q("trainingTopics",V)},ha=V=>{A(B=>B.map(q=>q.id===V.id?V:q)),J("trainingTopics",V.id,V)},Br=V=>{A(B=>B.filter(q=>q.id!==V)),we("trainingTopics",V)},Ni=V=>{D(B=>[...B,V]),Q("trainingLogs",V)},Ti=V=>{D(B=>{const q=[...B];return V.forEach(be=>{const Pn=q.findIndex(at=>at.id===be.id);Pn>=0?q[Pn]=be:q.push(be)}),q}),Y&&Ue.uploadBatch("trainingLogs",V)},kn=V=>{oe(B=>[...B,V]),Q("interviewModules",V)},fa=V=>{oe(B=>B.map(q=>q.id===V.id?V:q)),J("interviewModules",V.id,V)},js=V=>{oe(B=>B.filter(q=>q.id!==V)),we("interviewModules",V)},ma=V=>{Ie(B=>[...B,V]),Q("interviewQuestions",V)},zr=V=>{Ie(B=>B.map(q=>q.id===V.id?V:q)),J("interviewQuestions",V.id,V)},pa=V=>{Ie(B=>B.filter(q=>q.id!==V)),we("interviewQuestions",V)},mt=V=>{x.includes(V)||_(B=>[...B,V])},ga=V=>ws({...c.find(B=>B.id===V),agreementSentDate:new Date().toISOString()}),$r=V=>ws({...c.find(B=>B.id===V),agreementAcceptedDate:new Date().toISOString()}),Hr=V=>{const B={id:Bt(),username:V,requestDate:new Date().toISOString(),status:"pending"};k(q=>[...q,B]),Q("passwordResetRequests",B)},Xc=V=>{k(B=>B.filter(q=>q.id!==V)),we("passwordResetRequests",V)},Jc=(V,B)=>{var q,be,Pn;return B==="Account"?((q=y.find(at=>at.id===V))==null?void 0:q.name)||"Unknown":B==="Candidate"?((be=c.find(at=>at.id===V))==null?void 0:be.name)||"Unknown":((Pn=o.find(at=>at.id===V))==null?void 0:Pn.name)||"Unknown"},Gn=(V,B)=>{var q;return Zi(V,B,I,((q=y.find(be=>be.id===V))==null?void 0:q.openingBalance)||0)},Zc=()=>{xj({users:o,candidates:c,accounts:y,transactions:I},"backup.json")},eu=async V=>{},Es=async()=>{};return i.jsx(_1.Provider,{value:{user:e,login:Fr,logout:pn,isInitialized:r,toast:xe,showToast:de,users:o,addUser:An,updateUser:Wc,deleteUser:ia,candidates:c,addCandidate:_i,updateCandidate:ws,deleteCandidate:Qc,candidateProfiles:d,updateCandidateProfile:ji,interviews:p,addInterview:Ei,updateInterview:oa,deleteInterview:ot,accounts:y,addAccount:ft,updateAccount:_s,deleteAccount:Gc,transactions:I,addTransaction:aa,updateTransaction:la,deleteTransaction:Ur,lockTransaction:ca,trainingModules:w,addTrainingModule:bi,updateTrainingModule:Kc,deleteTrainingModule:Yc,trainingTopics:T,addTrainingTopic:da,updateTrainingTopic:ha,deleteTrainingTopic:Br,trainingLogs:S,addTrainingLog:Ni,batchUpdateTrainingLogs:Ti,interviewModules:b,addInterviewModule:kn,updateInterviewModule:fa,deleteInterviewModule:js,interviewQuestions:ae,addInterviewQuestion:ma,updateInterviewQuestion:zr,deleteInterviewQuestion:pa,candidateStatuses:x,addCandidateStatus:mt,passwordResetRequests:j,addPasswordResetRequest:Hr,resolvePasswordResetRequest:Xc,activityLogs:L,clearActivityLogs:ua,markAgreementSent:ga,markAgreementAccepted:$r,getEntityName:Jc,getEntityBalance:Gn,exportData:Zc,importDatabase:eu,isCloudEnabled:Y,syncLocalToCloud:Es,cloudError:K},children:t})},ue=({children:t,className:e="",title:n,action:r})=>i.jsxs("div",{className:`bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden ${e}`,children:[(n||r)&&i.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[n&&i.jsx("h3",{className:"text-lg font-bold text-gray-800",children:n}),r&&i.jsx("div",{children:r})]}),i.jsx("div",{className:"p-6 text-gray-600",children:t})]}),ee=({children:t,variant:e="primary",className:n="",...r})=>{const s="px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white shadow-sm",o={primary:"bg-spr-accent hover:bg-spr-accent_hover text-white focus:ring-blue-500",secondary:"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-gray-200",danger:"bg-spr-danger hover:bg-red-700 text-white focus:ring-red-500",success:"bg-spr-success hover:bg-emerald-700 text-white focus:ring-emerald-500"};return i.jsx("button",{className:`${s} ${o[e]} ${n} disabled:opacity-50 disabled:cursor-not-allowed`,...r,children:t})},Or=({className:t=""})=>{const e=Ct();return i.jsxs("button",{onClick:()=>e(-1),className:`flex items-center text-gray-500 hover:text-gray-800 transition-colors ${t}`,title:"Go Back",children:[i.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),i.jsx("span",{className:"text-sm font-medium",children:"Back"})]})},ie=({label:t,numericOnly:e,className:n="",onChange:r,...s})=>{const[o,a]=R.useState(!1),c=()=>s.type==="number"&&o&&Number(s.value)===0?"":s.value,u=d=>{if(e){const m=d.target.value.replace(/[^0-9]/g,"");d.target.value!==m&&(d.target.value=m)}r&&r(d)};return i.jsxs("div",{className:"mb-4",children:[t&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),i.jsx("input",{className:`w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 placeholder-gray-400 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors shadow-sm ${n}`,...s,onChange:u,value:c(),onFocus:d=>{a(!0),s.onFocus&&s.onFocus(d)},onBlur:d=>{a(!1),s.onBlur&&s.onBlur(d)}})]})},ac=({label:t,children:e,className:n="",...r})=>i.jsxs("div",{className:"mb-4",children:[t&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),i.jsx("select",{className:`w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors shadow-sm ${n}`,...r,children:e})]}),Xf=({currentPage:t,totalPages:e,onPageChange:n})=>e<=1?null:i.jsxs("div",{className:"flex justify-center items-center gap-2 mt-6",children:[i.jsx(ee,{variant:"secondary",disabled:t===1,onClick:()=>n(t-1),className:"px-3 py-1 text-sm",children:"Prev"}),i.jsxs("span",{className:"text-gray-600 text-sm font-medium",children:["Page ",t," of ",e]}),i.jsx(ee,{variant:"secondary",disabled:t===e,onClick:()=>n(t+1),className:"px-3 py-1 text-sm",children:"Next"})]}),Qt=({isOpen:t,onClose:e,title:n,children:r,size:s="md"})=>{if(R.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const o={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl","2xl":"max-w-6xl",full:"max-w-[95vw]"}[s];return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:i.jsxs("div",{className:`bg-white border border-gray-200 rounded-xl shadow-2xl w-full ${o} max-h-[90vh] overflow-y-auto transform transition-all scale-100 flex flex-col`,children:[i.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 sticky top-0 bg-white z-10 shrink-0",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n}),i.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors p-1 rounded hover:bg-gray-100",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"p-6 text-gray-600 flex-1 overflow-y-auto",children:r})]})})},vs=({isOpen:t,onClose:e,onConfirm:n,title:r,message:s})=>i.jsx(Qt,{isOpen:t,onClose:e,title:r,children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:s}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(ee,{variant:"secondary",onClick:e,children:"Cancel"}),i.jsx(ee,{variant:"danger",onClick:()=>{n(),e()},children:"Delete"})]})]})}),wS=()=>{const{toast:t}=Ee();if(!t)return null;const e=t.type==="success"?"bg-emerald-600":t.type==="error"?"bg-red-600":"bg-blue-600",n=t.type==="success"?i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):t.type==="error"?i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});return i.jsx("div",{className:"fixed top-4 right-4 z-[100] animate-fade-in",children:i.jsxs("div",{className:`${e} text-white px-4 py-3 rounded-lg shadow-xl flex items-center gap-3 min-w-[300px]`,children:[i.jsx("div",{className:"shrink-0",children:n}),i.jsx("span",{className:"font-medium text-sm",children:t.message})]})})},di=({size:t="sm"})=>i.jsxs("div",{className:`flex items-center gap-3 ${t==="lg"?"flex-col":""}`,children:[i.jsx("div",{className:`relative flex items-center justify-center bg-gradient-to-br from-blue-600 to-indigo-900 rounded-lg shadow-lg shadow-blue-200 transform rotate-3 transition-transform ${t==="lg"?"w-20 h-20":"w-10 h-10"}`,children:i.jsx("svg",{className:"text-white w-3/5 h-3/5 transform -rotate-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),i.jsxs("div",{className:`font-bold tracking-tight text-gray-900 ${t==="lg"?"text-3xl":"text-xl"}`,children:["SPR ",i.jsx("span",{className:"text-spr-accent",children:"Techforge"})]})]}),Xe=({to:t,icon:e,label:n,onClick:r})=>{const s=ps();s.pathname===t||s.pathname.startsWith(t);const o=s.pathname===t;return i.jsxs(nn,{to:t,onClick:r,className:`flex items-center gap-3 px-4 py-2.5 rounded-lg transition-colors mb-1 font-medium text-sm ${o?"bg-spr-accent text-white shadow-md":"text-gray-600 hover:bg-spr-50 hover:text-spr-900"}`,children:[e&&i.jsx("span",{className:"shrink-0",children:e}),i.jsx("span",{children:n})]})},Gi=({title:t,icon:e,initialOpen:n,children:r})=>{const[s,o]=R.useState(n);return i.jsxs("div",{className:"mb-2",children:[i.jsxs("button",{onClick:()=>o(!s),className:`w-full flex items-center justify-between px-4 py-3 text-gray-700 hover:bg-spr-50 rounded-lg transition-colors group ${s?"bg-spr-50":""}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`text-gray-500 group-hover:text-spr-600 ${s?"text-spr-600":""}`,children:e}),i.jsx("span",{className:`text-sm ${s?"font-bold text-gray-900":"font-medium"}`,children:t})]}),i.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${s?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i.jsx("div",{className:`overflow-hidden transition-all duration-300 ${s?"max-h-[500px] opacity-100 mt-1":"max-h-0 opacity-0"}`,children:i.jsx("div",{className:"pl-4 border-l-2 border-spr-100 ml-6 space-y-1",children:r})})]})},Ce=({children:t})=>{const{user:e,logout:n}=Ee(),[r,s]=R.useState(!1);ps();const o=Ct();if(!e)return i.jsx(i.Fragment,{children:t});const a=()=>s(!1),c=()=>{n(),o("/")};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col md:flex-row",children:[i.jsxs("div",{className:"md:hidden bg-white border-b border-gray-200 p-4 flex justify-between items-center sticky top-0 z-20",children:[i.jsx(di,{size:"sm"}),i.jsx("button",{onClick:()=>s(!r),className:"text-gray-600",children:i.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:r?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]}),i.jsxs("aside",{className:`bg-white border-r border-gray-200 flex-shrink-0 fixed md:static inset-y-0 left-0 z-30 w-64 transform transition-transform duration-300 ${r?"translate-x-0 shadow-2xl":"-translate-x-full md:translate-x-0"}`,children:[i.jsx("div",{className:"p-6 border-b border-gray-100 hidden md:block",children:i.jsx(di,{})}),i.jsxs("nav",{className:"p-4 overflow-y-auto h-[calc(100vh-80px)]",children:[e.role!=="candidate"?i.jsxs(i.Fragment,{children:[i.jsxs(Gi,{title:"Overview",icon:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),initialOpen:!1,children:[i.jsx(Xe,{to:"/dashboard",label:"Dashboard",onClick:a}),i.jsx(Xe,{to:"/address-book",label:"Address Book",onClick:a})]}),i.jsxs(Gi,{title:"Candidates",icon:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),initialOpen:!1,children:[i.jsx(Xe,{to:"/candidates",label:"Candidate List",onClick:a}),i.jsx(Xe,{to:"/candidates/info",label:"Candidate Info (Profile)",onClick:a})]}),i.jsxs(Gi,{title:"Training & Placement",icon:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),initialOpen:!1,children:[i.jsx(Xe,{to:"/training/interviews",label:"Interviews & Resumes",onClick:a}),i.jsx(Xe,{to:"/training/monitor",label:"Progress Monitor",onClick:a}),i.jsx(Xe,{to:"/training/attendance",label:"Class Attendance",onClick:a}),i.jsx(Xe,{to:"/training/curriculum",label:"Curriculum",onClick:a}),i.jsx(Xe,{to:"/training/interview-questions",label:"Interview Prep",onClick:a})]}),i.jsxs(Gi,{title:"Finance",icon:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),initialOpen:!1,children:[i.jsx(Xe,{to:"/finance/transactions",label:"Transactions",onClick:a}),i.jsx(Xe,{to:"/finance/accounts",label:"Ledger Accounts",onClick:a}),i.jsx(Xe,{to:"/finance/payroll",label:"Payroll",onClick:a}),i.jsx(Xe,{to:"/finance/financial-statements",label:"Reports",onClick:a})]}),i.jsxs(Gi,{title:"Administration",icon:i.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),initialOpen:!1,children:[i.jsx(Xe,{to:"/admin/users",label:"User Management",onClick:a}),i.jsx(Xe,{to:"/admin/logs",label:"System Logs",onClick:a}),i.jsx(Xe,{to:"/admin/cloud",label:"Cloud Setup",onClick:a})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"px-4 mb-2 text-xs font-bold text-gray-400 uppercase",children:"Student Portal"}),i.jsx(Xe,{to:"/candidates/info",label:"My Profile",onClick:a}),i.jsx(Xe,{to:"/training/dashboard",label:"Training Dashboard",onClick:a}),i.jsx(Xe,{to:"/training/interview-questions",label:"Interview Prep",onClick:a}),i.jsx(Xe,{to:"/training/curriculum",label:"Curriculum",onClick:a})]}),i.jsxs("div",{className:"mt-8 px-4 pb-4",children:[i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-100 mb-3",children:[i.jsx("p",{className:"text-sm font-bold text-gray-800 truncate",children:e.name}),i.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e.role})]}),i.jsx(ee,{variant:"danger",className:"w-full text-sm",onClick:c,children:"Sign Out"})]})]})]}),i.jsx("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto h-[calc(100vh-64px)] md:h-screen w-full",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:t})})]})},_S=()=>{const{login:t,updateUser:e,user:n,isCloudEnabled:r,cloudError:s,addPasswordResetRequest:o,showToast:a}=Ee(),c=Ct(),[u,d]=R.useState(""),[m,p]=R.useState(""),[f,y]=R.useState(""),[N,I]=R.useState(!1),[C,x]=R.useState(!1),[_,j]=R.useState(""),[k,L]=R.useState(""),[P,w]=R.useState(!1),[v,T]=R.useState(""),[A,S]=R.useState("");R.useEffect(()=>{n&&n.isPasswordChanged!==!1?c("/dashboard"):n&&n.isPasswordChanged===!1&&x(!0)},[n,c]);const D=async ae=>{ae.preventDefault(),I(!0),y("");const Ie=await t(u,m);Ie.success?(a("Login successful"),I(!1)):(y(Ie.message||"Login failed"),I(!1))},b=ae=>{if(ae.preventDefault(),_!==k){y("Passwords do not match");return}if(_.length<4){y("Password is too short");return}if(_===(n==null?void 0:n.name)){y("New password cannot be the same as your name");return}n&&(e({...n,password:_,isPasswordChanged:!0}),a("Password updated successfully. You are now logged in."))},oe=ae=>{ae.preventDefault(),v.trim()&&(o(v),S("Request sent to Admin. Please contact Thirumal Reddy for your new password."),setTimeout(()=>{w(!1),S(""),T("")},4e3))};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4 relative overflow-hidden",children:[i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 bg-slate-50",children:[i.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-96 h-96 bg-blue-200/50 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-96 h-96 bg-indigo-200/50 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute top-[40%] left-[40%] w-72 h-72 bg-sky-100/40 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"w-full max-w-md z-20",children:[i.jsx("div",{className:"mb-4",children:i.jsxs(nn,{to:"/",className:"inline-flex items-center text-gray-500 hover:text-spr-600 transition-colors text-sm font-medium",children:[i.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Website"]})}),s&&i.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-lg shadow-sm animate-fade-in",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("svg",{className:"w-6 h-6 text-red-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-red-800 font-bold text-sm",children:"Connectivity Issue"}),i.jsx("p",{className:"text-red-600 text-sm",children:s}),s.includes("Permission")&&i.jsx("button",{onClick:()=>c("/admin/cloud"),className:"text-xs text-red-700 underline mt-1",children:"Go to Cloud Setup for fix"})]})]})}),i.jsxs("div",{className:"bg-white/80 border border-white/50 p-8 rounded-2xl shadow-2xl relative backdrop-blur-md",children:[i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx(di,{size:"lg"})}),C?i.jsxs("div",{className:"animate-fade-in",children:[i.jsx("h2",{className:"text-2xl font-bold text-center text-slate-800 mb-2",children:"Secure Your Account"}),i.jsx("p",{className:"text-center text-slate-500 mb-6 text-sm",children:"This is your first login. Please set a new, secure password to continue to the dashboard."}),i.jsxs("form",{onSubmit:b,children:[i.jsx(ie,{label:"New Password",type:"password",value:_,onChange:ae=>j(ae.target.value),required:!0}),i.jsx(ie,{label:"Confirm Password",type:"password",value:k,onChange:ae=>L(ae.target.value),required:!0}),f&&i.jsx("p",{className:"text-red-500 text-sm mb-4 text-center",children:f}),i.jsx(ee,{type:"submit",className:"w-full py-3 text-lg shadow-lg shadow-blue-100",children:"Update Password & Login"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("h2",{className:"text-2xl font-bold text-center text-slate-800 mb-2",children:"Portal Login"}),i.jsx("p",{className:"text-center text-slate-500 mb-6",children:"Sign in to manage SPR Techforge"}),i.jsxs("form",{onSubmit:D,children:[i.jsx(ie,{label:"Username / Login ID",value:u,onChange:ae=>d(ae.target.value),placeholder:"e.g. name@sprtechforge.com"}),i.jsx(ie,{label:"Password",type:"password",value:m,onChange:ae=>p(ae.target.value),placeholder:"Enter password"}),f&&i.jsx("p",{className:"text-red-500 text-sm mb-4 text-center",children:f}),i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsx("button",{type:"button",onClick:()=>w(!0),className:"text-sm text-spr-accent hover:text-spr-accent_hover hover:underline font-medium",children:"Forgot Password?"})}),i.jsx(ee,{type:"submit",className:"w-full py-3 text-lg shadow-lg shadow-blue-100 hover:shadow-blue-200",disabled:N,children:N?"Authenticating...":"Login"})]})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-xs text-slate-400",children:[" 2025 SPR Techforge Pvt Ltd. All rights reserved.",r&&i.jsxs("span",{className:"block mt-1 text-slate-500 font-bold flex items-center justify-center gap-1",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})," Cloud Connected"]})]})})]})]}),i.jsx(Qt,{isOpen:P,onClose:()=>w(!1),title:"Reset Password",children:A?i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"text-spr-accent font-bold text-lg mb-2",children:"Request Sent"}),i.jsx("p",{className:"text-gray-600",children:A})]}):i.jsxs("form",{onSubmit:oe,children:[i.jsx("p",{className:"text-gray-600 mb-4",children:"Enter your Login ID below. The administrator will be notified to reset your password."}),i.jsx(ie,{label:"Your Username / Login ID",value:v,onChange:ae=>T(ae.target.value),placeholder:"e.g. john@sprtechforge.com",required:!0}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(ee,{type:"button",variant:"secondary",onClick:()=>w(!1),children:"Cancel"}),i.jsx(ee,{type:"submit",children:"Send Request"})]})]})})]})},jS=()=>{const t=Ct(),[e,n]=R.useState(!1),[r,s]=R.useState(null);R.useEffect(()=>{const a=()=>{n(window.scrollY>20)};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[]);const o=()=>{var a;(a=document.getElementById("contact"))==null||a.scrollIntoView({behavior:"smooth"})};return i.jsxs("div",{className:"min-h-screen bg-white font-sans text-gray-900",children:[i.jsx("nav",{className:`fixed w-full z-50 transition-all duration-300 ${e?"bg-white shadow-md py-2":"bg-transparent py-4"}`,children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:"flex items-center",children:i.jsx(di,{size:"sm"})}),i.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[i.jsx("a",{href:"#",className:"text-sm font-medium text-gray-700 hover:text-spr-600 transition-colors",children:"Services"}),i.jsx("a",{href:"#",className:"text-sm font-medium text-gray-700 hover:text-spr-600 transition-colors",children:"Industries"}),i.jsx("a",{href:"#",className:"text-sm font-medium text-gray-700 hover:text-spr-600 transition-colors",children:"Insights"}),i.jsx("button",{onClick:()=>s("careers"),className:"text-sm font-medium text-gray-700 hover:text-spr-600 transition-colors",children:"Careers"})]}),i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("button",{onClick:o,className:"text-sm font-bold text-gray-900 hover:text-spr-600 transition-colors uppercase tracking-wide",children:"Contact Us"}),i.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),i.jsx(ee,{onClick:()=>t("/login"),className:"bg-spr-900 hover:bg-spr-800 text-white px-6 rounded-full shadow-lg transform hover:scale-105 transition-all",children:"Login"})]})]})})}),i.jsxs("header",{className:"relative bg-spr-900 h-[600px] flex items-center overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-spr-900 via-blue-900 to-indigo-900 opacity-90"}),i.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-30"}),i.jsx("div",{className:"absolute top-0 right-0 w-2/3 h-full bg-gradient-to-l from-blue-500/20 to-transparent transform skew-x-12 translate-x-20"})]}),i.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full pt-16",children:i.jsxs("div",{className:"max-w-3xl animate-fade-in",children:[i.jsx("h2",{className:"text-spr-300 font-bold tracking-widest uppercase mb-4 text-sm",children:"Engineering Digital Future"}),i.jsxs("h1",{className:"text-5xl md:text-6xl font-extrabold text-white leading-tight mb-6",children:["Accelerating Business Velocity with ",i.jsx("span",{className:"text-blue-400",children:"Quality Engineering"})]}),i.jsx("p",{className:"text-xl text-gray-300 mb-8 leading-relaxed max-w-2xl",children:"SPR Techforge empowers enterprises to deliver flawless digital experiences through advanced Software Testing, Cloud Transformation, and Strategic Consulting."}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{className:"bg-white text-spr-900 font-bold px-8 py-3 rounded-md hover:bg-gray-100 transition-colors shadow-lg",children:"Explore Services"}),i.jsx("button",{onClick:o,className:"border-2 border-white text-white font-bold px-8 py-3 rounded-md hover:bg-white/10 transition-colors",children:"Partner With Us"})]})]})})]}),i.jsx("section",{className:"bg-spr-50 py-12 border-b border-gray-200",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-4xl font-bold text-spr-700",children:"50+"}),i.jsx("p",{className:"text-sm text-gray-600 font-medium uppercase mt-1",children:"Enterprise Clients"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-4xl font-bold text-spr-700",children:"100%"}),i.jsx("p",{className:"text-sm text-gray-600 font-medium uppercase mt-1",children:"Project Delivery"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-4xl font-bold text-spr-700",children:"24/7"}),i.jsx("p",{className:"text-sm text-gray-600 font-medium uppercase mt-1",children:"Global Support"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-4xl font-bold text-spr-700",children:"1M+"}),i.jsx("p",{className:"text-sm text-gray-600 font-medium uppercase mt-1",children:"Test Cases Executed"})]})]})})}),i.jsx("section",{className:"py-20 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Our Core Capabilities"}),i.jsx("div",{className:"w-20 h-1 bg-spr-600 mx-auto rounded"}),i.jsx("p",{className:"mt-4 text-gray-600 max-w-2xl mx-auto",children:"We combine deep domain expertise with cutting-edge technology to drive innovation and efficiency."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"group bg-white p-8 rounded-xl border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-blue-50 rounded-lg flex items-center justify-center mb-6 group-hover:bg-blue-600 transition-colors",children:i.jsx("svg",{className:"w-8 h-8 text-blue-600 group-hover:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Quality Engineering"}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:"End-to-end testing services including Automation, Performance, and Security testing to ensure zero-defect delivery."}),i.jsx("a",{href:"#",className:"inline-block mt-4 text-spr-600 font-bold hover:underline",children:"Learn More "})]}),i.jsxs("div",{className:"group bg-white p-8 rounded-xl border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-indigo-50 rounded-lg flex items-center justify-center mb-6 group-hover:bg-indigo-600 transition-colors",children:i.jsx("svg",{className:"w-8 h-8 text-indigo-600 group-hover:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Cloud Consulting"}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Strategic cloud migration, architecture design, and DevOps implementation to accelerate your digital transformation."}),i.jsx("a",{href:"#",className:"inline-block mt-4 text-spr-600 font-bold hover:underline",children:"Learn More "})]}),i.jsxs("div",{className:"group bg-white p-8 rounded-xl border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-emerald-50 rounded-lg flex items-center justify-center mb-6 group-hover:bg-emerald-600 transition-colors",children:i.jsx("svg",{className:"w-8 h-8 text-emerald-600 group-hover:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Staffing & Training"}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Providing top-tier technical talent and corporate training programs to bridge the skills gap in your organization."}),i.jsx("a",{href:"#",className:"inline-block mt-4 text-spr-600 font-bold hover:underline",children:"Learn More "})]})]})]})}),i.jsxs("section",{className:"bg-gray-900 py-20 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-spr-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse"}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center relative z-10",children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:"Ready to Transform Your Business?"}),i.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"Join hands with SPR Techforge to leverage the power of next-gen technology and expert consulting."}),i.jsx("button",{onClick:o,className:"bg-spr-600 hover:bg-spr-500 text-white font-bold px-10 py-4 rounded-md shadow-lg transition-all",children:"Get a Free Consultation"})]})]}),i.jsx("footer",{id:"contact",className:"bg-gray-50 border-t border-gray-200 pt-16 pb-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12 mb-12",children:[i.jsxs("div",{className:"col-span-1 md:col-span-1",children:[i.jsx(di,{size:"sm"}),i.jsx("p",{className:"mt-6 text-sm text-gray-500 leading-relaxed",children:"SPR Techforge is a premier software testing and consulting firm dedicated to delivering excellence in digital engineering."})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4",children:"Services"}),i.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-spr-600",children:"Quality Assurance"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-spr-600",children:"Test Automation"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-spr-600",children:"Performance Engineering"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-spr-600",children:"DevOps Solutions"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4",children:"Company"}),i.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[i.jsx("li",{children:i.jsx("button",{onClick:()=>s("about"),className:"hover:text-spr-600 text-left",children:"About Us"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>s("careers"),className:"hover:text-spr-600 text-left",children:"Careers"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>s("leadership"),className:"hover:text-spr-600 text-left",children:"Leadership"})}),i.jsx("li",{children:i.jsx("button",{onClick:o,className:"hover:text-spr-600 text-left",children:"Contact"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4",children:"Contact Us"}),i.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[i.jsxs("li",{className:"flex items-start gap-3",children:[i.jsxs("svg",{className:"w-5 h-5 text-spr-600 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),i.jsxs("span",{children:["SPR Techforge Pvt Ltd",i.jsx("br",{}),"Sri Godha Nilayam, 9th Phase Rd, KPHB phase 6, Kukatpally, Hyderabad, Telangana 500085"]})]}),i.jsxs("li",{className:"flex items-center gap-3",children:[i.jsx("svg",{className:"w-5 h-5 text-spr-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("a",{href:"mailto:contact@sprtechforge.com",className:"hover:text-spr-600",children:"contact@sprtechforge.com"})]})]})]})]}),i.jsxs("div",{className:"border-t border-gray-200 pt-8 flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsx("p",{className:"text-xs text-gray-500",children:" 2025 SPR Techforge Pvt Ltd. All rights reserved."}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("a",{href:"#",className:"text-gray-400 hover:text-gray-600",children:[i.jsx("span",{className:"sr-only",children:"LinkedIn"}),i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})]}),i.jsxs("a",{href:"#",className:"text-gray-400 hover:text-gray-600",children:[i.jsx("span",{className:"sr-only",children:"Twitter"}),i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})]})]})]})]})}),i.jsx(Qt,{isOpen:r==="about",onClose:()=>s(null),title:"About SPR Techforge",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-lg text-gray-800 leading-relaxed",children:"We are a dedicated consultancy and training organization specializing in Automation Testing and Manual Testing."}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Over the past three years, weve successfully trained and placed 30+ skilled professionals across leading companies. Our focus is to provide training, expert guidance and support after joining one month."}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mt-4",children:[i.jsx("h4",{className:"font-bold text-blue-900 mb-2",children:"Our Mission"}),i.jsx("p",{className:"text-sm text-blue-800",children:"To empower individuals with industry-ready skills and connect enterprises with top-tier engineering talent, fostering innovation and excellence in the tech ecosystem."})]})]})}),i.jsx(Qt,{isOpen:r==="careers",onClose:()=>s(null),title:"Careers at SPR Techforge",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"Join our dynamic team! We are always looking for skilled professionals passionate about Quality Engineering and Digital Transformation."}),i.jsxs("div",{className:"space-y-3 mt-4",children:[i.jsxs("div",{className:"border border-gray-200 p-3 rounded hover:bg-gray-50",children:[i.jsx("h4",{className:"font-bold text-gray-900",children:"Automation Test Engineer"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Experience: 2-5 Years  Skills: Java, Selenium, Cucumber"})]}),i.jsxs("div",{className:"border border-gray-200 p-3 rounded hover:bg-gray-50",children:[i.jsx("h4",{className:"font-bold text-gray-900",children:"Performance Tester"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Experience: 3+ Years  Skills: JMeter, LoadRunner"})]})]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["Send your resume to ",i.jsx("a",{href:"mailto:careers@sprtechforge.com",className:"text-spr-600 font-bold hover:underline",children:"careers@sprtechforge.com"})]})]})}),i.jsx(Qt,{isOpen:r==="leadership",onClose:()=>s(null),title:"Our Leadership",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-spr-900 text-white flex items-center justify-center text-xl font-bold",children:"TR"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Thirumal Reddy"}),i.jsx("p",{className:"text-spr-600 font-medium text-sm mb-2",children:"Founder & Principal Consultant"}),i.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"An industry veteran with extensive experience in Software Quality Assurance and Corporate Training. Thirumal Reddy leads SPR Techforge with a vision to bridge the gap between academic knowledge and industry requirements, ensuring every professional we train is ready to make an immediate impact."})]})]}),i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg text-sm text-gray-600 italic border-l-4 border-spr-500",children:`"We don't just teach technology; we engineer careers."`})]})})]})},ES=()=>{const{candidates:t,accounts:e,transactions:n,getEntityBalance:r}=Ee(),s=e.filter(P=>P.type===ke.Cash),o=e.filter(P=>P.type===ke.Bank),a=s.reduce((P,w)=>P+r(w.id,"Account"),0),c=o.reduce((P,w)=>P+r(w.id,"Account"),0),u=t.length,d=t.filter(P=>P.status===dt.Placed),m=n.filter(P=>P.type===Te.Expense).reduce((P,w)=>P+w.amount,0),p=n.filter(P=>P.type===Te.Income).reduce((P,w)=>P+w.amount,0),f=P=>{const w=n.filter(T=>T.fromEntityId===P&&T.type===Te.Income).reduce((T,A)=>T+A.amount,0),v=n.filter(T=>T.toEntityId===P&&T.type===Te.Refund).reduce((T,A)=>T+A.amount,0);return w-v},y=d.reduce((P,w)=>P+f(w.id),0),I=t.filter(P=>P.status!==dt.Placed&&P.status!==dt.Discontinued&&P.isActive).reduce((P,w)=>P+f(w.id),0),C=t.filter(P=>P.isActive),x=C.reduce((P,w)=>{const v=f(w.id),T=w.agreedAmount-v;return P+(T>0?T:0)},0),j=e.filter(P=>P.type===ke.Debtor).reduce((P,w)=>{const v=r(w.id,"Account");return P+(v>0?v:0)},0),L=e.filter(P=>P.type===ke.Creditor).reduce((P,w)=>{const v=r(w.id,"Account");return P+(v<0?Math.abs(v):0)},0);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Welcome back, oversee your consultancy metrics."})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-gray-500 uppercase font-bold",children:"Net Liquidity"}),i.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:he(a+c)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsx(ue,{className:"bg-white border-emerald-200 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-emerald-100 rounded-full text-emerald-600",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Cash in Hand"}),i.jsx("p",{className:"text-xl font-bold text-gray-900",children:he(a)}),i.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["Total of ",s.length," Cash A/c"]})]})]})}),i.jsx(ue,{className:"bg-white border-blue-200 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-blue-100 rounded-full text-blue-600",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Bank Balance"}),i.jsx("p",{className:"text-xl font-bold text-gray-900",children:he(c)}),i.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["Total of ",o.length," Bank A/c"]})]})]})}),i.jsx(ue,{className:"bg-white border-indigo-200 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-indigo-100 rounded-full text-indigo-600",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Total Income"}),i.jsx("p",{className:"text-xl font-bold text-gray-900",children:he(p)})]})]})}),i.jsx(ue,{className:"bg-white border-red-200 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-red-100 rounded-full text-red-600",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Total Expenses"}),i.jsx("p",{className:"text-xl font-bold text-gray-900",children:he(m)})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx(ue,{title:"Candidate Financials",className:"lg:col-span-2",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 pt-2",children:[i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wider font-bold",children:"Total Candidates"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:u}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[C.length," Active"]})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsx("p",{className:"text-emerald-600 text-xs uppercase tracking-wider font-bold",children:"From Placed"}),i.jsx("p",{className:"text-xl font-bold text-emerald-600 mt-1",children:he(y)}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Received"})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsx("p",{className:"text-blue-600 text-xs uppercase tracking-wider font-bold",children:"From Existing"}),i.jsx("p",{className:"text-xl font-bold text-blue-600 mt-1",children:he(I)}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Received (Advances)"})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 col-span-2 md:col-span-3 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-amber-600 text-xs uppercase tracking-wider font-bold",children:"Pending Collectibles (Active Candidates)"}),i.jsx("p",{className:"text-2xl font-bold text-amber-600 mt-1",children:he(x)})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:"text-xs text-gray-500 block",children:"Potential Revenue"})})]})]})}),i.jsx(ue,{title:"Personal Ledger",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"My Debtors"}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:"Receivables"})]}),i.jsx("span",{className:"bg-emerald-100 text-emerald-700 text-xs px-2 py-1 rounded font-medium",children:"Assets"})]}),i.jsx("p",{className:"text-2xl font-bold text-emerald-600 mt-2",children:he(j)}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"People owe me"})]}),i.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"My Creditors"}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:"Payables"})]}),i.jsx("span",{className:"bg-red-100 text-red-700 text-xs px-2 py-1 rounded font-medium",children:"Liabilities"})]}),i.jsx("p",{className:"text-2xl font-bold text-red-600 mt-2",children:he(L)}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"I owe people"})]})]})})]}),i.jsx(ue,{title:"Profit & Loss Estimation",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total Income (Realized)"}),i.jsx("span",{className:"text-emerald-600 font-bold",children:he(p)})]}),i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total Expenses (Realized)"}),i.jsxs("span",{className:"text-red-600 font-bold",children:["- ",he(m)]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-1",children:[i.jsx("span",{className:"text-gray-900 text-lg font-bold",children:"Net Profit / Loss"}),i.jsx("span",{className:`text-xl font-bold ${p-m>=0?"text-emerald-600":"text-red-600"}`,children:he(p-m)})]})]})})]})},bS=()=>{const{candidates:t,deleteCandidate:e,updateCandidate:n,transactions:r,candidateStatuses:s,users:o,addUser:a,showToast:c}=Ee(),[u,d]=R.useState(1),[m,p]=R.useState(""),[f,y]=R.useState("All"),[N,I]=R.useState(null),[C,x]=R.useState(null);Ct();const _=10,j=t.filter(S=>{const D=m.toLowerCase(),b=S.name.toLowerCase().includes(D)||S.batchId.toLowerCase().includes(D)||S.referredBy&&S.referredBy.toLowerCase().includes(D),oe=f==="All"||S.status===f;return b&&oe}),k=Math.ceil(j.length/_),L=j.slice((u-1)*_,u*_),P=S=>{if(r.some(b=>b.fromEntityId===S||b.toEntityId===S)){alert("Unable to delete candidate due to existing financial entries. Mark as Inactive instead.");return}I(S)},w=()=>{N&&(e(N),I(null))},v=S=>n({...S,isActive:!S.isActive}),T=S=>{const D=o.find(b=>b.linkedCandidateId===S.id||b.username===S.email);if(D){alert(`Account exists: ${D.username}`);return}if(!S.email){alert("Email required.");return}a({id:Bt(),name:S.name,username:S.email,password:S.phone||"pass123",role:"candidate",modules:[],linkedCandidateId:S.id,isPasswordChanged:!1,authProvider:"local"}),c("User account created","success")},A=S=>{switch(S){case dt.Placed:return"bg-emerald-100 text-emerald-800";case dt.Training:return"bg-blue-100 text-blue-800";case dt.ReadyForInterview:return"bg-amber-100 text-amber-800";default:return"bg-gray-100 text-gray-800"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Or,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Candidates"})]}),i.jsx(nn,{to:"/candidates/new",children:i.jsx(ee,{children:"+ Add Candidate"})})]}),i.jsxs(ue,{children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[i.jsx("input",{placeholder:"Search...",className:"border rounded-lg px-4 py-2 flex-1",value:m,onChange:S=>p(S.target.value)}),i.jsxs("select",{className:"border rounded-lg px-4 py-2",value:f,onChange:S=>y(S.target.value),children:[i.jsx("option",{value:"All",children:"All Statuses"}),s.map(S=>i.jsx("option",{value:S,children:S},S))]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm text-gray-600",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"py-3 px-4",children:"Batch"}),i.jsx("th",{className:"py-3 px-4",children:"Name"}),i.jsx("th",{className:"py-3 px-4",children:"Status"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Active"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Agreed Amt"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:L.map(S=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"bg-blue-50 text-blue-800 px-2 py-1 rounded font-mono",children:S.batchId})}),i.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900",children:[S.name,i.jsx("div",{className:"text-xs text-gray-400",children:S.phone})]}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${A(S.status)}`,children:S.status})}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsx("button",{onClick:()=>v(S),className:`w-10 h-5 rounded-full relative transition-colors ${S.isActive?"bg-emerald-500":"bg-gray-300"}`,children:i.jsx("span",{className:`absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform ${S.isActive?"translate-x-5":""}`})})}),i.jsx("td",{className:"py-3 px-4 text-right font-bold",children:he(S.agreedAmount)}),i.jsxs("td",{className:"py-3 px-4 text-center flex justify-center gap-2",children:[i.jsx("button",{onClick:()=>x(S),className:"text-gray-500 hover:text-gray-800 p-1",title:"View",children:i.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),i.jsx(nn,{to:`/candidates/edit/${S.id}`,className:"text-blue-500 hover:text-blue-700 p-1",title:"Edit",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),i.jsx(nn,{to:`/candidates/agreement/${S.id}`,className:"text-purple-500 hover:text-purple-700 p-1",title:"Send Agreement",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx("button",{onClick:()=>T(S),className:"text-amber-500 hover:text-amber-700 p-1",title:"Create Login",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),i.jsx("button",{onClick:()=>P(S.id),className:"text-red-500 hover:text-red-700 p-1",title:"Delete",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},S.id))})]})}),i.jsx(Xf,{currentPage:u,totalPages:k,onPageChange:d})]}),i.jsx(Qt,{isOpen:!!C,onClose:()=>x(null),title:"Candidate Details",children:C&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-bold",children:C.name}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Email"}),i.jsx("p",{children:C.email})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Phone"}),i.jsx("p",{children:C.phone})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Batch"}),i.jsx("p",{children:C.batchId})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Status"}),i.jsx("p",{children:C.status})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(ee,{variant:"secondary",onClick:()=>x(null),children:"Close"})})]})}),i.jsx(vs,{isOpen:!!N,onClose:()=>I(null),onConfirm:w,title:"Delete Candidate",message:"Confirm deletion?"})]})},NS=()=>{const{user:t,candidates:e,candidateProfiles:n,updateCandidateProfile:r,showToast:s}=Ee(),[o,a]=R.useState("Personal"),c=t==null?void 0:t.linkedCandidateId,u=e.find(f=>f.id===c),[d,m]=R.useState({candidateId:c||""});R.useEffect(()=>{if(c){const f=n.find(y=>y.candidateId===c);m(f||{candidateId:c})}},[c,n]);const p=f=>{f.preventDefault(),c&&(r(d),s("Profile updated successfully"))};return!u||!c?i.jsx("div",{className:"p-8 text-center text-gray-500",children:"No candidate profile linked to this account."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Or,{}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Candidate Profile"}),i.jsxs("p",{className:"text-gray-500",children:[u.name," (",u.batchId,")"]})]})]}),i.jsx("div",{className:"flex gap-2 border-b border-gray-200",children:["Personal","Education","Experience"].map(f=>i.jsxs("button",{onClick:()=>a(f),className:`px-4 py-2 font-medium transition-colors ${o===f?"border-b-2 border-spr-600 text-spr-600":"text-gray-500 hover:text-gray-800"}`,children:[f," Details"]},f))}),i.jsx(ue,{children:i.jsxs("form",{onSubmit:p,children:[o==="Personal"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[i.jsx(ie,{label:"Date of Birth",type:"date",value:d.dob||"",onChange:f=>m({...d,dob:f.target.value})}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),i.jsxs("select",{className:"w-full border rounded-lg px-4 py-2",value:d.gender||"",onChange:f=>m({...d,gender:f.target.value}),children:[i.jsx("option",{value:"",children:"Select"}),i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"})]})]}),i.jsx(ie,{label:"Nationality",value:d.nationality||"",onChange:f=>m({...d,nationality:f.target.value})}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Permanent Address"}),i.jsx("textarea",{className:"w-full border rounded-lg p-2",rows:2,value:d.permanentAddress||"",onChange:f=>m({...d,permanentAddress:f.target.value})})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Address"}),i.jsx("textarea",{className:"w-full border rounded-lg p-2",rows:2,value:d.currentAddress||"",onChange:f=>m({...d,currentAddress:f.target.value})})]})]}),o==="Education"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[i.jsx(ie,{label:"Highest Degree",value:d.degree||"",onChange:f=>m({...d,degree:f.target.value}),placeholder:"e.g. B.Tech CSE"}),i.jsx(ie,{label:"University / College",value:d.university||"",onChange:f=>m({...d,university:f.target.value})}),i.jsx(ie,{label:"Passing Year",value:d.passingYear||"",onChange:f=>m({...d,passingYear:f.target.value})}),i.jsx(ie,{label:"Percentage / CGPA",value:d.percentage||"",onChange:f=>m({...d,percentage:f.target.value})})]}),o==="Experience"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[i.jsxs("div",{className:"col-span-2 flex items-center gap-2 mb-4",children:[i.jsx("input",{type:"checkbox",checked:d.hasExperience||!1,onChange:f=>m({...d,hasExperience:f.target.checked}),id:"exp"}),i.jsx("label",{htmlFor:"exp",className:"text-sm font-medium",children:"I have previous work experience"})]}),d.hasExperience&&i.jsxs(i.Fragment,{children:[i.jsx(ie,{label:"Last Company",value:d.lastCompany||"",onChange:f=>m({...d,lastCompany:f.target.value})}),i.jsx(ie,{label:"Designation",value:d.designation||"",onChange:f=>m({...d,designation:f.target.value})}),i.jsx(ie,{label:"Years of Experience",type:"number",value:d.yearsOfExperience||0,onChange:f=>m({...d,yearsOfExperience:parseFloat(f.target.value)})})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Technical Skills"}),i.jsx("textarea",{className:"w-full border rounded-lg p-2",rows:3,value:d.skills||"",onChange:f=>m({...d,skills:f.target.value}),placeholder:"Java, Selenium, SQL..."})]})]}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx(ee,{type:"submit",children:"Save Changes"})})]})})]})},o0=()=>{const{addCandidate:t,updateCandidate:e,candidates:n,candidateStatuses:r,addCandidateStatus:s,showToast:o,transactions:a}=Ee(),c=Ct(),{id:u}=gs(),[d,m]=R.useState(null),p=`CANDIDATURE AGREEMENT

1. I, [CANDIDATE NAME], agree to join SPR Techforge for the training program.
2. I agree to pay the total sum of [AMOUNT] as discussed.
3. I understand that the advance payment is non-refundable unless specified otherwise.
4. I will maintain professional conduct during the training period.
5. Upon placement, I agree to fulfill the financial obligations as per the agreement.

Date: _________________
Signature: _________________`,[f,y]=R.useState({name:"",batchId:"",email:"",phone:"",alternatePhone:"",referredBy:"",address:"",agreedAmount:0,paidAmount:0,status:dt.Training,placedCompany:"",packageDetails:"",isActive:!0,notes:"",agreementText:p,workSupportStatus:"None",workSupportMonthlyAmount:0,workSupportStartDate:""});R.useEffect(()=>{if(u){const x=n.find(_=>_.id===u);if(x){let _=x.paidAmount;if(_===void 0){const j=a.filter(L=>L.fromEntityId===u&&L.type===Te.Income).reduce((L,P)=>L+P.amount,0),k=a.filter(L=>L.toEntityId===u&&L.type===Te.Refund).reduce((L,P)=>L+P.amount,0);_=Math.abs(j)-k}y({...x,paidAmount:_,agreementText:x.agreementText||p.replace("[CANDIDATE NAME]",x.name).replace("[AMOUNT]",x.agreedAmount.toString())})}}},[u,n,a]);const N=(f.agreedAmount||0)-(f.paidAmount||0),I=x=>{if(x.preventDefault(),m(null),!f.name||!f.name.trim()){m("Full Name is required");return}if(!f.batchId||!f.batchId.trim()){m("Batch ID is required");return}if(!f.email||!f.email.trim()){m("Email Address is required");return}if(!f.phone||!f.phone.trim()){m("Phone Number is required");return}if(f.agreedAmount===void 0||f.agreedAmount<0){m("Agreed Amount is required");return}if(f.workSupportStatus==="Active"){if(!f.workSupportStartDate){m("Start Date is required for Active Work Support");return}if(!f.workSupportMonthlyAmount||f.workSupportMonthlyAmount<=0){m("Monthly Amount is required for Active Work Support");return}}if(n.some(k=>{var L,P;return k.id!==(u||"")&&(k.email&&k.email.trim().toLowerCase()===((L=f.email)==null?void 0:L.trim().toLowerCase())||k.phone&&k.phone.trim()===((P=f.phone)==null?void 0:P.trim()))})){m("A candidate with this Email or Phone Number already exists.");return}const j={...f,id:u||Bt(),joinedDate:f.joinedDate||new Date().toISOString()};u?(e(j),o("Candidate updated successfully")):(t(j),o("Candidate added successfully")),c("/candidates")},C=()=>{const x=window.prompt("Enter new status name:");x&&x.trim()&&(s(x.trim()),y({...f,status:x.trim()}))};return i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:u?"Edit Candidate":"Add New Candidate"}),d&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded shadow-sm animate-fade-in",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm text-red-700 font-bold",children:d})})})}),i.jsxs("form",{onSubmit:I,children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ue,{title:"Personal & Contact Details",children:[i.jsx("div",{className:"flex justify-end mb-4",children:i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer bg-gray-50 px-4 py-2 rounded-lg border border-spr-700 hover:bg-gray-100",children:[i.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Active Status"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"checkbox",className:"sr-only peer",checked:f.isActive,onChange:x=>y({...f,isActive:x.target.checked})}),i.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-spr-accent"})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Full Name"}),i.jsx(ie,{value:f.name,onChange:x=>y({...f,name:x.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Batch ID"}),i.jsx(ie,{value:f.batchId,onChange:x=>y({...f,batchId:x.target.value}),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Phone Number"}),i.jsx(ie,{value:f.phone,onChange:x=>y({...f,phone:x.target.value}),required:!0,numericOnly:!0,maxLength:15,placeholder:"Digits only"})]}),i.jsx(ie,{label:"Alternate Phone",value:f.alternatePhone||"",onChange:x=>y({...f,alternatePhone:x.target.value}),numericOnly:!0,maxLength:15,placeholder:"Digits only"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Email Address"}),i.jsx(ie,{type:"email",value:f.email,onChange:x=>y({...f,email:x.target.value}),required:!0})]}),i.jsx(ie,{label:"Referred By",value:f.referredBy||"",onChange:x=>y({...f,referredBy:x.target.value}),placeholder:"Name of referrer (Optional)"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Complete Address"}),i.jsx("textarea",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",rows:3,value:f.address,onChange:x=>y({...f,address:x.target.value}),placeholder:"Enter full address"})]})]})]}),i.jsx(ue,{title:"Work Support Services",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Track monthly recurring payments from the candidate for support services."}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Support Status"}),i.jsxs("select",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",value:f.workSupportStatus||"None",onChange:x=>y({...f,workSupportStatus:x.target.value}),children:[i.jsx("option",{value:"None",children:"No Support"}),i.jsx("option",{value:"Active",children:"Active Support (Monthly Billing)"}),i.jsx("option",{value:"Ended",children:"Support Ended"})]})]}),f.workSupportStatus==="Active"&&i.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-fade-in p-4 bg-purple-50 rounded border border-purple-100",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Start Date"}),i.jsx(ie,{type:"date",value:f.workSupportStartDate||"",onChange:x=>y({...f,workSupportStartDate:x.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Monthly Amount ()"}),i.jsx(ie,{type:"number",value:f.workSupportMonthlyAmount||0,onChange:x=>y({...f,workSupportMonthlyAmount:parseFloat(x.target.value)||0})})]})]})]})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ue,{title:"Training & Placement Info",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Agreed Total Amount ()"}),i.jsx(ie,{type:"number",value:f.agreedAmount,onChange:x=>y({...f,agreedAmount:parseFloat(x.target.value)||0}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Paid ()"}),i.jsx(ie,{type:"number",value:f.paidAmount,onChange:x=>y({...f,paidAmount:parseFloat(x.target.value)||0}),className:"bg-white font-bold"}),i.jsx("div",{className:`text-xs mt-1 font-bold ${N>0?"text-amber-600":"text-emerald-600"}`,children:N>0?`Due: ${he(N)}`:"Fully Paid"})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 required-label",children:"Current Status"}),i.jsx("button",{type:"button",onClick:C,className:"text-xs text-spr-accent hover:underline font-medium",children:"+ Add Status"})]}),i.jsx("select",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors",value:f.status,onChange:x=>y({...f,status:x.target.value}),required:!0,children:r.map(x=>i.jsx("option",{value:x,children:x},x))})]}),f.status===dt.Placed&&i.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200 mb-4 space-y-3 animate-fade-in",children:[i.jsx("h4",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wide",children:"Placement Details"}),i.jsx(ie,{label:"Company Name",value:f.placedCompany||"",onChange:x=>y({...f,placedCompany:x.target.value}),placeholder:"e.g. Google, Microsoft"}),i.jsx(ie,{label:"Package / Salary Details",value:f.packageDetails||"",onChange:x=>y({...f,packageDetails:x.target.value}),placeholder:"e.g. 12 LPA"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),i.jsx("textarea",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",rows:2,value:f.notes,onChange:x=>y({...f,notes:x.target.value})})]})]}),i.jsxs(ue,{title:"Candidature Agreement",children:[i.jsx("div",{className:"mb-2 text-xs text-gray-500",children:"Edit the terms below for this candidate. This text will be used when generating the agreement."}),i.jsx("textarea",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-800 font-mono text-sm focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",rows:8,value:f.agreementText,onChange:x=>y({...f,agreementText:x.target.value})})]})]})]}),i.jsxs("div",{className:"mt-6 flex gap-4 justify-end pb-10",children:[i.jsx(ee,{type:"button",variant:"secondary",onClick:()=>c("/candidates"),children:"Cancel"}),i.jsx(ee,{type:"submit",children:u?"Update Candidate":"Save Candidate"})]})]})]})},TS=()=>{const{candidates:t,markAgreementSent:e,markAgreementAccepted:n,isCloudEnabled:r}=Ee(),{id:s}=gs(),o=Ct(),a=t.find(d=>d.id===s);if(!a)return i.jsx("div",{className:"p-8 text-white",children:"Candidate not found"});const c=()=>{if(!a.email){alert("No email address found for this candidate.");return}const m=`${window.location.href.split("#")[0]}#/portal/agreement/${a.id}`,p=encodeURIComponent(`Training Agreement - ${a.name} (${a.batchId})`),f=`Dear ${a.name},

Please review and accept your training agreement with SPR Techforge using the link below:

CLICK HERE TO ACCEPT AGREEMENT:
${m}

--------------------------------------------------
Alternatively, the text is provided below for your reference:

${a.agreementText}

Regards,
SPR Techforge Pvt Ltd`,y=encodeURIComponent(f);e(a.id),window.open(`mailto:${a.email}?subject=${p}&body=${y}`)},u=()=>{window.confirm("Confirm that the candidate has physically signed or accepted the agreement?")&&n(a.id)};return i.jsxs("div",{className:"bg-white min-h-screen text-black p-8",children:[i.jsxs("div",{className:"print:hidden mb-8 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center bg-gray-100 p-4 rounded-lg border border-gray-300",children:[i.jsx(ee,{variant:"secondary",onClick:()=>o(-1),className:"text-gray-800",children:"Back"}),i.jsxs("div",{className:"flex gap-2",children:[a.agreementAcceptedDate?i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-100 text-emerald-800 rounded-lg font-bold border border-emerald-200",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Accepted on ",new Date(a.agreementAcceptedDate).toLocaleDateString()]}):i.jsxs(i.Fragment,{children:[i.jsx(ee,{variant:"secondary",onClick:c,className:"border-blue-300 text-blue-700 bg-blue-50 hover:bg-blue-100",children:"Email Agreement & Link"}),i.jsx(ee,{variant:"success",onClick:u,children:"Mark as Accepted"})]}),i.jsx(ee,{onClick:()=>window.print(),children:"Print / Save PDF"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:`p-3 rounded border ${a.agreementSentDate?"bg-blue-50 border-blue-200 text-blue-800":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[i.jsx("span",{className:"font-bold text-xs uppercase block",children:"Status: Sent"}),a.agreementSentDate?new Date(a.agreementSentDate).toLocaleString():"Not Sent yet"]}),i.jsxs("div",{className:`p-3 rounded border ${a.agreementAcceptedDate?"bg-emerald-50 border-emerald-200 text-emerald-800":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[i.jsx("span",{className:"font-bold text-xs uppercase block",children:"Status: Accepted"}),a.agreementAcceptedDate?new Date(a.agreementAcceptedDate).toLocaleString():"Pending"]})]}),!r&&i.jsxs("div",{className:"bg-amber-50 text-amber-800 text-xs p-2 rounded border border-amber-200",children:[i.jsx("strong",{children:"Note:"}),' Online Acceptance Link only works when Cloud Sync is enabled. If offline, please use "Mark as Accepted" manually.']})]}),i.jsxs("div",{className:"max-w-3xl mx-auto print:w-full",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8 border-b-2 border-indigo-600 pb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-indigo-600 rounded-lg",children:i.jsx("svg",{className:"text-white w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-indigo-900",children:"SPR Techforge Pvt Ltd"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Excellence in Training & Placement"})]})]}),i.jsxs("div",{className:"text-right text-sm text-gray-600",children:[i.jsxs("p",{children:["Date: ",new Date().toLocaleDateString()]}),i.jsxs("p",{children:["Ref: ",a.batchId]})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-center uppercase underline mb-6",children:"Candidature Training Agreement"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 bg-gray-50 p-4 rounded border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Candidate Name"}),i.jsx("p",{className:"font-bold text-lg",children:a.name})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Batch ID"}),i.jsx("p",{className:"font-bold text-lg",children:a.batchId})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Contact"}),i.jsx("p",{children:a.phone}),i.jsx("p",{children:a.email})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Address"}),i.jsx("p",{className:"whitespace-pre-wrap",children:a.address||"N/A"})]})]}),i.jsx("div",{className:"prose max-w-none",children:i.jsx("div",{className:"whitespace-pre-wrap font-serif text-justify leading-relaxed text-gray-800",children:a.agreementText||"No agreement text provided."})})]}),i.jsxs("div",{className:"mt-20 grid grid-cols-2 gap-10",children:[i.jsxs("div",{className:"border-t border-black pt-2 text-center",children:[i.jsx("p",{className:"font-bold",children:"SPR Techforge Representative"}),i.jsx("p",{className:"text-xs text-gray-500",children:"(Authorized Signatory)"})]}),i.jsxs("div",{className:"border-t border-black pt-2 text-center relative",children:[i.jsx("p",{className:"font-bold",children:a.name}),i.jsx("p",{className:"text-xs text-gray-500",children:"(Candidate Signature)"}),a.agreementAcceptedDate&&i.jsxs("div",{className:"absolute top-[-40px] left-1/2 transform -translate-x-1/2 border-2 border-emerald-600 text-emerald-600 px-4 py-1 font-bold rounded opacity-80 rotate-[-10deg]",children:["DIGITALLY ACCEPTED",i.jsx("div",{className:"text-[8px] text-center",children:new Date(a.agreementAcceptedDate).toLocaleDateString()})]})]})]}),i.jsx("div",{className:"mt-12 text-center text-xs text-gray-400 print:fixed print:bottom-4 print:w-full",children:i.jsx("p",{children:"SPR Techforge Pvt Ltd | Registered Office Address Here | Contact: contact@sprtechforge.com"})})]})]})},SS=()=>{const{transactions:t,getEntityName:e,deleteTransaction:n,user:r,accounts:s,candidates:o}=Ee(),[a,c]=R.useState(1),[u,d]=R.useState(""),[m,p]=R.useState("All"),[f,y]=R.useState("All"),[N,I]=R.useState(""),[C,x]=R.useState(""),[_,j]=R.useState(""),[k,L]=R.useState(""),[P,w]=R.useState(null),[v,T]=R.useState(null),A=Ct(),S=10,b=[...t].sort((U,ne)=>new Date(ne.date).getTime()-new Date(U.date).getTime()).filter(U=>{const ne=m==="All"||U.type===m,Y=f==="All"||f==="Locked"&&U.isLocked||f==="Unlocked"&&!U.isLocked,de=N===""||U.fromEntityId===N,Q=C===""||U.toEntityId===C,J=e(U.fromEntityId,U.fromEntityType).toLowerCase(),we=e(U.toEntityId,U.toEntityType).toLowerCase(),Fr=U.description.toLowerCase().includes(u.toLowerCase())||J.includes(u.toLowerCase())||we.includes(u.toLowerCase());let pn=!0;if(_){const An=new Date(_);An.setHours(0,0,0,0),pn=pn&&new Date(U.date)>=An}if(k){const An=new Date(k);An.setHours(23,59,59,999),pn=pn&&new Date(U.date)<=An}return ne&&Fr&&pn&&Y&&de&&Q}),oe=Math.ceil(b.length/S),ae=b.slice((a-1)*S,a*S),Ie=U=>{if(U.isLocked&&(r==null?void 0:r.role)!=="admin"){alert("This transaction is locked.");return}T(U.id)},xe=()=>{v&&(n(v),T(null))},H=()=>{const U=b.map(ne=>({Date:new Date(ne.date).toLocaleDateString(),Type:ne.type,Description:ne.description,From:e(ne.fromEntityId,ne.fromEntityType),To:e(ne.toEntityId,ne.toEntityType),Amount:ne.amount,Locked:ne.isLocked?"Yes":"No"}));Fo(U,"transactions.csv")},K=[...s].sort((U,ne)=>U.name.localeCompare(ne.name)),re=[...o].sort((U,ne)=>U.name.localeCompare(ne.name));return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Transactions"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(ee,{variant:"secondary",onClick:H,children:"Export CSV"}),i.jsx(nn,{to:"/finance/transactions/new",children:i.jsx(ee,{children:"+ New Entry"})})]})]}),i.jsxs(ue,{children:[i.jsxs("div",{className:"mb-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx("input",{placeholder:"Search description...",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none placeholder-gray-400",value:u,onChange:U=>d(U.target.value)}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:m,onChange:U=>p(U.target.value),children:[i.jsx("option",{value:"All",children:"All Types"}),Object.values(Te).map(U=>i.jsx("option",{value:U,children:U},U))]}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:f,onChange:U=>y(U.target.value),children:[i.jsx("option",{value:"All",children:"All Statuses"}),i.jsx("option",{value:"Locked",children:"Locked"}),i.jsx("option",{value:"Unlocked",children:"Unlocked"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-gray-100 pt-4",children:[i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:N,onChange:U=>I(U.target.value),children:[i.jsx("option",{value:"",children:"All Sources (From)"}),i.jsx("optgroup",{label:"Accounts",children:K.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))}),i.jsx("optgroup",{label:"Candidates",children:re.map(U=>i.jsxs("option",{value:U.id,children:[U.name," (",U.batchId,")"]},U.id))})]}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:C,onChange:U=>x(U.target.value),children:[i.jsx("option",{value:"",children:"All Destinations (To)"}),i.jsx("optgroup",{label:"Accounts",children:K.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))}),i.jsx("optgroup",{label:"Candidates",children:re.map(U=>i.jsxs("option",{value:U.id,children:[U.name," (",U.batchId,")"]},U.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-gray-100 pt-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold w-12",children:"From"}),i.jsx("input",{type:"date",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none placeholder-gray-400",value:_,onChange:U=>j(U.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold w-12",children:"To"}),i.jsx("input",{type:"date",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none placeholder-gray-400",value:k,onChange:U=>L(U.target.value)})]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase tracking-wider text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-3 px-4 w-28",children:"Date"}),i.jsx("th",{className:"py-3 px-4",children:"Description"}),i.jsx("th",{className:"py-3 px-4",children:"From (Source)"}),i.jsx("th",{className:"py-3 px-4",children:"To (Dest)"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Amount"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:ae.length>0?ae.map(U=>{const ne=U.isLocked,Y=!ne||(r==null?void 0:r.role)==="admin";return i.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ne?"bg-gray-50/50":""}`,children:[i.jsx("td",{className:"py-3 px-4 text-sm text-gray-500",children:new Date(U.date).toLocaleDateString()}),i.jsxs("td",{className:"py-3 px-4 cursor-pointer group",onClick:()=>w(U),children:[i.jsxs("div",{className:`font-medium flex items-center gap-2 transition-colors ${ne?"text-gray-500":"text-gray-900 hover:text-indigo-600"}`,children:[U.description,ne?i.jsxs("svg",{className:"w-4 h-4 text-amber-600/70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("title",{children:"Locked Transaction"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]}):i.jsxs("svg",{className:"w-3 h-3 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("title",{children:"Editable"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})]})]}),i.jsx("div",{className:"text-xs text-gray-500 inline-block px-1 rounded bg-gray-100 border border-gray-200",children:U.type})]}),i.jsx("td",{className:"py-3 px-4 text-sm",children:e(U.fromEntityId,U.fromEntityType)}),i.jsx("td",{className:"py-3 px-4 text-sm",children:e(U.toEntityId,U.toEntityType)}),i.jsx("td",{className:`py-3 px-4 text-right font-mono font-bold ${U.type==="Income"?"text-emerald-600":U.type==="Expense"?"text-red-600":"text-gray-700"}`,children:he(U.amount)}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsx("button",{onClick:()=>w(U),className:"text-gray-400 hover:text-gray-900 p-1 rounded hover:bg-gray-100",title:"View Details",children:i.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),Y?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>A(`/finance/transactions/edit/${U.id}`),className:"text-blue-500 hover:text-blue-700 p-1 rounded hover:bg-blue-50",title:"Edit",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),i.jsx("button",{onClick:()=>Ie(U),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50",title:"Delete",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}):i.jsx("div",{className:"p-1 px-2",title:"Locked",children:i.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]})})]},U.id)}):i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"py-8 text-center text-gray-500",children:"No transactions found matching your criteria."})})})]})}),i.jsx(Xf,{currentPage:a,totalPages:oe,onPageChange:c})]}),i.jsx(Qt,{isOpen:!!P,onClose:()=>w(null),title:"Transaction Details",children:P&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center pb-4 border-b border-spr-700",children:[i.jsx("p",{className:"text-gray-500 text-sm uppercase tracking-wider font-bold",children:"Amount"}),i.jsx("p",{className:`text-4xl font-bold mt-2 ${P.type==="Income"?"text-emerald-600":P.type==="Expense"?"text-red-600":"text-gray-900"}`,children:he(P.amount)}),i.jsx("div",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-gray-200 text-gray-700",children:P.type})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1 font-bold",children:"Date"}),i.jsx("p",{className:"text-gray-900 font-medium",children:new Date(P.date).toDateString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1 font-bold",children:"Transaction ID"}),i.jsx("p",{className:"text-gray-600 font-mono text-sm truncate",title:P.id,children:P.id})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1 font-bold",children:"Description"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"text-gray-900 text-lg leading-relaxed",children:P.description}),P.isLocked&&i.jsxs("svg",{className:"w-5 h-5 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("title",{children:"Locked"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-spr-700 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"From (Source)"}),i.jsx("p",{className:"text-indigo-600 font-bold",children:e(P.fromEntityId,P.fromEntityType)})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-white text-gray-500 border border-spr-700 font-medium",children:P.fromEntityType})})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"To (Destination)"}),i.jsx("p",{className:"text-indigo-600 font-bold",children:e(P.toEntityId,P.toEntityType)})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-white text-gray-500 border border-spr-700 font-medium",children:P.toEntityType})})]})]}),P.isLocked&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded text-amber-800 text-sm",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"This transaction is locked and cannot be modified by staff."]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(ee,{variant:"secondary",onClick:()=>w(null),children:"Close"})})]})}),i.jsx(vs,{isOpen:!!v,onClose:()=>T(null),onConfirm:xe,title:"Delete Transaction",message:"Are you sure you want to delete this transaction? This will affect account balances."})]})},a0=()=>{const{addTransaction:t,updateTransaction:e,transactions:n,accounts:r,candidates:s,users:o,user:a,showToast:c}=Ee(),u=Ct(),{id:d}=gs(),[m,p]=R.useState(null),[f,y]=R.useState(Te.Income),[N,I]=R.useState(new Date().toISOString().split("T")[0]),[C,x]=R.useState(""),[_,j]=R.useState(""),[k,L]=R.useState(""),[P,w]=R.useState(""),v=b=>{const oe=[],ae=xe=>{r.filter(xe).forEach(H=>{oe.push({id:H.id,name:H.name,type:"Account",category:H.type})})},Ie=()=>{[...s].sort((H,K)=>H.name.localeCompare(K.name)).forEach(H=>{const K=H.isActive?"":" (Inactive)";oe.push({id:H.id,name:`${H.name} (${H.batchId})${K}`,type:"Candidate",category:"Candidate"})})};return b==="from"?f===Te.Income?(Ie(),ae(xe=>xe.type===ke.Debtor||xe.type===ke.Income)):(f===Te.Expense||f===Te.Transfer||f===Te.Refund)&&ae(xe=>xe.type===ke.Bank||xe.type===ke.Cash):f===Te.Income||f===Te.Transfer?ae(xe=>xe.type===ke.Bank||xe.type===ke.Cash):f===Te.Expense?ae(xe=>xe.type===ke.Expense||xe.type===ke.Creditor||xe.type===ke.Salary):f===Te.Refund&&(Ie(),ae(xe=>xe.type===ke.Debtor)),oe},T=v("from"),A=v("to");R.useEffect(()=>{if(d){const b=n.find(oe=>oe.id===d);b&&(y(b.type),I(b.date.split("T")[0]),x(b.amount.toString()),j(b.description),L(b.fromEntityId),w(b.toEntityId))}},[d,n]);const S=b=>{var H;if(b.preventDefault(),p(null),!N){p("Date is required");return}if(!C||parseFloat(C)<=0){p("Valid amount is required");return}if(!k){p("Source (From) is required");return}if(!P){p("Destination (To) is required");return}const oe=_&&_.trim()?_:`${f} Transaction`,ae=T.find(K=>K.id===k),Ie=A.find(K=>K.id===P);if(!ae||!Ie){p("Invalid Source or Destination for selected transaction type.");return}if(k===P&&ae.type===Ie.type){p("Source and Destination cannot be the same.");return}const xe={id:d||Bt(),date:new Date(N).toISOString(),type:f,amount:parseFloat(C),description:oe,fromEntityId:k,fromEntityType:ae.type,toEntityId:P,toEntityType:Ie.type,isLocked:!1};if(d){if((H=n.find(K=>K.id===d))!=null&&H.isLocked&&(a==null?void 0:a.role)!=="admin"){p("Cannot edit locked transaction");return}e(xe),c("Transaction updated successfully")}else t(xe),c("Transaction added successfully");u("/finance/transactions")},D=b=>{y(b),L(""),w(""),p(null)};return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:d?"Edit Transaction":"Record Transaction"}),m&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded shadow-sm animate-fade-in",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm text-red-700 font-bold",children:m})})})}),i.jsx(ue,{children:i.jsxs("form",{onSubmit:S,children:[i.jsx("div",{className:"grid grid-cols-1 gap-4 mb-4",children:i.jsx("div",{className:"flex bg-gray-100 p-1 rounded-lg border border-gray-200",children:Object.values(Te).map(b=>i.jsx("button",{type:"button",onClick:()=>D(b),className:`flex-1 py-2 rounded-md text-sm font-medium transition-colors ${f===b?"bg-spr-accent text-white shadow-sm font-bold":"text-gray-500 hover:text-gray-900 hover:bg-gray-200"}`,children:b},b))})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Date"}),i.jsx(ie,{type:"date",value:N,onChange:b=>I(b.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Amount ()"}),i.jsx(ie,{type:"number",step:"0.01",value:C,onChange:b=>x(b.target.value),required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:f==="Income"?"Received From (Payer)":"Paid From (Source)"}),i.jsxs(ac,{value:k,onChange:b=>L(b.target.value),required:!0,children:[i.jsx("option",{value:"",children:"-- Select Source --"}),T.map(b=>i.jsxs("option",{value:b.id,children:[b.name," ",b.type==="Candidate"?"":`[${b.category}]`]},b.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:f==="Expense"?"Paid To (Expense/Vendor/Salary A/c)":"Deposit To (Dest)"}),i.jsxs(ac,{value:P,onChange:b=>w(b.target.value),required:!0,children:[i.jsx("option",{value:"",children:"-- Select Destination --"}),A.map(b=>i.jsxs("option",{value:b.id,children:[b.name," ",b.type==="Candidate"?"":`[${b.category}]`]},b.id))]})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description / Reference"}),i.jsx(ie,{value:_,onChange:b=>j(b.target.value),placeholder:f==="Income"?"e.g., Advance Payment for Java Batch":"e.g., Salary Payment Jan 2025"})]}),i.jsxs("div",{className:"mt-6 flex gap-4 justify-end",children:[i.jsx(ee,{type:"button",variant:"secondary",onClick:()=>u("/finance/transactions"),children:"Cancel"}),i.jsx(ee,{type:"submit",children:"Save Record"})]})]})})]})},CS=()=>{const{accounts:t,getEntityBalance:e,deleteAccount:n}=Ee(),r=Ct(),[s,o]=R.useState(""),[a,c]=R.useState(null),u=(y,N)=>{if(N){alert("Cannot delete system accounts");return}c(y)},d=()=>{a&&(n(a),c(null))},m=y=>y>0?"text-emerald-600":y<0?"text-red-600":"text-gray-400",f=t.filter(y=>y.name.toLowerCase().includes(s.toLowerCase())||y.subType&&y.subType.toLowerCase().includes(s.toLowerCase())).reduce((y,N)=>{const I=N.type;return y[I]||(y[I]=[]),y[I].push(N),y},{});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ledger Accounts"}),i.jsx(nn,{to:"/finance/accounts/new",children:i.jsx(ee,{children:"+ Add Account"})})]}),i.jsx(ue,{className:"p-0",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),i.jsx("input",{placeholder:"Search accounts by name or sub-type...",className:"w-full bg-white border-none rounded-lg px-2 py-1 text-gray-900 focus:ring-0 outline-none placeholder-gray-400",value:s,onChange:y=>o(y.target.value)})]})}),Object.keys(f).length>0?Object.entries(f).map(([y,N])=>i.jsx(ue,{title:`${y} Accounts`,className:"mb-6",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-2 px-4",children:"Account Name"}),i.jsx("th",{className:"py-2 px-4",children:"Sub Type"}),i.jsx("th",{className:"py-2 px-4 text-right",children:"Current Balance"}),i.jsx("th",{className:"py-2 px-4 text-center",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:N.map(I=>{const C=e(I.id,"Account");return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:I.name}),i.jsx("td",{className:"py-3 px-4 text-sm",children:I.subType||"-"}),i.jsx("td",{className:`py-3 px-4 text-right font-mono font-bold ${m(C)}`,children:he(C)}),i.jsxs("td",{className:"py-3 px-4 text-center flex justify-center gap-2",children:[i.jsx("button",{onClick:()=>r(`/finance/statement/Account/${I.id}`),className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"Stmt"}),i.jsx("button",{onClick:()=>r(`/finance/accounts/edit/${I.id}`),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),!I.isSystem&&i.jsx("button",{onClick:()=>u(I.id,I.isSystem),className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"Del"})]})]},I.id)})})]})})},y)):i.jsx("div",{className:"text-center text-gray-500 py-12 bg-white rounded-xl border border-gray-300 border-dashed",children:i.jsxs("p",{children:['No ledger accounts found matching "',s,'".']})}),i.jsx(vs,{isOpen:!!a,onClose:()=>c(null),onConfirm:d,title:"Delete Account",message:"Are you sure you want to delete this account? History will be preserved but the account name will be lost in filters."})]})},l0=()=>{const{addAccount:t,updateAccount:e,accounts:n,showToast:r}=Ee(),s=Ct(),{id:o}=gs(),[a,c]=R.useState({name:"",type:ke.Expense,subType:"",openingBalance:0,description:"",recurringAmount:0,recurringStartDate:""});R.useEffect(()=>{if(o){const m=n.find(p=>p.id===o);m&&c(m)}},[o,n]);const u=m=>{if(m.preventDefault(),!a.name)return alert("Account Name is required");const p={...a,id:o||Bt()};o?(e(p),r("Ledger Account updated successfully")):(t(p),r("Ledger Account created successfully")),s("/finance/accounts")},d=a.type===ke.Salary||a.type===ke.Expense;return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:o?"Edit Account":"Add New Account"}),i.jsx(ue,{children:i.jsxs("form",{onSubmit:u,children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx("div",{className:"col-span-2",children:i.jsx(ie,{label:"Account / Ledger Name",value:a.name,onChange:m=>c({...a,name:m.target.value}),placeholder:a.type==="Salary"?"e.g. John Doe Salary A/c":"e.g. Axis Bank, Office Rent",required:!0})}),i.jsx(ac,{label:"Account Type",value:a.type,onChange:m=>c({...a,type:m.target.value}),children:Object.values(ke).map(m=>i.jsx("option",{value:m,children:m},m))}),i.jsx(ie,{label:"Sub Ledger / Grouping",value:a.subType,onChange:m=>c({...a,subType:m.target.value}),placeholder:"e.g. Utilities, Employee, HDFC"}),i.jsx(ie,{label:"Opening Balance ()",type:"number",value:a.openingBalance,onChange:m=>c({...a,openingBalance:parseFloat(m.target.value)||0})})]}),d&&i.jsxs("div",{className:"mt-6 bg-blue-50 p-4 rounded-lg border border-blue-200 animate-fade-in",children:[i.jsx("h3",{className:"text-sm font-bold text-blue-900 uppercase mb-3",children:"Fixed Monthly Obligations"}),i.jsx("p",{className:"text-xs text-blue-800 mb-3",children:"Configure this if you have a fixed monthly payment for this account (e.g., Employee Salary, Office Rent)."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fixed Monthly Amount ()"}),i.jsx(ie,{type:"number",value:a.recurringAmount||0,onChange:m=>c({...a,recurringAmount:parseFloat(m.target.value)||0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),i.jsx(ie,{type:"date",value:a.recurringStartDate||"",onChange:m=>c({...a,recurringStartDate:m.target.value})})]})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx(ie,{label:"Description",value:a.description||"",onChange:m=>c({...a,description:m.target.value})})}),i.jsxs("div",{className:"mt-6 flex gap-4 justify-end",children:[i.jsx(ee,{type:"button",variant:"secondary",onClick:()=>s("/finance/accounts"),children:"Cancel"}),i.jsx(ee,{type:"submit",children:"Save Account"})]})]})})]})},IS=()=>{var f,y;const{transactions:t,getEntityName:e,accounts:n,candidates:r}=Ee(),{type:s,id:o}=gs(),a=Ct();if(!s||!o)return i.jsx("div",{children:"Invalid Parameters"});const c=s==="Candidate"?(f=r.find(N=>N.id===o))==null?void 0:f.name:(y=n.find(N=>N.id===o))==null?void 0:y.name;if(!c)return i.jsx("div",{className:"text-gray-900 p-4",children:"Entity not found."});const d=[...t.filter(N=>N.fromEntityId===o&&N.fromEntityType===s||N.toEntityId===o&&N.toEntityType===s).sort((N,I)=>new Date(I.date).getTime()-new Date(N.date).getTime())].reverse();let m=0;if(s==="Account"){const N=n.find(I=>I.id===o);N&&(m=N.openingBalance)}const p=d.map(N=>{let I=0;return N.toEntityId===o&&N.toEntityType===s?I=N.amount:I=-N.amount,m+=I,{...N,impact:I,runningBalance:m}}).reverse();return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx(ee,{variant:"secondary",onClick:()=>a(-1),className:"mb-2 text-xs",children:"Back"}),i.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Statement: ",c]}),i.jsx("p",{className:"text-gray-500 text-sm font-medium",children:s})]}),i.jsx(ee,{onClick:()=>Fo(p,`${c}_Statement.csv`),children:"Download CSV"})]}),i.jsx(ue,{children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-3 px-4",children:"Date"}),i.jsx("th",{className:"py-3 px-4",children:"Description"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Credit (+)"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Debit (-)"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Balance"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:p.length>0?p.map(N=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4 text-sm font-medium",children:new Date(N.date).toLocaleDateString()}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("div",{className:"text-gray-900",children:N.description}),i.jsx("div",{className:"text-xs text-gray-500",children:N.impact>0?`From: ${e(N.fromEntityId,N.fromEntityType)}`:`To: ${e(N.toEntityId,N.toEntityType)}`})]}),i.jsx("td",{className:"py-3 px-4 text-right text-emerald-600 font-medium",children:N.impact>0?he(N.amount):"-"}),i.jsx("td",{className:"py-3 px-4 text-right text-red-600 font-medium",children:N.impact<0?he(N.amount):"-"}),i.jsx("td",{className:"py-3 px-4 text-right font-mono font-bold text-gray-900",children:he(N.runningBalance)})]},N.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"text-center py-8 text-gray-500",children:"No transactions recorded for this entity."})})})]})})]})},AS=()=>{const{transactions:t,accounts:e,candidates:n,getEntityBalance:r}=Ee(),[s,o]=R.useState("BS"),a=t.filter(w=>w.type===Te.Income),c=t.filter(w=>w.type===Te.Expense),u=a.reduce((w,v)=>w+v.amount,0),d=c.reduce((w,v)=>w+v.amount,0),m=u-d,p=c.reduce((w,v)=>{let T="General Expense";if(v.toEntityType==="Account"){const A=e.find(S=>S.id===v.toEntityId);A&&(T=A.subType||A.name)}return w[T]=(w[T]||0)+v.amount,w},{}),f=e.filter(w=>w.type===ke.Cash),y=e.filter(w=>w.type===ke.Bank),N=e.filter(w=>w.type===ke.Debtor),I=f.reduce((w,v)=>w+r(v.id,"Account"),0),C=y.reduce((w,v)=>w+r(v.id,"Account"),0),x=N.reduce((w,v)=>w+r(v.id,"Account"),0),_=n.reduce((w,v)=>{if(!v.isActive&&v.status==="Discontinued")return w;const T=t.filter(b=>b.fromEntityId===v.id&&b.type===Te.Income).reduce((b,oe)=>b+oe.amount,0),A=t.filter(b=>b.toEntityId===v.id&&b.type===Te.Refund).reduce((b,oe)=>b+oe.amount,0),S=T-A,D=v.agreedAmount-S;return w+(D>0?D:0)},0),j=I+C+x+_,L=e.filter(w=>w.type===ke.Creditor).reduce((w,v)=>{const T=r(v.id,"Account");return w+(T<0?Math.abs(T):0)},0),P=j-L;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center print:hidden",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Financial Statements"}),i.jsx(ee,{onClick:()=>window.print(),children:"Print / Save PDF"})]}),i.jsxs("div",{className:"print:hidden flex space-x-4 border-b border-gray-200",children:[i.jsx("button",{className:`py-2 px-4 font-medium border-b-2 transition-colors ${s==="BS"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>o("BS"),children:"Balance Sheet"}),i.jsx("button",{className:`py-2 px-4 font-medium border-b-2 transition-colors ${s==="PL"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>o("PL"),children:"Profit & Loss"})]}),i.jsxs("div",{className:"bg-white p-8 min-h-screen shadow-sm border border-gray-200 print:shadow-none print:border-none print:p-0",children:[i.jsxs("div",{className:"text-center border-b-2 border-gray-800 pb-6 mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 uppercase tracking-widest",children:"SPR Techforge Pvt Ltd"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Consultancy & Training Services"}),i.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Generated on: ",new Date().toLocaleDateString()]})]}),(s==="BS"||typeof window<"u")&&i.jsxs("div",{className:s==="BS"?"block":"hidden print:block print:break-after-page",children:[i.jsx("h3",{className:"text-xl font-bold text-center underline mb-6",children:"BALANCE SHEET"}),i.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 mb-2",children:[i.jsx("span",{className:"font-bold text-emerald-800",children:"ASSETS"}),i.jsx("span",{className:"font-bold text-emerald-800",children:"Amount ()"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsx("div",{className:"flex justify-between font-semibold text-gray-700",children:i.jsx("span",{children:"Current Assets"})}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Cash on Hand"}),i.jsx("span",{children:he(I)})]}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Bank Accounts"}),i.jsx("span",{children:he(C)})]}),i.jsx("div",{className:"flex justify-between font-semibold text-gray-700 mt-4",children:i.jsx("span",{children:"Receivables"})}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Candidate Fees Pending"}),i.jsx("span",{children:he(_)})]}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Sundry Debtors"}),i.jsx("span",{children:he(x)})]})]}),i.jsxs("div",{className:"flex justify-between border-t border-gray-800 pt-2 mt-8 font-bold text-gray-900 text-lg",children:[i.jsx("span",{children:"TOTAL ASSETS"}),i.jsx("span",{children:he(j)})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 mb-2",children:[i.jsx("span",{className:"font-bold text-red-800",children:"LIABILITIES"}),i.jsx("span",{className:"font-bold text-red-800",children:"Amount ()"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsx("div",{className:"flex justify-between font-semibold text-gray-700",children:i.jsx("span",{children:"Current Liabilities"})}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Sundry Creditors"}),i.jsx("span",{children:he(L)})]})]}),i.jsxs("div",{className:"flex justify-between border-t border-gray-300 pt-2 mt-8 font-bold text-gray-700",children:[i.jsx("span",{children:"Total Liabilities"}),i.jsx("span",{children:he(L)})]}),i.jsxs("div",{className:"mt-8",children:[i.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 mb-2",children:[i.jsx("span",{className:"font-bold text-indigo-800",children:"EQUITY"}),i.jsx("span",{className:"font-bold text-indigo-800",children:"Amount ()"})]}),i.jsx("div",{className:"space-y-2 text-sm",children:i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Owners Capital / Net Value"}),i.jsx("span",{children:he(P)})]})})]}),i.jsxs("div",{className:"flex justify-between border-t border-gray-800 pt-2 mt-8 font-bold text-gray-900 text-lg",children:[i.jsx("span",{children:"TOTAL LIABILITIES & EQUITY"}),i.jsx("span",{children:he(L+P)})]})]})]})]}),(s==="PL"||typeof window<"u")&&i.jsxs("div",{className:`${s==="PL"?"block":"hidden print:block"} print:mt-8`,children:[i.jsx("h3",{className:"text-xl font-bold text-center underline mb-6",children:"PROFIT & LOSS ACCOUNT"}),i.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-gray-100 text-gray-900 font-bold",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 border-r border-gray-300 w-2/3",children:"Particulars"}),i.jsx("th",{className:"p-3 text-right",children:"Amount ()"})]})}),i.jsxs("tbody",{className:"divide-y divide-gray-200",children:[i.jsxs("tr",{className:"bg-emerald-50/50 font-bold text-emerald-800",children:[i.jsx("td",{className:"p-3 border-r border-gray-200",children:"INCOME (Revenue)"}),i.jsx("td",{className:"p-3 text-right"})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"p-3 pl-8 border-r border-gray-200 text-gray-700",children:"Consultancy Fees Received"}),i.jsx("td",{className:"p-3 text-right text-gray-900",children:he(u)})]}),i.jsxs("tr",{className:"font-bold bg-gray-50",children:[i.jsx("td",{className:"p-3 border-r border-gray-200 text-right",children:"Total Income (A)"}),i.jsx("td",{className:"p-3 text-right text-emerald-700",children:he(u)})]}),i.jsxs("tr",{className:"bg-red-50/50 font-bold text-red-800",children:[i.jsx("td",{className:"p-3 border-r border-gray-200",children:"EXPENSES"}),i.jsx("td",{className:"p-3 text-right"})]}),Object.entries(p).map(([w,v])=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-3 pl-8 border-r border-gray-200 text-gray-700",children:w}),i.jsx("td",{className:"p-3 text-right text-gray-900",children:he(v)})]},w)),i.jsxs("tr",{className:"font-bold bg-gray-50",children:[i.jsx("td",{className:"p-3 border-r border-gray-200 text-right",children:"Total Expenses (B)"}),i.jsx("td",{className:"p-3 text-right text-red-700",children:he(d)})]}),i.jsxs("tr",{className:`text-lg font-bold ${m>=0?"bg-emerald-100 text-emerald-900":"bg-red-100 text-red-900"}`,children:[i.jsx("td",{className:"p-4 border-r border-gray-300 text-right uppercase",children:m>=0?"Net Profit (A - B)":"Net Loss (A - B)"}),i.jsx("td",{className:"p-4 text-right",children:he(m)})]})]})]})})]}),i.jsx("div",{className:"mt-12 text-center text-xs text-gray-400",children:i.jsx("p",{children:"This is a computer-generated statement."})})]})]})},kS=()=>{const{accounts:t,transactions:e}=Ee(),n=t.filter(s=>(s.type===ke.Salary||s.recurringAmount!==void 0&&s.recurringAmount>0)&&s.recurringStartDate),r=(s,o)=>{const a=new Date(s),c=o?new Date(o):new Date;let u=(c.getFullYear()-a.getFullYear())*12+(c.getMonth()-a.getMonth());return u<0&&(u=0),u+1};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Payroll & Fixed Expenses"}),i.jsx("p",{className:"text-gray-500",children:"Track monthly salaries, office rent, and other recurring fixed obligations."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(nn,{to:"/finance/accounts/new",children:i.jsx(ee,{variant:"secondary",children:"+ New Ledger"})}),i.jsx(nn,{to:"/finance/transactions/new",children:i.jsx(ee,{children:"+ Pay Expense"})})]})]}),i.jsx(ue,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-3 px-4",children:"Ledger / Employee"}),i.jsx("th",{className:"py-3 px-4",children:"Type"}),i.jsx("th",{className:"py-3 px-4",children:"Start Date"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Fixed Monthly ()"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Months"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Total Payable"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Total Paid"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Pending"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:n.length>0?n.map(s=>{const o=r(s.recurringStartDate,s.recurringEndDate),a=o*(s.recurringAmount||0),c=e.filter(d=>d.toEntityId===s.id&&d.toEntityType==="Account"&&d.type===Te.Expense).reduce((d,m)=>d+m.amount,0),u=a-c;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900",children:[s.name,s.subType&&i.jsx("div",{className:"text-xs text-gray-400",children:s.subType})]}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`text-xs px-2 py-1 rounded border ${s.type==="Salary"?"bg-indigo-50 text-indigo-700 border-indigo-200":"bg-gray-100 border-gray-200"}`,children:s.type})}),i.jsx("td",{className:"py-3 px-4 text-sm",children:new Date(s.recurringStartDate).toLocaleDateString()}),i.jsx("td",{className:"py-3 px-4 text-right text-gray-900",children:he(s.recurringAmount||0)}),i.jsx("td",{className:"py-3 px-4 text-center",children:o}),i.jsx("td",{className:"py-3 px-4 text-right font-medium",children:he(a)}),i.jsx("td",{className:"py-3 px-4 text-right text-emerald-600 font-medium",children:he(c)}),i.jsx("td",{className:`py-3 px-4 text-right font-bold ${u>0?"text-red-600":"text-emerald-600"}`,children:he(u)}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsx(nn,{to:`/finance/accounts/edit/${s.id}`,className:"text-blue-600 hover:underline text-xs",children:"Edit"})})]},s.id)}):i.jsx("tr",{children:i.jsxs("td",{colSpan:9,className:"py-8 text-center text-gray-500",children:["No fixed recurring expenses found. ",i.jsx("br",{}),'Create a Ledger Account (Type: Salary or Expense) and set a "Fixed Monthly Amount" to see it here.']})})})]})})})]})},PS=()=>{const{exportData:t,importDatabase:e,isCloudEnabled:n,transactions:r}=Ee(),s=R.useRef(null),[o,a]=R.useState("Data"),c=p=>{var N;const f=(N=p.target.files)==null?void 0:N[0];if(!f)return;const y=new FileReader;y.onload=async I=>{var C;try{const x=JSON.parse((C=I.target)==null?void 0:C.result);let _="You are about to restore the database from a backup file. This will OVERWRITE current local data.";n&&(_+=" Since Cloud is enabled, this will also upload the backup data to Firebase, potentially overwriting or adding to existing records."),window.confirm(_+`

Are you sure you want to proceed?`)&&await e(x)}catch{alert("Invalid JSON File. Please upload a valid backup file.")}s.current&&(s.current.value="")},y.readAsText(f)},d=Array.from({length:6},(p,f)=>{const y=new Date;return y.setMonth(y.getMonth()-(5-f)),y}).map(p=>{`${p.getFullYear()}${p.getMonth()}`;const f=p.toLocaleString("default",{month:"short",year:"2-digit"}),y=r.filter(I=>I.type===Te.Income&&new Date(I.date).getMonth()===p.getMonth()&&new Date(I.date).getFullYear()===p.getFullYear()).reduce((I,C)=>I+C.amount,0),N=r.filter(I=>I.type===Te.Expense&&new Date(I.date).getMonth()===p.getMonth()&&new Date(I.date).getFullYear()===p.getFullYear()).reduce((I,C)=>I+C.amount,0);return{label:f,income:y,expense:N}}),m=Math.max(...d.map(p=>Math.max(p.income,p.expense)),1e3);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Data & Analytics"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>a("Data"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${o==="Data"?"bg-spr-accent text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Backup & Restore"}),i.jsx("button",{onClick:()=>a("Info"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${o==="Info"?"bg-spr-accent text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Database Info"})]})]}),o==="Data"&&i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs(ue,{title:"Financial Trends (Last 6 Months)",children:[i.jsx("div",{className:"h-64 flex items-end justify-between gap-2 px-2 pb-2 pt-6",children:d.map((p,f)=>i.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center gap-2 group",children:[i.jsxs("div",{className:"w-full flex justify-center gap-1 h-full items-end relative",children:[i.jsxs("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-gray-800 text-white text-xs p-2 rounded shadow-lg z-10 whitespace-nowrap",children:["Income: ",he(p.income),i.jsx("br",{}),"Expense: ",he(p.expense)]}),i.jsx("div",{className:"w-1/3 bg-emerald-500 hover:bg-emerald-600 rounded-t transition-all duration-500",style:{height:`${p.income/m*100}%`}}),i.jsx("div",{className:"w-1/3 bg-red-500 hover:bg-red-600 rounded-t transition-all duration-500",style:{height:`${p.expense/m*100}%`}})]}),i.jsx("span",{className:"text-xs text-gray-500 font-medium",children:p.label})]},f))}),i.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-3 h-3 bg-emerald-500 rounded"}),i.jsx("span",{className:"text-xs text-gray-600",children:"Income"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-3 h-3 bg-red-500 rounded"}),i.jsx("span",{className:"text-xs text-gray-600",children:"Expenses"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(ue,{title:"Backup (Export)",className:"h-full",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"Download a complete copy of the system database. This JSON file contains all Candidates, Accounts, Transactions, Users, and Logs."}),i.jsx("div",{className:"pt-4",children:i.jsx(ee,{onClick:t,children:"Download Full Database"})})]})}),i.jsx(ue,{title:"Restore (Import)",className:"h-full",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"Upload a previously exported JSON file to restore the system state."}),i.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-3 rounded text-sm text-amber-800",children:[i.jsx("strong",{children:"Warning:"})," This action updates your current database with the data from the file."]}),i.jsxs("div",{className:"pt-4",children:[i.jsx("input",{type:"file",accept:".json",ref:s,style:{display:"none"},onChange:c}),i.jsx(ee,{variant:"secondary",onClick:()=>{var p;return(p=s.current)==null?void 0:p.click()},children:"Upload & Restore Backup"})]})]})})]})]}),o==="Info"&&i.jsx("div",{className:"animate-fade-in",children:i.jsx(ue,{title:"Database Structure",children:i.jsxs("div",{className:"text-gray-600 space-y-4",children:[i.jsx("p",{children:"The application currently uses a NoSQL structure (JSON-based)."}),n?i.jsxs("div",{className:"bg-orange-50 border border-orange-200 p-4 rounded text-orange-900",children:[i.jsx("strong",{children:"Cloud Provider:"})," Google Firebase (Firestore)",i.jsx("br",{}),i.jsx("strong",{children:"Status:"})," Connected",i.jsx("br",{}),i.jsx("p",{className:"mt-2 text-sm",children:"Data is synced in real-time. Collections are created automatically (Schemaless)."})]}):i.jsxs("div",{className:"bg-gray-100 border border-gray-300 p-4 rounded",children:[i.jsx("strong",{children:"Storage:"})," Local Browser Storage",i.jsx("br",{}),i.jsx("strong",{children:"Status:"})," Offline Mode"]})]})})})]})},RS=()=>{const{users:t,candidates:e}=Ee(),[n,r]=R.useState(""),[s,o]=R.useState("All"),c=[...t.map(u=>({id:u.id,name:u.name||u.username,role:u.role==="admin"?"Administrator":"Staff",email:u.email||u.username,phone:"",type:"Staff"})),...e.filter(u=>u.isActive).map(u=>({id:u.id,name:u.name,role:`Candidate (${u.batchId})`,email:u.email,phone:u.phone,type:"Candidate"}))].filter(u=>{const d=u.name.toLowerCase().includes(n.toLowerCase())||u.email.toLowerCase().includes(n.toLowerCase())||u.role.toLowerCase().includes(n.toLowerCase()),m=s==="All"||u.type===s;return d&&m});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Address Book"}),i.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[i.jsx("input",{placeholder:"Search contacts...",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none flex-1",value:n,onChange:u=>r(u.target.value)}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:s,onChange:u=>o(u.target.value),children:[i.jsx("option",{value:"All",children:"All Contacts"}),i.jsx("option",{value:"Candidate",children:"Candidates"}),i.jsx("option",{value:"Staff",children:"Staff"})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(u=>i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold text-white ${u.type==="Staff"?"bg-indigo-600":"bg-emerald-500"}`,children:u.name.charAt(0).toUpperCase()}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-gray-900",children:u.name}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${u.type==="Staff"?"bg-indigo-50 text-indigo-700 border-indigo-100":"bg-emerald-50 text-emerald-700 border-emerald-100"}`,children:u.role})]})]}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-600 flex-1",children:[u.phone&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),i.jsx("span",{children:u.phone})]}),u.email&&i.jsxs("div",{className:"flex items-center gap-2 break-all",children:[i.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("span",{children:u.email})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-100",children:[u.phone&&i.jsx("a",{href:`tel:${u.phone}`,className:"flex-1 py-2 text-center rounded-lg bg-green-50 text-green-700 font-medium hover:bg-green-100 transition-colors text-sm",children:"Call"}),u.email&&i.jsx("a",{href:`mailto:${u.email}`,className:"flex-1 py-2 text-center rounded-lg bg-blue-50 text-blue-700 font-medium hover:bg-blue-100 transition-colors text-sm",children:"Mail"})]})]},u.id))})]})},DS=()=>{const{users:t,deleteUser:e,user:n,passwordResetRequests:r,resolvePasswordResetRequest:s}=Ee(),[o,a]=R.useState(null),[c,u]=R.useState({}),d=Ct(),m=(n==null?void 0:n.id)==="admin-01"||(n==null?void 0:n.username)==="thirumalreddy@sprtechforge.com",p=(n==null?void 0:n.role)==="admin",f=C=>{if(C===(n==null?void 0:n.id)){alert("You cannot delete yourself.");return}a(C)},y=()=>{o&&(e(o),a(null))},N=C=>{u(x=>({...x,[C]:!x[C]}))},I=(C,x)=>{s(C),x?d(`/admin/users/edit/${x}`):alert("User not found.")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Or,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"})]}),p&&i.jsx(nn,{to:"/admin/users/new",children:i.jsx(ee,{children:"+ Add User"})})]}),p&&r.length>0&&i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-amber-800 mb-3",children:"Pending Password Reset Requests"}),i.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map(C=>{const x=t.find(_=>_.username===C.username);return i.jsxs("div",{className:"flex justify-between bg-white p-4 rounded border border-amber-200 shadow-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:C.username}),i.jsx("p",{className:"text-xs text-gray-500",children:new Date(C.requestDate).toLocaleString()})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ee,{variant:"secondary",onClick:()=>s(C.id),className:"text-xs",children:"Dismiss"}),i.jsx(ee,{onClick:()=>I(C.id,(x==null?void 0:x.id)||""),className:"text-xs",disabled:!x,children:"Reset"})]})]},C.id)})})]}),i.jsx(ue,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"py-3 px-4",children:"Full Name"}),i.jsx("th",{className:"py-3 px-4",children:"Login ID"}),p&&i.jsx("th",{className:"py-3 px-4",children:"Password"}),i.jsx("th",{className:"py-3 px-4",children:"Role"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map(C=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:C.name}),i.jsx("td",{className:"py-3 px-4 font-mono text-sm",children:C.username}),p&&i.jsxs("td",{className:"py-3 px-4 text-sm font-mono flex items-center gap-2",children:[c[C.id]?C.password:"",i.jsx("button",{onClick:()=>N(C.id),className:"text-gray-400 hover:text-indigo-600 focus:outline-none",children:c[C.id]?i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):i.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),i.jsx("td",{className:"py-3 px-4 capitalize",children:C.role}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsx(nn,{to:`/admin/users/edit/${C.id}`,className:"text-blue-600 hover:underline text-sm",children:"Edit"}),m&&C.id!==(n==null?void 0:n.id)&&i.jsx("button",{onClick:()=>f(C.id),className:"text-red-500 hover:underline text-sm",children:"Delete"})]})})]},C.id))})]})})}),i.jsx(vs,{isOpen:!!o,onClose:()=>a(null),onConfirm:y,title:"Delete User",message:"Are you sure? This cannot be undone."})]})},c0=()=>{var y,N,I;const{users:t,addUser:e,updateUser:n,showToast:r}=Ee(),s=Ct(),{id:o}=gs(),[a,c]=R.useState(null),[u,d]=R.useState({name:"",username:"",password:"",role:"staff",modules:["candidates"]});R.useEffect(()=>{if(o){const C=t.find(x=>x.id===o);C&&d(C)}},[o,t]);const m=C=>{if(o)d({...u,name:C});else{const x=C.replace(/\s+/g,"").toLowerCase()+"@sprtechforge.com";d({...u,name:C,username:x,password:C})}},p=C=>{if(C.preventDefault(),c(null),!u.name||!u.name.trim()){c("Full Name is required");return}if(!u.username||!u.username.trim()){c("Login ID is required");return}if(t.some(j=>{var k;return j.username.toLowerCase()===((k=u.username)==null?void 0:k.toLowerCase().trim())&&j.id!==o})){c("A user with this Login ID already exists. Please choose another.");return}const _={id:o||Bt(),name:u.name,username:u.username.trim()||"",password:u.password||u.name||"password",role:u.role,modules:u.role==="admin"?["candidates","finance","users"]:u.modules||[],authProvider:"local",isPasswordChanged:o?u.isPasswordChanged:!1};o?(n(_),r("User updated successfully")):(e(_),r("User added successfully")),s("/admin/users")},f=C=>{var x;(x=u.modules)!=null&&x.includes(C)?d({...u,modules:u.modules.filter(_=>_!==C)}):d({...u,modules:[...u.modules||[],C]})};return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:o?"Edit User":"Add New User"}),a&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded shadow-sm animate-fade-in",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm text-red-700 font-bold",children:a})})})}),i.jsx(ue,{children:i.jsxs("form",{onSubmit:p,children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Full Name"}),i.jsx(ie,{value:u.name,onChange:C=>m(C.target.value),placeholder:"e.g. Thirumal Reddy",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 p-4 bg-gray-50 rounded-lg border border-spr-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1 required-label",children:"Auto-Generated Login ID"}),i.jsx(ie,{value:u.username,onChange:C=>d({...u,username:C.target.value}),required:!0,className:"font-mono"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1 required-label",children:"Default Password"}),i.jsx("div",{className:"text-gray-900 font-mono mt-2",children:o?"********":u.password||"-"}),!o&&i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Same as Full Name"})]}),!o&&i.jsxs("div",{className:"col-span-2 mt-2 text-xs text-amber-600 font-medium flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"User will be forced to change this password on first login."]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Role"}),i.jsxs(ac,{value:u.role,onChange:C=>d({...u,role:C.target.value}),required:!0,children:[i.jsx("option",{value:"staff",children:"Staff"}),i.jsx("option",{value:"admin",children:"Admin"}),i.jsx("option",{value:"candidate",children:"Candidate"})]})]}),u.role==="staff"&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Access Modules"}),i.jsxs("div",{className:"flex flex-col gap-2 bg-gray-50 p-3 rounded border border-spr-700",children:[i.jsxs("label",{className:"flex items-center gap-2 text-gray-700 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(y=u.modules)==null?void 0:y.includes("candidates"),onChange:()=>f("candidates")}),"Training (Candidates)"]}),i.jsxs("label",{className:"flex items-center gap-2 text-gray-700 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(N=u.modules)==null?void 0:N.includes("finance"),onChange:()=>f("finance")}),"Finance (Transactions, Accounts, Reports)"]}),i.jsxs("label",{className:"flex items-center gap-2 text-gray-700 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(I=u.modules)==null?void 0:I.includes("users"),onChange:()=>f("users")}),"User Management"]})]})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Note: Payroll settings are now managed in the ",i.jsx("strong",{children:"Finance > Ledger Accounts"}),' section. Create a "Salary" type account for this user to track payments.']}),i.jsxs("div",{className:"mt-6 flex gap-4 justify-end",children:[i.jsx(ee,{type:"button",variant:"secondary",onClick:()=>s("/admin/users"),children:"Cancel"}),i.jsx(ee,{type:"submit",children:"Save User"})]})]})})]})},LS=()=>{const{activityLogs:t,clearActivityLogs:e,user:n}=Ee(),[r,s]=R.useState(1),[o,a]=R.useState(""),[c,u]=R.useState(!1),d=15,m=(n==null?void 0:n.id)==="admin-01",p=t.filter(I=>I.description.toLowerCase().includes(o.toLowerCase())||I.actorName.toLowerCase().includes(o.toLowerCase())),f=Math.ceil(p.length/d),y=p.slice((r-1)*d,r*d),N=()=>{const I=t.map(C=>({Timestamp:new Date(C.timestamp).toISOString(),User:C.actorName,Action:C.action,Entity:C.entityType,ID:C.entityId||"",Description:C.description}));Fo(I,"System_Logs.csv")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Or,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Logs"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ee,{variant:"secondary",onClick:N,children:"Export CSV"}),m&&i.jsx(ee,{variant:"danger",onClick:()=>u(!0),children:"Clear Logs"})]})]}),i.jsxs(ue,{children:[i.jsx("div",{className:"mb-4",children:i.jsx("input",{placeholder:"Search logs...",className:"w-full border rounded px-4 py-2",value:o,onChange:I=>a(I.target.value)})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600 text-sm",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Time"}),i.jsx("th",{className:"p-3",children:"User"}),i.jsx("th",{className:"p-3",children:"Action"}),i.jsx("th",{className:"p-3",children:"Description"})]})}),i.jsxs("tbody",{className:"divide-y",children:[y.map(I=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-3 font-mono text-xs",children:new Date(I.timestamp).toLocaleString()}),i.jsx("td",{className:"p-3 font-medium",children:I.actorName}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:I.action})}),i.jsx("td",{className:"p-3",children:I.description})]},I.id)),y.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"text-center p-8 text-gray-400",children:"No logs found."})})]})]})}),i.jsx(Xf,{currentPage:r,totalPages:f,onPageChange:s})]}),i.jsx(vs,{isOpen:c,onClose:()=>u(!1),onConfirm:()=>{e(),u(!1)},title:"Clear All Logs",message:"Are you sure you want to permanently delete all system logs? This action cannot be undone."})]})},VS=()=>{const t=Ee(),[e,n]=R.useState([]),[r,s]=R.useState(!1),[o,a]=R.useState({total:0,passed:0,failed:0,time:0}),c=(d,m,p,f=0)=>{n(y=>[...y,{id:Date.now()+Math.random(),name:d,status:m,message:p,duration:f}])},u=async()=>{s(!0),n([]),a({total:0,passed:0,failed:0,time:0});const d=performance.now();let m=0,p=0,f=0;const y=async(k,L)=>{f++;const P=performance.now();try{await L();const w=performance.now()-P;c(k,"PASS","Test execution successful",w),m++}catch(w){const v=performance.now()-P;c(k,"FAIL",w.message||"Unknown error",v),p++}};await y("Unit: Currency Formatting",()=>{const k=he(1500.5);if(!k.includes("1,500.50")&&!k.includes("1,500.5"))throw new Error(`Formatting failed: ${k}`)}),await y("Unit: ID Generation",()=>{const k=Bt(),L=Bt();if(k===L)throw new Error("ID collision detected");if(k.length<5)throw new Error("ID too short")}),await y("Unit: Balance Calculation Logic",()=>{const k=[{id:"t1",amount:1e3,type:Te.Income,fromEntityId:"C1",fromEntityType:"Candidate",toEntityId:"A1",toEntityType:"Account",date:"",description:"",isLocked:!1},{id:"t2",amount:200,type:Te.Expense,fromEntityId:"A1",fromEntityType:"Account",toEntityId:"V1",toEntityType:"Account",date:"",description:"",isLocked:!1}],L=Zi("A1","Account",k,0);if(L!==800)throw new Error(`Account Balance calc failed. Expected 800, got ${L}`);const P=Zi("C1","Candidate",k,0);if(P!==-1e3)throw new Error(`Candidate Balance calc failed. Expected -1000, got ${P}`)});const N=Date.now(),I=`test-user-${N}`,C=`test-cand-${N}`,x=`test-acc-${N}`;await y("API: User Creation",()=>{t.addUser({id:I,name:`User ${N}`,username:`u${N}`,password:"123",role:"staff",modules:[]})}),await y("API: User Update",()=>{t.updateUser({id:I,name:`User ${N} Updated`,username:`u${N}_updated`,password:"123",role:"staff",modules:["finance"]})}),await y("API: Candidate Creation",()=>{t.addCandidate({id:C,name:"API Tester",batchId:"API-01",email:"test@api.com",phone:"9999999999",agreedAmount:1e4,status:dt.Training,isActive:!0,joinedDate:new Date().toISOString()})}),await y("API: Candidate Update",()=>{t.updateCandidate({id:C,name:"API Tester (Updated)",batchId:"API-01",email:"test@api.com",phone:"9999999999",agreedAmount:15e3,status:dt.ReadyForInterview,isActive:!0,joinedDate:new Date().toISOString()})}),await y("API: Account Creation",()=>{t.addAccount({id:x,name:"API Test Bank",type:ke.Bank,openingBalance:5e3})});const _=`test-tx-${N}`;await y("API: Transaction Record",()=>{t.addTransaction({id:_,date:new Date().toISOString(),type:Te.Income,amount:2e3,fromEntityId:C,fromEntityType:"Candidate",toEntityId:x,toEntityType:"Account",description:"API Test Fee",isLocked:!1})}),await y("E2E: Payment Logic Verification",()=>{const k=[{id:"x",date:"",type:Te.Income,amount:2e3,fromEntityId:C,fromEntityType:"Candidate",toEntityId:x,toEntityType:"Account",description:"",isLocked:!1}],L=Zi(x,"Account",k,5e3);if(L!==7e3)throw new Error(`E2E Balance Check Failed: Expected 7000, Got ${L}`);const v=15e3-Math.abs(Zi(C,"Candidate",k,0));if(v!==13e3)throw new Error(`E2E Due Check Failed: Expected 13000, Got ${v}`)}),await y("Negative: Delete System Account",()=>{try{throw t.deleteAccount("cash-01"),new Error("Failed to block system account deletion")}catch(k){if(!k.message.includes("Cannot delete a System Account"))throw k}}),await y("Negative: Delete Last User",()=>{if(t.users.length===1)try{throw t.deleteUser(t.users[0].id),new Error("Failed to block last user deletion")}catch(k){if(!k.message.includes("Cannot delete the last user"))throw k}}),await y("Cleanup: Remove Test Data",()=>{t.deleteTransaction(_),t.deleteCandidate(C),t.deleteAccount(x),t.deleteUser(I)});const j=performance.now()-d;a({total:f,passed:m,failed:p,time:j}),s(!1)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Diagnostics & API Testing"}),i.jsx("p",{className:"text-gray-600",children:"Automated testing suite for internal logic, integration flows, and negative scenarios."})]}),i.jsx(ee,{onClick:u,disabled:r,children:r?"Running Tests...":"Run Full Test Suite"})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs(ue,{className:"text-center py-4",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Tests"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.total})]}),i.jsxs(ue,{className:"text-center py-4 border-emerald-200 bg-emerald-50",children:[i.jsx("p",{className:"text-xs text-emerald-700 uppercase font-bold",children:"Passed"}),i.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:o.passed})]}),i.jsxs(ue,{className:"text-center py-4 border-red-200 bg-red-50",children:[i.jsx("p",{className:"text-xs text-red-700 uppercase font-bold",children:"Failed"}),i.jsx("p",{className:"text-2xl font-bold text-red-700",children:o.failed})]}),i.jsxs(ue,{className:"text-center py-4",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Duration"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o.time.toFixed(2)," ms"]})]})]}),i.jsx(ue,{title:"Execution Log",children:i.jsxs("div",{className:"h-96 overflow-y-auto space-y-2 font-mono text-sm bg-gray-50 p-4 rounded border border-spr-700",children:[e.length===0&&i.jsx("p",{className:"text-gray-400 text-center italic",children:"Ready to start diagnostics..."}),e.map(d=>i.jsxs("div",{className:`flex items-start gap-3 p-2 rounded border ${d.status==="PASS"?"bg-white border-emerald-200":d.status==="FAIL"?"bg-red-50 border-red-200":"bg-gray-100 border-gray-200"}`,children:[i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold w-16 text-center shrink-0 ${d.status==="PASS"?"bg-emerald-100 text-emerald-700":d.status==="FAIL"?"bg-red-100 text-red-700":"bg-gray-200 text-gray-600"}`,children:d.status}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-bold text-gray-900",children:d.name}),i.jsx("p",{className:"text-gray-600",children:d.message})]}),i.jsxs("span",{className:"text-gray-400 text-xs shrink-0",children:[d.duration.toFixed(2),"ms"]})]},d.id))]})}),i.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200 text-sm text-blue-800",children:[i.jsx("strong",{children:"Note on Testing:"})," This runner executes commands against the live Application Context. Integration tests create temporary entities prefixed with ",i.jsx("code",{children:"TEST_"})," and attempt to clean them up immediately. Negative testing purposefully attempts invalid operations to ensure the API blocks them correctly."]})]})},MS=()=>{const{isCloudEnabled:t,syncLocalToCloud:e,cloudError:n}=Ee(),[r,s]=R.useState(""),[o,a]=R.useState("unknown"),[c,u]=R.useState(""),[d,m]=R.useState(!1),[p,f]=R.useState(!1);R.useEffect(()=>{const I=Ue.getConfig();I&&(s(JSON.stringify(I,null,2)),a("connected")),n&&(a("error"),u(n),n.includes("Permission")&&f(!0))},[n]);const y=async()=>{var C;if(u(""),a("unknown"),!r.trim()){u("Please paste the Firebase Configuration JSON."),a("error");return}m(!0);const I=await Ue.testConfig(r);if(m(!1),I.success)try{const x=JSON.parse(r);Ue.saveConfig(x),a("connected"),u("Configuration Saved. App will reload.")}catch{a("error"),u("Invalid JSON syntax.")}else a("error"),u(I.error||"Connection verification failed."),(C=I.error)!=null&&C.includes("permission")&&f(!0)},N=()=>{window.confirm("Are you sure? This will disconnect the app from Firebase and revert to Local Storage.")&&Ue.clearConfig()};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Cloud Setup"}),i.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M3.89 15.67L6.47 4.08C6.56 3.66 7.11 3.55 7.36 3.89L10.94 8.89L3.89 15.67Z",fill:"#FFC107"}),i.jsx("path",{d:"M15.56 8.89L19.14 3.89C19.39 3.55 19.94 3.66 20.03 4.08L22.61 15.67H3.89L15.56 8.89Z",fill:"#FFC107"}),i.jsx("path",{d:"M13.25 2.3L11.81 0.32C11.56 -0.02 11.09 -0.02 10.84 0.32L9.4 2.3C9.23 2.54 9.29 2.86 9.53 3.02L10.94 3.96L12.35 3.02C12.59 2.86 12.65 2.54 12.48 2.3H13.25Z",fill:"#FFC107"}),i.jsx("path",{d:"M3.89 15.67H22.61L14.62 20.23C13.98 20.59 13.2 20.67 12.5 20.45L11.73 20.21L3.89 15.67Z",fill:"#FFA000"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[o==="connected"&&i.jsxs("span",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-bold border border-orange-200 flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 bg-orange-600 rounded-full animate-pulse"})," Firebase Connected"]}),o==="error"&&i.jsx("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-bold border border-red-200",children:"Connection Failed"})]})]}),p&&i.jsxs("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded shadow-sm animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-amber-900 font-bold text-lg mb-2",children:"Missing Permissions?"}),i.jsxs("p",{className:"text-amber-800 text-sm mb-2",children:["It looks like your Firestore Security Rules are blocking the application. Since this app manages users internally, you need to enable ",i.jsx("strong",{children:"Test Mode"})," or allow public read/write in the Firebase Console."]}),i.jsx("p",{className:"text-amber-800 text-sm font-bold mb-2",children:"Go to Firebase Console > Firestore Database > Rules and paste this:"})]}),i.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),i.jsxs("div",{className:"bg-gray-900 p-3 rounded text-gray-100 font-mono text-xs overflow-x-auto relative group",children:[i.jsx("pre",{children:`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}`}),i.jsx("button",{onClick:()=>navigator.clipboard.writeText(`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}`),className:"absolute top-2 right-2 bg-white text-gray-900 px-2 py-1 rounded text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity",children:"Copy"})]})]}),i.jsx(ue,{title:"Firebase Configuration",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-gray-600",children:["Connect this application to ",i.jsx("strong",{children:"Google Firebase (Firestore)"})," for real-time data synchronization and cloud backup."]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded text-sm text-blue-900",children:[i.jsx("strong",{children:"How to get configuration:"}),i.jsxs("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:[i.jsxs("li",{children:["Go to ",i.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",className:"underline font-bold",children:"Firebase Console"}),"."]}),i.jsx("li",{children:"Open your Project Settings (Gear Icon)."}),i.jsx("li",{children:'Scroll down to "Your apps" and select the Web App.'}),i.jsxs("li",{children:["Copy the ",i.jsx("code",{children:"firebaseConfig"})," object (the part inside the curly braces)."]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Config Object (JSON)"}),i.jsx("textarea",{className:"w-full bg-gray-900 text-green-400 font-mono text-xs border border-spr-700 rounded-lg px-4 py-4 focus:ring-1 focus:ring-spr-accent outline-none h-64",value:r,onChange:I=>s(I.target.value),placeholder:`{
  "apiKey": "AIza...",
  "authDomain": "project-id.firebaseapp.com",
  "projectId": "project-id",
  "storageBucket": "project-id.appspot.com",
  "messagingSenderId": "...",
  "appId": "..."
}`})]}),o==="error"&&i.jsxs("div",{className:"bg-red-50 border border-red-200 p-3 rounded mt-2 text-red-700 text-sm",children:[i.jsx("strong",{children:"Error:"})," ",c]}),i.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[i.jsx(ee,{variant:"secondary",onClick:()=>f(!p),children:p?"Hide Rules Help":"Troubleshoot Permissions"}),t&&i.jsx(ee,{variant:"danger",onClick:N,children:"Disconnect"}),i.jsx(ee,{onClick:y,disabled:d,children:d?"Verifying...":t?"Update & Reconnect":"Connect & Save"})]})]})}),t&&o==="connected"&&!n&&i.jsx(ue,{title:"Data Synchronization",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-gray-900",children:"Upload Local Data"}),i.jsxs("p",{className:"text-sm text-gray-500",children:["Push your current local browser data to Firestore.",i.jsx("br",{}),i.jsx("span",{className:"text-xs text-orange-600 font-bold",children:"Note: Firestore creates collections automatically. No SQL setup required."})]})]}),i.jsx(ee,{variant:"secondary",onClick:e,children:"Sync Local -> Cloud"})]})})]})},OS=()=>{const{candidates:t,markAgreementAccepted:e,isCloudEnabled:n}=Ee(),{id:r}=gs(),[s,o]=R.useState(!1),[a,c]=R.useState(null),u=t.find(m=>m.id===r);R.useEffect(()=>{u!=null&&u.agreementAcceptedDate&&o(!0)},[u]);const d=()=>{if(r&&u){if(!n){c("The system is currently in Offline Mode. Acceptance cannot be recorded. Please contact admin.");return}try{e(r),o(!0)}catch{c("Failed to record acceptance. Please try again.")}}};return u?i.jsx("div",{className:"min-h-screen bg-gray-100 py-10 px-4",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx(di,{size:"lg"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Training Candidature Agreement"}),i.jsx("p",{className:"text-gray-600",children:"SPR Techforge Pvt Ltd"})]}),a&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded text-red-700",children:a}),i.jsxs(ue,{className:"mb-6",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mb-6",children:[i.jsx("h3",{className:"text-sm font-bold text-blue-800 uppercase mb-2",children:"Candidate Details"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Name:"})," ",i.jsx("span",{className:"font-bold text-gray-900",children:u.name})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Batch ID:"})," ",i.jsx("span",{className:"font-bold text-gray-900",children:u.batchId})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Email:"})," ",i.jsx("span",{className:"text-gray-900",children:u.email})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Phone:"})," ",i.jsx("span",{className:"text-gray-900",children:u.phone})]})]})]}),i.jsx("div",{className:"prose max-w-none border-t border-b border-gray-100 py-6 my-6",children:i.jsx("div",{className:"whitespace-pre-wrap font-serif text-justify leading-relaxed text-gray-800",children:u.agreementText||"Agreement text not available."})}),i.jsx("div",{className:"flex flex-col items-center gap-4 mt-8",children:s?i.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-6 text-center w-full",children:[i.jsx("svg",{className:"w-16 h-16 text-emerald-500 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:"Agreement Accepted"}),i.jsxs("p",{className:"text-emerald-600 text-sm mt-1",children:["Recorded on ",new Date(u.agreementAcceptedDate).toLocaleString()]}),i.jsx("p",{className:"text-gray-500 text-xs mt-4",children:"You may close this window."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-start gap-3 bg-amber-50 p-4 rounded text-sm text-amber-800",children:[i.jsx("input",{type:"checkbox",className:"mt-1 w-5 h-5 accent-amber-600",id:"consent"}),i.jsxs("label",{htmlFor:"consent",children:["I, ",i.jsx("strong",{children:u.name}),', have read and understood the terms and conditions mentioned above. By clicking "Accept", I agree to abide by the rules and regulations of SPR Techforge Pvt Ltd.']})]}),i.jsx(ee,{className:"w-full md:w-auto px-12 py-3 text-lg",onClick:()=>{const m=document.getElementById("consent");m&&m.checked?d():alert("Please check the box to confirm you have read the agreement.")},children:"I Accept & Sign"})]})})]}),i.jsx("div",{className:"text-center text-xs text-gray-400 mt-8 pb-8",children:" 2025 SPR Techforge Pvt Ltd. All rights reserved."})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-xl font-bold text-gray-400",children:"Loading Agreement..."}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"If this takes too long, the link may be invalid or the system is offline."})]})})},FS=()=>{const{user:t,trainingModules:e,addTrainingModule:n,updateTrainingModule:r,deleteTrainingModule:s,trainingTopics:o,addTrainingTopic:a,updateTrainingTopic:c,deleteTrainingTopic:u,showToast:d}=Ee(),[m,p]=R.useState(!1),[f,y]=R.useState(null),[N,I]=R.useState(""),[C,x]=R.useState(""),[_,j]=R.useState(!1),[k,L]=R.useState(null),[P,w]=R.useState(null),[v,T]=R.useState(""),[A,S]=R.useState(1),[D,b]=R.useState(null),oe=(t==null?void 0:t.role)==="admin",ae=[...e].sort((Q,J)=>Q.order-J.order),Ie=Q=>{if(Q.preventDefault(),!!N.trim()){if(f){const J=e.find(we=>we.id===f);J&&r({...J,title:N,description:C}),d("Module updated")}else n({id:Bt(),title:N,description:C,order:e.length+1}),d("Module created");K()}},xe=()=>{y(null),I(""),x(""),p(!0)},H=Q=>{y(Q.id),I(Q.title),x(Q.description||""),p(!0)},K=()=>{p(!1)},re=Q=>{if(Q.preventDefault(),!!v.trim()){if(k){const J=o.find(we=>we.id===k);J&&c({...J,title:v,estimatedHours:A}),d("Topic updated")}else{if(!P)return;a({id:Bt(),moduleId:P,title:v,estimatedHours:A}),d("Topic added")}Y()}},U=Q=>{L(null),w(Q),T(""),S(1),j(!0)},ne=Q=>{L(Q.id),w(Q.moduleId),T(Q.title),S(Q.estimatedHours),j(!0)},Y=()=>{j(!1)},de=()=>{D&&(D.type==="module"?(s(D.id),d("Module deleted")):(u(D.id),d("Topic deleted")),b(null))};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Or,{}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Curriculum Manager"}),i.jsx("p",{className:"text-gray-500",children:"Define training modules, topics, and syllabus structure."})]})]}),oe&&i.jsx(ee,{onClick:xe,children:"+ New Module"})]}),i.jsx("div",{className:"grid grid-cols-1 gap-6",children:ae.map(Q=>i.jsxs(ue,{className:"border-l-4 border-l-spr-600",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-gray-100 pb-2",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[i.jsxs("span",{className:"bg-spr-100 text-spr-800 text-xs px-2 py-1 rounded-full",children:["Module ",Q.order]}),Q.title]}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:Q.description})]}),oe&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>H(Q),className:"text-blue-600 hover:bg-blue-50 p-1 rounded",title:"Edit Module",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),i.jsx("button",{onClick:()=>b({id:Q.id,type:"module"}),className:"text-red-600 hover:bg-red-50 p-1 rounded",title:"Delete Module",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),i.jsx(ee,{variant:"secondary",className:"text-xs ml-2",onClick:()=>U(Q.id),children:"+ Add Topic"})]})]}),i.jsxs("div",{className:"space-y-2",children:[o.filter(J=>J.moduleId===Q.id).map((J,we)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border border-gray-200 hover:bg-white hover:shadow-sm transition-all group",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-gray-400 font-mono text-xs",children:[we+1,"."]}),i.jsx("span",{className:"text-gray-800 font-medium",children:J.title})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-xs text-gray-500 bg-white px-2 py-1 rounded border border-gray-200",children:[J.estimatedHours," hrs"]}),oe&&i.jsxs("div",{className:"hidden group-hover:flex gap-1",children:[i.jsx("button",{onClick:()=>ne(J),className:"text-blue-500 hover:text-blue-700 p-1",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),i.jsx("button",{onClick:()=>b({id:J.id,type:"topic"}),className:"text-red-500 hover:text-red-700 p-1",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},J.id)),o.filter(J=>J.moduleId===Q.id).length===0&&i.jsx("p",{className:"text-sm text-gray-400 italic p-2",children:"No topics defined yet."})]})]},Q.id))}),i.jsx(Qt,{isOpen:m,onClose:K,title:f?"Edit Training Module":"Add Training Module",children:i.jsxs("form",{onSubmit:Ie,children:[i.jsx(ie,{label:"Module Title",value:N,onChange:Q=>I(Q.target.value),required:!0,placeholder:"e.g. Automation Testing"}),i.jsx(ie,{label:"Description",value:C,onChange:Q=>x(Q.target.value),placeholder:"Short summary..."}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(ee,{type:"button",variant:"secondary",onClick:K,children:"Cancel"}),i.jsx(ee,{type:"submit",children:f?"Update Module":"Create Module"})]})]})}),i.jsx(Qt,{isOpen:_,onClose:Y,title:k?"Edit Topic":"Add Topic",children:i.jsxs("form",{onSubmit:re,children:[i.jsx(ie,{label:"Topic Title",value:v,onChange:Q=>T(Q.target.value),required:!0,placeholder:"e.g. Writing Test Scripts"}),i.jsx(ie,{type:"number",label:"Estimated Hours",value:A,onChange:Q=>S(parseInt(Q.target.value)),required:!0}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(ee,{type:"button",variant:"secondary",onClick:Y,children:"Cancel"}),i.jsx(ee,{type:"submit",children:k?"Update Topic":"Add Topic"})]})]})}),i.jsx(vs,{isOpen:!!D,onClose:()=>b(null),onConfirm:de,title:"Confirm Deletion",message:`Are you sure you want to delete this ${D==null?void 0:D.type}?`})]})},US=()=>{const{user:t,candidates:e,trainingModules:n,trainingTopics:r,trainingLogs:s}=Ee(),o=e.find(p=>p.id===(t==null?void 0:t.linkedCandidateId)),a=s.filter(p=>p.candidateId===(o==null?void 0:o.id)),c=a.reduce((p,f)=>p+f.timeSpentMinutes/60,0),u=new Set(a.map(p=>p.topicId)).size,d=r.length,m=d>0?Math.round(u/d*100):0;return o?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome, ",o.name]}),i.jsxs("p",{className:"text-gray-500",children:["Batch: ",o.batchId]})]}),i.jsxs("div",{className:"bg-white px-4 py-2 rounded-lg shadow-sm border border-gray-200 flex gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Hours"}),i.jsxs("p",{className:"text-xl font-bold text-indigo-600",children:[c.toFixed(1),"h"]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Progress"}),i.jsxs("p",{className:"text-xl font-bold text-emerald-600",children:[m,"%"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:i.jsx(ue,{title:"My Attendance & Progress History",children:i.jsxs("div",{className:"space-y-3",children:[a.sort((p,f)=>new Date(f.date).getTime()-new Date(p.date).getTime()).map(p=>{var y;const f=((y=r.find(N=>N.id===p.topicId))==null?void 0:y.title)||"Unknown Topic";return i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-gray-900 text-sm",children:f}),i.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(p.date).toDateString(),"  ",p.timeSpentMinutes," min"]})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded border ${p.attendanceStatus==="Present"?"bg-emerald-100 text-emerald-700 border-emerald-200":p.attendanceStatus==="Absent"?"bg-red-100 text-red-700 border-red-200":"bg-amber-100 text-amber-800 border-amber-200"}`,children:p.attendanceStatus})})]},p.id)}),a.length===0&&i.jsx("p",{className:"text-gray-400 text-center italic py-8",children:"No attendance records found."})]})})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsx(ue,{title:"Your Syllabus",className:"h-full max-h-[80vh] overflow-y-auto",children:i.jsxs("div",{className:"space-y-4",children:[n.sort((p,f)=>p.order-f.order).map(p=>i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-2",children:p.title}),i.jsx("div",{className:"space-y-1 ml-2 border-l-2 border-gray-200 pl-3",children:r.filter(f=>f.moduleId===p.id).map(f=>{const y=a.some(N=>N.topicId===f.id);return i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[y?i.jsx("span",{className:"text-emerald-500 font-bold",children:""}):i.jsx("span",{className:"text-gray-300",children:""}),i.jsx("span",{className:y?"text-gray-500 line-through":"text-gray-700",children:f.title})]},f.id)})})]},p.id)),n.length===0&&i.jsx("p",{className:"text-xs text-gray-400 italic",children:"Syllabus not yet defined by admin."})]})})})]})]}):i.jsx("div",{className:"p-8 text-center text-red-600",children:"No candidate profile linked to this user account. Please contact admin."})},BS=()=>{const{candidates:t,trainingLogs:e,trainingTopics:n}=Ee(),[r,s]=R.useState(""),o=t.filter(c=>c.isActive&&c.name.toLowerCase().includes(r.toLowerCase())),a=n.length;return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Or,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Progress Monitor"})]})}),i.jsxs(ue,{children:[i.jsx("div",{className:"mb-4",children:i.jsx("input",{placeholder:"Search candidate...",className:"border rounded px-4 py-2 w-full md:w-1/3",value:r,onChange:c=>s(c.target.value)})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm text-gray-600",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Candidate"}),i.jsx("th",{className:"p-3",children:"Status"}),i.jsx("th",{className:"p-3 text-center",children:"Topics %"}),i.jsx("th",{className:"p-3 text-center",children:"Attendance (Present/Total)"}),i.jsx("th",{className:"p-3 text-center",children:"Last Active"})]})}),i.jsx("tbody",{className:"divide-y",children:o.map(c=>{const u=e.filter(N=>N.candidateId===c.id),d=u.filter(N=>N.attendanceStatus==="Present").length,m=u.length,p=new Set(u.map(N=>N.topicId)).size,f=a>0?Math.round(p/a*100):0,y=u.sort((N,I)=>new Date(I.date).getTime()-new Date(N.date).getTime())[0];return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsxs("td",{className:"p-3 font-medium text-gray-900",children:[c.name," ",i.jsxs("span",{className:"text-gray-400 text-xs",children:["(",c.batchId,")"]})]}),i.jsx("td",{className:"p-3",children:c.status}),i.jsxs("td",{className:"p-3 text-center",children:[i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 max-w-[100px] mx-auto",children:i.jsx("div",{className:"bg-spr-600 h-2 rounded-full",style:{width:`${f}%`}})}),i.jsxs("span",{className:"text-xs",children:[f,"% (",p,"/",a,")"]})]}),i.jsxs("td",{className:"p-3 text-center",children:[i.jsx("span",{className:"text-emerald-600 font-bold",children:d})," / ",m]}),i.jsx("td",{className:"p-3 text-center text-xs",children:y?new Date(y.date).toLocaleDateString():"-"})]},c.id)})})]})})]})]})},zS=()=>{const{candidates:t,trainingModules:e,trainingTopics:n,trainingLogs:r,batchUpdateTrainingLogs:s,showToast:o}=Ee(),[a,c]=R.useState(new Date().toISOString().split("T")[0]),[u,d]=R.useState(""),[m,p]=R.useState({}),f=t.filter(x=>x.isActive&&x.status!==dt.Placed&&x.status!==dt.Discontinued);R.useEffect(()=>{const x={};f.forEach(_=>{const j=r.find(k=>k.date===a&&k.candidateId===_.id);j?(x[_.id]=j.attendanceStatus==="No Class"?"Excused":j.attendanceStatus,!u&&j.topicId&&d(j.topicId)):x[_.id]="Present"}),p(x)},[a,f.length,r.length]);const y=(x,_)=>{p(j=>({...j,[x]:_}))},N=()=>{if(!u){o("Please select the Topic covered today before saving.","error");return}const x=n.find(k=>k.id===u),_=x?x.estimatedHours*60:60,j=[];f.forEach(k=>{const L=m[k.id],P=r.find(v=>v.date===a&&v.candidateId===k.id),w={id:P?P.id:Bt(),candidateId:k.id,date:a,topicId:u,timeSpentMinutes:L==="Present"?_:0,assignmentStatus:P?P.assignmentStatus:"N/A",attendanceStatus:L==="Excused"?"No Class":L,notes:P?P.notes:""};j.push(w)}),s(j),o("Attendance saved successfully for "+j.length+" candidates.")},I=()=>{const x=f.map(_=>{const j=r.filter(P=>P.candidateId===_.id).sort((P,w)=>new Date(P.date).getTime()-new Date(w.date).getTime()),k=j.filter(P=>P.attendanceStatus==="Present").length,L=j.filter(P=>P.attendanceStatus==="Absent").length;return{"Candidate Name":_.name,Batch:_.batchId,Status:_.status,"Total Present":k,"Total Absent":L,[`Status on ${a}`]:m[_.id]||"N/A"}});Fo(x,`Attendance_Summary_${a}.csv`),o("Attendance Summary Exported")},C=()=>{const x=[];if(f.forEach(_=>{r.filter(k=>k.candidateId===_.id).forEach(k=>{var P;const L=((P=n.find(w=>w.id===k.topicId))==null?void 0:P.title)||"Unknown";x.push({Date:k.date,"Candidate Name":_.name,Batch:_.batchId,Topic:L,Attendance:k.attendanceStatus,"Time Spent (Mins)":k.timeSpentMinutes})})}),x.length===0){o("No attendance records found to export.","info");return}x.sort((_,j)=>new Date(j.Date).getTime()-new Date(_.Date).getTime()),Fo(x,"Detailed_Attendance_Logs.csv"),o("Full History Exported")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Class Attendance"}),i.jsx("p",{className:"text-gray-500",children:"Mark daily attendance and topics for active candidates."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ee,{variant:"secondary",onClick:C,children:"Export Full History"}),i.jsx(ee,{variant:"secondary",onClick:I,children:"Export Today's Summary"})]})]}),i.jsxs(ue,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Date"}),i.jsx(ie,{type:"date",value:a,onChange:x=>c(x.target.value)})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Topic Covered Today"}),i.jsxs("select",{className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:u,onChange:x=>d(x.target.value),children:[i.jsx("option",{value:"",children:"-- Select Topic from Curriculum --"}),e.sort((x,_)=>x.order-_.order).map(x=>i.jsx("optgroup",{label:x.title,children:n.filter(_=>_.moduleId===x.id).map(_=>i.jsxs("option",{value:_.id,children:[_.title," (",_.estimatedHours,"h)"]},_.id))},x.id))]}),e.length===0&&i.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No curriculum found. Please add Modules & Topics in Curriculum Manager first."})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 text-xs uppercase text-gray-500 bg-gray-100",children:[i.jsx("th",{className:"py-3 px-4",children:"Candidate Name"}),i.jsx("th",{className:"py-3 px-4",children:"Batch"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Attendance Status"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:f.length>0?f.map(x=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:x.name}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs border border-blue-100",children:x.batchId})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsxs("label",{className:`cursor-pointer px-3 py-1.5 rounded border text-sm font-medium transition-colors ${m[x.id]==="Present"?"bg-emerald-500 text-white border-emerald-600":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[i.jsx("input",{type:"radio",className:"sr-only",checked:m[x.id]==="Present",onChange:()=>y(x.id,"Present")}),"Present"]}),i.jsxs("label",{className:`cursor-pointer px-3 py-1.5 rounded border text-sm font-medium transition-colors ${m[x.id]==="Absent"?"bg-red-500 text-white border-red-600":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[i.jsx("input",{type:"radio",className:"sr-only",checked:m[x.id]==="Absent",onChange:()=>y(x.id,"Absent")}),"Absent"]}),i.jsxs("label",{className:`cursor-pointer px-3 py-1.5 rounded border text-sm font-medium transition-colors ${m[x.id]==="Excused"?"bg-amber-400 text-white border-amber-500":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[i.jsx("input",{type:"radio",className:"sr-only",checked:m[x.id]==="Excused",onChange:()=>y(x.id,"Excused")}),"Excused"]})]})})]},x.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"py-8 text-center text-gray-500",children:"No active candidates found for training."})})})]})}),i.jsx("div",{className:"mt-6 flex justify-end border-t border-gray-100 pt-4",children:i.jsx(ee,{onClick:N,className:"w-full md:w-auto px-8",children:"Save Attendance"})})]})]})},$S=[{label:"Orange",value:"border-l-orange-500"},{label:"Green",value:"border-l-green-500"},{label:"Blue",value:"border-l-blue-500"},{label:"Purple",value:"border-l-purple-500"},{label:"Red",value:"border-l-red-500"},{label:"Indigo",value:"border-l-indigo-500"}],HS=()=>{const{user:t,showToast:e,interviewModules:n,addInterviewModule:r,updateInterviewModule:s,deleteInterviewModule:o,interviewQuestions:a,addInterviewQuestion:c,deleteInterviewQuestion:u}=Ee(),[d,m]=R.useState(!1),[p,f]=R.useState(null),[y,N]=R.useState(""),[I,C]=R.useState("border-l-blue-500"),[x,_]=R.useState(!1),[j,k]=R.useState(null),[L,P]=R.useState(""),[w,v]=R.useState(null),[T,A]=R.useState([]),S=(t==null?void 0:t.role)==="admin",D=async Y=>{const de=`${Y} Explain this interview question in detail with examples.`;try{await navigator.clipboard.writeText(de),e("Copied! Please paste (Ctrl+V) in ChatGPT if it does not auto-fill.","info")}catch(J){console.error("Copy failed",J)}const Q=encodeURIComponent(de);window.open(`https://chatgpt.com/?q=${Q}&hints=search`,"_blank")},b=Y=>{if(Y.preventDefault(),!!y.trim()){if(p){const de=n.find(Q=>Q.id===p);de&&(s({...de,title:y,color:I}),e("Module updated successfully"))}else r({id:Bt(),title:y,color:I,order:n.length+1}),e("Module created successfully");m(!1),xe()}},oe=()=>{w&&(o(w),v(null),e("Module deleted"))},ae=()=>{xe(),m(!0)},Ie=Y=>{f(Y.id),N(Y.title),C(Y.color),m(!0)},xe=()=>{f(null),N(""),C("border-l-blue-500")},H=Y=>{k(Y),P(""),_(!0)},K=Y=>{if(Y.preventDefault(),!L.trim()||!j)return;const de=a.filter(J=>J.moduleId===j),Q=de.length>0?Math.max(...de.map(J=>J.order)):0;c({id:Bt(),moduleId:j,question:L,order:Q+1}),e("Question added"),_(!1),P("")},re=Y=>{A(de=>de.includes(Y)?de.filter(Q=>Q!==Y):[...de,Y])},U=Y=>{if(!window.confirm("Delete selected questions?"))return;const de=T.filter(Q=>{const J=a.find(we=>we.id===Q);return J&&J.moduleId===Y});de.forEach(Q=>u(Q)),A(Q=>Q.filter(J=>!de.includes(J))),e(`${de.length} questions deleted`)},ne=[...n].sort((Y,de)=>Y.order-de.order);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Or,{}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Interview Preparation"}),i.jsx("p",{className:"text-gray-500",children:"Click on any question to ask ChatGPT AI for a detailed answer."})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[S&&i.jsx(ee,{onClick:ae,children:"+ Add Module"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-emerald-600 bg-emerald-50 px-3 py-1 rounded-full border border-emerald-100",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),i.jsx("span",{children:"Powered by ChatGPT 5.1"})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ne.map(Y=>{const de=a.filter(J=>J.moduleId===Y.id).sort((J,we)=>J.order-we.order),Q=de.some(J=>T.includes(J.id));return i.jsxs(ue,{className:`border-l-4 ${Y.color} relative group-card h-full flex flex-col`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-4 pb-2 border-b border-gray-100",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800",children:Y.title}),S&&i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{type:"button",onClick:()=>Ie(Y),className:"text-blue-500 hover:text-blue-700 p-1 rounded hover:bg-blue-50",title:"Edit Module",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),i.jsx("button",{type:"button",onClick:()=>v(Y.id),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50",title:"Delete Module",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),i.jsxs("div",{className:"space-y-3 flex-1",children:[de.map(J=>i.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden bg-white hover:shadow-md transition-all duration-200",children:[S&&i.jsx("div",{className:"pl-3 pr-1 py-3 bg-gray-50 border-r border-gray-100 flex items-center",children:i.jsx("input",{type:"checkbox",className:"w-4 h-4 text-spr-600 rounded border-gray-300 focus:ring-spr-500 cursor-pointer",checked:T.includes(J.id),onChange:()=>re(J.id),onClick:we=>we.stopPropagation()})}),i.jsxs("button",{onClick:()=>D(J.question),className:"flex-1 text-left p-3 flex justify-between items-center group hover:bg-gray-50 transition-colors focus:outline-none",title:"Click to ask ChatGPT",children:[i.jsx("span",{className:"font-medium text-gray-800 text-sm pr-2 group-hover:text-emerald-700 transition-colors",children:J.question}),i.jsx("span",{className:"text-gray-300 group-hover:text-emerald-500 transition-colors shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})})]})]},J.id)),de.length===0&&i.jsx("p",{className:"text-gray-400 italic text-sm text-center py-4",children:"No questions added yet."})]}),S&&i.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-3 border-t border-gray-100",children:[Q&&i.jsx("button",{onClick:()=>U(Y.id),className:"w-8 h-8 flex items-center justify-center rounded-full bg-red-100 text-red-600 hover:bg-red-600 hover:text-white transition-all shadow-sm border border-red-200 animate-fade-in",title:"Delete Selected Questions",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),i.jsx("button",{onClick:()=>H(Y.id),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 text-gray-600 hover:bg-spr-600 hover:text-white transition-all shadow-sm border border-gray-300",title:"Add Question",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]},Y.id)})}),i.jsx(Qt,{isOpen:d,onClose:()=>m(!1),title:p?"Edit Module":"Add New Module",children:i.jsxs("form",{onSubmit:b,children:[i.jsx(ie,{label:"Module Title",value:y,onChange:Y=>N(Y.target.value),required:!0,placeholder:"e.g. Advanced Python"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Theme"}),i.jsx("div",{className:"flex gap-3 flex-wrap",children:$S.map(Y=>i.jsx("button",{type:"button",onClick:()=>C(Y.value),className:`w-8 h-8 rounded-full border-2 ${Y.value.replace("border-l-","bg-")} ${I===Y.value?"border-gray-800 scale-110 ring-2 ring-offset-2 ring-gray-400":"border-transparent opacity-70 hover:opacity-100"}`,title:Y.label},Y.value))})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx(ee,{type:"button",variant:"secondary",onClick:()=>m(!1),children:"Cancel"}),i.jsx(ee,{type:"submit",children:"Save Module"})]})]})}),i.jsx(Qt,{isOpen:x,onClose:()=>_(!1),title:"Add Question",children:i.jsxs("form",{onSubmit:K,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),i.jsx("textarea",{className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none h-32",value:L,onChange:Y=>P(Y.target.value),placeholder:"Type your interview question here...",required:!0})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(ee,{type:"button",variant:"secondary",onClick:()=>_(!1),children:"Cancel"}),i.jsx(ee,{type:"submit",children:"Add Question"})]})]})}),i.jsx(vs,{isOpen:!!w,onClose:()=>v(null),onConfirm:oe,title:"Delete Module",message:"Are you sure you want to delete this module? All contained questions will be lost."})]})},qS=()=>{const{candidates:t,updateCandidate:e,interviews:n,addInterview:r,updateInterview:s,deleteInterview:o,showToast:a}=Ee(),[c,u]=R.useState("ReadyCandidates"),[d,m]=R.useState(null),p=(j,k)=>{var w;const L=(w=j.target.files)==null?void 0:w[0];if(!L)return;if(L.size>5*1024*1024){a("Max 5MB","error");return}const P=new FileReader;P.onload=v=>{var A;const T=t.find(S=>S.id===k);T&&e({...T,resume:(A=v.target)==null?void 0:A.result,resumeName:L.name}),a("Resume uploaded")},P.readAsDataURL(L)},f=j=>{var L;if(!j.resume)return;const k=(L=j.resumeName)==null?void 0:L.endsWith(".pdf");m({type:k?"pdf":"docx",data:j.resume,name:j.resumeName||"Resume"})},[y,N]=R.useState({}),[I,C]=R.useState(!1),x=j=>{if(j.preventDefault(),!y.candidateId||!y.date||!y.companyName)return;const k={id:y.id||Bt(),candidateId:y.candidateId,date:y.date,time:y.time||"10:00",companyName:y.companyName,interviewType:y.interviewType||"Zoom",round:y.round||"L1",supportPerson:y.supportPerson,status:"Scheduled",notes:y.notes};y.id?s(k):r(k),a("Interview scheduled"),C(!1),N({})},_=t.filter(j=>j.status===dt.ReadyForInterview&&j.isActive);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Or,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Interviews & Placements"})]}),i.jsx(ee,{onClick:()=>{N({}),C(!0)},children:"+ Schedule Interview"})]}),i.jsxs("div",{className:"flex gap-4 border-b border-gray-200",children:[i.jsx("button",{onClick:()=>u("ReadyCandidates"),className:`pb-2 px-4 font-medium ${c==="ReadyCandidates"?"border-b-2 border-spr-600 text-spr-600":"text-gray-500"}`,children:"Ready Candidates"}),i.jsx("button",{onClick:()=>u("DailyView"),className:`pb-2 px-4 font-medium ${c==="DailyView"?"border-b-2 border-spr-600 text-spr-600":"text-gray-500"}`,children:"Interview Schedule"})]}),c==="ReadyCandidates"&&i.jsx(ue,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm text-gray-600",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Candidate"}),i.jsx("th",{className:"p-3",children:"Batch"}),i.jsx("th",{className:"p-3",children:"Resume"}),i.jsx("th",{className:"p-3 text-center",children:"Action"})]})}),i.jsxs("tbody",{className:"divide-y",children:[_.map(j=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-3 font-medium text-gray-900",children:j.name}),i.jsx("td",{className:"p-3",children:j.batchId}),i.jsx("td",{className:"p-3",children:j.resume?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded truncate max-w-[150px]",children:j.resumeName}),i.jsx("button",{onClick:()=>f(j),className:"text-blue-600 hover:underline text-xs",children:"View"})]}):i.jsx("span",{className:"text-gray-400 italic",children:"Missing"})}),i.jsxs("td",{className:"p-3 text-center flex justify-center gap-2",children:[i.jsxs("label",{className:"cursor-pointer text-xs bg-gray-100 px-2 py-1 rounded hover:bg-gray-200",children:["Upload",i.jsx("input",{type:"file",className:"hidden",accept:".pdf,.docx",onChange:k=>p(k,j.id)})]}),i.jsx("button",{onClick:()=>{N({candidateId:j.id}),C(!0)},className:"text-xs bg-spr-600 text-white px-2 py-1 rounded hover:bg-spr-700",children:"Book Interview"})]})]},j.id)),_.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"No candidates currently marked as 'Ready for Interview'."})})]})]})})}),c==="DailyView"&&i.jsxs("div",{className:"space-y-4",children:[Object.entries(n.reduce((j,k)=>{const L=j[k.date]||[];return L.push(k),j[k.date]=L,j},{})).sort().map(([j,k])=>i.jsx(ue,{title:new Date(j).toDateString(),children:i.jsx("div",{className:"space-y-2",children:k.map(L=>{const P=t.find(w=>w.id===L.candidateId);return i.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded border border-gray-100",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-gray-900",children:[L.time," - ",P==null?void 0:P.name," ",i.jsxs("span",{className:"text-gray-400 font-normal",children:["(",P==null?void 0:P.batchId,")"]})]}),i.jsxs("p",{className:"text-sm text-indigo-700 font-medium",children:[L.companyName," (",L.round,") - ",L.interviewType]}),L.supportPerson&&i.jsxs("p",{className:"text-xs text-amber-700 mt-1",children:["Support: ",L.supportPerson]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-white border border-gray-200 block mb-1",children:L.status}),i.jsx("button",{onClick:()=>{N(L),C(!0)},className:"text-blue-600 text-xs hover:underline",children:"Edit"})]})]},L.id)})})},j)),n.length===0&&i.jsx("p",{className:"text-center text-gray-500",children:"No interviews scheduled."})]}),i.jsx(Qt,{isOpen:I,onClose:()=>C(!1),title:"Schedule Interview",children:i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Candidate"}),i.jsxs("select",{className:"w-full border rounded px-3 py-2",value:y.candidateId||"",onChange:j=>N({...y,candidateId:j.target.value}),required:!0,children:[i.jsx("option",{value:"",children:"Select Candidate"}),_.map(j=>i.jsx("option",{value:j.id,children:j.name},j.id))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(ie,{type:"date",label:"Date",value:y.date||"",onChange:j=>N({...y,date:j.target.value}),required:!0}),i.jsx(ie,{type:"time",label:"Time",value:y.time||"",onChange:j=>N({...y,time:j.target.value}),required:!0})]}),i.jsx(ie,{label:"Company Name",value:y.companyName||"",onChange:j=>N({...y,companyName:j.target.value}),required:!0}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),i.jsxs("select",{className:"w-full border rounded px-3 py-2",value:y.interviewType||"Zoom",onChange:j=>N({...y,interviewType:j.target.value}),children:[i.jsx("option",{children:"Zoom"}),i.jsx("option",{children:"Teams"}),i.jsx("option",{children:"F2F"}),i.jsx("option",{children:"Telephonic"})]})]}),i.jsx(ie,{label:"Round",value:y.round||"",onChange:j=>N({...y,round:j.target.value}),placeholder:"e.g. L1, Managerial"})]}),i.jsx(ie,{label:"Support Person (if any)",value:y.supportPerson||"",onChange:j=>N({...y,supportPerson:j.target.value})}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx(ee,{type:"submit",children:"Save Schedule"})})]})}),i.jsx(Qt,{isOpen:!!d,onClose:()=>m(null),title:`View Resume: ${d==null?void 0:d.name}`,children:i.jsxs("div",{className:"h-[80vh] flex flex-col",children:[i.jsx("div",{className:"flex justify-end mb-2",children:i.jsx("a",{href:d==null?void 0:d.data,download:d==null?void 0:d.name,className:"text-blue-600 font-bold hover:underline",children:"Download"})}),i.jsx("div",{className:"flex-1 bg-gray-100 rounded",children:(d==null?void 0:d.type)==="pdf"?i.jsx("object",{data:d.data,type:"application/pdf",className:"w-full h-full",children:i.jsx("p",{children:"Preview not supported."})}):i.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Preview only available for PDF. Please download."})})]})})]})},Fe=({children:t})=>{const{user:e,isInitialized:n}=Ee();return n?e?i.jsx(i.Fragment,{children:t}):i.jsx(Oo,{to:"/login",replace:!0}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:"Loading..."})},Xu=({children:t})=>{const{user:e,isInitialized:n}=Ee();return n?e?e.role==="admin"||e.modules.includes("users")?i.jsx(i.Fragment,{children:t}):i.jsx(Oo,{to:"/dashboard",replace:!0}):i.jsx(Oo,{to:"/login",replace:!0}):null},Ju=({children:t})=>{const{user:e,isInitialized:n}=Ee();return n?e?e.id!=="admin-01"?i.jsx(Oo,{to:"/dashboard",replace:!0}):i.jsx(i.Fragment,{children:t}):i.jsx(Oo,{to:"/login",replace:!0}):null},WS=()=>i.jsxs(oj,{children:[i.jsx(_e,{path:"/",element:i.jsx(jS,{})}),i.jsx(_e,{path:"/login",element:i.jsx(_S,{})}),i.jsx(_e,{path:"/portal/agreement/:id",element:i.jsx(OS,{})}),i.jsx(_e,{path:"/dashboard",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(ES,{})})})}),i.jsx(_e,{path:"/candidates",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(bS,{})})})}),i.jsx(_e,{path:"/candidates/info",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(NS,{})})})}),i.jsx(_e,{path:"/candidates/new",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(o0,{})})})}),i.jsx(_e,{path:"/candidates/edit/:id",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(o0,{})})})}),i.jsx(_e,{path:"/candidates/agreement/:id",element:i.jsx(Fe,{children:i.jsx(TS,{})})}),i.jsx(_e,{path:"/address-book",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(RS,{})})})}),i.jsx(_e,{path:"/finance/transactions",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(SS,{})})})}),i.jsx(_e,{path:"/finance/transactions/new",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(a0,{})})})}),i.jsx(_e,{path:"/finance/transactions/edit/:id",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(a0,{})})})}),i.jsx(_e,{path:"/finance/accounts",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(CS,{})})})}),i.jsx(_e,{path:"/finance/accounts/new",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(l0,{})})})}),i.jsx(_e,{path:"/finance/accounts/edit/:id",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(l0,{})})})}),i.jsx(_e,{path:"/finance/statement/:type/:id",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(IS,{})})})}),i.jsx(_e,{path:"/finance/financial-statements",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(AS,{})})})}),i.jsx(_e,{path:"/finance/payroll",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(kS,{})})})}),i.jsx(_e,{path:"/finance/reports",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(PS,{})})})}),i.jsx(_e,{path:"/admin/users",element:i.jsx(Xu,{children:i.jsx(Ce,{children:i.jsx(DS,{})})})}),i.jsx(_e,{path:"/admin/users/new",element:i.jsx(Xu,{children:i.jsx(Ce,{children:i.jsx(c0,{})})})}),i.jsx(_e,{path:"/admin/users/edit/:id",element:i.jsx(Xu,{children:i.jsx(Ce,{children:i.jsx(c0,{})})})}),i.jsx(_e,{path:"/training/curriculum",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(FS,{})})})}),i.jsx(_e,{path:"/training/monitor",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(BS,{})})})}),i.jsx(_e,{path:"/training/dashboard",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(US,{})})})}),i.jsx(_e,{path:"/training/attendance",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(zS,{})})})}),i.jsx(_e,{path:"/training/interview-questions",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(HS,{})})})}),i.jsx(_e,{path:"/training/interviews",element:i.jsx(Fe,{children:i.jsx(Ce,{children:i.jsx(qS,{})})})}),i.jsx(_e,{path:"/admin/logs",element:i.jsx(Ju,{children:i.jsx(Ce,{children:i.jsx(LS,{})})})}),i.jsx(_e,{path:"/admin/test-runner",element:i.jsx(Ju,{children:i.jsx(Ce,{children:i.jsx(VS,{})})})}),i.jsx(_e,{path:"/admin/cloud",element:i.jsx(Ju,{children:i.jsx(Ce,{children:i.jsx(MS,{})})})})]});function QS(){return i.jsx(vS,{children:i.jsxs(fj,{children:[i.jsx(wS,{}),i.jsx(WS,{})]})})}const j1=document.getElementById("root");if(!j1)throw new Error("Could not find root element to mount to");const GS=Zu.createRoot(j1);GS.render(i.jsx(w0.StrictMode,{children:i.jsx(QS,{})}));
