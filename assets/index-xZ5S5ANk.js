var F1=Object.defineProperty;var B1=(t,e,n)=>e in t?F1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Vo=(t,e,n)=>B1(t,typeof e!="symbol"?e+"":e,n);function U1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function z1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var d0={exports:{}},fc={},h0={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ro=Symbol.for("react.element"),$1=Symbol.for("react.portal"),W1=Symbol.for("react.fragment"),H1=Symbol.for("react.strict_mode"),q1=Symbol.for("react.profiler"),Q1=Symbol.for("react.provider"),G1=Symbol.for("react.context"),K1=Symbol.for("react.forward_ref"),Y1=Symbol.for("react.suspense"),X1=Symbol.for("react.memo"),J1=Symbol.for("react.lazy"),Pm=Symbol.iterator;function Z1(t){return t===null||typeof t!="object"?null:(t=Pm&&t[Pm]||t["@@iterator"],typeof t=="function"?t:null)}var f0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m0=Object.assign,p0={};function bi(t,e,n){this.props=t,this.context=e,this.refs=p0,this.updater=n||f0}bi.prototype.isReactComponent={};bi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function g0(){}g0.prototype=bi.prototype;function bh(t,e,n){this.props=t,this.context=e,this.refs=p0,this.updater=n||f0}var jh=bh.prototype=new g0;jh.constructor=bh;m0(jh,bi.prototype);jh.isPureReactComponent=!0;var Rm=Array.isArray,x0=Object.prototype.hasOwnProperty,_h={current:null},y0={key:!0,ref:!0,__self:!0,__source:!0};function v0(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)x0.call(e,r)&&!y0.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:ro,type:t,key:a,ref:o,props:s,_owner:_h.current}}function ew(t,e){return{$$typeof:ro,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ro}function tw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Dm=/\/+/g;function mu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tw(""+t.key):e.toString(36)}function ll(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ro:case $1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+mu(o,0):r,Rm(s)?(n="",t!=null&&(n=t.replace(Dm,"$&/")+"/"),ll(s,e,n,"",function(d){return d})):s!=null&&(Nh(s)&&(s=ew(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Dm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Rm(t))for(var c=0;c<t.length;c++){a=t[c];var u=r+mu(a,c);o+=ll(a,e,n,u,s)}else if(u=Z1(t),typeof u=="function")for(t=u.call(t),c=0;!(a=t.next()).done;)a=a.value,u=r+mu(a,c++),o+=ll(a,e,n,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Oo(t,e,n){if(t==null)return t;var r=[],s=0;return ll(t,r,"","",function(a){return e.call(n,a,s++)}),r}function nw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},cl={transition:null},rw={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:cl,ReactCurrentOwner:_h};function w0(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Oo,forEach:function(t,e,n){Oo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Oo(t,function(){e++}),e},toArray:function(t){return Oo(t,function(e){return e})||[]},only:function(t){if(!Nh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=bi;ye.Fragment=W1;ye.Profiler=q1;ye.PureComponent=bh;ye.StrictMode=H1;ye.Suspense=Y1;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rw;ye.act=w0;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=m0({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=_h.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)x0.call(e,u)&&!y0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:ro,type:t.type,key:s,ref:a,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:G1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Q1,_context:t},t.Consumer=t};ye.createElement=v0;ye.createFactory=function(t){var e=v0.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:K1,render:t}};ye.isValidElement=Nh;ye.lazy=function(t){return{$$typeof:J1,_payload:{_status:-1,_result:t},_init:nw}};ye.memo=function(t,e){return{$$typeof:X1,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=cl.transition;cl.transition={};try{t()}finally{cl.transition=e}};ye.unstable_act=w0;ye.useCallback=function(t,e){return Mt.current.useCallback(t,e)};ye.useContext=function(t){return Mt.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};ye.useEffect=function(t,e){return Mt.current.useEffect(t,e)};ye.useId=function(){return Mt.current.useId()};ye.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return Mt.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};ye.useRef=function(t){return Mt.current.useRef(t)};ye.useState=function(t){return Mt.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return Mt.current.useTransition()};ye.version="18.3.1";h0.exports=ye;var M=h0.exports;const Ca=z1(M),sw=U1({__proto__:null,default:Ca},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw=M,aw=Symbol.for("react.element"),ow=Symbol.for("react.fragment"),lw=Object.prototype.hasOwnProperty,cw=iw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uw={key:!0,ref:!0,__self:!0,__source:!0};function b0(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lw.call(e,r)&&!uw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:aw,type:t,key:a,ref:o,props:s,_owner:cw.current}}fc.Fragment=ow;fc.jsx=b0;fc.jsxs=b0;d0.exports=fc;var i=d0.exports,td={},j0={exports:{}},tn={},_0={exports:{}},N0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,ee){var oe=Q.length;Q.push(ee);e:for(;0<oe;){var U=oe-1>>>1,ae=Q[U];if(0<s(ae,ee))Q[U]=ee,Q[oe]=ae,oe=U;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ee=Q[0],oe=Q.pop();if(oe!==ee){Q[0]=oe;e:for(var U=0,ae=Q.length,W=ae>>>1;U<W;){var ue=2*(U+1)-1,Y=Q[ue],ne=ue+1,Fe=Q[ne];if(0>s(Y,oe))ne<ae&&0>s(Fe,Y)?(Q[U]=Fe,Q[ne]=oe,U=ne):(Q[U]=Y,Q[ue]=oe,U=ue);else if(ne<ae&&0>s(Fe,oe))Q[U]=Fe,Q[ne]=oe,U=ne;else break e}}return ee}function s(Q,ee){var oe=Q.sortIndex-ee.sortIndex;return oe!==0?oe:Q.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,m=null,g=3,v=!1,T=!1,E=!1,k=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(Q){for(var ee=n(d);ee!==null;){if(ee.callback===null)r(d);else if(ee.startTime<=Q)r(d),ee.sortIndex=ee.expirationTime,e(u,ee);else break;ee=n(d)}}function S(Q){if(E=!1,_(Q),!T)if(n(u)!==null)T=!0,Se(R);else{var ee=n(d);ee!==null&&ut(S,ee.startTime-Q)}}function R(Q,ee){T=!1,E&&(E=!1,j(p),p=-1),v=!0;var oe=g;try{for(_(ee),m=n(u);m!==null&&(!(m.expirationTime>ee)||Q&&!A());){var U=m.callback;if(typeof U=="function"){m.callback=null,g=m.priorityLevel;var ae=U(m.expirationTime<=ee);ee=t.unstable_now(),typeof ae=="function"?m.callback=ae:m===n(u)&&r(u),_(ee)}else r(u);m=n(u)}if(m!==null)var W=!0;else{var ue=n(d);ue!==null&&ut(S,ue.startTime-ee),W=!1}return W}finally{m=null,g=oe,v=!1}}var L=!1,w=null,p=-1,b=5,C=-1;function A(){return!(t.unstable_now()-C<b)}function P(){if(w!==null){var Q=t.unstable_now();C=Q;var ee=!0;try{ee=w(!0,Q)}finally{ee?I():(L=!1,w=null)}}else L=!1}var I;if(typeof y=="function")I=function(){y(P)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,fe=se.port2;se.port1.onmessage=P,I=function(){fe.postMessage(null)}}else I=function(){k(P,0)};function Se(Q){w=Q,L||(L=!0,I())}function ut(Q,ee){p=k(function(){Q(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){T||v||(T=!0,Se(R))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(Q){switch(g){case 1:case 2:case 3:var ee=3;break;default:ee=g}var oe=g;g=ee;try{return Q()}finally{g=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,ee){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var oe=g;g=Q;try{return ee()}finally{g=oe}},t.unstable_scheduleCallback=function(Q,ee,oe){var U=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?U+oe:U):oe=U,Q){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=oe+ae,Q={id:f++,callback:ee,priorityLevel:Q,startTime:oe,expirationTime:ae,sortIndex:-1},oe>U?(Q.sortIndex=oe,e(d,Q),n(u)===null&&Q===n(d)&&(E?(j(p),p=-1):E=!0,ut(S,oe-U))):(Q.sortIndex=ae,e(u,Q),T||v||(T=!0,Se(R))),Q},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(Q){var ee=g;return function(){var oe=g;g=ee;try{return Q.apply(this,arguments)}finally{g=oe}}}})(N0);_0.exports=N0;var dw=_0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw=M,en=dw;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E0=new Set,Sa={};function vs(t,e){oi(t,e),oi(t+"Capture",e)}function oi(t,e){for(Sa[t]=e,t=0;t<e.length;t++)E0.add(e[t])}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nd=Object.prototype.hasOwnProperty,fw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lm={},Mm={};function mw(t){return nd.call(Mm,t)?!0:nd.call(Lm,t)?!1:fw.test(t)?Mm[t]=!0:(Lm[t]=!0,!1)}function pw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gw(t,e,n,r){if(e===null||typeof e>"u"||pw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vt(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var _t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_t[t]=new Vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];_t[e]=new Vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){_t[t]=new Vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_t[t]=new Vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_t[t]=new Vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){_t[t]=new Vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){_t[t]=new Vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){_t[t]=new Vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){_t[t]=new Vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Eh=/[\-:]([a-z])/g;function Th(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Eh,Th);_t[e]=new Vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Eh,Th);_t[e]=new Vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Eh,Th);_t[e]=new Vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){_t[t]=new Vt(t,1,!1,t.toLowerCase(),null,!1,!1)});_t.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){_t[t]=new Vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ch(t,e,n,r){var s=_t.hasOwnProperty(e)?_t[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gw(e,n,s,r)&&(n=null),r||s===null?mw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xn=hw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fo=Symbol.for("react.element"),Bs=Symbol.for("react.portal"),Us=Symbol.for("react.fragment"),Sh=Symbol.for("react.strict_mode"),rd=Symbol.for("react.profiler"),T0=Symbol.for("react.provider"),C0=Symbol.for("react.context"),Ih=Symbol.for("react.forward_ref"),sd=Symbol.for("react.suspense"),id=Symbol.for("react.suspense_list"),kh=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),S0=Symbol.for("react.offscreen"),Vm=Symbol.iterator;function Gi(t){return t===null||typeof t!="object"?null:(t=Vm&&t[Vm]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,pu;function sa(t){if(pu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pu=e&&e[1]||""}return`
`+pu+t}var gu=!1;function xu(t,e){if(!t||gu)return"";gu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,c=a.length-1;1<=o&&0<=c&&s[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==a[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{gu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sa(t):""}function xw(t){switch(t.tag){case 5:return sa(t.type);case 16:return sa("Lazy");case 13:return sa("Suspense");case 19:return sa("SuspenseList");case 0:case 2:case 15:return t=xu(t.type,!1),t;case 11:return t=xu(t.type.render,!1),t;case 1:return t=xu(t.type,!0),t;default:return""}}function ad(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Us:return"Fragment";case Bs:return"Portal";case rd:return"Profiler";case Sh:return"StrictMode";case sd:return"Suspense";case id:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case C0:return(t.displayName||"Context")+".Consumer";case T0:return(t._context.displayName||"Context")+".Provider";case Ih:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kh:return e=t.displayName||null,e!==null?e:ad(t.type)||"Memo";case or:e=t._payload,t=t._init;try{return ad(t(e))}catch{}}return null}function yw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ad(e);case 8:return e===Sh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ir(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function I0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vw(t){var e=I0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bo(t){t._valueTracker||(t._valueTracker=vw(t))}function k0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=I0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function od(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Om(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ir(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function A0(t,e){e=e.checked,e!=null&&Ch(t,"checked",e,!1)}function ld(t,e){A0(t,e);var n=Ir(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?cd(t,e.type,n):e.hasOwnProperty("defaultValue")&&cd(t,e.type,Ir(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function cd(t,e,n){(e!=="number"||Tl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ia=Array.isArray;function Js(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ir(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ud(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(ia(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ir(n)}}function P0(t,e){var n=Ir(e.value),r=Ir(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Um(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function R0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?R0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uo,D0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uo=Uo||document.createElement("div"),Uo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ia(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ww=["Webkit","ms","Moz","O"];Object.keys(fa).forEach(function(t){ww.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fa[e]=fa[t]})});function L0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fa.hasOwnProperty(t)&&fa[t]?(""+e).trim():e+"px"}function M0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=L0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var bw=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hd(t,e){if(e){if(bw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function fd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var md=null;function Ah(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pd=null,Zs=null,ei=null;function zm(t){if(t=ao(t)){if(typeof pd!="function")throw Error(H(280));var e=t.stateNode;e&&(e=yc(e),pd(t.stateNode,t.type,e))}}function V0(t){Zs?ei?ei.push(t):ei=[t]:Zs=t}function O0(){if(Zs){var t=Zs,e=ei;if(ei=Zs=null,zm(t),e)for(t=0;t<e.length;t++)zm(e[t])}}function F0(t,e){return t(e)}function B0(){}var yu=!1;function U0(t,e,n){if(yu)return t(e,n);yu=!0;try{return F0(t,e,n)}finally{yu=!1,(Zs!==null||ei!==null)&&(B0(),O0())}}function ka(t,e){var n=t.stateNode;if(n===null)return null;var r=yc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var gd=!1;if($n)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){gd=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{gd=!1}function jw(t,e,n,r,s,a,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ma=!1,Cl=null,Sl=!1,xd=null,_w={onError:function(t){ma=!0,Cl=t}};function Nw(t,e,n,r,s,a,o,c,u){ma=!1,Cl=null,jw.apply(_w,arguments)}function Ew(t,e,n,r,s,a,o,c,u){if(Nw.apply(this,arguments),ma){if(ma){var d=Cl;ma=!1,Cl=null}else throw Error(H(198));Sl||(Sl=!0,xd=d)}}function ws(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function z0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $m(t){if(ws(t)!==t)throw Error(H(188))}function Tw(t){var e=t.alternate;if(!e){if(e=ws(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return $m(s),t;if(a===r)return $m(s),e;a=a.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=a;break}if(c===r){o=!0,r=s,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=s;break}if(c===r){o=!0,r=a,n=s;break}c=c.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function $0(t){return t=Tw(t),t!==null?W0(t):null}function W0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=W0(t);if(e!==null)return e;t=t.sibling}return null}var H0=en.unstable_scheduleCallback,Wm=en.unstable_cancelCallback,Cw=en.unstable_shouldYield,Sw=en.unstable_requestPaint,Ye=en.unstable_now,Iw=en.unstable_getCurrentPriorityLevel,Ph=en.unstable_ImmediatePriority,q0=en.unstable_UserBlockingPriority,Il=en.unstable_NormalPriority,kw=en.unstable_LowPriority,Q0=en.unstable_IdlePriority,mc=null,Cn=null;function Aw(t){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(mc,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:Dw,Pw=Math.log,Rw=Math.LN2;function Dw(t){return t>>>=0,t===0?32:31-(Pw(t)/Rw|0)|0}var zo=64,$o=4194304;function aa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=aa(c):(a&=o,a!==0&&(r=aa(a)))}else o=n&~s,o!==0?r=aa(o):a!==0&&(r=aa(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gn(e),s=1<<n,r|=t[n],e&=~s;return r}function Lw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-gn(a),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=Lw(c,e)):u<=e&&(t.expiredLanes|=c),a&=~c}}function yd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function G0(){var t=zo;return zo<<=1,!(zo&4194240)&&(zo=64),t}function vu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function so(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function Vw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-gn(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function Rh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ke=0;function K0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Y0,Dh,X0,J0,Z0,vd=!1,Wo=[],pr=null,gr=null,xr=null,Aa=new Map,Pa=new Map,cr=[],Ow="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hm(t,e){switch(t){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Aa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pa.delete(e.pointerId)}}function Yi(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=ao(e),e!==null&&Dh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Fw(t,e,n,r,s){switch(e){case"focusin":return pr=Yi(pr,t,e,n,r,s),!0;case"dragenter":return gr=Yi(gr,t,e,n,r,s),!0;case"mouseover":return xr=Yi(xr,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Aa.set(a,Yi(Aa.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Pa.set(a,Yi(Pa.get(a)||null,t,e,n,r,s)),!0}return!1}function ex(t){var e=is(t.target);if(e!==null){var n=ws(e);if(n!==null){if(e=n.tag,e===13){if(e=z0(n),e!==null){t.blockedOn=e,Z0(t.priority,function(){X0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ul(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);md=r,n.target.dispatchEvent(r),md=null}else return e=ao(n),e!==null&&Dh(e),t.blockedOn=n,!1;e.shift()}return!0}function qm(t,e,n){ul(t)&&n.delete(e)}function Bw(){vd=!1,pr!==null&&ul(pr)&&(pr=null),gr!==null&&ul(gr)&&(gr=null),xr!==null&&ul(xr)&&(xr=null),Aa.forEach(qm),Pa.forEach(qm)}function Xi(t,e){t.blockedOn===e&&(t.blockedOn=null,vd||(vd=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,Bw)))}function Ra(t){function e(s){return Xi(s,t)}if(0<Wo.length){Xi(Wo[0],t);for(var n=1;n<Wo.length;n++){var r=Wo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(pr!==null&&Xi(pr,t),gr!==null&&Xi(gr,t),xr!==null&&Xi(xr,t),Aa.forEach(e),Pa.forEach(e),n=0;n<cr.length;n++)r=cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<cr.length&&(n=cr[0],n.blockedOn===null);)ex(n),n.blockedOn===null&&cr.shift()}var ti=Xn.ReactCurrentBatchConfig,Al=!0;function Uw(t,e,n,r){var s=ke,a=ti.transition;ti.transition=null;try{ke=1,Lh(t,e,n,r)}finally{ke=s,ti.transition=a}}function zw(t,e,n,r){var s=ke,a=ti.transition;ti.transition=null;try{ke=4,Lh(t,e,n,r)}finally{ke=s,ti.transition=a}}function Lh(t,e,n,r){if(Al){var s=wd(t,e,n,r);if(s===null)Iu(t,e,r,Pl,n),Hm(t,r);else if(Fw(s,t,e,n,r))r.stopPropagation();else if(Hm(t,r),e&4&&-1<Ow.indexOf(t)){for(;s!==null;){var a=ao(s);if(a!==null&&Y0(a),a=wd(t,e,n,r),a===null&&Iu(t,e,r,Pl,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Iu(t,e,r,null,n)}}var Pl=null;function wd(t,e,n,r){if(Pl=null,t=Ah(r),t=is(t),t!==null)if(e=ws(t),e===null)t=null;else if(n=e.tag,n===13){if(t=z0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pl=t,null}function tx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Iw()){case Ph:return 1;case q0:return 4;case Il:case kw:return 16;case Q0:return 536870912;default:return 16}default:return 16}}var dr=null,Mh=null,dl=null;function nx(){if(dl)return dl;var t,e=Mh,n=e.length,r,s="value"in dr?dr.value:dr.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return dl=s.slice(t,1<r?1-r:void 0)}function hl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ho(){return!0}function Qm(){return!1}function nn(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ho:Qm,this.isPropagationStopped=Qm,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),e}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vh=nn(ji),io=He({},ji,{view:0,detail:0}),$w=nn(io),wu,bu,Ji,pc=He({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ji&&(Ji&&t.type==="mousemove"?(wu=t.screenX-Ji.screenX,bu=t.screenY-Ji.screenY):bu=wu=0,Ji=t),wu)},movementY:function(t){return"movementY"in t?t.movementY:bu}}),Gm=nn(pc),Ww=He({},pc,{dataTransfer:0}),Hw=nn(Ww),qw=He({},io,{relatedTarget:0}),ju=nn(qw),Qw=He({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),Gw=nn(Qw),Kw=He({},ji,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yw=nn(Kw),Xw=He({},ji,{data:0}),Km=nn(Xw),Jw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=e2[t])?!!e[t]:!1}function Oh(){return t2}var n2=He({},io,{key:function(t){if(t.key){var e=Jw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Zw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oh,charCode:function(t){return t.type==="keypress"?hl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),r2=nn(n2),s2=He({},pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ym=nn(s2),i2=He({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oh}),a2=nn(i2),o2=He({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),l2=nn(o2),c2=He({},pc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),u2=nn(c2),d2=[9,13,27,32],Fh=$n&&"CompositionEvent"in window,pa=null;$n&&"documentMode"in document&&(pa=document.documentMode);var h2=$n&&"TextEvent"in window&&!pa,rx=$n&&(!Fh||pa&&8<pa&&11>=pa),Xm=" ",Jm=!1;function sx(t,e){switch(t){case"keyup":return d2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ix(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zs=!1;function f2(t,e){switch(t){case"compositionend":return ix(e);case"keypress":return e.which!==32?null:(Jm=!0,Xm);case"textInput":return t=e.data,t===Xm&&Jm?null:t;default:return null}}function m2(t,e){if(zs)return t==="compositionend"||!Fh&&sx(t,e)?(t=nx(),dl=Mh=dr=null,zs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rx&&e.locale!=="ko"?null:e.data;default:return null}}var p2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!p2[t.type]:e==="textarea"}function ax(t,e,n,r){V0(r),e=Rl(e,"onChange"),0<e.length&&(n=new Vh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ga=null,Da=null;function g2(t){xx(t,0)}function gc(t){var e=Hs(t);if(k0(e))return t}function x2(t,e){if(t==="change")return e}var ox=!1;if($n){var _u;if($n){var Nu="oninput"in document;if(!Nu){var ep=document.createElement("div");ep.setAttribute("oninput","return;"),Nu=typeof ep.oninput=="function"}_u=Nu}else _u=!1;ox=_u&&(!document.documentMode||9<document.documentMode)}function tp(){ga&&(ga.detachEvent("onpropertychange",lx),Da=ga=null)}function lx(t){if(t.propertyName==="value"&&gc(Da)){var e=[];ax(e,Da,t,Ah(t)),U0(g2,e)}}function y2(t,e,n){t==="focusin"?(tp(),ga=e,Da=n,ga.attachEvent("onpropertychange",lx)):t==="focusout"&&tp()}function v2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gc(Da)}function w2(t,e){if(t==="click")return gc(e)}function b2(t,e){if(t==="input"||t==="change")return gc(e)}function j2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yn=typeof Object.is=="function"?Object.is:j2;function La(t,e){if(yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!nd.call(e,s)||!yn(t[s],e[s]))return!1}return!0}function np(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rp(t,e){var n=np(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=np(n)}}function cx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ux(){for(var t=window,e=Tl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tl(t.document)}return e}function Bh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _2(t){var e=ux(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cx(n.ownerDocument.documentElement,n)){if(r!==null&&Bh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=rp(n,a);var o=rp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var N2=$n&&"documentMode"in document&&11>=document.documentMode,$s=null,bd=null,xa=null,jd=!1;function sp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jd||$s==null||$s!==Tl(r)||(r=$s,"selectionStart"in r&&Bh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xa&&La(xa,r)||(xa=r,r=Rl(bd,"onSelect"),0<r.length&&(e=new Vh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$s)))}function qo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ws={animationend:qo("Animation","AnimationEnd"),animationiteration:qo("Animation","AnimationIteration"),animationstart:qo("Animation","AnimationStart"),transitionend:qo("Transition","TransitionEnd")},Eu={},dx={};$n&&(dx=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function xc(t){if(Eu[t])return Eu[t];if(!Ws[t])return t;var e=Ws[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dx)return Eu[t]=e[n];return t}var hx=xc("animationend"),fx=xc("animationiteration"),mx=xc("animationstart"),px=xc("transitionend"),gx=new Map,ip="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){gx.set(t,e),vs(e,[t])}for(var Tu=0;Tu<ip.length;Tu++){var Cu=ip[Tu],E2=Cu.toLowerCase(),T2=Cu[0].toUpperCase()+Cu.slice(1);Or(E2,"on"+T2)}Or(hx,"onAnimationEnd");Or(fx,"onAnimationIteration");Or(mx,"onAnimationStart");Or("dblclick","onDoubleClick");Or("focusin","onFocus");Or("focusout","onBlur");Or(px,"onTransitionEnd");oi("onMouseEnter",["mouseout","mouseover"]);oi("onMouseLeave",["mouseout","mouseover"]);oi("onPointerEnter",["pointerout","pointerover"]);oi("onPointerLeave",["pointerout","pointerover"]);vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C2=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function ap(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Ew(r,e,void 0,t),t.currentTarget=null}function xx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==a&&s.isPropagationStopped())break e;ap(s,c,d),a=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==a&&s.isPropagationStopped())break e;ap(s,c,d),a=u}}}if(Sl)throw t=xd,Sl=!1,xd=null,t}function Le(t,e){var n=e[Cd];n===void 0&&(n=e[Cd]=new Set);var r=t+"__bubble";n.has(r)||(yx(e,t,2,!1),n.add(r))}function Su(t,e,n){var r=0;e&&(r|=4),yx(n,t,r,e)}var Qo="_reactListening"+Math.random().toString(36).slice(2);function Ma(t){if(!t[Qo]){t[Qo]=!0,E0.forEach(function(n){n!=="selectionchange"&&(C2.has(n)||Su(n,!1,t),Su(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qo]||(e[Qo]=!0,Su("selectionchange",!1,e))}}function yx(t,e,n,r){switch(tx(e)){case 1:var s=Uw;break;case 4:s=zw;break;default:s=Lh}n=s.bind(null,e,n,t),s=void 0,!gd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Iu(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=is(c),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}c=c.parentNode}}r=r.return}U0(function(){var d=a,f=Ah(n),m=[];e:{var g=gx.get(t);if(g!==void 0){var v=Vh,T=t;switch(t){case"keypress":if(hl(n)===0)break e;case"keydown":case"keyup":v=r2;break;case"focusin":T="focus",v=ju;break;case"focusout":T="blur",v=ju;break;case"beforeblur":case"afterblur":v=ju;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Gm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Hw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=a2;break;case hx:case fx:case mx:v=Gw;break;case px:v=l2;break;case"scroll":v=$w;break;case"wheel":v=u2;break;case"copy":case"cut":case"paste":v=Yw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Ym}var E=(e&4)!==0,k=!E&&t==="scroll",j=E?g!==null?g+"Capture":null:g;E=[];for(var y=d,_;y!==null;){_=y;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,j!==null&&(S=ka(y,j),S!=null&&E.push(Va(y,S,_)))),k)break;y=y.return}0<E.length&&(g=new v(g,T,null,n,f),m.push({event:g,listeners:E}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==md&&(T=n.relatedTarget||n.fromElement)&&(is(T)||T[Wn]))break e;if((v||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,v?(T=n.relatedTarget||n.toElement,v=d,T=T?is(T):null,T!==null&&(k=ws(T),T!==k||T.tag!==5&&T.tag!==6)&&(T=null)):(v=null,T=d),v!==T)){if(E=Gm,S="onMouseLeave",j="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(E=Ym,S="onPointerLeave",j="onPointerEnter",y="pointer"),k=v==null?g:Hs(v),_=T==null?g:Hs(T),g=new E(S,y+"leave",v,n,f),g.target=k,g.relatedTarget=_,S=null,is(f)===d&&(E=new E(j,y+"enter",T,n,f),E.target=_,E.relatedTarget=k,S=E),k=S,v&&T)t:{for(E=v,j=T,y=0,_=E;_;_=Ls(_))y++;for(_=0,S=j;S;S=Ls(S))_++;for(;0<y-_;)E=Ls(E),y--;for(;0<_-y;)j=Ls(j),_--;for(;y--;){if(E===j||j!==null&&E===j.alternate)break t;E=Ls(E),j=Ls(j)}E=null}else E=null;v!==null&&op(m,g,v,E,!1),T!==null&&k!==null&&op(m,k,T,E,!0)}}e:{if(g=d?Hs(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var R=x2;else if(Zm(g))if(ox)R=b2;else{R=v2;var L=y2}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(R=w2);if(R&&(R=R(t,d))){ax(m,R,n,f);break e}L&&L(t,g,d),t==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&cd(g,"number",g.value)}switch(L=d?Hs(d):window,t){case"focusin":(Zm(L)||L.contentEditable==="true")&&($s=L,bd=d,xa=null);break;case"focusout":xa=bd=$s=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,sp(m,n,f);break;case"selectionchange":if(N2)break;case"keydown":case"keyup":sp(m,n,f)}var w;if(Fh)e:{switch(t){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else zs?sx(t,n)&&(p="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(p="onCompositionStart");p&&(rx&&n.locale!=="ko"&&(zs||p!=="onCompositionStart"?p==="onCompositionEnd"&&zs&&(w=nx()):(dr=f,Mh="value"in dr?dr.value:dr.textContent,zs=!0)),L=Rl(d,p),0<L.length&&(p=new Km(p,t,null,n,f),m.push({event:p,listeners:L}),w?p.data=w:(w=ix(n),w!==null&&(p.data=w)))),(w=h2?f2(t,n):m2(t,n))&&(d=Rl(d,"onBeforeInput"),0<d.length&&(f=new Km("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=w))}xx(m,e)})}function Va(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=ka(t,n),a!=null&&r.unshift(Va(t,a,s)),a=ka(t,e),a!=null&&r.push(Va(t,a,s))),t=t.return}return r}function Ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function op(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=ka(n,a),u!=null&&o.unshift(Va(n,u,c))):s||(u=ka(n,a),u!=null&&o.push(Va(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var S2=/\r\n?/g,I2=/\u0000|\uFFFD/g;function lp(t){return(typeof t=="string"?t:""+t).replace(S2,`
`).replace(I2,"")}function Go(t,e,n){if(e=lp(e),lp(t)!==e&&n)throw Error(H(425))}function Dl(){}var _d=null,Nd=null;function Ed(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Td=typeof setTimeout=="function"?setTimeout:void 0,k2=typeof clearTimeout=="function"?clearTimeout:void 0,cp=typeof Promise=="function"?Promise:void 0,A2=typeof queueMicrotask=="function"?queueMicrotask:typeof cp<"u"?function(t){return cp.resolve(null).then(t).catch(P2)}:Td;function P2(t){setTimeout(function(){throw t})}function ku(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ra(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ra(e)}function yr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function up(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _i=Math.random().toString(36).slice(2),Tn="__reactFiber$"+_i,Oa="__reactProps$"+_i,Wn="__reactContainer$"+_i,Cd="__reactEvents$"+_i,R2="__reactListeners$"+_i,D2="__reactHandles$"+_i;function is(t){var e=t[Tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wn]||n[Tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=up(t);t!==null;){if(n=t[Tn])return n;t=up(t)}return e}t=n,n=t.parentNode}return null}function ao(t){return t=t[Tn]||t[Wn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function yc(t){return t[Oa]||null}var Sd=[],qs=-1;function Fr(t){return{current:t}}function Oe(t){0>qs||(t.current=Sd[qs],Sd[qs]=null,qs--)}function Re(t,e){qs++,Sd[qs]=t.current,t.current=e}var kr={},Pt=Fr(kr),zt=Fr(!1),hs=kr;function li(t,e){var n=t.type.contextTypes;if(!n)return kr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $t(t){return t=t.childContextTypes,t!=null}function Ll(){Oe(zt),Oe(Pt)}function dp(t,e,n){if(Pt.current!==kr)throw Error(H(168));Re(Pt,e),Re(zt,n)}function vx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,yw(t)||"Unknown",s));return He({},n,r)}function Ml(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,hs=Pt.current,Re(Pt,t),Re(zt,zt.current),!0}function hp(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=vx(t,e,hs),r.__reactInternalMemoizedMergedChildContext=t,Oe(zt),Oe(Pt),Re(Pt,t)):Oe(zt),Re(zt,n)}var Fn=null,vc=!1,Au=!1;function wx(t){Fn===null?Fn=[t]:Fn.push(t)}function L2(t){vc=!0,wx(t)}function Br(){if(!Au&&Fn!==null){Au=!0;var t=0,e=ke;try{var n=Fn;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fn=null,vc=!1}catch(s){throw Fn!==null&&(Fn=Fn.slice(t+1)),H0(Ph,Br),s}finally{ke=e,Au=!1}}return null}var Qs=[],Gs=0,Vl=null,Ol=0,rn=[],sn=0,fs=null,Bn=1,Un="";function ns(t,e){Qs[Gs++]=Ol,Qs[Gs++]=Vl,Vl=t,Ol=e}function bx(t,e,n){rn[sn++]=Bn,rn[sn++]=Un,rn[sn++]=fs,fs=t;var r=Bn;t=Un;var s=32-gn(r)-1;r&=~(1<<s),n+=1;var a=32-gn(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Bn=1<<32-gn(e)+s|n<<s|r,Un=a+t}else Bn=1<<a|n<<s|r,Un=t}function Uh(t){t.return!==null&&(ns(t,1),bx(t,1,0))}function zh(t){for(;t===Vl;)Vl=Qs[--Gs],Qs[Gs]=null,Ol=Qs[--Gs],Qs[Gs]=null;for(;t===fs;)fs=rn[--sn],rn[sn]=null,Un=rn[--sn],rn[sn]=null,Bn=rn[--sn],rn[sn]=null}var Zt=null,Xt=null,Ue=!1,pn=null;function jx(t,e){var n=on(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zt=t,Xt=yr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zt=t,Xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fs!==null?{id:Bn,overflow:Un}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=on(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zt=t,Xt=null,!0):!1;default:return!1}}function Id(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kd(t){if(Ue){var e=Xt;if(e){var n=e;if(!fp(t,e)){if(Id(t))throw Error(H(418));e=yr(n.nextSibling);var r=Zt;e&&fp(t,e)?jx(r,n):(t.flags=t.flags&-4097|2,Ue=!1,Zt=t)}}else{if(Id(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ue=!1,Zt=t}}}function mp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zt=t}function Ko(t){if(t!==Zt)return!1;if(!Ue)return mp(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ed(t.type,t.memoizedProps)),e&&(e=Xt)){if(Id(t))throw _x(),Error(H(418));for(;e;)jx(t,e),e=yr(e.nextSibling)}if(mp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xt=yr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xt=null}}else Xt=Zt?yr(t.stateNode.nextSibling):null;return!0}function _x(){for(var t=Xt;t;)t=yr(t.nextSibling)}function ci(){Xt=Zt=null,Ue=!1}function $h(t){pn===null?pn=[t]:pn.push(t)}var M2=Xn.ReactCurrentBatchConfig;function Zi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var c=s.refs;o===null?delete c[a]:c[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Yo(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pp(t){var e=t._init;return e(t._payload)}function Nx(t){function e(j,y){if(t){var _=j.deletions;_===null?(j.deletions=[y],j.flags|=16):_.push(y)}}function n(j,y){if(!t)return null;for(;y!==null;)e(j,y),y=y.sibling;return null}function r(j,y){for(j=new Map;y!==null;)y.key!==null?j.set(y.key,y):j.set(y.index,y),y=y.sibling;return j}function s(j,y){return j=jr(j,y),j.index=0,j.sibling=null,j}function a(j,y,_){return j.index=_,t?(_=j.alternate,_!==null?(_=_.index,_<y?(j.flags|=2,y):_):(j.flags|=2,y)):(j.flags|=1048576,y)}function o(j){return t&&j.alternate===null&&(j.flags|=2),j}function c(j,y,_,S){return y===null||y.tag!==6?(y=Ou(_,j.mode,S),y.return=j,y):(y=s(y,_),y.return=j,y)}function u(j,y,_,S){var R=_.type;return R===Us?f(j,y,_.props.children,S,_.key):y!==null&&(y.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===or&&pp(R)===y.type)?(S=s(y,_.props),S.ref=Zi(j,y,_),S.return=j,S):(S=vl(_.type,_.key,_.props,null,j.mode,S),S.ref=Zi(j,y,_),S.return=j,S)}function d(j,y,_,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=Fu(_,j.mode,S),y.return=j,y):(y=s(y,_.children||[]),y.return=j,y)}function f(j,y,_,S,R){return y===null||y.tag!==7?(y=us(_,j.mode,S,R),y.return=j,y):(y=s(y,_),y.return=j,y)}function m(j,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ou(""+y,j.mode,_),y.return=j,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Fo:return _=vl(y.type,y.key,y.props,null,j.mode,_),_.ref=Zi(j,null,y),_.return=j,_;case Bs:return y=Fu(y,j.mode,_),y.return=j,y;case or:var S=y._init;return m(j,S(y._payload),_)}if(ia(y)||Gi(y))return y=us(y,j.mode,_,null),y.return=j,y;Yo(j,y)}return null}function g(j,y,_,S){var R=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return R!==null?null:c(j,y,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Fo:return _.key===R?u(j,y,_,S):null;case Bs:return _.key===R?d(j,y,_,S):null;case or:return R=_._init,g(j,y,R(_._payload),S)}if(ia(_)||Gi(_))return R!==null?null:f(j,y,_,S,null);Yo(j,_)}return null}function v(j,y,_,S,R){if(typeof S=="string"&&S!==""||typeof S=="number")return j=j.get(_)||null,c(y,j,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Fo:return j=j.get(S.key===null?_:S.key)||null,u(y,j,S,R);case Bs:return j=j.get(S.key===null?_:S.key)||null,d(y,j,S,R);case or:var L=S._init;return v(j,y,_,L(S._payload),R)}if(ia(S)||Gi(S))return j=j.get(_)||null,f(y,j,S,R,null);Yo(y,S)}return null}function T(j,y,_,S){for(var R=null,L=null,w=y,p=y=0,b=null;w!==null&&p<_.length;p++){w.index>p?(b=w,w=null):b=w.sibling;var C=g(j,w,_[p],S);if(C===null){w===null&&(w=b);break}t&&w&&C.alternate===null&&e(j,w),y=a(C,y,p),L===null?R=C:L.sibling=C,L=C,w=b}if(p===_.length)return n(j,w),Ue&&ns(j,p),R;if(w===null){for(;p<_.length;p++)w=m(j,_[p],S),w!==null&&(y=a(w,y,p),L===null?R=w:L.sibling=w,L=w);return Ue&&ns(j,p),R}for(w=r(j,w);p<_.length;p++)b=v(w,j,p,_[p],S),b!==null&&(t&&b.alternate!==null&&w.delete(b.key===null?p:b.key),y=a(b,y,p),L===null?R=b:L.sibling=b,L=b);return t&&w.forEach(function(A){return e(j,A)}),Ue&&ns(j,p),R}function E(j,y,_,S){var R=Gi(_);if(typeof R!="function")throw Error(H(150));if(_=R.call(_),_==null)throw Error(H(151));for(var L=R=null,w=y,p=y=0,b=null,C=_.next();w!==null&&!C.done;p++,C=_.next()){w.index>p?(b=w,w=null):b=w.sibling;var A=g(j,w,C.value,S);if(A===null){w===null&&(w=b);break}t&&w&&A.alternate===null&&e(j,w),y=a(A,y,p),L===null?R=A:L.sibling=A,L=A,w=b}if(C.done)return n(j,w),Ue&&ns(j,p),R;if(w===null){for(;!C.done;p++,C=_.next())C=m(j,C.value,S),C!==null&&(y=a(C,y,p),L===null?R=C:L.sibling=C,L=C);return Ue&&ns(j,p),R}for(w=r(j,w);!C.done;p++,C=_.next())C=v(w,j,p,C.value,S),C!==null&&(t&&C.alternate!==null&&w.delete(C.key===null?p:C.key),y=a(C,y,p),L===null?R=C:L.sibling=C,L=C);return t&&w.forEach(function(P){return e(j,P)}),Ue&&ns(j,p),R}function k(j,y,_,S){if(typeof _=="object"&&_!==null&&_.type===Us&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Fo:e:{for(var R=_.key,L=y;L!==null;){if(L.key===R){if(R=_.type,R===Us){if(L.tag===7){n(j,L.sibling),y=s(L,_.props.children),y.return=j,j=y;break e}}else if(L.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===or&&pp(R)===L.type){n(j,L.sibling),y=s(L,_.props),y.ref=Zi(j,L,_),y.return=j,j=y;break e}n(j,L);break}else e(j,L);L=L.sibling}_.type===Us?(y=us(_.props.children,j.mode,S,_.key),y.return=j,j=y):(S=vl(_.type,_.key,_.props,null,j.mode,S),S.ref=Zi(j,y,_),S.return=j,j=S)}return o(j);case Bs:e:{for(L=_.key;y!==null;){if(y.key===L)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(j,y.sibling),y=s(y,_.children||[]),y.return=j,j=y;break e}else{n(j,y);break}else e(j,y);y=y.sibling}y=Fu(_,j.mode,S),y.return=j,j=y}return o(j);case or:return L=_._init,k(j,y,L(_._payload),S)}if(ia(_))return T(j,y,_,S);if(Gi(_))return E(j,y,_,S);Yo(j,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(n(j,y.sibling),y=s(y,_),y.return=j,j=y):(n(j,y),y=Ou(_,j.mode,S),y.return=j,j=y),o(j)):n(j,y)}return k}var ui=Nx(!0),Ex=Nx(!1),Fl=Fr(null),Bl=null,Ks=null,Wh=null;function Hh(){Wh=Ks=Bl=null}function qh(t){var e=Fl.current;Oe(Fl),t._currentValue=e}function Ad(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ni(t,e){Bl=t,Wh=Ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ut=!0),t.firstContext=null)}function un(t){var e=t._currentValue;if(Wh!==t)if(t={context:t,memoizedValue:e,next:null},Ks===null){if(Bl===null)throw Error(H(308));Ks=t,Bl.dependencies={lanes:0,firstContext:t}}else Ks=Ks.next=t;return e}var as=null;function Qh(t){as===null?as=[t]:as.push(t)}function Tx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Qh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hn(t,r)}function Hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lr=!1;function Gh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hn(t,n)}return s=r.interleaved,s===null?(e.next=e,Qh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hn(t,n)}function fl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rh(t,n)}}function gp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ul(t,e,n,r){var s=t.updateQueue;lr=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(a!==null){var m=s.baseState;o=0,f=d=u=null,c=a;do{var g=c.lane,v=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var T=t,E=c;switch(g=e,v=n,E.tag){case 1:if(T=E.payload,typeof T=="function"){m=T.call(v,m,g);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=E.payload,g=typeof T=="function"?T.call(v,m,g):T,g==null)break e;m=He({},m,g);break e;case 2:lr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else v={eventTime:v,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=v,u=m):f=f.next=v,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);ps|=o,t.lanes=o,t.memoizedState=m}}function xp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var oo={},Sn=Fr(oo),Fa=Fr(oo),Ba=Fr(oo);function os(t){if(t===oo)throw Error(H(174));return t}function Kh(t,e){switch(Re(Ba,e),Re(Fa,t),Re(Sn,oo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dd(e,t)}Oe(Sn),Re(Sn,e)}function di(){Oe(Sn),Oe(Fa),Oe(Ba)}function Sx(t){os(Ba.current);var e=os(Sn.current),n=dd(e,t.type);e!==n&&(Re(Fa,t),Re(Sn,n))}function Yh(t){Fa.current===t&&(Oe(Sn),Oe(Fa))}var $e=Fr(0);function zl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pu=[];function Xh(){for(var t=0;t<Pu.length;t++)Pu[t]._workInProgressVersionPrimary=null;Pu.length=0}var ml=Xn.ReactCurrentDispatcher,Ru=Xn.ReactCurrentBatchConfig,ms=0,We=null,it=null,mt=null,$l=!1,ya=!1,Ua=0,V2=0;function Tt(){throw Error(H(321))}function Jh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yn(t[n],e[n]))return!1;return!0}function Zh(t,e,n,r,s,a){if(ms=a,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ml.current=t===null||t.memoizedState===null?U2:z2,t=n(r,s),ya){a=0;do{if(ya=!1,Ua=0,25<=a)throw Error(H(301));a+=1,mt=it=null,e.updateQueue=null,ml.current=$2,t=n(r,s)}while(ya)}if(ml.current=Wl,e=it!==null&&it.next!==null,ms=0,mt=it=We=null,$l=!1,e)throw Error(H(300));return t}function ef(){var t=Ua!==0;return Ua=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?We.memoizedState=mt=t:mt=mt.next=t,mt}function dn(){if(it===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=mt===null?We.memoizedState:mt.next;if(e!==null)mt=e,it=t;else{if(t===null)throw Error(H(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},mt===null?We.memoizedState=mt=t:mt=mt.next=t}return mt}function za(t,e){return typeof e=="function"?e(t):e}function Du(t){var e=dn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=it,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var c=o=null,u=null,d=a;do{var f=d.lane;if((ms&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,We.lanes|=f,ps|=f}d=d.next}while(d!==null&&d!==a);u===null?o=r:u.next=c,yn(r,e.memoizedState)||(Ut=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,We.lanes|=a,ps|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Lu(t){var e=dn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);yn(a,e.memoizedState)||(Ut=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Ix(){}function kx(t,e){var n=We,r=dn(),s=e(),a=!yn(r.memoizedState,s);if(a&&(r.memoizedState=s,Ut=!0),r=r.queue,tf(Rx.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,$a(9,Px.bind(null,n,r,s,e),void 0,null),pt===null)throw Error(H(349));ms&30||Ax(n,e,s)}return s}function Ax(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Px(t,e,n,r){e.value=n,e.getSnapshot=r,Dx(e)&&Lx(t)}function Rx(t,e,n){return n(function(){Dx(e)&&Lx(t)})}function Dx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yn(t,n)}catch{return!0}}function Lx(t){var e=Hn(t,1);e!==null&&xn(e,t,1,-1)}function yp(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:t},e.queue=t,t=t.dispatch=B2.bind(null,We,t),[e.memoizedState,t]}function $a(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Mx(){return dn().memoizedState}function pl(t,e,n,r){var s=Nn();We.flags|=t,s.memoizedState=$a(1|e,n,void 0,r===void 0?null:r)}function wc(t,e,n,r){var s=dn();r=r===void 0?null:r;var a=void 0;if(it!==null){var o=it.memoizedState;if(a=o.destroy,r!==null&&Jh(r,o.deps)){s.memoizedState=$a(e,n,a,r);return}}We.flags|=t,s.memoizedState=$a(1|e,n,a,r)}function vp(t,e){return pl(8390656,8,t,e)}function tf(t,e){return wc(2048,8,t,e)}function Vx(t,e){return wc(4,2,t,e)}function Ox(t,e){return wc(4,4,t,e)}function Fx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bx(t,e,n){return n=n!=null?n.concat([t]):null,wc(4,4,Fx.bind(null,e,t),n)}function nf(){}function Ux(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zx(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $x(t,e,n){return ms&21?(yn(n,e)||(n=G0(),We.lanes|=n,ps|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ut=!0),t.memoizedState=n)}function O2(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=Ru.transition;Ru.transition={};try{t(!1),e()}finally{ke=n,Ru.transition=r}}function Wx(){return dn().memoizedState}function F2(t,e,n){var r=br(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Hx(t))qx(e,n);else if(n=Tx(t,e,n,r),n!==null){var s=Dt();xn(n,t,r,s),Qx(n,e,r)}}function B2(t,e,n){var r=br(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hx(t))qx(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,c=a(o,n);if(s.hasEagerState=!0,s.eagerState=c,yn(c,o)){var u=e.interleaved;u===null?(s.next=s,Qh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Tx(t,e,s,r),n!==null&&(s=Dt(),xn(n,t,r,s),Qx(n,e,r))}}function Hx(t){var e=t.alternate;return t===We||e!==null&&e===We}function qx(t,e){ya=$l=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rh(t,n)}}var Wl={readContext:un,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},U2={readContext:un,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:un,useEffect:vp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pl(4194308,4,Fx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pl(4194308,4,t,e)},useInsertionEffect:function(t,e){return pl(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=F2.bind(null,We,t),[r.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:yp,useDebugValue:nf,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=yp(!1),e=t[0];return t=O2.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=We,s=Nn();if(Ue){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),pt===null)throw Error(H(349));ms&30||Ax(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,vp(Rx.bind(null,r,a,t),[t]),r.flags|=2048,$a(9,Px.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Nn(),e=pt.identifierPrefix;if(Ue){var n=Un,r=Bn;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ua++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=V2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},z2={readContext:un,useCallback:Ux,useContext:un,useEffect:tf,useImperativeHandle:Bx,useInsertionEffect:Vx,useLayoutEffect:Ox,useMemo:zx,useReducer:Du,useRef:Mx,useState:function(){return Du(za)},useDebugValue:nf,useDeferredValue:function(t){var e=dn();return $x(e,it.memoizedState,t)},useTransition:function(){var t=Du(za)[0],e=dn().memoizedState;return[t,e]},useMutableSource:Ix,useSyncExternalStore:kx,useId:Wx,unstable_isNewReconciler:!1},$2={readContext:un,useCallback:Ux,useContext:un,useEffect:tf,useImperativeHandle:Bx,useInsertionEffect:Vx,useLayoutEffect:Ox,useMemo:zx,useReducer:Lu,useRef:Mx,useState:function(){return Lu(za)},useDebugValue:nf,useDeferredValue:function(t){var e=dn();return it===null?e.memoizedState=t:$x(e,it.memoizedState,t)},useTransition:function(){var t=Lu(za)[0],e=dn().memoizedState;return[t,e]},useMutableSource:Ix,useSyncExternalStore:kx,useId:Wx,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Pd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bc={isMounted:function(t){return(t=t._reactInternals)?ws(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dt(),s=br(t),a=zn(r,s);a.payload=e,n!=null&&(a.callback=n),e=vr(t,a,s),e!==null&&(xn(e,t,s,r),fl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dt(),s=br(t),a=zn(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=vr(t,a,s),e!==null&&(xn(e,t,s,r),fl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dt(),r=br(t),s=zn(n,r);s.tag=2,e!=null&&(s.callback=e),e=vr(t,s,r),e!==null&&(xn(e,t,r,n),fl(e,t,r))}};function wp(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!La(n,r)||!La(s,a):!0}function Gx(t,e,n){var r=!1,s=kr,a=e.contextType;return typeof a=="object"&&a!==null?a=un(a):(s=$t(e)?hs:Pt.current,r=e.contextTypes,a=(r=r!=null)?li(t,s):kr),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function bp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bc.enqueueReplaceState(e,e.state,null)}function Rd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Gh(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=un(a):(a=$t(e)?hs:Pt.current,s.context=li(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Pd(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&bc.enqueueReplaceState(s,s.state,null),Ul(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function hi(t,e){try{var n="",r=e;do n+=xw(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Mu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var W2=typeof WeakMap=="function"?WeakMap:Map;function Kx(t,e,n){n=zn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ql||(ql=!0,Wd=r),Dd(t,e)},n}function Yx(t,e,n){n=zn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Dd(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Dd(t,e),typeof r!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function jp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new W2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=sb.bind(null,t,e,n),e.then(t,t))}function _p(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Np(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zn(-1,1),e.tag=2,vr(n,e,1))),n.lanes|=1),t)}var H2=Xn.ReactCurrentOwner,Ut=!1;function Rt(t,e,n,r){e.child=t===null?Ex(e,null,n,r):ui(e,t.child,n,r)}function Ep(t,e,n,r,s){n=n.render;var a=e.ref;return ni(e,s),r=Zh(t,e,n,r,a,s),n=ef(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qn(t,e,s)):(Ue&&n&&Uh(e),e.flags|=1,Rt(t,e,r,s),e.child)}function Tp(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!df(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,Xx(t,e,a,r,s)):(t=vl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:La,n(o,r)&&t.ref===e.ref)return qn(t,e,s)}return e.flags|=1,t=jr(a,r),t.ref=e.ref,t.return=e,e.child=t}function Xx(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(La(a,r)&&t.ref===e.ref)if(Ut=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(Ut=!0);else return e.lanes=t.lanes,qn(t,e,s)}return Ld(t,e,n,r,s)}function Jx(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Xs,Yt),Yt|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(Xs,Yt),Yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Re(Xs,Yt),Yt|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Re(Xs,Yt),Yt|=r;return Rt(t,e,s,n),e.child}function Zx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ld(t,e,n,r,s){var a=$t(n)?hs:Pt.current;return a=li(e,a),ni(e,s),n=Zh(t,e,n,r,a,s),r=ef(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qn(t,e,s)):(Ue&&r&&Uh(e),e.flags|=1,Rt(t,e,n,s),e.child)}function Cp(t,e,n,r,s){if($t(n)){var a=!0;Ml(e)}else a=!1;if(ni(e,s),e.stateNode===null)gl(t,e),Gx(e,n,r),Rd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=un(d):(d=$t(n)?hs:Pt.current,d=li(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&bp(e,o,r,d),lr=!1;var g=e.memoizedState;o.state=g,Ul(e,r,o,s),u=e.memoizedState,c!==r||g!==u||zt.current||lr?(typeof f=="function"&&(Pd(e,n,f,r),u=e.memoizedState),(c=lr||wp(e,n,c,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Cx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:fn(e.type,c),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=un(u):(u=$t(n)?hs:Pt.current,u=li(e,u));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||g!==u)&&bp(e,o,r,u),lr=!1,g=e.memoizedState,o.state=g,Ul(e,r,o,s);var T=e.memoizedState;c!==m||g!==T||zt.current||lr?(typeof v=="function"&&(Pd(e,n,v,r),T=e.memoizedState),(d=lr||wp(e,n,d,r,g,T,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Md(t,e,n,r,a,s)}function Md(t,e,n,r,s,a){Zx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&hp(e,n,!1),qn(t,e,a);r=e.stateNode,H2.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ui(e,t.child,null,a),e.child=ui(e,null,c,a)):Rt(t,e,c,a),e.memoizedState=r.state,s&&hp(e,n,!0),e.child}function ey(t){var e=t.stateNode;e.pendingContext?dp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dp(t,e.context,!1),Kh(t,e.containerInfo)}function Sp(t,e,n,r,s){return ci(),$h(s),e.flags|=256,Rt(t,e,n,r),e.child}var Vd={dehydrated:null,treeContext:null,retryLane:0};function Od(t){return{baseLanes:t,cachePool:null,transitions:null}}function ty(t,e,n){var r=e.pendingProps,s=$e.current,a=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Re($e,s&1),t===null)return kd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Nc(o,r,0,null),t=us(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Od(n),e.memoizedState=Vd,t):rf(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return q2(t,e,o,r,c,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=jr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?a=jr(c,a):(a=us(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Od(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=Vd,r}return a=t.child,t=a.sibling,r=jr(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rf(t,e){return e=Nc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xo(t,e,n,r){return r!==null&&$h(r),ui(e,t.child,null,n),t=rf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function q2(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Mu(Error(H(422))),Xo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=Nc({mode:"visible",children:r.children},s,0,null),a=us(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&ui(e,t.child,null,o),e.child.memoizedState=Od(o),e.memoizedState=Vd,a);if(!(e.mode&1))return Xo(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(H(419)),r=Mu(a,r,void 0),Xo(t,e,o,r)}if(c=(o&t.childLanes)!==0,Ut||c){if(r=pt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Hn(t,s),xn(r,t,s,-1))}return uf(),r=Mu(Error(H(421))),Xo(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ib.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Xt=yr(s.nextSibling),Zt=e,Ue=!0,pn=null,t!==null&&(rn[sn++]=Bn,rn[sn++]=Un,rn[sn++]=fs,Bn=t.id,Un=t.overflow,fs=e),e=rf(e,r.children),e.flags|=4096,e)}function Ip(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ad(t.return,e,n)}function Vu(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function ny(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(Rt(t,e,r.children,n),r=$e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ip(t,n,e);else if(t.tag===19)Ip(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Re($e,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&zl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Vu(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&zl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Vu(e,!0,n,null,a);break;case"together":Vu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ps|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=jr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=jr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Q2(t,e,n){switch(e.tag){case 3:ey(e),ci();break;case 5:Sx(e);break;case 1:$t(e.type)&&Ml(e);break;case 4:Kh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Re(Fl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Re($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?ty(t,e,n):(Re($e,$e.current&1),t=qn(t,e,n),t!==null?t.sibling:null);Re($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ny(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Re($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,Jx(t,e,n)}return qn(t,e,n)}var ry,Fd,sy,iy;ry=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fd=function(){};sy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,os(Sn.current);var a=null;switch(n){case"input":s=od(t,s),r=od(t,r),a=[];break;case"select":s=He({},s,{value:void 0}),r=He({},r,{value:void 0}),a=[];break;case"textarea":s=ud(t,s),r=ud(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Dl)}hd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Sa.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Sa.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Le("scroll",t),a||c===u||(a=[])):(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};iy=function(t,e,n,r){n!==r&&(e.flags|=4)};function ea(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function G2(t,e,n){var r=e.pendingProps;switch(zh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return $t(e.type)&&Ll(),Ct(e),null;case 3:return r=e.stateNode,di(),Oe(zt),Oe(Pt),Xh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ko(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pn!==null&&(Qd(pn),pn=null))),Fd(t,e),Ct(e),null;case 5:Yh(e);var s=os(Ba.current);if(n=e.type,t!==null&&e.stateNode!=null)sy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Ct(e),null}if(t=os(Sn.current),Ko(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Tn]=e,r[Oa]=a,t=(e.mode&1)!==0,n){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(s=0;s<oa.length;s++)Le(oa[s],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Om(r,a),Le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Le("invalid",r);break;case"textarea":Bm(r,a),Le("invalid",r)}hd(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&Go(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Go(r.textContent,c,t),s=["children",""+c]):Sa.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Le("scroll",r)}switch(n){case"input":Bo(r),Fm(r,a,!0);break;case"textarea":Bo(r),Um(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Dl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=R0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Tn]=e,t[Oa]=r,ry(t,e,!1,!1),e.stateNode=t;e:{switch(o=fd(n,r),n){case"dialog":Le("cancel",t),Le("close",t),s=r;break;case"iframe":case"object":case"embed":Le("load",t),s=r;break;case"video":case"audio":for(s=0;s<oa.length;s++)Le(oa[s],t);s=r;break;case"source":Le("error",t),s=r;break;case"img":case"image":case"link":Le("error",t),Le("load",t),s=r;break;case"details":Le("toggle",t),s=r;break;case"input":Om(t,r),s=od(t,r),Le("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=He({},r,{value:void 0}),Le("invalid",t);break;case"textarea":Bm(t,r),s=ud(t,r),Le("invalid",t);break;default:s=r}hd(n,s),c=s;for(a in c)if(c.hasOwnProperty(a)){var u=c[a];a==="style"?M0(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&D0(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ia(t,u):typeof u=="number"&&Ia(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Sa.hasOwnProperty(a)?u!=null&&a==="onScroll"&&Le("scroll",t):u!=null&&Ch(t,a,u,o))}switch(n){case"input":Bo(t),Fm(t,r,!1);break;case"textarea":Bo(t),Um(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ir(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Js(t,!!r.multiple,a,!1):r.defaultValue!=null&&Js(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Dl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)iy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=os(Ba.current),os(Sn.current),Ko(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tn]=e,(a=r.nodeValue!==n)&&(t=Zt,t!==null))switch(t.tag){case 3:Go(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Go(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tn]=e,e.stateNode=r}return Ct(e),null;case 13:if(Oe($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&Xt!==null&&e.mode&1&&!(e.flags&128))_x(),ci(),e.flags|=98560,a=!1;else if(a=Ko(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(H(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(H(317));a[Tn]=e}else ci(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),a=!1}else pn!==null&&(Qd(pn),pn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?ot===0&&(ot=3):uf())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return di(),Fd(t,e),t===null&&Ma(e.stateNode.containerInfo),Ct(e),null;case 10:return qh(e.type._context),Ct(e),null;case 17:return $t(e.type)&&Ll(),Ct(e),null;case 19:if(Oe($e),a=e.memoizedState,a===null)return Ct(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)ea(a,!1);else{if(ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zl(t),o!==null){for(e.flags|=128,ea(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re($e,$e.current&1|2),e.child}t=t.sibling}a.tail!==null&&Ye()>fi&&(e.flags|=128,r=!0,ea(a,!1),e.lanes=4194304)}else{if(!r)if(t=zl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ea(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ue)return Ct(e),null}else 2*Ye()-a.renderingStartTime>fi&&n!==1073741824&&(e.flags|=128,r=!0,ea(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ye(),e.sibling=null,n=$e.current,Re($e,r?n&1|2:n&1),e):(Ct(e),null);case 22:case 23:return cf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yt&1073741824&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function K2(t,e){switch(zh(e),e.tag){case 1:return $t(e.type)&&Ll(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return di(),Oe(zt),Oe(Pt),Xh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yh(e),null;case 13:if(Oe($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));ci()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe($e),null;case 4:return di(),null;case 10:return qh(e.type._context),null;case 22:case 23:return cf(),null;case 24:return null;default:return null}}var Jo=!1,kt=!1,Y2=typeof WeakSet=="function"?WeakSet:Set,J=null;function Ys(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(t,e,r)}else n.current=null}function Bd(t,e,n){try{n()}catch(r){Ge(t,e,r)}}var kp=!1;function X2(t,e){if(_d=Al,t=ux(),Bh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var v;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==a||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=o),g===a&&++f===r&&(u=o),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nd={focusedElem:t,selectionRange:n},Al=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var E=T.memoizedProps,k=T.memoizedState,j=e.stateNode,y=j.getSnapshotBeforeUpdate(e.elementType===e.type?E:fn(e.type,E),k);j.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(S){Ge(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return T=kp,kp=!1,T}function va(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&Bd(e,n,a)}s=s.next}while(s!==r)}}function jc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ud(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ay(t){var e=t.alternate;e!==null&&(t.alternate=null,ay(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tn],delete e[Oa],delete e[Cd],delete e[R2],delete e[D2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function oy(t){return t.tag===5||t.tag===3||t.tag===4}function Ap(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||oy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Dl));else if(r!==4&&(t=t.child,t!==null))for(zd(t,e,n),t=t.sibling;t!==null;)zd(t,e,n),t=t.sibling}function $d(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($d(t,e,n),t=t.sibling;t!==null;)$d(t,e,n),t=t.sibling}var vt=null,mn=!1;function ar(t,e,n){for(n=n.child;n!==null;)ly(t,e,n),n=n.sibling}function ly(t,e,n){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(mc,n)}catch{}switch(n.tag){case 5:kt||Ys(n,e);case 6:var r=vt,s=mn;vt=null,ar(t,e,n),vt=r,mn=s,vt!==null&&(mn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(mn?(t=vt,n=n.stateNode,t.nodeType===8?ku(t.parentNode,n):t.nodeType===1&&ku(t,n),Ra(t)):ku(vt,n.stateNode));break;case 4:r=vt,s=mn,vt=n.stateNode.containerInfo,mn=!0,ar(t,e,n),vt=r,mn=s;break;case 0:case 11:case 14:case 15:if(!kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Bd(n,e,o),s=s.next}while(s!==r)}ar(t,e,n);break;case 1:if(!kt&&(Ys(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ge(n,e,c)}ar(t,e,n);break;case 21:ar(t,e,n);break;case 22:n.mode&1?(kt=(r=kt)||n.memoizedState!==null,ar(t,e,n),kt=r):ar(t,e,n);break;default:ar(t,e,n)}}function Pp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Y2),e.forEach(function(r){var s=ab.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:vt=c.stateNode,mn=!1;break e;case 3:vt=c.stateNode.containerInfo,mn=!0;break e;case 4:vt=c.stateNode.containerInfo,mn=!0;break e}c=c.return}if(vt===null)throw Error(H(160));ly(a,o,s),vt=null,mn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ge(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cy(e,t),e=e.sibling}function cy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hn(e,t),_n(t),r&4){try{va(3,t,t.return),jc(3,t)}catch(E){Ge(t,t.return,E)}try{va(5,t,t.return)}catch(E){Ge(t,t.return,E)}}break;case 1:hn(e,t),_n(t),r&512&&n!==null&&Ys(n,n.return);break;case 5:if(hn(e,t),_n(t),r&512&&n!==null&&Ys(n,n.return),t.flags&32){var s=t.stateNode;try{Ia(s,"")}catch(E){Ge(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&A0(s,a),fd(c,o);var d=fd(c,a);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?M0(s,m):f==="dangerouslySetInnerHTML"?D0(s,m):f==="children"?Ia(s,m):Ch(s,f,m,d)}switch(c){case"input":ld(s,a);break;case"textarea":P0(s,a);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?Js(s,!!a.multiple,v,!1):g!==!!a.multiple&&(a.defaultValue!=null?Js(s,!!a.multiple,a.defaultValue,!0):Js(s,!!a.multiple,a.multiple?[]:"",!1))}s[Oa]=a}catch(E){Ge(t,t.return,E)}}break;case 6:if(hn(e,t),_n(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(E){Ge(t,t.return,E)}}break;case 3:if(hn(e,t),_n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ra(e.containerInfo)}catch(E){Ge(t,t.return,E)}break;case 4:hn(e,t),_n(t);break;case 13:hn(e,t),_n(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(of=Ye())),r&4&&Pp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(kt=(d=kt)||f,hn(e,t),kt=d):hn(e,t),_n(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(J=t,f=t.child;f!==null;){for(m=J=f;J!==null;){switch(g=J,v=g.child,g.tag){case 0:case 11:case 14:case 15:va(4,g,g.return);break;case 1:Ys(g,g.return);var T=g.stateNode;if(typeof T.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(E){Ge(r,n,E)}}break;case 5:Ys(g,g.return);break;case 22:if(g.memoizedState!==null){Dp(m);continue}}v!==null?(v.return=g,J=v):Dp(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=L0("display",o))}catch(E){Ge(t,t.return,E)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(E){Ge(t,t.return,E)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:hn(e,t),_n(t),r&4&&Pp(t);break;case 21:break;default:hn(e,t),_n(t)}}function _n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(oy(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ia(s,""),r.flags&=-33);var a=Ap(t);$d(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Ap(t);zd(t,c,o);break;default:throw Error(H(161))}}catch(u){Ge(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function J2(t,e,n){J=t,uy(t)}function uy(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Jo;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||kt;c=Jo;var d=kt;if(Jo=o,(kt=u)&&!d)for(J=s;J!==null;)o=J,u=o.child,o.tag===22&&o.memoizedState!==null?Lp(s):u!==null?(u.return=o,J=u):Lp(s);for(;a!==null;)J=a,uy(a),a=a.sibling;J=s,Jo=c,kt=d}Rp(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,J=a):Rp(t)}}function Rp(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kt||jc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&xp(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xp(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ra(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}kt||e.flags&512&&Ud(e)}catch(g){Ge(e,e.return,g)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function Dp(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function Lp(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{jc(4,e)}catch(u){Ge(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ge(e,s,u)}}var a=e.return;try{Ud(e)}catch(u){Ge(e,a,u)}break;case 5:var o=e.return;try{Ud(e)}catch(u){Ge(e,o,u)}}}catch(u){Ge(e,e.return,u)}if(e===t){J=null;break}var c=e.sibling;if(c!==null){c.return=e.return,J=c;break}J=e.return}}var Z2=Math.ceil,Hl=Xn.ReactCurrentDispatcher,sf=Xn.ReactCurrentOwner,ln=Xn.ReactCurrentBatchConfig,Te=0,pt=null,tt=null,jt=0,Yt=0,Xs=Fr(0),ot=0,Wa=null,ps=0,_c=0,af=0,wa=null,Ft=null,of=0,fi=1/0,On=null,ql=!1,Wd=null,wr=null,Zo=!1,hr=null,Ql=0,ba=0,Hd=null,xl=-1,yl=0;function Dt(){return Te&6?Ye():xl!==-1?xl:xl=Ye()}function br(t){return t.mode&1?Te&2&&jt!==0?jt&-jt:M2.transition!==null?(yl===0&&(yl=G0()),yl):(t=ke,t!==0||(t=window.event,t=t===void 0?16:tx(t.type)),t):1}function xn(t,e,n,r){if(50<ba)throw ba=0,Hd=null,Error(H(185));so(t,n,r),(!(Te&2)||t!==pt)&&(t===pt&&(!(Te&2)&&(_c|=n),ot===4&&ur(t,jt)),Wt(t,r),n===1&&Te===0&&!(e.mode&1)&&(fi=Ye()+500,vc&&Br()))}function Wt(t,e){var n=t.callbackNode;Mw(t,e);var r=kl(t,t===pt?jt:0);if(r===0)n!==null&&Wm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Wm(n),e===1)t.tag===0?L2(Mp.bind(null,t)):wx(Mp.bind(null,t)),A2(function(){!(Te&6)&&Br()}),n=null;else{switch(K0(r)){case 1:n=Ph;break;case 4:n=q0;break;case 16:n=Il;break;case 536870912:n=Q0;break;default:n=Il}n=yy(n,dy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dy(t,e){if(xl=-1,yl=0,Te&6)throw Error(H(327));var n=t.callbackNode;if(ri()&&t.callbackNode!==n)return null;var r=kl(t,t===pt?jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Gl(t,r);else{e=r;var s=Te;Te|=2;var a=fy();(pt!==t||jt!==e)&&(On=null,fi=Ye()+500,cs(t,e));do try{nb();break}catch(c){hy(t,c)}while(!0);Hh(),Hl.current=a,Te=s,tt!==null?e=0:(pt=null,jt=0,e=ot)}if(e!==0){if(e===2&&(s=yd(t),s!==0&&(r=s,e=qd(t,s))),e===1)throw n=Wa,cs(t,0),ur(t,r),Wt(t,Ye()),n;if(e===6)ur(t,r);else{if(s=t.current.alternate,!(r&30)&&!eb(s)&&(e=Gl(t,r),e===2&&(a=yd(t),a!==0&&(r=a,e=qd(t,a))),e===1))throw n=Wa,cs(t,0),ur(t,r),Wt(t,Ye()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:rs(t,Ft,On);break;case 3:if(ur(t,r),(r&130023424)===r&&(e=of+500-Ye(),10<e)){if(kl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Dt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Td(rs.bind(null,t,Ft,On),e);break}rs(t,Ft,On);break;case 4:if(ur(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-gn(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=Ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Z2(r/1960))-r,10<r){t.timeoutHandle=Td(rs.bind(null,t,Ft,On),r);break}rs(t,Ft,On);break;case 5:rs(t,Ft,On);break;default:throw Error(H(329))}}}return Wt(t,Ye()),t.callbackNode===n?dy.bind(null,t):null}function qd(t,e){var n=wa;return t.current.memoizedState.isDehydrated&&(cs(t,e).flags|=256),t=Gl(t,e),t!==2&&(e=Ft,Ft=n,e!==null&&Qd(e)),t}function Qd(t){Ft===null?Ft=t:Ft.push.apply(Ft,t)}function eb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!yn(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~af,e&=~_c,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),r=1<<n;t[n]=-1,e&=~r}}function Mp(t){if(Te&6)throw Error(H(327));ri();var e=kl(t,0);if(!(e&1))return Wt(t,Ye()),null;var n=Gl(t,e);if(t.tag!==0&&n===2){var r=yd(t);r!==0&&(e=r,n=qd(t,r))}if(n===1)throw n=Wa,cs(t,0),ur(t,e),Wt(t,Ye()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rs(t,Ft,On),Wt(t,Ye()),null}function lf(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(fi=Ye()+500,vc&&Br())}}function gs(t){hr!==null&&hr.tag===0&&!(Te&6)&&ri();var e=Te;Te|=1;var n=ln.transition,r=ke;try{if(ln.transition=null,ke=1,t)return t()}finally{ke=r,ln.transition=n,Te=e,!(Te&6)&&Br()}}function cf(){Yt=Xs.current,Oe(Xs)}function cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,k2(n)),tt!==null)for(n=tt.return;n!==null;){var r=n;switch(zh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ll();break;case 3:di(),Oe(zt),Oe(Pt),Xh();break;case 5:Yh(r);break;case 4:di();break;case 13:Oe($e);break;case 19:Oe($e);break;case 10:qh(r.type._context);break;case 22:case 23:cf()}n=n.return}if(pt=t,tt=t=jr(t.current,null),jt=Yt=e,ot=0,Wa=null,af=_c=ps=0,Ft=wa=null,as!==null){for(e=0;e<as.length;e++)if(n=as[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}as=null}return t}function hy(t,e){do{var n=tt;try{if(Hh(),ml.current=Wl,$l){for(var r=We.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}$l=!1}if(ms=0,mt=it=We=null,ya=!1,Ua=0,sf.current=null,n===null||n.return===null){ot=1,Wa=e,tt=null;break}e:{var a=t,o=n.return,c=n,u=e;if(e=jt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=_p(o);if(v!==null){v.flags&=-257,Np(v,o,c,a,e),v.mode&1&&jp(a,d,e),e=v,u=d;var T=e.updateQueue;if(T===null){var E=new Set;E.add(u),e.updateQueue=E}else T.add(u);break e}else{if(!(e&1)){jp(a,d,e),uf();break e}u=Error(H(426))}}else if(Ue&&c.mode&1){var k=_p(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Np(k,o,c,a,e),$h(hi(u,c));break e}}a=u=hi(u,c),ot!==4&&(ot=2),wa===null?wa=[a]:wa.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var j=Kx(a,u,e);gp(a,j);break e;case 1:c=u;var y=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(wr===null||!wr.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e;var S=Yx(a,c,e);gp(a,S);break e}}a=a.return}while(a!==null)}py(n)}catch(R){e=R,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(!0)}function fy(){var t=Hl.current;return Hl.current=Wl,t===null?Wl:t}function uf(){(ot===0||ot===3||ot===2)&&(ot=4),pt===null||!(ps&268435455)&&!(_c&268435455)||ur(pt,jt)}function Gl(t,e){var n=Te;Te|=2;var r=fy();(pt!==t||jt!==e)&&(On=null,cs(t,e));do try{tb();break}catch(s){hy(t,s)}while(!0);if(Hh(),Te=n,Hl.current=r,tt!==null)throw Error(H(261));return pt=null,jt=0,ot}function tb(){for(;tt!==null;)my(tt)}function nb(){for(;tt!==null&&!Cw();)my(tt)}function my(t){var e=xy(t.alternate,t,Yt);t.memoizedProps=t.pendingProps,e===null?py(t):tt=e,sf.current=null}function py(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=K2(n,e),n!==null){n.flags&=32767,tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ot=6,tt=null;return}}else if(n=G2(n,e,Yt),n!==null){tt=n;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=t}while(e!==null);ot===0&&(ot=5)}function rs(t,e,n){var r=ke,s=ln.transition;try{ln.transition=null,ke=1,rb(t,e,n,r)}finally{ln.transition=s,ke=r}return null}function rb(t,e,n,r){do ri();while(hr!==null);if(Te&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(Vw(t,a),t===pt&&(tt=pt=null,jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zo||(Zo=!0,yy(Il,function(){return ri(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ln.transition,ln.transition=null;var o=ke;ke=1;var c=Te;Te|=4,sf.current=null,X2(t,n),cy(n,t),_2(Nd),Al=!!_d,Nd=_d=null,t.current=n,J2(n),Sw(),Te=c,ke=o,ln.transition=a}else t.current=n;if(Zo&&(Zo=!1,hr=t,Ql=s),a=t.pendingLanes,a===0&&(wr=null),Aw(n.stateNode),Wt(t,Ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ql)throw ql=!1,t=Wd,Wd=null,t;return Ql&1&&t.tag!==0&&ri(),a=t.pendingLanes,a&1?t===Hd?ba++:(ba=0,Hd=t):ba=0,Br(),null}function ri(){if(hr!==null){var t=K0(Ql),e=ln.transition,n=ke;try{if(ln.transition=null,ke=16>t?16:t,hr===null)var r=!1;else{if(t=hr,hr=null,Ql=0,Te&6)throw Error(H(331));var s=Te;for(Te|=4,J=t.current;J!==null;){var a=J,o=a.child;if(J.flags&16){var c=a.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(J=d;J!==null;){var f=J;switch(f.tag){case 0:case 11:case 15:va(8,f,a)}var m=f.child;if(m!==null)m.return=f,J=m;else for(;J!==null;){f=J;var g=f.sibling,v=f.return;if(ay(f),f===d){J=null;break}if(g!==null){g.return=v,J=g;break}J=v}}}var T=a.alternate;if(T!==null){var E=T.child;if(E!==null){T.child=null;do{var k=E.sibling;E.sibling=null,E=k}while(E!==null)}}J=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,J=o;else e:for(;J!==null;){if(a=J,a.flags&2048)switch(a.tag){case 0:case 11:case 15:va(9,a,a.return)}var j=a.sibling;if(j!==null){j.return=a.return,J=j;break e}J=a.return}}var y=t.current;for(J=y;J!==null;){o=J;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,J=_;else e:for(o=y;J!==null;){if(c=J,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:jc(9,c)}}catch(R){Ge(c,c.return,R)}if(c===o){J=null;break e}var S=c.sibling;if(S!==null){S.return=c.return,J=S;break e}J=c.return}}if(Te=s,Br(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(mc,t)}catch{}r=!0}return r}finally{ke=n,ln.transition=e}}return!1}function Vp(t,e,n){e=hi(n,e),e=Kx(t,e,1),t=vr(t,e,1),e=Dt(),t!==null&&(so(t,1,e),Wt(t,e))}function Ge(t,e,n){if(t.tag===3)Vp(t,t,n);else for(;e!==null;){if(e.tag===3){Vp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wr===null||!wr.has(r))){t=hi(n,t),t=Yx(e,t,1),e=vr(e,t,1),t=Dt(),e!==null&&(so(e,1,t),Wt(e,t));break}}e=e.return}}function sb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dt(),t.pingedLanes|=t.suspendedLanes&n,pt===t&&(jt&n)===n&&(ot===4||ot===3&&(jt&130023424)===jt&&500>Ye()-of?cs(t,0):af|=n),Wt(t,e)}function gy(t,e){e===0&&(t.mode&1?(e=$o,$o<<=1,!($o&130023424)&&($o=4194304)):e=1);var n=Dt();t=Hn(t,e),t!==null&&(so(t,e,n),Wt(t,n))}function ib(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gy(t,n)}function ab(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),gy(t,n)}var xy;xy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zt.current)Ut=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ut=!1,Q2(t,e,n);Ut=!!(t.flags&131072)}else Ut=!1,Ue&&e.flags&1048576&&bx(e,Ol,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;gl(t,e),t=e.pendingProps;var s=li(e,Pt.current);ni(e,n),s=Zh(null,e,r,t,s,n);var a=ef();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(r)?(a=!0,Ml(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Gh(e),s.updater=bc,e.stateNode=s,s._reactInternals=e,Rd(e,r,t,n),e=Md(null,e,r,!0,a,n)):(e.tag=0,Ue&&a&&Uh(e),Rt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(gl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=lb(r),t=fn(r,t),s){case 0:e=Ld(null,e,r,t,n);break e;case 1:e=Cp(null,e,r,t,n);break e;case 11:e=Ep(null,e,r,t,n);break e;case 14:e=Tp(null,e,r,fn(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Ld(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Cp(t,e,r,s,n);case 3:e:{if(ey(e),t===null)throw Error(H(387));r=e.pendingProps,a=e.memoizedState,s=a.element,Cx(t,e),Ul(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=hi(Error(H(423)),e),e=Sp(t,e,r,n,s);break e}else if(r!==s){s=hi(Error(H(424)),e),e=Sp(t,e,r,n,s);break e}else for(Xt=yr(e.stateNode.containerInfo.firstChild),Zt=e,Ue=!0,pn=null,n=Ex(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ci(),r===s){e=qn(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return Sx(e),t===null&&kd(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Ed(r,s)?o=null:a!==null&&Ed(r,a)&&(e.flags|=32),Zx(t,e),Rt(t,e,o,n),e.child;case 6:return t===null&&kd(e),null;case 13:return ty(t,e,n);case 4:return Kh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ui(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Ep(t,e,r,s,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,Re(Fl,r._currentValue),r._currentValue=o,a!==null)if(yn(a.value,o)){if(a.children===s.children&&!zt.current){e=qn(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=zn(-1,n&-n),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Ad(a.return,n,e),c.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(H(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Ad(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Rt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ni(e,n),s=un(s),r=r(s),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,s=fn(r,e.pendingProps),s=fn(r.type,s),Tp(t,e,r,s,n);case 15:return Xx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),gl(t,e),e.tag=1,$t(r)?(t=!0,Ml(e)):t=!1,ni(e,n),Gx(e,r,s),Rd(e,r,s,n),Md(null,e,r,!0,t,n);case 19:return ny(t,e,n);case 22:return Jx(t,e,n)}throw Error(H(156,e.tag))};function yy(t,e){return H0(t,e)}function ob(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,e,n,r){return new ob(t,e,n,r)}function df(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lb(t){if(typeof t=="function")return df(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ih)return 11;if(t===kh)return 14}return 2}function jr(t,e){var n=t.alternate;return n===null?(n=on(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vl(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")df(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Us:return us(n.children,s,a,e);case Sh:o=8,s|=8;break;case rd:return t=on(12,n,e,s|2),t.elementType=rd,t.lanes=a,t;case sd:return t=on(13,n,e,s),t.elementType=sd,t.lanes=a,t;case id:return t=on(19,n,e,s),t.elementType=id,t.lanes=a,t;case S0:return Nc(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case T0:o=10;break e;case C0:o=9;break e;case Ih:o=11;break e;case kh:o=14;break e;case or:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=on(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function us(t,e,n,r){return t=on(7,t,r,e),t.lanes=n,t}function Nc(t,e,n,r){return t=on(22,t,r,e),t.elementType=S0,t.lanes=n,t.stateNode={isHidden:!1},t}function Ou(t,e,n){return t=on(6,t,null,e),t.lanes=n,t}function Fu(t,e,n){return e=on(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cb(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vu(0),this.expirationTimes=vu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hf(t,e,n,r,s,a,o,c,u){return t=new cb(t,e,n,c,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=on(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gh(a),t}function ub(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vy(t){if(!t)return kr;t=t._reactInternals;e:{if(ws(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if($t(n))return vx(t,n,e)}return e}function wy(t,e,n,r,s,a,o,c,u){return t=hf(n,r,!0,t,s,a,o,c,u),t.context=vy(null),n=t.current,r=Dt(),s=br(n),a=zn(r,s),a.callback=e??null,vr(n,a,s),t.current.lanes=s,so(t,s,r),Wt(t,r),t}function Ec(t,e,n,r){var s=e.current,a=Dt(),o=br(s);return n=vy(n),e.context===null?e.context=n:e.pendingContext=n,e=zn(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=vr(s,e,o),t!==null&&(xn(t,s,o,a),fl(t,s,o)),o}function Kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Op(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ff(t,e){Op(t,e),(t=t.alternate)&&Op(t,e)}function db(){return null}var by=typeof reportError=="function"?reportError:function(t){console.error(t)};function mf(t){this._internalRoot=t}Tc.prototype.render=mf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Ec(t,e,null,null)};Tc.prototype.unmount=mf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gs(function(){Ec(null,t,null,null)}),e[Wn]=null}};function Tc(t){this._internalRoot=t}Tc.prototype.unstable_scheduleHydration=function(t){if(t){var e=J0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cr.length&&e!==0&&e<cr[n].priority;n++);cr.splice(n,0,t),n===0&&ex(t)}};function pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fp(){}function hb(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var d=Kl(o);a.call(d)}}var o=wy(e,r,t,0,null,!1,!1,"",Fp);return t._reactRootContainer=o,t[Wn]=o.current,Ma(t.nodeType===8?t.parentNode:t),gs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Kl(u);c.call(d)}}var u=hf(t,0,!1,null,null,!1,!1,"",Fp);return t._reactRootContainer=u,t[Wn]=u.current,Ma(t.nodeType===8?t.parentNode:t),gs(function(){Ec(e,u,n,r)}),u}function Sc(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var c=s;s=function(){var u=Kl(o);c.call(u)}}Ec(e,o,t,s)}else o=hb(n,e,t,s,r);return Kl(o)}Y0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=aa(e.pendingLanes);n!==0&&(Rh(e,n|1),Wt(e,Ye()),!(Te&6)&&(fi=Ye()+500,Br()))}break;case 13:gs(function(){var r=Hn(t,1);if(r!==null){var s=Dt();xn(r,t,1,s)}}),ff(t,1)}};Dh=function(t){if(t.tag===13){var e=Hn(t,134217728);if(e!==null){var n=Dt();xn(e,t,134217728,n)}ff(t,134217728)}};X0=function(t){if(t.tag===13){var e=br(t),n=Hn(t,e);if(n!==null){var r=Dt();xn(n,t,e,r)}ff(t,e)}};J0=function(){return ke};Z0=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};pd=function(t,e,n){switch(e){case"input":if(ld(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=yc(r);if(!s)throw Error(H(90));k0(r),ld(r,s)}}}break;case"textarea":P0(t,n);break;case"select":e=n.value,e!=null&&Js(t,!!n.multiple,e,!1)}};F0=lf;B0=gs;var fb={usingClientEntryPoint:!1,Events:[ao,Hs,yc,V0,O0,lf]},ta={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mb={bundleType:ta.bundleType,version:ta.version,rendererPackageName:ta.rendererPackageName,rendererConfig:ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$0(t),t===null?null:t.stateNode},findFiberByHostInstance:ta.findFiberByHostInstance||db,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var el=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!el.isDisabled&&el.supportsFiber)try{mc=el.inject(mb),Cn=el}catch{}}tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fb;tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pf(e))throw Error(H(200));return ub(t,e,null,n)};tn.createRoot=function(t,e){if(!pf(t))throw Error(H(299));var n=!1,r="",s=by;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=hf(t,1,!1,null,null,n,!1,r,s),t[Wn]=e.current,Ma(t.nodeType===8?t.parentNode:t),new mf(e)};tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=$0(e),t=t===null?null:t.stateNode,t};tn.flushSync=function(t){return gs(t)};tn.hydrate=function(t,e,n){if(!Cc(e))throw Error(H(200));return Sc(null,t,e,!0,n)};tn.hydrateRoot=function(t,e,n){if(!pf(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=by;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=wy(e,null,t,1,n??null,s,!1,a,o),t[Wn]=e.current,Ma(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Tc(e)};tn.render=function(t,e,n){if(!Cc(e))throw Error(H(200));return Sc(null,t,e,!1,n)};tn.unmountComponentAtNode=function(t){if(!Cc(t))throw Error(H(40));return t._reactRootContainer?(gs(function(){Sc(null,null,t,!1,function(){t._reactRootContainer=null,t[Wn]=null})}),!0):!1};tn.unstable_batchedUpdates=lf;tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cc(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Sc(t,e,n,!1,r)};tn.version="18.3.1-next-f1338f8080-20240426";function jy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jy)}catch(t){console.error(t)}}jy(),j0.exports=tn;var pb=j0.exports,Bp=pb;td.createRoot=Bp.createRoot,td.hydrateRoot=Bp.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ha(){return Ha=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ha.apply(this,arguments)}var fr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fr||(fr={}));const Up="popstate";function gb(t){t===void 0&&(t={});function e(s,a){let{pathname:o="/",search:c="",hash:u=""}=bs(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Gd("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){let o=s.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=s.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof a=="string"?a:Yl(a))}function r(s,a){Ic(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return yb(e,n,r,t)}function Je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ic(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xb(){return Math.random().toString(36).substr(2,8)}function zp(t,e){return{usr:t.state,key:t.key,idx:e}}function Gd(t,e,n,r){return n===void 0&&(n=null),Ha({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?bs(e):e,{state:n,key:e&&e.key||r||xb()})}function Yl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function bs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function yb(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,c=fr.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(Ha({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){c=fr.Pop;let k=f(),j=k==null?null:k-d;d=k,u&&u({action:c,location:E.location,delta:j})}function g(k,j){c=fr.Push;let y=Gd(E.location,k,j);n&&n(y,k),d=f()+1;let _=zp(y,d),S=E.createHref(y);try{o.pushState(_,"",S)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(S)}a&&u&&u({action:c,location:E.location,delta:1})}function v(k,j){c=fr.Replace;let y=Gd(E.location,k,j);n&&n(y,k),d=f();let _=zp(y,d),S=E.createHref(y);o.replaceState(_,"",S),a&&u&&u({action:c,location:E.location,delta:0})}function T(k){let j=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof k=="string"?k:Yl(k);return y=y.replace(/ $/,"%20"),Je(j,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,j)}let E={get action(){return c},get location(){return t(s,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Up,m),u=k,()=>{s.removeEventListener(Up,m),u=null}},createHref(k){return e(s,k)},createURL:T,encodeLocation(k){let j=T(k);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:g,replace:v,go(k){return o.go(k)}};return E}var $p;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($p||($p={}));function vb(t,e,n){return n===void 0&&(n="/"),wb(t,e,n)}function wb(t,e,n,r){let s=typeof e=="string"?bs(e):e,a=gf(s.pathname||"/",n);if(a==null)return null;let o=_y(t);bb(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=Rb(a);c=kb(o[u],d)}return c}function _y(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Je(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=_r([r,u.relativePath]),f=n.concat(u);a.children&&a.children.length>0&&(Je(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),_y(a.children,e,f,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:Sb(d,a.index),routesMeta:f})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))s(a,o);else for(let u of Ny(a.path))s(a,o,u)}),e}function Ny(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=Ny(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function bb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Ib(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const jb=/^:[\w-]+$/,_b=3,Nb=2,Eb=1,Tb=10,Cb=-2,Wp=t=>t==="*";function Sb(t,e){let n=t.split("/"),r=n.length;return n.some(Wp)&&(r+=Cb),e&&(r+=Nb),n.filter(s=>!Wp(s)).reduce((s,a)=>s+(jb.test(a)?_b:a===""?Eb:Tb),r)}function Ib(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function kb(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",m=Ab({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:_r([a,m.pathname]),pathnameBase:Ob(_r([a,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(a=_r([a,m.pathnameBase]))}return o}function Ab(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Pb(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:v}=f;if(g==="*"){let E=c[m]||"";o=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const T=c[m];return v&&!T?d[g]=void 0:d[g]=(T||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function Pb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ic(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Rb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ic(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function gf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Db=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lb=t=>Db.test(t);function Mb(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?bs(t):t,a;if(n)if(Lb(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Ic(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?a=Hp(n.substring(1),"/"):a=Hp(n,e)}else a=e;return{pathname:a,search:Fb(r),hash:Bb(s)}}function Hp(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Bu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Vb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xf(t,e){let n=Vb(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function yf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=bs(t):(s=Ha({},t),Je(!s.pathname||!s.pathname.includes("?"),Bu("?","pathname","search",s)),Je(!s.pathname||!s.pathname.includes("#"),Bu("#","pathname","hash",s)),Je(!s.search||!s.search.includes("#"),Bu("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,c;if(o==null)c=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}c=m>=0?e[m]:"/"}let u=Mb(s,c),d=o&&o!=="/"&&o.endsWith("/"),f=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const _r=t=>t.join("/").replace(/\/\/+/g,"/"),Ob=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Fb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Bb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ub(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ey=["post","put","patch","delete"];new Set(Ey);const zb=["get",...Ey];new Set(zb);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qa(){return qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qa.apply(this,arguments)}const vf=M.createContext(null),$b=M.createContext(null),Ur=M.createContext(null),kc=M.createContext(null),Jn=M.createContext({outlet:null,matches:[],isDataRoute:!1}),Ty=M.createContext(null);function Wb(t,e){let{relative:n}=e===void 0?{}:e;Ni()||Je(!1);let{basename:r,navigator:s}=M.useContext(Ur),{hash:a,pathname:o,search:c}=Sy(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:_r([r,o])),s.createHref({pathname:u,search:c,hash:a})}function Ni(){return M.useContext(kc)!=null}function js(){return Ni()||Je(!1),M.useContext(kc).location}function Cy(t){M.useContext(Ur).static||M.useLayoutEffect(t)}function Et(){let{isDataRoute:t}=M.useContext(Jn);return t?rj():Hb()}function Hb(){Ni()||Je(!1);let t=M.useContext(vf),{basename:e,future:n,navigator:r}=M.useContext(Ur),{matches:s}=M.useContext(Jn),{pathname:a}=js(),o=JSON.stringify(xf(s,n.v7_relativeSplatPath)),c=M.useRef(!1);return Cy(()=>{c.current=!0}),M.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let m=yf(d,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:_r([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,a,t])}function _s(){let{matches:t}=M.useContext(Jn),e=t[t.length-1];return e?e.params:{}}function Sy(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(Ur),{matches:s}=M.useContext(Jn),{pathname:a}=js(),o=JSON.stringify(xf(s,r.v7_relativeSplatPath));return M.useMemo(()=>yf(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function qb(t,e){return Qb(t,e)}function Qb(t,e,n,r){Ni()||Je(!1);let{navigator:s}=M.useContext(Ur),{matches:a}=M.useContext(Jn),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=js(),f;if(e){var m;let k=typeof e=="string"?bs(e):e;u==="/"||(m=k.pathname)!=null&&m.startsWith(u)||Je(!1),f=k}else f=d;let g=f.pathname||"/",v=g;if(u!=="/"){let k=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let T=vb(t,{pathname:v}),E=Jb(T&&T.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:_r([u,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:_r([u,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,n,r);return e&&E?M.createElement(kc.Provider,{value:{location:qa({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:fr.Pop}},E):E}function Gb(){let t=nj(),e=Ub(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:s},n):null,null)}const Kb=M.createElement(Gb,null);class Yb extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Jn.Provider,{value:this.props.routeContext},M.createElement(Ty.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Xb(t){let{routeContext:e,match:n,children:r}=t,s=M.useContext(vf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Jn.Provider,{value:e},r)}function Jb(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let f=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);f>=0||Je(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:v}=n,T=m.route.loader&&g[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||T){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let v,T=!1,E=null,k=null;n&&(v=c&&m.route.id?c[m.route.id]:void 0,E=m.route.errorElement||Kb,u&&(d<0&&g===0?(sj("route-fallback"),T=!0,k=null):d===g&&(T=!0,k=m.route.hydrateFallbackElement||null)));let j=e.concat(o.slice(0,g+1)),y=()=>{let _;return v?_=E:T?_=k:m.route.Component?_=M.createElement(m.route.Component,null):m.route.element?_=m.route.element:_=f,M.createElement(Xb,{match:m,routeContext:{outlet:f,matches:j,isDataRoute:n!=null},children:_})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?M.createElement(Yb,{location:n.location,revalidation:n.revalidation,component:E,error:v,children:y(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):y()},null)}var Iy=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Iy||{}),ky=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ky||{});function Zb(t){let e=M.useContext(vf);return e||Je(!1),e}function ej(t){let e=M.useContext($b);return e||Je(!1),e}function tj(t){let e=M.useContext(Jn);return e||Je(!1),e}function Ay(t){let e=tj(),n=e.matches[e.matches.length-1];return n.route.id||Je(!1),n.route.id}function nj(){var t;let e=M.useContext(Ty),n=ej(),r=Ay();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function rj(){let{router:t}=Zb(Iy.UseNavigateStable),e=Ay(ky.UseNavigateStable),n=M.useRef(!1);return Cy(()=>{n.current=!0}),M.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,qa({fromRouteId:e},a)))},[t,e])}const qp={};function sj(t,e,n){qp[t]||(qp[t]=!0)}function ij(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Qa(t){let{to:e,replace:n,state:r,relative:s}=t;Ni()||Je(!1);let{future:a,static:o}=M.useContext(Ur),{matches:c}=M.useContext(Jn),{pathname:u}=js(),d=Et(),f=yf(e,xf(c,a.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return M.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function Ee(t){Je(!1)}function aj(t){let{basename:e="/",children:n=null,location:r,navigationType:s=fr.Pop,navigator:a,static:o=!1,future:c}=t;Ni()&&Je(!1);let u=e.replace(/^\/*/,"/"),d=M.useMemo(()=>({basename:u,navigator:a,static:o,future:qa({v7_relativeSplatPath:!1},c)}),[u,c,a,o]);typeof r=="string"&&(r=bs(r));let{pathname:f="/",search:m="",hash:g="",state:v=null,key:T="default"}=r,E=M.useMemo(()=>{let k=gf(f,u);return k==null?null:{location:{pathname:k,search:m,hash:g,state:v,key:T},navigationType:s}},[u,f,m,g,v,T,s]);return E==null?null:M.createElement(Ur.Provider,{value:d},M.createElement(kc.Provider,{children:n,value:E}))}function oj(t){let{children:e,location:n}=t;return qb(Kd(e),n)}new Promise(()=>{});function Kd(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,s)=>{if(!M.isValidElement(r))return;let a=[...e,s];if(r.type===M.Fragment){n.push.apply(n,Kd(r.props.children,a));return}r.type!==Ee&&Je(!1),!r.props.index||!r.props.children||Je(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Kd(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yd(){return Yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yd.apply(this,arguments)}function lj(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function cj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uj(t,e){return t.button===0&&(!e||e==="_self")&&!cj(t)}const dj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hj="6";try{window.__reactRouterVersion=hj}catch{}const fj="startTransition",Qp=sw[fj];function mj(t){let{basename:e,children:n,future:r,window:s}=t,a=M.useRef();a.current==null&&(a.current=gb({window:s,v5Compat:!0}));let o=a.current,[c,u]=M.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=M.useCallback(m=>{d&&Qp?Qp(()=>u(m)):u(m)},[u,d]);return M.useLayoutEffect(()=>o.listen(f),[o,f]),M.useEffect(()=>ij(r),[r]),M.createElement(aj,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const pj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nt=M.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=lj(e,dj),{basename:v}=M.useContext(Ur),T,E=!1;if(typeof d=="string"&&gj.test(d)&&(T=d,pj))try{let _=new URL(window.location.href),S=d.startsWith("//")?new URL(_.protocol+d):new URL(d),R=gf(S.pathname,v);S.origin===_.origin&&R!=null?d=R+S.search+S.hash:E=!0}catch{}let k=Wb(d,{relative:s}),j=xj(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:m});function y(_){r&&r(_),_.defaultPrevented||j(_)}return M.createElement("a",Yd({},g,{href:T||k,onClick:E||a?r:y,ref:n,target:u}))});var Gp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Gp||(Gp={}));var Kp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Kp||(Kp={}));function xj(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:c}=e===void 0?{}:e,u=Et(),d=js(),f=Sy(t,{relative:o});return M.useCallback(m=>{if(uj(m,n)){m.preventDefault();let g=r!==void 0?r:Yl(d)===Yl(f);u(t,{replace:g,state:s,preventScrollReset:a,relative:o,viewTransition:c})}},[d,u,f,r,s,n,t,a,o,c])}var lt=(t=>(t.Training="Training",t.ReadyForInterview="Ready for Interview",t.Placed="Placed",t.Discontinued="Discontinued",t))(lt||{}),pe=(t=>(t.Bank="Bank",t.Cash="Cash",t.Debtor="Debtor",t.Creditor="Creditor",t.Expense="Expense",t.Salary="Salary",t.Income="Income",t.Equity="Equity",t))(pe||{}),xe=(t=>(t.Income="Income",t.Payment="Payment",t.Transfer="Transfer",t.Refund="Refund",t))(xe||{});const re=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(t),Lt=()=>Math.random().toString(36).substr(2,9),yj=(t,e)=>{const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)},Ga=(t,e)=>{if(t.length===0)return;const n=Object.keys(t[0]).join(","),r=t.map(u=>Object.values(u).map(d=>`"${d}"`).join(",")).join(`
`),s=`${n}
${r}`,a=new Blob([s],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(a),c=document.createElement("a");c.href=o,c.download=e,document.body.appendChild(c),c.click(),document.body.removeChild(c)},vj=(t,e)=>{let n=`<?xml version="1.0" encoding="UTF-8"?>
<?mso-application progid="Excel.Sheet"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40">
 <Styles>
  <Style ss:ID="Default" ss:Name="Normal">
   <Alignment ss:Vertical="Bottom"/>
   <Borders/>
   <Font ss:FontName="Calibri" x:Family="Swiss" ss:Size="11" ss:Color="#000000"/>
   <Interior/>
   <NumberFormat/>
   <Protection/>
  </Style>
  <Style ss:ID="sHeader">
   <Font ss:FontName="Calibri" x:Family="Swiss" ss:Size="11" ss:Color="#FFFFFF" ss:Bold="1"/>
   <Interior ss:Color="#1e3a8a" ss:Pattern="Solid"/>
  </Style>
 </Styles>`;t.forEach(o=>{if(n+=`<Worksheet ss:Name="${o.name}">`,n+="<Table>",o.data.length>0){const c=Object.keys(o.data[0]);n+="<Row>",c.forEach(u=>{n+=`<Cell ss:StyleID="sHeader"><Data ss:Type="String">${u}</Data></Cell>`}),n+="</Row>",o.data.forEach(u=>{n+="<Row>",c.forEach(d=>{const f=u[d];n+=`<Cell><Data ss:Type="${typeof f=="number"?"Number":"String"}">${f??""}</Data></Cell>`}),n+="</Row>"})}else n+='<Row><Cell><Data ss:Type="String">No data available</Data></Cell></Row>';n+="</Table></Worksheet>"}),n+="</Workbook>";const r=new Blob([n],{type:"application/vnd.ms-excel"}),s=URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},la=(t,e,n,r=0,s)=>{let a=0;return e==="Account"&&(s===pe.Creditor||s===pe.Salary?a-=r:a+=r),n.forEach(o=>{o.toEntityId===t&&o.toEntityType===e&&(a+=o.amount),o.fromEntityId===t&&o.fromEntityType===e&&(a-=o.amount)}),a},wj=()=>{};var Yp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},bj=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Ry={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=a>>2,m=(a&3)<<4|c>>4;let g=(c&15)<<2|d>>6,v=d&63;u||(v=64,o||(g=64)),r.push(n[f],n[m],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Py(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||c==null||d==null||m==null)throw new jj;const g=a<<2|c>>4;if(r.push(g),d!==64){const v=c<<4&240|d>>2;if(r.push(v),m!==64){const T=d<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _j=function(t){const e=Py(t);return Ry.encodeByteArray(e,!0)},Xl=function(t){return _j(t).replace(/\./g,"")},Nj=function(t){try{return Ry.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=()=>Ej().__FIREBASE_DEFAULTS__,Cj=()=>{if(typeof process>"u"||typeof Yp>"u")return;const t=Yp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Sj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Nj(t[1]);return e&&JSON.parse(e)},wf=()=>{try{return wj()||Tj()||Cj()||Sj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ij=t=>{var e,n;return(n=(e=wf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},kj=t=>{const e=Ij(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Dy=()=>{var t;return(t=wf())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Pj(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Xl(JSON.stringify(n)),Xl(JSON.stringify(o)),""].join(".")}const ja={};function Dj(){const t={prod:[],emulator:[]};for(const e of Object.keys(ja))ja[e]?t.emulator.push(e):t.prod.push(e);return t}function Lj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Xp=!1;function Mj(t,e){if(typeof window>"u"||typeof document>"u"||!bf(window.location.host)||ja[t]===e||ja[t]||Xp)return;ja[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=Dj().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Xp=!0,o()},g}function f(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=Lj(r),v=n("text"),T=document.getElementById(v)||document.createElement("span"),E=n("learnmore"),k=document.getElementById(E)||document.createElement("a"),j=n("preprendIcon"),y=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const _=g.element;c(_),f(k,E);const S=d();u(y,j),_.append(y,T,k,S),document.body.appendChild(_)}a?(T.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Oj(){var e;const t=(e=wf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Fj(){return!Oj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bj(){try{return typeof indexedDB=="object"}catch{return!1}}function Uj(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj="FirebaseError";class Ei extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=zj,Object.setPrototypeOf(this,Ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ly.prototype.create)}}class Ly{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?$j(a,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Ei(s,c,r)}}function $j(t,e){return t.replace(Wj,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Wj=/\{\$([^}]+)}/g;function Jl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(Jp(a)&&Jp(o)){if(!Jl(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Jp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t){return t&&t._delegate?t._delegate:t}class Ka{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Aj;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Qj(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qj(t){return t===ss?void 0:t}function Qj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Hj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const Kj={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},Yj=_e.INFO,Xj={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},Jj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Xj[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class My{constructor(e){this.name=e,this._logLevel=Yj,this._logHandler=Jj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const Zj=(t,e)=>e.some(n=>t instanceof n);let Zp,eg;function e_(){return Zp||(Zp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t_(){return eg||(eg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vy=new WeakMap,Xd=new WeakMap,Oy=new WeakMap,Uu=new WeakMap,jf=new WeakMap;function n_(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Nr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Vy.set(n,t)}).catch(()=>{}),jf.set(e,t),e}function r_(t){if(Xd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Xd.set(t,e)}let Jd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Oy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function s_(t){Jd=t(Jd)}function i_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zu(this),e,...n);return Oy.set(r,e.sort?e.sort():[e]),Nr(r)}:t_().includes(t)?function(...e){return t.apply(zu(this),e),Nr(Vy.get(this))}:function(...e){return Nr(t.apply(zu(this),e))}}function a_(t){return typeof t=="function"?i_(t):(t instanceof IDBTransaction&&r_(t),Zj(t,e_())?new Proxy(t,Jd):t)}function Nr(t){if(t instanceof IDBRequest)return n_(t);if(Uu.has(t))return Uu.get(t);const e=a_(t);return e!==t&&(Uu.set(t,e),jf.set(e,t)),e}const zu=t=>jf.get(t);function o_(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),c=Nr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Nr(o.result),u.oldVersion,u.newVersion,Nr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const l_=["get","getKey","getAll","getAllKeys","count"],c_=["put","add","delete","clear"],$u=new Map;function tg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($u.get(e))return $u.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=c_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||l_.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return $u.set(e,a),a}s_(t=>({...t,get:(e,n,r)=>tg(e,n)||t.get(e,n,r),has:(e,n)=>!!tg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(d_(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function d_(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zd="@firebase/app",ng="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new My("@firebase/app"),h_="@firebase/app-compat",f_="@firebase/analytics-compat",m_="@firebase/analytics",p_="@firebase/app-check-compat",g_="@firebase/app-check",x_="@firebase/auth",y_="@firebase/auth-compat",v_="@firebase/database",w_="@firebase/data-connect",b_="@firebase/database-compat",j_="@firebase/functions",__="@firebase/functions-compat",N_="@firebase/installations",E_="@firebase/installations-compat",T_="@firebase/messaging",C_="@firebase/messaging-compat",S_="@firebase/performance",I_="@firebase/performance-compat",k_="@firebase/remote-config",A_="@firebase/remote-config-compat",P_="@firebase/storage",R_="@firebase/storage-compat",D_="@firebase/firestore",L_="@firebase/ai",M_="@firebase/firestore-compat",V_="firebase",O_="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh="[DEFAULT]",F_={[Zd]:"fire-core",[h_]:"fire-core-compat",[m_]:"fire-analytics",[f_]:"fire-analytics-compat",[g_]:"fire-app-check",[p_]:"fire-app-check-compat",[x_]:"fire-auth",[y_]:"fire-auth-compat",[v_]:"fire-rtdb",[w_]:"fire-data-connect",[b_]:"fire-rtdb-compat",[j_]:"fire-fn",[__]:"fire-fn-compat",[N_]:"fire-iid",[E_]:"fire-iid-compat",[T_]:"fire-fcm",[C_]:"fire-fcm-compat",[S_]:"fire-perf",[I_]:"fire-perf-compat",[k_]:"fire-rc",[A_]:"fire-rc-compat",[P_]:"fire-gcs",[R_]:"fire-gcs-compat",[D_]:"fire-fst",[M_]:"fire-fst-compat",[L_]:"fire-vertex","fire-js":"fire-js",[V_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=new Map,B_=new Map,th=new Map;function rg(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ec(t){const e=t.name;if(th.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;th.set(e,t);for(const n of Zl.values())rg(n,t);for(const n of B_.values())rg(n,t);return!0}function U_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function z_(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new Ly("app","Firebase",$_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ka("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=O_;function nh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:eh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Er.create("bad-app-name",{appName:String(s)});if(n||(n=Dy()),!n)throw Er.create("no-options");const a=Zl.get(s);if(a){if(Jl(n,a.options)&&Jl(r,a.config))return a;throw Er.create("duplicate-app",{appName:s})}const o=new Gj(s);for(const u of th.values())o.addComponent(u);const c=new W_(n,r,o);return Zl.set(s,c),c}function q_(t=eh){const e=Zl.get(t);if(!e&&t===eh&&Dy())return nh();if(!e)throw Er.create("no-app",{appName:t});return e}function si(t,e,n){let r=F_[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(o.join(" "));return}ec(new Ka(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="firebase-heartbeat-database",G_=1,Ya="firebase-heartbeat-store";let Wu=null;function Fy(){return Wu||(Wu=o_(Q_,G_,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ya)}catch(n){console.warn(n)}}}}).catch(t=>{throw Er.create("idb-open",{originalErrorMessage:t.message})})),Wu}async function K_(t){try{const n=(await Fy()).transaction(Ya),r=await n.objectStore(Ya).get(By(t));return await n.done,r}catch(e){if(e instanceof Ei)Qn.warn(e.message);else{const n=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qn.warn(n.message)}}}async function sg(t,e){try{const r=(await Fy()).transaction(Ya,"readwrite");await r.objectStore(Ya).put(e,By(t)),await r.done}catch(n){if(n instanceof Ei)Qn.warn(n.message);else{const r=Er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qn.warn(r.message)}}}function By(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=1024,X_=30;class J_{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ig();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>X_){const o=tN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ig(),{heartbeatsToSend:r,unsentEntries:s}=Z_(this._heartbeatsCache.heartbeats),a=Xl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Qn.warn(n),""}}}function ig(){return new Date().toISOString().substring(0,10)}function Z_(t,e=Y_){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),ag(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ag(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class eN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bj()?Uj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await K_(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return sg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return sg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ag(t){return Xl(JSON.stringify({version:2,heartbeats:t})).length}function tN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t){ec(new Ka("platform-logger",e=>new u_(e),"PRIVATE")),ec(new Ka("heartbeat",e=>new J_(e),"PRIVATE")),si(Zd,ng,t),si(Zd,ng,"esm2020"),si("fire-js","")}nN("");var rN="firebase",sN="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */si(rN,sN,"app");var og=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tr,Uy;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,p){function b(){}b.prototype=p.prototype,w.F=p.prototype,w.prototype=new b,w.prototype.constructor=w,w.D=function(C,A,P){for(var I=Array(arguments.length-2),se=2;se<arguments.length;se++)I[se-2]=arguments[se];return p.prototype[A].apply(C,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,p,b){b||(b=0);const C=Array(16);if(typeof p=="string")for(var A=0;A<16;++A)C[A]=p.charCodeAt(b++)|p.charCodeAt(b++)<<8|p.charCodeAt(b++)<<16|p.charCodeAt(b++)<<24;else for(A=0;A<16;++A)C[A]=p[b++]|p[b++]<<8|p[b++]<<16|p[b++]<<24;p=w.g[0],b=w.g[1],A=w.g[2];let P=w.g[3],I;I=p+(P^b&(A^P))+C[0]+3614090360&4294967295,p=b+(I<<7&4294967295|I>>>25),I=P+(A^p&(b^A))+C[1]+3905402710&4294967295,P=p+(I<<12&4294967295|I>>>20),I=A+(b^P&(p^b))+C[2]+606105819&4294967295,A=P+(I<<17&4294967295|I>>>15),I=b+(p^A&(P^p))+C[3]+3250441966&4294967295,b=A+(I<<22&4294967295|I>>>10),I=p+(P^b&(A^P))+C[4]+4118548399&4294967295,p=b+(I<<7&4294967295|I>>>25),I=P+(A^p&(b^A))+C[5]+1200080426&4294967295,P=p+(I<<12&4294967295|I>>>20),I=A+(b^P&(p^b))+C[6]+2821735955&4294967295,A=P+(I<<17&4294967295|I>>>15),I=b+(p^A&(P^p))+C[7]+4249261313&4294967295,b=A+(I<<22&4294967295|I>>>10),I=p+(P^b&(A^P))+C[8]+1770035416&4294967295,p=b+(I<<7&4294967295|I>>>25),I=P+(A^p&(b^A))+C[9]+2336552879&4294967295,P=p+(I<<12&4294967295|I>>>20),I=A+(b^P&(p^b))+C[10]+4294925233&4294967295,A=P+(I<<17&4294967295|I>>>15),I=b+(p^A&(P^p))+C[11]+2304563134&4294967295,b=A+(I<<22&4294967295|I>>>10),I=p+(P^b&(A^P))+C[12]+1804603682&4294967295,p=b+(I<<7&4294967295|I>>>25),I=P+(A^p&(b^A))+C[13]+4254626195&4294967295,P=p+(I<<12&4294967295|I>>>20),I=A+(b^P&(p^b))+C[14]+2792965006&4294967295,A=P+(I<<17&4294967295|I>>>15),I=b+(p^A&(P^p))+C[15]+1236535329&4294967295,b=A+(I<<22&4294967295|I>>>10),I=p+(A^P&(b^A))+C[1]+4129170786&4294967295,p=b+(I<<5&4294967295|I>>>27),I=P+(b^A&(p^b))+C[6]+3225465664&4294967295,P=p+(I<<9&4294967295|I>>>23),I=A+(p^b&(P^p))+C[11]+643717713&4294967295,A=P+(I<<14&4294967295|I>>>18),I=b+(P^p&(A^P))+C[0]+3921069994&4294967295,b=A+(I<<20&4294967295|I>>>12),I=p+(A^P&(b^A))+C[5]+3593408605&4294967295,p=b+(I<<5&4294967295|I>>>27),I=P+(b^A&(p^b))+C[10]+38016083&4294967295,P=p+(I<<9&4294967295|I>>>23),I=A+(p^b&(P^p))+C[15]+3634488961&4294967295,A=P+(I<<14&4294967295|I>>>18),I=b+(P^p&(A^P))+C[4]+3889429448&4294967295,b=A+(I<<20&4294967295|I>>>12),I=p+(A^P&(b^A))+C[9]+568446438&4294967295,p=b+(I<<5&4294967295|I>>>27),I=P+(b^A&(p^b))+C[14]+3275163606&4294967295,P=p+(I<<9&4294967295|I>>>23),I=A+(p^b&(P^p))+C[3]+4107603335&4294967295,A=P+(I<<14&4294967295|I>>>18),I=b+(P^p&(A^P))+C[8]+1163531501&4294967295,b=A+(I<<20&4294967295|I>>>12),I=p+(A^P&(b^A))+C[13]+2850285829&4294967295,p=b+(I<<5&4294967295|I>>>27),I=P+(b^A&(p^b))+C[2]+4243563512&4294967295,P=p+(I<<9&4294967295|I>>>23),I=A+(p^b&(P^p))+C[7]+1735328473&4294967295,A=P+(I<<14&4294967295|I>>>18),I=b+(P^p&(A^P))+C[12]+2368359562&4294967295,b=A+(I<<20&4294967295|I>>>12),I=p+(b^A^P)+C[5]+4294588738&4294967295,p=b+(I<<4&4294967295|I>>>28),I=P+(p^b^A)+C[8]+2272392833&4294967295,P=p+(I<<11&4294967295|I>>>21),I=A+(P^p^b)+C[11]+1839030562&4294967295,A=P+(I<<16&4294967295|I>>>16),I=b+(A^P^p)+C[14]+4259657740&4294967295,b=A+(I<<23&4294967295|I>>>9),I=p+(b^A^P)+C[1]+2763975236&4294967295,p=b+(I<<4&4294967295|I>>>28),I=P+(p^b^A)+C[4]+1272893353&4294967295,P=p+(I<<11&4294967295|I>>>21),I=A+(P^p^b)+C[7]+4139469664&4294967295,A=P+(I<<16&4294967295|I>>>16),I=b+(A^P^p)+C[10]+3200236656&4294967295,b=A+(I<<23&4294967295|I>>>9),I=p+(b^A^P)+C[13]+681279174&4294967295,p=b+(I<<4&4294967295|I>>>28),I=P+(p^b^A)+C[0]+3936430074&4294967295,P=p+(I<<11&4294967295|I>>>21),I=A+(P^p^b)+C[3]+3572445317&4294967295,A=P+(I<<16&4294967295|I>>>16),I=b+(A^P^p)+C[6]+76029189&4294967295,b=A+(I<<23&4294967295|I>>>9),I=p+(b^A^P)+C[9]+3654602809&4294967295,p=b+(I<<4&4294967295|I>>>28),I=P+(p^b^A)+C[12]+3873151461&4294967295,P=p+(I<<11&4294967295|I>>>21),I=A+(P^p^b)+C[15]+530742520&4294967295,A=P+(I<<16&4294967295|I>>>16),I=b+(A^P^p)+C[2]+3299628645&4294967295,b=A+(I<<23&4294967295|I>>>9),I=p+(A^(b|~P))+C[0]+4096336452&4294967295,p=b+(I<<6&4294967295|I>>>26),I=P+(b^(p|~A))+C[7]+1126891415&4294967295,P=p+(I<<10&4294967295|I>>>22),I=A+(p^(P|~b))+C[14]+2878612391&4294967295,A=P+(I<<15&4294967295|I>>>17),I=b+(P^(A|~p))+C[5]+4237533241&4294967295,b=A+(I<<21&4294967295|I>>>11),I=p+(A^(b|~P))+C[12]+1700485571&4294967295,p=b+(I<<6&4294967295|I>>>26),I=P+(b^(p|~A))+C[3]+2399980690&4294967295,P=p+(I<<10&4294967295|I>>>22),I=A+(p^(P|~b))+C[10]+4293915773&4294967295,A=P+(I<<15&4294967295|I>>>17),I=b+(P^(A|~p))+C[1]+2240044497&4294967295,b=A+(I<<21&4294967295|I>>>11),I=p+(A^(b|~P))+C[8]+1873313359&4294967295,p=b+(I<<6&4294967295|I>>>26),I=P+(b^(p|~A))+C[15]+4264355552&4294967295,P=p+(I<<10&4294967295|I>>>22),I=A+(p^(P|~b))+C[6]+2734768916&4294967295,A=P+(I<<15&4294967295|I>>>17),I=b+(P^(A|~p))+C[13]+1309151649&4294967295,b=A+(I<<21&4294967295|I>>>11),I=p+(A^(b|~P))+C[4]+4149444226&4294967295,p=b+(I<<6&4294967295|I>>>26),I=P+(b^(p|~A))+C[11]+3174756917&4294967295,P=p+(I<<10&4294967295|I>>>22),I=A+(p^(P|~b))+C[2]+718787259&4294967295,A=P+(I<<15&4294967295|I>>>17),I=b+(P^(A|~p))+C[9]+3951481745&4294967295,w.g[0]=w.g[0]+p&4294967295,w.g[1]=w.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,w.g[2]=w.g[2]+A&4294967295,w.g[3]=w.g[3]+P&4294967295}r.prototype.v=function(w,p){p===void 0&&(p=w.length);const b=p-this.blockSize,C=this.C;let A=this.h,P=0;for(;P<p;){if(A==0)for(;P<=b;)s(this,w,P),P+=this.blockSize;if(typeof w=="string"){for(;P<p;)if(C[A++]=w.charCodeAt(P++),A==this.blockSize){s(this,C),A=0;break}}else for(;P<p;)if(C[A++]=w[P++],A==this.blockSize){s(this,C),A=0;break}}this.h=A,this.o+=p},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var p=1;p<w.length-8;++p)w[p]=0;p=this.o*8;for(var b=w.length-8;b<w.length;++b)w[b]=p&255,p/=256;for(this.v(w),w=Array(16),p=0,b=0;b<4;++b)for(let C=0;C<32;C+=8)w[p++]=this.g[b]>>>C&255;return w};function a(w,p){var b=c;return Object.prototype.hasOwnProperty.call(b,w)?b[w]:b[w]=p(w)}function o(w,p){this.h=p;const b=[];let C=!0;for(let A=w.length-1;A>=0;A--){const P=w[A]|0;C&&P==p||(b[A]=P,C=!1)}this.g=b}var c={};function u(w){return-128<=w&&w<128?a(w,function(p){return new o([p|0],p<0?-1:0)}):new o([w|0],w<0?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(w<0)return k(d(-w));const p=[];let b=1;for(let C=0;w>=b;C++)p[C]=w/b|0,b*=4294967296;return new o(p,0)}function f(w,p){if(w.length==0)throw Error("number format error: empty string");if(p=p||10,p<2||36<p)throw Error("radix out of range: "+p);if(w.charAt(0)=="-")return k(f(w.substring(1),p));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=d(Math.pow(p,8));let C=m;for(let P=0;P<w.length;P+=8){var A=Math.min(8,w.length-P);const I=parseInt(w.substring(P,P+A),p);A<8?(A=d(Math.pow(p,A)),C=C.j(A).add(d(I))):(C=C.j(b),C=C.add(d(I)))}return C}var m=u(0),g=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(E(this))return-k(this).m();let w=0,p=1;for(let b=0;b<this.g.length;b++){const C=this.i(b);w+=(C>=0?C:4294967296+C)*p,p*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(T(this))return"0";if(E(this))return"-"+k(this).toString(w);const p=d(Math.pow(w,6));var b=this;let C="";for(;;){const A=S(b,p).g;b=j(b,A.j(p));let P=((b.g.length>0?b.g[0]:b.h)>>>0).toString(w);if(b=A,T(b))return P+C;for(;P.length<6;)P="0"+P;C=P+C}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function T(w){if(w.h!=0)return!1;for(let p=0;p<w.g.length;p++)if(w.g[p]!=0)return!1;return!0}function E(w){return w.h==-1}t.l=function(w){return w=j(this,w),E(w)?-1:T(w)?0:1};function k(w){const p=w.g.length,b=[];for(let C=0;C<p;C++)b[C]=~w.g[C];return new o(b,~w.h).add(g)}t.abs=function(){return E(this)?k(this):this},t.add=function(w){const p=Math.max(this.g.length,w.g.length),b=[];let C=0;for(let A=0;A<=p;A++){let P=C+(this.i(A)&65535)+(w.i(A)&65535),I=(P>>>16)+(this.i(A)>>>16)+(w.i(A)>>>16);C=I>>>16,P&=65535,I&=65535,b[A]=I<<16|P}return new o(b,b[b.length-1]&-2147483648?-1:0)};function j(w,p){return w.add(k(p))}t.j=function(w){if(T(this)||T(w))return m;if(E(this))return E(w)?k(this).j(k(w)):k(k(this).j(w));if(E(w))return k(this.j(k(w)));if(this.l(v)<0&&w.l(v)<0)return d(this.m()*w.m());const p=this.g.length+w.g.length,b=[];for(var C=0;C<2*p;C++)b[C]=0;for(C=0;C<this.g.length;C++)for(let A=0;A<w.g.length;A++){const P=this.i(C)>>>16,I=this.i(C)&65535,se=w.i(A)>>>16,fe=w.i(A)&65535;b[2*C+2*A]+=I*fe,y(b,2*C+2*A),b[2*C+2*A+1]+=P*fe,y(b,2*C+2*A+1),b[2*C+2*A+1]+=I*se,y(b,2*C+2*A+1),b[2*C+2*A+2]+=P*se,y(b,2*C+2*A+2)}for(w=0;w<p;w++)b[w]=b[2*w+1]<<16|b[2*w];for(w=p;w<2*p;w++)b[w]=0;return new o(b,0)};function y(w,p){for(;(w[p]&65535)!=w[p];)w[p+1]+=w[p]>>>16,w[p]&=65535,p++}function _(w,p){this.g=w,this.h=p}function S(w,p){if(T(p))throw Error("division by zero");if(T(w))return new _(m,m);if(E(w))return p=S(k(w),p),new _(k(p.g),k(p.h));if(E(p))return p=S(w,k(p)),new _(k(p.g),p.h);if(w.g.length>30){if(E(w)||E(p))throw Error("slowDivide_ only works with positive integers.");for(var b=g,C=p;C.l(w)<=0;)b=R(b),C=R(C);var A=L(b,1),P=L(C,1);for(C=L(C,2),b=L(b,2);!T(C);){var I=P.add(C);I.l(w)<=0&&(A=A.add(b),P=I),C=L(C,1),b=L(b,1)}return p=j(w,A.j(p)),new _(A,p)}for(A=m;w.l(p)>=0;){for(b=Math.max(1,Math.floor(w.m()/p.m())),C=Math.ceil(Math.log(b)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),P=d(b),I=P.j(p);E(I)||I.l(w)>0;)b-=C,P=d(b),I=P.j(p);T(P)&&(P=g),A=A.add(P),w=j(w,I)}return new _(A,w)}t.B=function(w){return S(this,w).h},t.and=function(w){const p=Math.max(this.g.length,w.g.length),b=[];for(let C=0;C<p;C++)b[C]=this.i(C)&w.i(C);return new o(b,this.h&w.h)},t.or=function(w){const p=Math.max(this.g.length,w.g.length),b=[];for(let C=0;C<p;C++)b[C]=this.i(C)|w.i(C);return new o(b,this.h|w.h)},t.xor=function(w){const p=Math.max(this.g.length,w.g.length),b=[];for(let C=0;C<p;C++)b[C]=this.i(C)^w.i(C);return new o(b,this.h^w.h)};function R(w){const p=w.g.length+1,b=[];for(let C=0;C<p;C++)b[C]=w.i(C)<<1|w.i(C-1)>>>31;return new o(b,w.h)}function L(w,p){const b=p>>5;p%=32;const C=w.g.length-b,A=[];for(let P=0;P<C;P++)A[P]=p>0?w.i(P+b)>>>p|w.i(P+b+1)<<32-p:w.i(P+b);return new o(A,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Uy=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Tr=o}).apply(typeof og<"u"?og:typeof self<"u"?self:typeof window<"u"?window:{});var tl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zy,ca,$y,wl,rh,Wy,Hy,qy;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof tl=="object"&&tl];for(var h=0;h<l.length;++h){var x=l[h];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var x=r;l=l.split(".");for(var N=0;N<l.length-1;N++){var V=l[N];if(!(V in x))break e;x=x[V]}l=l[l.length-1],N=x[l],h=h(N),h!=N&&h!=null&&e(x,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var x=[],N;for(N in h)Object.prototype.hasOwnProperty.call(h,N)&&x.push([N,h[N]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,x){return l.call.apply(l.bind,arguments)}function d(l,h,x){return d=u,d.apply(null,arguments)}function f(l,h){var x=Array.prototype.slice.call(arguments,1);return function(){var N=x.slice();return N.push.apply(N,arguments),l.apply(this,N)}}function m(l,h){function x(){}x.prototype=h.prototype,l.Z=h.prototype,l.prototype=new x,l.prototype.constructor=l,l.Ob=function(N,V,O){for(var q=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)q[ge-2]=arguments[ge];return h.prototype[V].apply(N,q)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function v(l){const h=l.length;if(h>0){const x=Array(h);for(let N=0;N<h;N++)x[N]=l[N];return x}return[]}function T(l,h){for(let N=1;N<arguments.length;N++){const V=arguments[N];var x=typeof V;if(x=x!="object"?x:V?Array.isArray(V)?"array":x:"null",x=="array"||x=="object"&&typeof V.length=="number"){x=l.length||0;const O=V.length||0;l.length=x+O;for(let q=0;q<O;q++)l[x+q]=V[q]}else l.push(V)}}class E{constructor(h,x){this.i=h,this.j=x,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function k(l){o.setTimeout(()=>{throw l},0)}function j(){var l=w;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class y{constructor(){this.h=this.g=null}add(h,x){const N=_.get();N.set(h,x),this.h?this.h.next=N:this.g=N,this.h=N}}var _=new E(()=>new S,l=>l.reset());class S{constructor(){this.next=this.g=this.h=null}set(h,x){this.h=h,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let R,L=!1,w=new y,p=()=>{const l=Promise.resolve(void 0);R=()=>{l.then(b)}};function b(){for(var l;l=j();){try{l.h.call(l.g)}catch(x){k(x)}var h=_;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}L=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const x=()=>{};o.addEventListener("test",x,h),o.removeEventListener("test",x,h)}catch{}return l}();function I(l){return/^[\s\xa0]*$/.test(l)}function se(l,h){A.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}m(se,A),se.prototype.init=function(l,h){const x=this.type=l.type,N=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(x=="mouseover"?h=l.fromElement:x=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),Se=0;function ut(l,h,x,N,V){this.listener=l,this.proxy=null,this.src=h,this.type=x,this.capture=!!N,this.ha=V,this.key=++Se,this.da=this.fa=!1}function Q(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ee(l,h,x){for(const N in l)h.call(x,l[N],N,l)}function oe(l,h){for(const x in l)h.call(void 0,l[x],x,l)}function U(l){const h={};for(const x in l)h[x]=l[x];return h}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(l,h){let x,N;for(let V=1;V<arguments.length;V++){N=arguments[V];for(x in N)l[x]=N[x];for(let O=0;O<ae.length;O++)x=ae[O],Object.prototype.hasOwnProperty.call(N,x)&&(l[x]=N[x])}}function ue(l){this.src=l,this.g={},this.h=0}ue.prototype.add=function(l,h,x,N,V){const O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);const q=ne(l,h,N,V);return q>-1?(h=l[q],x||(h.fa=!1)):(h=new ut(h,this.src,O,!!N,V),h.fa=x,l.push(h)),h};function Y(l,h){const x=h.type;if(x in l.g){var N=l.g[x],V=Array.prototype.indexOf.call(N,h,void 0),O;(O=V>=0)&&Array.prototype.splice.call(N,V,1),O&&(Q(h),l.g[x].length==0&&(delete l.g[x],l.h--))}}function ne(l,h,x,N){for(let V=0;V<l.length;++V){const O=l[V];if(!O.da&&O.listener==h&&O.capture==!!x&&O.ha==N)return V}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),Wr={};function wn(l,h,x,N,V){if(Array.isArray(h)){for(let O=0;O<h.length;O++)wn(l,h[O],x,N,V);return null}return x=go(x),l&&l[fe]?l.J(h,x,c(N)?!!N.capture:!1,V):Ln(l,h,x,!1,N,V)}function Ln(l,h,x,N,V,O){if(!h)throw Error("Invalid event type");const q=c(V)?!!V.capture:!!V;let ge=Ai(l);if(ge||(l[Fe]=ge=new ue(l)),x=ge.add(h,x,N,q,O),x.proxy)return x;if(N=Xc(),x.proxy=N,N.src=l,N.listener=x,l.addEventListener)P||(V=q),V===void 0&&(V=!1),l.addEventListener(h.toString(),N,V);else if(l.attachEvent)l.attachEvent(po(h.toString()),N);else if(l.addListener&&l.removeListener)l.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Xc(){function l(x){return h.call(l.src,l.listener,x)}const h=Jc;return l}function Hr(l,h,x,N,V){if(Array.isArray(h))for(var O=0;O<h.length;O++)Hr(l,h[O],x,N,V);else N=c(N)?!!N.capture:!!N,x=go(x),l&&l[fe]?(l=l.i,O=String(h).toString(),O in l.g&&(h=l.g[O],x=ne(h,x,N,V),x>-1&&(Q(h[x]),Array.prototype.splice.call(h,x,1),h.length==0&&(delete l.g[O],l.h--)))):l&&(l=Ai(l))&&(h=l.g[h.toString()],l=-1,h&&(l=ne(h,x,N,V)),(x=l>-1?h[l]:null)&&ki(x))}function ki(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[fe])Y(h.i,l);else{var x=l.type,N=l.proxy;h.removeEventListener?h.removeEventListener(x,N,l.capture):h.detachEvent?h.detachEvent(po(x),N):h.addListener&&h.removeListener&&h.removeListener(N),(x=Ai(h))?(Y(x,l),x.h==0&&(x.src=null,h[Fe]=null)):Q(l)}}}function po(l){return l in Wr?Wr[l]:Wr[l]="on"+l}function Jc(l,h){if(l.da)l=!0;else{h=new se(h,this);const x=l.listener,N=l.ha||l.src;l.fa&&ki(l),l=x.call(N,h)}return l}function Ai(l){return l=l[Fe],l instanceof ue?l:null}var Pi="__closure_events_fn_"+(Math.random()*1e9>>>0);function go(l){return typeof l=="function"?l:(l[Pi]||(l[Pi]=function(h){return l.handleEvent(h)}),l[Pi])}function dt(){C.call(this),this.i=new ue(this),this.M=this,this.G=null}m(dt,C),dt.prototype[fe]=!0,dt.prototype.removeEventListener=function(l,h,x,N){Hr(this,l,h,x,N)};function gt(l,h){var x,N=l.G;if(N)for(x=[];N;N=N.G)x.push(N);if(l=l.M,N=h.type||h,typeof h=="string")h=new A(h,l);else if(h instanceof A)h.target=h.target||l;else{var V=h;h=new A(N,l),W(h,V)}V=!0;let O,q;if(x)for(q=x.length-1;q>=0;q--)O=h.g=x[q],V=Cs(O,N,!0,h)&&V;if(O=h.g=l,V=Cs(O,N,!0,h)&&V,V=Cs(O,N,!1,h)&&V,x)for(q=0;q<x.length;q++)O=h.g=x[q],V=Cs(O,N,!1,h)&&V}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const x=l.g[h];for(let N=0;N<x.length;N++)Q(x[N]);delete l.g[h],l.h--}}this.G=null},dt.prototype.J=function(l,h,x,N){return this.i.add(String(l),h,!1,x,N)},dt.prototype.K=function(l,h,x,N){return this.i.add(String(l),h,!0,x,N)};function Cs(l,h,x,N){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let V=!0;for(let O=0;O<h.length;++O){const q=h[O];if(q&&!q.da&&q.capture==x){const ge=q.listener,st=q.ha||q.src;q.fa&&Y(l.i,q),V=ge.call(st,N)!==!1&&V}}return V&&!N.defaultPrevented}function xo(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function yo(l){l.g=xo(()=>{l.g=null,l.i&&(l.i=!1,yo(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Zc extends C{constructor(h,x){super(),this.m=h,this.l=x,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:yo(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(l){C.call(this),this.h=l,this.g={}}m(qr,C);var vo=[];function wo(l){ee(l.g,function(h,x){this.g.hasOwnProperty(x)&&ki(h)},l),l.g={}}qr.prototype.N=function(){qr.Z.N.call(this),wo(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ri=o.JSON.stringify,eu=o.JSON.parse,tu=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function bo(){}function jo(){}var Qr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Di(){A.call(this,"d")}m(Di,A);function Li(){A.call(this,"c")}m(Li,A);var Mn={},_o=null;function Ss(){return _o=_o||new dt}Mn.Ia="serverreachability";function No(l){A.call(this,Mn.Ia,l)}m(No,A);function Gr(l){const h=Ss();gt(h,new No(h))}Mn.STAT_EVENT="statevent";function Eo(l,h){A.call(this,Mn.STAT_EVENT,l),this.stat=h}m(Eo,A);function xt(l){const h=Ss();gt(h,new Eo(h,l))}Mn.Ja="timingevent";function To(l,h){A.call(this,Mn.Ja,l),this.size=h}m(To,A);function Kr(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function Yr(){this.g=!0}Yr.prototype.ua=function(){this.g=!1};function Mi(l,h,x,N,V,O){l.info(function(){if(l.g)if(O){var q="",ge=O.split("&");for(let Pe=0;Pe<ge.length;Pe++){var st=ge[Pe].split("=");if(st.length>1){const ht=st[0];st=st[1];const jn=ht.split("_");q=jn.length>=2&&jn[1]=="type"?q+(ht+"="+st+"&"):q+(ht+"=redacted&")}}}else q=null;else q=O;return"XMLHTTP REQ ("+N+") [attempt "+V+"]: "+h+`
`+x+`
`+q})}function Xr(l,h,x,N,V,O,q){l.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+V+"]: "+h+`
`+x+`
`+O+" "+q})}function Zn(l,h,x,N){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+Co(l,x)+(N?" "+N:"")})}function nu(l,h){l.info(function(){return"TIMEOUT: "+h})}Yr.prototype.info=function(){};function Co(l,h){if(!l.g)return h;if(!h)return null;try{const O=JSON.parse(h);if(O){for(l=0;l<O.length;l++)if(Array.isArray(O[l])){var x=O[l];if(!(x.length<2)){var N=x[1];if(Array.isArray(N)&&!(N.length<1)){var V=N[0];if(V!="noop"&&V!="stop"&&V!="close")for(let q=1;q<N.length;q++)N[q]=""}}}}return Ri(O)}catch{return h}}var Is={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},So={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},D;function F(){}m(F,bo),F.prototype.g=function(){return new XMLHttpRequest},D=new F;function $(l){return encodeURIComponent(String(l))}function Ne(l){var h=1;l=l.split(":");const x=[];for(;h>0&&l.length;)x.push(l.shift()),h--;return l.length&&x.push(l.join(":")),x}function ze(l,h,x,N){this.j=l,this.i=h,this.l=x,this.S=N||1,this.V=new qr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yt}function yt(){this.i=null,this.g="",this.h=!1}var ks={},As={};function Vn(l,h,x){l.M=1,l.A=Io(bn(h)),l.u=x,l.R=!0,er(l,null)}function er(l,h){l.F=Date.now(),Be(l),l.B=bn(l.A);var x=l.B,N=l.S;Array.isArray(N)||(N=[String(N)]),um(x.i,"t",N),l.C=0,x=l.j.L,l.h=new yt,l.g=Sm(l.j,x?h:null,!l.u),l.P>0&&(l.O=new Zc(d(l.Y,l,l.g),l.P)),h=l.V,x=l.g,N=l.ba;var V="readystatechange";Array.isArray(V)||(V&&(vo[0]=V.toString()),V=vo);for(let O=0;O<V.length;O++){const q=wn(x,V[O],N||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=l.J?U(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),Gr(),Mi(l.i,l.v,l.B,l.l,l.S,l.u)}ze.prototype.ba=function(l){l=l.target;const h=this.O;h&&rr(l)==3?h.j():this.Y(l)},ze.prototype.Y=function(l){try{if(l==this.g)e:{const ge=rr(this.g),st=this.g.ya(),Pe=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||xm(this.g)))){this.K||ge!=4||st==7||(st==8||Pe<=0?Gr(3):Gr(2)),ru(this);var h=this.g.ca();this.X=h;var x=Vi(this);if(this.o=h==200,Xr(this.i,this.v,this.B,this.l,this.S,ge,h),this.o){if(this.U&&!this.L){t:{if(this.g){var N,V=this.g;if((N=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(N)){var O=N;break t}}O=null}if(l=O)Zn(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,su(this,l);else{this.o=!1,this.m=3,xt(12),Jr(this),Oi(this);break e}}if(this.R){l=!0;let ht;for(;!this.K&&this.C<x.length;)if(ht=ve(this,x),ht==As){ge==4&&(this.m=4,xt(14),l=!1),Zn(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==ks){this.m=4,xt(15),Zn(this.i,this.l,x,"[Invalid Chunk]"),l=!1;break}else Zn(this.i,this.l,ht,null),su(this,ht);if(G(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||x.length!=0||this.h.h||(this.m=1,xt(16),l=!1),this.o=this.o&&l,!l)Zn(this.i,this.l,x,"[Invalid Chunked Response]"),Jr(this),Oi(this);else if(x.length>0&&!this.W){this.W=!0;var q=this.j;q.g==this&&q.aa&&!q.P&&(q.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),hu(q),q.P=!0,xt(11))}}else Zn(this.i,this.l,x,null),su(this,x);ge==4&&Jr(this),this.o&&!this.K&&(ge==4?Nm(this.j,this):(this.o=!1,Be(this)))}else V1(this.g),h==400&&x.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),Jr(this),Oi(this)}}}catch{}finally{}};function Vi(l){if(!G(l))return l.g.la();const h=xm(l.g);if(h==="")return"";let x="";const N=h.length,V=rr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Jr(l),Oi(l),"";l.h.i=new o.TextDecoder}for(let O=0;O<N;O++)l.h.h=!0,x+=l.h.i.decode(h[O],{stream:!(V&&O==N-1)});return h.length=0,l.h.g+=x,l.C=0,l.h.g}function G(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function ve(l,h){var x=l.C,N=h.indexOf(`
`,x);return N==-1?As:(x=Number(h.substring(x,N)),isNaN(x)?ks:(N+=1,N+x>h.length?As:(h=h.slice(N,N+x),l.C=N+x,h)))}ze.prototype.cancel=function(){this.K=!0,Jr(this)};function Be(l){l.T=Date.now()+l.H,Ps(l,l.H)}function Ps(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Kr(d(l.aa,l),h)}function ru(l){l.D&&(o.clearTimeout(l.D),l.D=null)}ze.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(nu(this.i,this.B),this.M!=2&&(Gr(),xt(17)),Jr(this),this.m=2,Oi(this)):Ps(this,this.T-l)};function Oi(l){l.j.I==0||l.K||Nm(l.j,l)}function Jr(l){ru(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,wo(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function su(l,h){try{var x=l.j;if(x.I!=0&&(x.g==l||iu(x.h,l))){if(!l.L&&iu(x.h,l)&&x.I==3){try{var N=x.Ba.g.parse(h)}catch{N=null}if(Array.isArray(N)&&N.length==3){var V=N;if(V[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<l.F)Do(x),Po(x);else break e;du(x),xt(18)}}else x.xa=V[1],0<x.xa-x.K&&V[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Kr(d(x.Va,x),6e3));nm(x.h)<=1&&x.ta&&(x.ta=void 0)}else es(x,11)}else if((l.L||x.g==l)&&Do(x),!I(h))for(V=x.Ba.g.parse(h),h=0;h<V.length;h++){let Pe=V[h];const ht=Pe[0];if(!(ht<=x.K))if(x.K=ht,Pe=Pe[1],x.I==2)if(Pe[0]=="c"){x.M=Pe[1],x.ba=Pe[2];const jn=Pe[3];jn!=null&&(x.ka=jn,x.j.info("VER="+x.ka));const ts=Pe[4];ts!=null&&(x.za=ts,x.j.info("SVER="+x.za));const sr=Pe[5];sr!=null&&typeof sr=="number"&&sr>0&&(N=1.5*sr,x.O=N,x.j.info("backChannelRequestTimeoutMs_="+N)),N=x;const ir=l.g;if(ir){const Mo=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mo){var O=N.h;O.g||Mo.indexOf("spdy")==-1&&Mo.indexOf("quic")==-1&&Mo.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(au(O,O.h),O.h=null))}if(N.G){const fu=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;fu&&(N.wa=fu,De(N.J,N.G,fu))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-l.F,x.j.info("Handshake RTT: "+x.T+"ms")),N=x;var q=l;if(N.na=Cm(N,N.L?N.ba:null,N.W),q.L){rm(N.h,q);var ge=q,st=N.O;st&&(ge.H=st),ge.D&&(ru(ge),Be(ge)),N.g=q}else jm(N);x.i.length>0&&Ro(x)}else Pe[0]!="stop"&&Pe[0]!="close"||es(x,7);else x.I==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?es(x,7):uu(x):Pe[0]!="noop"&&x.l&&x.l.qa(Pe),x.A=0)}}Gr(4)}catch{}}var N1=class{constructor(l,h){this.g=l,this.map=h}};function em(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function tm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function nm(l){return l.h?1:l.g?l.g.size:0}function iu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function au(l,h){l.g?l.g.add(h):l.h=h}function rm(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}em.prototype.cancel=function(){if(this.i=sm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function sm(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const x of l.g.values())h=h.concat(x.G);return h}return v(l.i)}var im=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function E1(l,h){if(l){l=l.split("&");for(let x=0;x<l.length;x++){const N=l[x].indexOf("=");let V,O=null;N>=0?(V=l[x].substring(0,N),O=l[x].substring(N+1)):V=l[x],h(V,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function tr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof tr?(this.l=l.l,Fi(this,l.j),this.o=l.o,this.g=l.g,Bi(this,l.u),this.h=l.h,ou(this,dm(l.i)),this.m=l.m):l&&(h=String(l).match(im))?(this.l=!1,Fi(this,h[1]||"",!0),this.o=Ui(h[2]||""),this.g=Ui(h[3]||"",!0),Bi(this,h[4]),this.h=Ui(h[5]||"",!0),ou(this,h[6]||"",!0),this.m=Ui(h[7]||"")):(this.l=!1,this.i=new $i(null,this.l))}tr.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(zi(h,am,!0),":");var x=this.g;return(x||h=="file")&&(l.push("//"),(h=this.o)&&l.push(zi(h,am,!0),"@"),l.push($(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&l.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&l.push("/"),l.push(zi(x,x.charAt(0)=="/"?S1:C1,!0))),(x=this.i.toString())&&l.push("?",x),(x=this.m)&&l.push("#",zi(x,k1)),l.join("")},tr.prototype.resolve=function(l){const h=bn(this);let x=!!l.j;x?Fi(h,l.j):x=!!l.o,x?h.o=l.o:x=!!l.g,x?h.g=l.g:x=l.u!=null;var N=l.h;if(x)Bi(h,l.u);else if(x=!!l.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var V=h.h.lastIndexOf("/");V!=-1&&(N=h.h.slice(0,V+1)+N)}if(V=N,V==".."||V==".")N="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){N=V.lastIndexOf("/",0)==0,V=V.split("/");const O=[];for(let q=0;q<V.length;){const ge=V[q++];ge=="."?N&&q==V.length&&O.push(""):ge==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),N&&q==V.length&&O.push("")):(O.push(ge),N=!0)}N=O.join("/")}else N=V}return x?h.h=N:x=l.i.toString()!=="",x?ou(h,dm(l.i)):x=!!l.m,x&&(h.m=l.m),h};function bn(l){return new tr(l)}function Fi(l,h,x){l.j=x?Ui(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Bi(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function ou(l,h,x){h instanceof $i?(l.i=h,A1(l.i,l.l)):(x||(h=zi(h,I1)),l.i=new $i(h,l.l))}function De(l,h,x){l.i.set(h,x)}function Io(l){return De(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Ui(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function zi(l,h,x){return typeof l=="string"?(l=encodeURI(l).replace(h,T1),x&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function T1(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var am=/[#\/\?@]/g,C1=/[#\?:]/g,S1=/[#\?]/g,I1=/[#\?@]/g,k1=/#/g;function $i(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Zr(l){l.g||(l.g=new Map,l.h=0,l.i&&E1(l.i,function(h,x){l.add(decodeURIComponent(h.replace(/\+/g," ")),x)}))}t=$i.prototype,t.add=function(l,h){Zr(this),this.i=null,l=Rs(this,l);let x=this.g.get(l);return x||this.g.set(l,x=[]),x.push(h),this.h+=1,this};function om(l,h){Zr(l),h=Rs(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function lm(l,h){return Zr(l),h=Rs(l,h),l.g.has(h)}t.forEach=function(l,h){Zr(this),this.g.forEach(function(x,N){x.forEach(function(V){l.call(h,V,N,this)},this)},this)};function cm(l,h){Zr(l);let x=[];if(typeof h=="string")lm(l,h)&&(x=x.concat(l.g.get(Rs(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)x=x.concat(l[h]);return x}t.set=function(l,h){return Zr(this),this.i=null,l=Rs(this,l),lm(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=cm(this,l),l.length>0?String(l[0]):h):h};function um(l,h,x){om(l,h),x.length>0&&(l.i=null,l.g.set(Rs(l,h),v(x)),l.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let N=0;N<h.length;N++){var x=h[N];const V=$(x);x=cm(this,x);for(let O=0;O<x.length;O++){let q=V;x[O]!==""&&(q+="="+$(x[O])),l.push(q)}}return this.i=l.join("&")};function dm(l){const h=new $i;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function Rs(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function A1(l,h){h&&!l.j&&(Zr(l),l.i=null,l.g.forEach(function(x,N){const V=N.toLowerCase();N!=V&&(om(this,N),um(this,V,x))},l)),l.j=h}function P1(l,h){const x=new Yr;if(o.Image){const N=new Image;N.onload=f(nr,x,"TestLoadImage: loaded",!0,h,N),N.onerror=f(nr,x,"TestLoadImage: error",!1,h,N),N.onabort=f(nr,x,"TestLoadImage: abort",!1,h,N),N.ontimeout=f(nr,x,"TestLoadImage: timeout",!1,h,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=l}else h(!1)}function R1(l,h){const x=new Yr,N=new AbortController,V=setTimeout(()=>{N.abort(),nr(x,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:N.signal}).then(O=>{clearTimeout(V),O.ok?nr(x,"TestPingServer: ok",!0,h):nr(x,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),nr(x,"TestPingServer: error",!1,h)})}function nr(l,h,x,N,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),N(x)}catch{}}function D1(){this.g=new tu}function lu(l){this.i=l.Sb||null,this.h=l.ab||!1}m(lu,bo),lu.prototype.g=function(){return new ko(this.i,this.h)};function ko(l,h){dt.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(ko,dt),t=ko.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,Hi(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wi(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Hi(this)),this.g&&(this.readyState=3,Hi(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;hm(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function hm(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Wi(this):Hi(this),this.readyState==3&&hm(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Wi(this))},t.Na=function(l){this.g&&(this.response=l,Wi(this))},t.ga=function(){this.g&&Wi(this)};function Wi(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Hi(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var x=h.next();!x.done;)x=x.value,l.push(x[0]+": "+x[1]),x=h.next();return l.join(`\r
`)};function Hi(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ko.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function fm(l){let h="";return ee(l,function(x,N){h+=N,h+=":",h+=x,h+=`\r
`}),h}function cu(l,h,x){e:{for(N in x){var N=!1;break e}N=!0}N||(x=fm(x),typeof l=="string"?x!=null&&$(x):De(l,h,x))}function Qe(l){dt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Qe,dt);var L1=/^https?$/i,M1=["POST","PUT"];t=Qe.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,x,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():D.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){mm(this,O);return}if(l=x||"",x=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var V in N)x.set(V,N[V]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const O of N.keys())x.set(O,N.get(O));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(x.keys()).find(O=>O.toLowerCase()=="content-type"),V=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(M1,h,void 0)>=0)||N||V||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,q]of x)this.g.setRequestHeader(O,q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(O){mm(this,O)}};function mm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,pm(l),Ao(l)}function pm(l){l.A||(l.A=!0,gt(l,"complete"),gt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,gt(this,"complete"),gt(this,"abort"),Ao(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ao(this,!0)),Qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?gm(this):this.Xa())},t.Xa=function(){gm(this)};function gm(l){if(l.h&&typeof a<"u"){if(l.v&&rr(l)==4)setTimeout(l.Ca.bind(l),0);else if(gt(l,"readystatechange"),rr(l)==4){l.h=!1;try{const O=l.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var x;if(!(x=h)){var N;if(N=O===0){let q=String(l.D).match(im)[1]||null;!q&&o.self&&o.self.location&&(q=o.self.location.protocol.slice(0,-1)),N=!L1.test(q?q.toLowerCase():"")}x=N}if(x)gt(l,"complete"),gt(l,"success");else{l.o=6;try{var V=rr(l)>2?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.ca()+"]",pm(l)}}finally{Ao(l)}}}}function Ao(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const x=l.g;l.g=null,h||gt(l,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function rr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return rr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),eu(h)}};function xm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function V1(l){const h={};l=(l.g&&rr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<l.length;N++){if(I(l[N]))continue;var x=Ne(l[N]);const V=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const O=h[V]||[];h[V]=O,O.push(x)}oe(h,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qi(l,h,x){return x&&x.internalChannelParams&&x.internalChannelParams[l]||h}function ym(l){this.za=0,this.i=[],this.j=new Yr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qi("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qi("baseRetryDelayMs",5e3,l),this.Za=qi("retryDelaySeedMs",1e4,l),this.Ta=qi("forwardChannelMaxRetries",2,l),this.va=qi("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new em(l&&l.concurrentRequestLimit),this.Ba=new D1,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ym.prototype,t.ka=8,t.I=1,t.connect=function(l,h,x,N){xt(0),this.W=l,this.H=h||{},x&&N!==void 0&&(this.H.OSID=x,this.H.OAID=N),this.F=this.X,this.J=Cm(this,null,this.W),Ro(this)};function uu(l){if(vm(l),l.I==3){var h=l.V++,x=bn(l.J);if(De(x,"SID",l.M),De(x,"RID",h),De(x,"TYPE","terminate"),Qi(l,x),h=new ze(l,l.j,h),h.M=2,h.A=Io(bn(x)),x=!1,o.navigator&&o.navigator.sendBeacon)try{x=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!x&&o.Image&&(new Image().src=h.A,x=!0),x||(h.g=Sm(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Be(h)}Tm(l)}function Po(l){l.g&&(hu(l),l.g.cancel(),l.g=null)}function vm(l){Po(l),l.v&&(o.clearTimeout(l.v),l.v=null),Do(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Ro(l){if(!tm(l.h)&&!l.m){l.m=!0;var h=l.Ea;R||p(),L||(R(),L=!0),w.add(h,l),l.D=0}}function O1(l,h){return nm(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Kr(d(l.Ea,l,h),Em(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const V=new ze(this,this.j,l);let O=this.o;if(this.U&&(O?(O=U(O),W(O,this.U)):O=this.U),this.u!==null||this.R||(V.J=O,O=null),this.S)e:{for(var h=0,x=0;x<this.i.length;x++){t:{var N=this.i[x];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(h+=N,h>4096){h=x;break e}if(h===4096||x===this.i.length-1){h=x+1;break e}}h=1e3}else h=1e3;h=bm(this,V,h),x=bn(this.J),De(x,"RID",l),De(x,"CVER",22),this.G&&De(x,"X-HTTP-Session-Id",this.G),Qi(this,x),O&&(this.R?h="headers="+$(fm(O))+"&"+h:this.u&&cu(x,this.u,O)),au(this.h,V),this.Ra&&De(x,"TYPE","init"),this.S?(De(x,"$req",h),De(x,"SID","null"),V.U=!0,Vn(V,x,null)):Vn(V,x,h),this.I=2}}else this.I==3&&(l?wm(this,l):this.i.length==0||tm(this.h)||wm(this))};function wm(l,h){var x;h?x=h.l:x=l.V++;const N=bn(l.J);De(N,"SID",l.M),De(N,"RID",x),De(N,"AID",l.K),Qi(l,N),l.u&&l.o&&cu(N,l.u,l.o),x=new ze(l,l.j,x,l.D+1),l.u===null&&(x.J=l.o),h&&(l.i=h.G.concat(l.i)),h=bm(l,x,1e3),x.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),au(l.h,x),Vn(x,N,h)}function Qi(l,h){l.H&&ee(l.H,function(x,N){De(h,N,x)}),l.l&&ee({},function(x,N){De(h,N,x)})}function bm(l,h,x){x=Math.min(l.i.length,x);const N=l.l?d(l.l.Ka,l.l,l):null;e:{var V=l.i;let ge=-1;for(;;){const st=["count="+x];ge==-1?x>0?(ge=V[0].g,st.push("ofs="+ge)):ge=0:st.push("ofs="+ge);let Pe=!0;for(let ht=0;ht<x;ht++){var O=V[ht].g;const jn=V[ht].map;if(O-=ge,O<0)ge=Math.max(0,V[ht].g-100),Pe=!1;else try{O="req"+O+"_"||"";try{var q=jn instanceof Map?jn:Object.entries(jn);for(const[ts,sr]of q){let ir=sr;c(sr)&&(ir=Ri(sr)),st.push(O+ts+"="+encodeURIComponent(ir))}}catch(ts){throw st.push(O+"type="+encodeURIComponent("_badmap")),ts}}catch{N&&N(jn)}}if(Pe){q=st.join("&");break e}}q=void 0}return l=l.i.splice(0,x),h.G=l,q}function jm(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;R||p(),L||(R(),L=!0),w.add(h,l),l.A=0}}function du(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Kr(d(l.Da,l),Em(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,_m(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Kr(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Po(this),_m(this))};function hu(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function _m(l){l.g=new ze(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=bn(l.na);De(h,"RID","rpc"),De(h,"SID",l.M),De(h,"AID",l.K),De(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&De(h,"TO",l.ia),De(h,"TYPE","xmlhttp"),Qi(l,h),l.u&&l.o&&cu(h,l.u,l.o),l.O&&(l.g.H=l.O);var x=l.g;l=l.ba,x.M=1,x.A=Io(bn(h)),x.u=null,x.R=!0,er(x,l)}t.Va=function(){this.C!=null&&(this.C=null,Po(this),du(this),xt(19))};function Do(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Nm(l,h){var x=null;if(l.g==h){Do(l),hu(l),l.g=null;var N=2}else if(iu(l.h,h))x=h.G,rm(l.h,h),N=1;else return;if(l.I!=0){if(h.o)if(N==1){x=h.u?h.u.length:0,h=Date.now()-h.F;var V=l.D;N=Ss(),gt(N,new To(N,x)),Ro(l)}else jm(l);else if(V=h.m,V==3||V==0&&h.X>0||!(N==1&&O1(l,h)||N==2&&du(l)))switch(x&&x.length>0&&(h=l.h,h.i=h.i.concat(x)),V){case 1:es(l,5);break;case 4:es(l,10);break;case 3:es(l,6);break;default:es(l,2)}}}function Em(l,h){let x=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(x*=2),x*h}function es(l,h){if(l.j.info("Error code "+h),h==2){var x=d(l.bb,l),N=l.Ua;const V=!N;N=new tr(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Fi(N,"https"),Io(N),V?P1(N.toString(),x):R1(N.toString(),x)}else xt(2);l.I=0,l.l&&l.l.pa(h),Tm(l),vm(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Tm(l){if(l.I=0,l.ja=[],l.l){const h=sm(l.h);(h.length!=0||l.i.length!=0)&&(T(l.ja,h),T(l.ja,l.i),l.h.i.length=0,v(l.i),l.i.length=0),l.l.oa()}}function Cm(l,h,x){var N=x instanceof tr?bn(x):new tr(x);if(N.g!="")h&&(N.g=h+"."+N.g),Bi(N,N.u);else{var V=o.location;N=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;const O=new tr(null);N&&Fi(O,N),h&&(O.g=h),V&&Bi(O,V),x&&(O.h=x),N=O}return x=l.G,h=l.wa,x&&h&&De(N,x,h),De(N,"VER",l.ka),Qi(l,N),N}function Sm(l,h,x){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Qe(new lu({ab:x})):new Qe(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Im(){}t=Im.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Lo(){}Lo.prototype.g=function(l,h){return new Qt(l,h)};function Qt(l,h){dt.call(this),this.g=new ym(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!I(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!I(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ds(this)}m(Qt,dt),Qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){uu(this.g)},Qt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var x={};x.__data__=l,l=x}else this.v&&(x={},x.__data__=Ri(l),l=x);h.i.push(new N1(h.Ya++,l)),h.I==3&&Ro(h)},Qt.prototype.N=function(){this.g.l=null,delete this.j,uu(this.g),delete this.g,Qt.Z.N.call(this)};function km(l){Di.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const x in h){l=x;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}m(km,Di);function Am(){Li.call(this),this.status=1}m(Am,Li);function Ds(l){this.g=l}m(Ds,Im),Ds.prototype.ra=function(){gt(this.g,"a")},Ds.prototype.qa=function(l){gt(this.g,new km(l))},Ds.prototype.pa=function(l){gt(this.g,new Am)},Ds.prototype.oa=function(){gt(this.g,"b")},Lo.prototype.createWebChannel=Lo.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,qy=function(){return new Lo},Hy=function(){return Ss()},Wy=Mn,rh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Is.NO_ERROR=0,Is.TIMEOUT=8,Is.HTTP_ERROR=6,wl=Is,So.COMPLETE="complete",$y=So,jo.EventType=Qr,Qr.OPEN="a",Qr.CLOSE="b",Qr.ERROR="c",Qr.MESSAGE="d",dt.prototype.listen=dt.prototype.J,ca=jo,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,zy=Qe}).apply(typeof tl<"u"?tl:typeof self<"u"?self:typeof window<"u"?window:{});const lg="@firebase/firestore",cg="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ti="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new My("@firebase/firestore");function Ms(){return xs.logLevel}function X(t,...e){if(xs.logLevel<=_e.DEBUG){const n=e.map(_f);xs.debug(`Firestore (${Ti}): ${t}`,...n)}}function Gn(t,...e){if(xs.logLevel<=_e.ERROR){const n=e.map(_f);xs.error(`Firestore (${Ti}): ${t}`,...n)}}function mi(t,...e){if(xs.logLevel<=_e.WARN){const n=e.map(_f);xs.warn(`Firestore (${Ti}): ${t}`,...n)}}function _f(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Qy(t,r,n)}function Qy(t,e,n){let r=`FIRESTORE (${Ti}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gn(r),new Error(r)}function Ie(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Qy(e,s,r)}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Ei{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}}class aN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class oN{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Cr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Cr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string",31837,{l:r}),new Gy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new It(e)}}class lN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new lN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ug{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,z_(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ie(this.o===void 0,3512);const r=a=>{a.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ug(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ug(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=dN(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function sh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return Hu(s)===Hu(a)?we(s,a):Hu(s)?1:-1}return we(t.length,e.length)}const hN=55296,fN=57343;function Hu(t){const e=t.charCodeAt(0);return e>=hN&&e<=fN}function pi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="__name__";class En{constructor(e,n,r){n===void 0?n=0:n>e.length&&ce(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ce(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return En.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof En?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=En.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return we(e.length,n.length)}static compareSegments(e,n){const r=En.isNumericId(e),s=En.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?En.extractNumericId(e).compare(En.extractNumericId(n)):sh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tr.fromString(e.substring(4,e.length-2))}}class Me extends En{construct(e,n,r){return new Me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Me(n)}static emptyPath(){return new Me([])}}const mN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends En{construct(e,n,r){return new bt(e,n,r)}static isValidIdentifier(e){return mN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dg}static keyField(){return new bt([dg])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Z(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Z(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Z(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(a(),s++)}if(a(),o)throw new Z(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(n)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Me.fromString(e))}static fromName(e){return new ie(Me.fromString(e).popFirst(5))}static empty(){return new ie(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Me(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(t,e,n){if(!n)throw new Z(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pN(t,e,n,r){if(e===!0&&r===!0)throw new Z(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hg(t){if(!ie.isDocumentKey(t))throw new Z(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fg(t){if(ie.isDocumentKey(t))throw new Z(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yy(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ef(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce(12329,{type:typeof t})}function cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ef(t);throw new Z(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function lo(t,e){if(!Yy(t))throw new Z(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Z(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=-62135596800,pg=1e6;class Ve{static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*pg);return new Ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<mg)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pg}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(lo(e,Ve._jsonSchema))return new Ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ve._jsonSchemaVersion="firestore/timestamp/1.0",Ve._jsonSchema={type:rt("string",Ve._jsonSchemaVersion),seconds:rt("number"),nanoseconds:rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{static fromTimestamp(e){return new de(e)}static min(){return new de(new Ve(0,0))}static max(){return new de(new Ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=-1;function gN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=de.fromTimestamp(r===1e9?new Ve(n+1,0):new Ve(n,r));return new Ar(s,ie.empty(),e)}function xN(t){return new Ar(t.readTime,t.key,Xa)}class Ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ar(de.min(),ie.empty(),Xa)}static max(){return new Ar(de.max(),ie.empty(),Xa)}}function yN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ci(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==vN)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,a=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++a,o&&a===s&&n()},u=>r(u))}),o=!0,a===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===a&&r(o)},f=>s(f))}})}static doWhile(e,n){return new B((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function bN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Si(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ac.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=-1;function Pc(t){return t==null}function tc(t){return t===0&&1/t==-1/0}function jN(t){return typeof t=="number"&&Number.isInteger(t)&&!tc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="";function _N(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=gg(e)),e=NN(t.get(n),e);return gg(e)}function NN(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case Xy:n+="";break;default:n+=a}}return n}function gg(t){return t+Xy+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nl(this.root,e,this.comparator,!1)}getReverseIterator(){return new nl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nl(this.root,e,this.comparator,!0)}}class nl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??wt.RED,this.left=s??wt.EMPTY,this.right=a??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new wt(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ce(27949);return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw ce(57766)}get value(){throw ce(16141)}get color(){throw ce(16727)}get left(){throw ce(29726)}get right(){throw ce(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yg(this.data.getIterator())}getIteratorFrom(e){return new yg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class yg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new Jt([])}unionWith(e){let n=new ct(bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Zy("Invalid base64 string: "+a):a}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const EN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(t){if(Ie(!!t,39018),typeof t=="string"){let e=0;const n=EN.exec(t);if(Ie(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rr(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="server_timestamp",tv="__type__",nv="__previous_value__",rv="__local_write_time__";function Cf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[tv])==null?void 0:r.stringValue)===ev}function Rc(t){const e=t.mapValue.fields[nv];return Cf(e)?Rc(e):e}function Ja(t){const e=Pr(t.mapValue.fields[rv].timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n,r,s,a,o,c,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const nc="(default)";class Za{constructor(e,n){this.projectId=e,this.database=n||nc}static empty(){return new Za("","")}get isDefaultDatabase(){return this.database===nc}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="__type__",CN="__max__",rl={mapValue:{}},iv="__vector__",rc="value";function Dr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cf(t)?4:IN(t)?9007199254740991:SN(t)?10:11:ce(28295,{value:t})}function Rn(t,e){if(t===e)return!0;const n=Dr(t);if(n!==Dr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ja(t).isEqual(Ja(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Pr(s.timestampValue),c=Pr(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Rr(s.bytesValue).isEqual(Rr(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return Ke(s.geoPointValue.latitude)===Ke(a.geoPointValue.latitude)&&Ke(s.geoPointValue.longitude)===Ke(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Ke(s.integerValue)===Ke(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=Ke(s.doubleValue),c=Ke(a.doubleValue);return o===c?tc(o)===tc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return pi(t.arrayValue.values||[],e.arrayValue.values||[],Rn);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},c=a.mapValue.fields||{};if(xg(o)!==xg(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Rn(o[u],c[u])))return!1;return!0}(t,e);default:return ce(52216,{left:t})}}function eo(t,e){return(t.values||[]).find(n=>Rn(n,e))!==void 0}function gi(t,e){if(t===e)return 0;const n=Dr(t),r=Dr(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(a,o){const c=Ke(a.integerValue||a.doubleValue),u=Ke(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return vg(t.timestampValue,e.timestampValue);case 4:return vg(Ja(t),Ja(e));case 5:return sh(t.stringValue,e.stringValue);case 6:return function(a,o){const c=Rr(a),u=Rr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=we(c[d],u[d]);if(f!==0)return f}return we(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const c=we(Ke(a.latitude),Ke(o.latitude));return c!==0?c:we(Ke(a.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return wg(t.arrayValue,e.arrayValue);case 10:return function(a,o){var g,v,T,E;const c=a.fields||{},u=o.fields||{},d=(g=c[rc])==null?void 0:g.arrayValue,f=(v=u[rc])==null?void 0:v.arrayValue,m=we(((T=d==null?void 0:d.values)==null?void 0:T.length)||0,((E=f==null?void 0:f.values)==null?void 0:E.length)||0);return m!==0?m:wg(d,f)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===rl.mapValue&&o===rl.mapValue)return 0;if(a===rl.mapValue)return 1;if(o===rl.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=sh(u[m],f[m]);if(g!==0)return g;const v=gi(c[u[m]],d[f[m]]);if(v!==0)return v}return we(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ce(23264,{he:n})}}function vg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=Pr(t),r=Pr(e),s=we(n.seconds,r.seconds);return s!==0?s:we(n.nanos,r.nanos)}function wg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=gi(n[s],r[s]);if(a)return a}return we(n.length,r.length)}function xi(t){return ih(t)}function ih(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Pr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Rr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=ih(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${ih(n.fields[o])}`;return s+"}"}(t.mapValue):ce(61005,{value:t})}function bl(t){switch(Dr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rc(t);return e?16+bl(e):16;case 5:return 2*t.stringValue.length;case 6:return Rr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+bl(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return zr(r.fields,(a,o)=>{s+=a.length+bl(o)}),s}(t.mapValue);default:throw ce(13486,{value:t})}}function ah(t){return!!t&&"integerValue"in t}function Sf(t){return!!t&&"arrayValue"in t}function bg(t){return!!t&&"nullValue"in t}function jg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jl(t){return!!t&&"mapValue"in t}function SN(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sv])==null?void 0:r.stringValue)===iv}function _a(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return zr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_a(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_a(t.arrayValue.values[n]);return e}return{...t}}function IN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===CN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_a(n)}setAll(e){let n=bt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=_a(o):s.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());jl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];jl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){zr(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Bt(_a(this.value))}}function av(t){const e=[];return zr(t.fields,(n,r)=>{const s=new bt([n]);if(jl(r)){const a=av(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n,r,s,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new At(e,0,de.min(),de.min(),de.min(),Bt.empty(),0)}static newFoundDocument(e,n,r,s){return new At(e,1,n,de.min(),r,s,0)}static newNoDocument(e,n){return new At(e,2,n,de.min(),de.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new At(e,3,n,de.min(),de.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n){this.position=e,this.inclusive=n}}function _g(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=gi(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ng(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n="asc"){this.field=e,this.dir=n}}function kN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{}class at extends ov{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new PN(e,n,r):n==="array-contains"?new LN(e,r):n==="in"?new MN(e,r):n==="not-in"?new VN(e,r):n==="array-contains-any"?new ON(e,r):new at(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new RN(e,r):new DN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(gi(n,this.value)):n!==null&&Dr(this.value)===Dr(n)&&this.matchesComparison(gi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends ov{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Dn(e,n)}matches(e){return lv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lv(t){return t.op==="and"}function cv(t){return AN(t)&&lv(t)}function AN(t){for(const e of t.filters)if(e instanceof Dn)return!1;return!0}function oh(t){if(t instanceof at)return t.field.canonicalString()+t.op.toString()+xi(t.value);if(cv(t))return t.filters.map(e=>oh(e)).join(",");{const e=t.filters.map(n=>oh(n)).join(",");return`${t.op}(${e})`}}function uv(t,e){return t instanceof at?function(r,s){return s instanceof at&&r.op===s.op&&r.field.isEqual(s.field)&&Rn(r.value,s.value)}(t,e):t instanceof Dn?function(r,s){return s instanceof Dn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,c)=>a&&uv(o,s.filters[c]),!0):!1}(t,e):void ce(19439)}function dv(t){return t instanceof at?function(n){return`${n.field.canonicalString()} ${n.op} ${xi(n.value)}`}(t):t instanceof Dn?function(n){return n.op.toString()+" {"+n.getFilters().map(dv).join(" ,")+"}"}(t):"Filter"}class PN extends at{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class RN extends at{constructor(e,n){super(e,"in",n),this.keys=hv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DN extends at{constructor(e,n){super(e,"not-in",n),this.keys=hv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class LN extends at{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sf(n)&&eo(n.arrayValue,this.value)}}class MN extends at{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&eo(this.value.arrayValue,n)}}class VN extends at{constructor(e,n){super(e,"not-in",n)}matches(e){if(eo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!eo(this.value.arrayValue,n)}}class ON extends at{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>eo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n=null,r=[],s=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function Eg(t,e=null,n=[],r=[],s=null,a=null,o=null){return new FN(t,e,n,r,s,a,o)}function If(t){const e=he(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>oh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Pc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xi(r)).join(",")),e.Te=n}return e.Te}function kf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ng(t.startAt,e.startAt)&&Ng(t.endAt,e.endAt)}function lh(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n=null,r=[],s=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function BN(t,e,n,r,s,a,o,c){return new Dc(t,e,n,r,s,a,o,c)}function Lc(t){return new Dc(t)}function Tg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function UN(t){return t.collectionGroup!==null}function Na(t){const e=he(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new ct(bt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new ic(a,r))}),n.has(bt.keyField().canonicalString())||e.Ie.push(new ic(bt.keyField(),r))}return e.Ie}function In(t){const e=he(t);return e.Ee||(e.Ee=zN(e,Na(t))),e.Ee}function zN(t,e){if(t.limitType==="F")return Eg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new ic(s.field,a)});const n=t.endAt?new sc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new sc(t.startAt.position,t.startAt.inclusive):null;return Eg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ch(t,e,n){return new Dc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mc(t,e){return kf(In(t),In(e))&&t.limitType===e.limitType}function fv(t){return`${If(In(t))}|lt:${t.limitType}`}function Vs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>dv(s)).join(", ")}]`),Pc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>xi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>xi(s)).join(",")),`Target(${r})`}(In(t))}; limitType=${t.limitType})`}function Vc(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ie.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of Na(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=_g(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,Na(r),s)||r.endAt&&!function(o,c,u){const d=_g(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,Na(r),s))}(t,e)}function $N(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mv(t){return(e,n)=>{let r=!1;for(const s of Na(t)){const a=WN(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function WN(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?gi(u,d):ce(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){zr(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return Jy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=new qe(ie.comparator);function Kn(){return HN}const pv=new qe(ie.comparator);function ua(...t){let e=pv;for(const n of t)e=e.insert(n.key,n);return e}function gv(t){let e=pv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ls(){return Ea()}function xv(){return Ea()}function Ea(){return new Ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const qN=new qe(ie.comparator),QN=new ct(ie.comparator);function be(...t){let e=QN;for(const n of t)e=e.add(n);return e}const GN=new ct(we);function KN(){return GN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(e)?"-0":e}}function yv(t){return{integerValue:""+t}}function YN(t,e){return jN(e)?yv(e):Af(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this._=void 0}}function XN(t,e,n){return t instanceof ac?function(s,a){const o={fields:{[tv]:{stringValue:ev},[rv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Cf(a)&&(a=Rc(a)),a&&(o.fields[nv]=a),{mapValue:o}}(n,e):t instanceof to?wv(t,e):t instanceof no?bv(t,e):function(s,a){const o=vv(s,a),c=Cg(o)+Cg(s.Ae);return ah(o)&&ah(s.Ae)?yv(c):Af(s.serializer,c)}(t,e)}function JN(t,e,n){return t instanceof to?wv(t,e):t instanceof no?bv(t,e):n}function vv(t,e){return t instanceof oc?function(r){return ah(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class ac extends Oc{}class to extends Oc{constructor(e){super(),this.elements=e}}function wv(t,e){const n=jv(e);for(const r of t.elements)n.some(s=>Rn(s,r))||n.push(r);return{arrayValue:{values:n}}}class no extends Oc{constructor(e){super(),this.elements=e}}function bv(t,e){let n=jv(e);for(const r of t.elements)n=n.filter(s=>!Rn(s,r));return{arrayValue:{values:n}}}class oc extends Oc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Cg(t){return Ke(t.integerValue||t.doubleValue)}function jv(t){return Sf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ZN(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof to&&s instanceof to||r instanceof no&&s instanceof no?pi(r.elements,s.elements,Rn):r instanceof oc&&s instanceof oc?Rn(r.Ae,s.Ae):r instanceof ac&&s instanceof ac}(t.transform,e.transform)}class eE{constructor(e,n){this.version=e,this.transformResults=n}}class Ht{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ht}static exists(e){return new Ht(void 0,e)}static updateTime(e){return new Ht(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _l(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fc{}function _v(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Bc(t.key,Ht.none()):new co(t.key,t.data,Ht.none());{const n=t.data,r=Bt.empty();let s=new ct(bt.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new $r(t.key,r,new Jt(s.toArray()),Ht.none())}}function tE(t,e,n){t instanceof co?function(s,a,o){const c=s.value.clone(),u=Ig(s.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof $r?function(s,a,o){if(!_l(s.precondition,a))return void a.convertToUnknownDocument(o.version);const c=Ig(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(Nv(s)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ta(t,e,n,r){return t instanceof co?function(a,o,c,u){if(!_l(a.precondition,o))return c;const d=a.value.clone(),f=kg(a.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof $r?function(a,o,c,u){if(!_l(a.precondition,o))return c;const d=kg(a.fieldTransforms,u,o),f=o.data;return f.setAll(Nv(a)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(a,o,c){return _l(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function nE(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=vv(r.transform,s||null);a!=null&&(n===null&&(n=Bt.empty()),n.set(r.field,a))}return n||null}function Sg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pi(r,s,(a,o)=>ZN(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class co extends Fc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $r extends Fc{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Nv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ig(t,e,n){const r=new Map;Ie(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,c=e.data.field(a.field);r.set(a.field,JN(o,c,n[s]))}return r}function kg(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,XN(a,o,e))}return r}class Bc extends Fc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rE extends Fc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&tE(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ta(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ta(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xv();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(s.key)?null:c;const u=_v(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&pi(this.mutations,e.mutations,(n,r)=>Sg(n,r))&&pi(this.baseMutations,e.baseMutations,(n,r)=>Sg(n,r))}}class Pf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ie(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return qN}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new Pf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,je;function oE(t){switch(t){case z.OK:return ce(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ce(15467,{code:t})}}function Ev(t){if(t===void 0)return Gn("GRPC error has no .code"),z.UNKNOWN;switch(t){case et.OK:return z.OK;case et.CANCELLED:return z.CANCELLED;case et.UNKNOWN:return z.UNKNOWN;case et.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case et.INTERNAL:return z.INTERNAL;case et.UNAVAILABLE:return z.UNAVAILABLE;case et.UNAUTHENTICATED:return z.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case et.NOT_FOUND:return z.NOT_FOUND;case et.ALREADY_EXISTS:return z.ALREADY_EXISTS;case et.PERMISSION_DENIED:return z.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case et.ABORTED:return z.ABORTED;case et.OUT_OF_RANGE:return z.OUT_OF_RANGE;case et.UNIMPLEMENTED:return z.UNIMPLEMENTED;case et.DATA_LOSS:return z.DATA_LOSS;default:return ce(39323,{code:t})}}(je=et||(et={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=new Tr([4294967295,4294967295],0);function Ag(t){const e=lE().encode(t),n=new Uy;return n.update(e),new Uint8Array(n.digest())}function Pg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Tr([n,r],0),new Tr([s,a],0)]}class Rf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new da(`Invalid padding: ${n}`);if(r<0)throw new da(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new da(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new da(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Tr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Tr.fromNumber(r)));return s.compare(cE)===1&&(s=new Tr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ag(e),[r,s]=Pg(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Rf(a,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=Ag(e),[r,s]=Pg(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class da extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,uo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uc(de.min(),s,new qe(we),Kn(),be())}}class uo{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new uo(r,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Tv{constructor(e,n){this.targetId=e,this.Ce=n}}class Cv{constructor(e,n,r=Nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Rg{constructor(){this.ve=0,this.Fe=Dg(),this.Me=Nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),n=be(),r=be();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ce(38017,{changeType:a})}}),new uo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Dg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ie(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uE{constructor(e){this.Ge=e,this.ze=new Map,this.je=Kn(),this.Je=sl(),this.He=sl(),this.Ye=new qe(we)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ce(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(lh(a))if(r===0){const o=new ie(a.path);this.et(n,o,At.newNoDocument(o,de.min()))}else Ie(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,c;try{o=Rr(r).toUint8Array()}catch(u){if(u instanceof Zy)return mi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Rf(o,s,a)}catch(u){return mi(u instanceof da?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,o)=>{const c=this.ot(o);if(c){if(a.current&&lh(c.target)){const u=new ie(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,At.newNoDocument(u,e))}a.Be&&(n.set(o,a.ke()),a.qe())}});let r=be();this.He.forEach((a,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const s=new Uc(e,n,this.Ye,this.je,r);return this.je=Kn(),this.Je=sl(),this.He=sl(),this.Ye=new qe(we),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Rg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ct(we),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ct(we),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rg),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function sl(){return new qe(ie.comparator)}function Dg(){return new qe(ie.comparator)}const dE={asc:"ASCENDING",desc:"DESCENDING"},hE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fE={and:"AND",or:"OR"};class mE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function uh(t,e){return t.useProto3Json||Pc(e)?e:{value:e}}function lc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pE(t,e){return lc(t,e.toTimestamp())}function kn(t){return Ie(!!t,49232),de.fromTimestamp(function(n){const r=Pr(n);return new Ve(r.seconds,r.nanos)}(t))}function Df(t,e){return dh(t,e).canonicalString()}function dh(t,e){const n=function(s){return new Me(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Iv(t){const e=Me.fromString(t);return Ie(Dv(e),10190,{key:e.toString()}),e}function hh(t,e){return Df(t.databaseId,e.path)}function qu(t,e){const n=Iv(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(Av(n))}function kv(t,e){return Df(t.databaseId,e)}function gE(t){const e=Iv(t);return e.length===4?Me.emptyPath():Av(e)}function fh(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Av(t){return Ie(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Lg(t,e,n){return{name:hh(t,e),fields:n.value.mapValue.fields}}function xE(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ce(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(d,f){return d.useProto3Json?(Ie(f===void 0||typeof f=="string",58123),Nt.fromBase64String(f||"")):(Ie(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Nt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?z.UNKNOWN:Ev(d.code);return new Z(f,d.message||"")}(o);n=new Cv(r,s,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=qu(t,r.document.name),a=kn(r.document.updateTime),o=r.document.createTime?kn(r.document.createTime):de.min(),c=new Bt({mapValue:{fields:r.document.fields}}),u=At.newFoundDocument(s,a,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Nl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=qu(t,r.document),a=r.readTime?kn(r.readTime):de.min(),o=At.newNoDocument(s,a),c=r.removedTargetIds||[];n=new Nl([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=qu(t,r.document),a=r.removedTargetIds||[];n=new Nl([],a,s,null)}else{if(!("filter"in e))return ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new aE(s,a),c=r.targetId;n=new Tv(c,o)}}return n}function yE(t,e){let n;if(e instanceof co)n={update:Lg(t,e.key,e.value)};else if(e instanceof Bc)n={delete:hh(t,e.key)};else if(e instanceof $r)n={update:Lg(t,e.key,e.data),updateMask:CE(e.fieldMask)};else{if(!(e instanceof rE))return ce(16599,{Vt:e.type});n={verify:hh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const c=o.transform;if(c instanceof ac)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof to)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof no)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof oc)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ce(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:pE(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ce(27497)}(t,e.precondition)),n}function vE(t,e){return t&&t.length>0?(Ie(e!==void 0,14353),t.map(n=>function(s,a){let o=s.updateTime?kn(s.updateTime):kn(a);return o.isEqual(de.min())&&(o=kn(a)),new eE(o,s.transformResults||[])}(n,e))):[]}function wE(t,e){return{documents:[kv(t,e.path)]}}function bE(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kv(t,s);const a=function(d){if(d.length!==0)return Rv(Dn.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Os(g.field),direction:NE(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=uh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function jE(t){let e=gE(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ie(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=function(m){const g=Pv(m);return g instanceof Dn&&cv(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(T){return new ic(Fs(T.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,Pc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,v=m.values||[];return new sc(v,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,v=m.values||[];return new sc(v,g)}(n.endAt)),BN(e,s,o,a,c,"F",u,d)}function _E(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Pv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fs(n.unaryFilter.field);return at.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Fs(n.unaryFilter.field);return at.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Fs(n.unaryFilter.field);return at.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Fs(n.unaryFilter.field);return at.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ce(61313);default:return ce(60726)}}(t):t.fieldFilter!==void 0?function(n){return at.create(Fs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ce(58110);default:return ce(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dn.create(n.compositeFilter.filters.map(r=>Pv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ce(1026)}}(n.compositeFilter.op))}(t):ce(30097,{filter:t})}function NE(t){return dE[t]}function EE(t){return hE[t]}function TE(t){return fE[t]}function Os(t){return{fieldPath:t.canonicalString()}}function Fs(t){return bt.fromServerFormat(t.fieldPath)}function Rv(t){return t instanceof at?function(n){if(n.op==="=="){if(jg(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NAN"}};if(bg(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jg(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NAN"}};if(bg(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(n.field),op:EE(n.op),value:n.value}}}(t):t instanceof Dn?function(n){const r=n.getFilters().map(s=>Rv(s));return r.length===1?r[0]:{compositeFilter:{op:TE(n.op),filters:r}}}(t):ce(54877,{filter:t})}function CE(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Dv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,r,s,a=de.min(),o=de.min(),c=Nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e){this.yt=e}}function IE(t){const e=jE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ch(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(){this.Cn=new AE}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Ar.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Ar.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class AE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ct(Me.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ct(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lv=41943040;class Ot{static withCacheSize(e){return new Ot(e,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ot.DEFAULT_COLLECTION_PERCENTILE=10,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ot.DEFAULT=new Ot(Lv,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ot.DISABLED=new Ot(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new yi(0)}static cr(){return new yi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="LruGarbageCollector",PE=1048576;function Og([t,e],[n,r]){const s=we(t,n);return s===0?we(e,r):s}class RE{constructor(e){this.Ir=e,this.buffer=new ct(Og),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Og(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class DE{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){X(Vg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Si(n)?X(Vg,"Ignoring IndexedDB error during garbage collection: ",n):await Ci(n)}await this.Vr(3e5)})}}class LE{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Ac.ce);const r=new RE(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(Mg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mg):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,a,o,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(a=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Ms()<=_e.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:m})))}}function ME(t,e){return new LE(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.changes=new Ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ta(r.mutation,s,Jt.empty(),Ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=be()){const s=ls();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=ua();return a.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ls();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,be()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let a=Kn();const o=Ea(),c=function(){return Ea()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof $r)?a=a.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Ta(f.mutation,d,f.mutation.getFieldMask(),Ve.now())):o.set(d.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>c.set(d,new OE(f,o.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=Ea();let s=new qe((o,c)=>o-c),a=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Jt.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(s.get(c.batchId)||be()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=xv();f.forEach(g=>{if(!a.has(g)){const v=_v(n.get(g),r.get(g));v!==null&&m.set(g,v),a=a.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):UN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):B.resolve(ls());let c=Xa,u=a;return o.next(d=>B.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),a.get(f)?B.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,be())).next(f=>({batchId:c,changes:gv(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let s=ua();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=ua();return this.indexManager.getCollectionParents(e,a).next(c=>B.forEach(c,u=>{const d=function(m,g){return new Dc(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,At.newInvalidDocument(f)))});let c=ua();return o.forEach((u,d)=>{const f=a.get(u);f!==void 0&&Ta(f.mutation,d,Jt.empty(),Ve.now()),Vc(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:kn(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:IE(s.bundledQuery),readTime:kn(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(){this.overlays=new qe(ie.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ls();return B.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.St(e,n,a)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=ls(),a=n.length+1,o=new ie(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&s.set(u.getKey(),u)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new qe((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=a.get(d.largestBatchId);f===null&&(f=ls(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=ls(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return B.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new iE(n,r));let a=this.qr.get(n);a===void 0&&(a=be(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(){this.Qr=new ct(ft.$r),this.Ur=new ct(ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ft(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new ft(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ie(new Me([])),r=new ft(n,e),s=new ft(n,e+1),a=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),a.push(o.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ie(new Me([])),r=new ft(n,e),s=new ft(n,e+1);let a=be();return this.Ur.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new ft(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ie.comparator(e.key,n.key)||we(e.Yr,n.Yr)}static Kr(e,n){return we(e.Yr,n.Yr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ct(ft.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sE(a,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new ft(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),a=s<0?0:s;return B.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Tf:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),s=new ft(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],o=>{const c=this.Xr(o.Yr);a.push(c)}),B.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ct(we);return n.forEach(s=>{const a=new ft(s,0),o=new ft(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],c=>{r=r.add(c.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;ie.isDocumentKey(a)||(a=a.child(""));const o=new ft(new ie(a),0);let c=new ct(we);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},o),B.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ie(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,s=>{const a=new ft(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new ft(n,0),s=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.ri=e,this.docs=function(){return new qe(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():At.newInvalidDocument(n))}getEntries(e,n){let r=Kn();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():At.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Kn();const o=n.path,c=new ie(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||yN(xN(f),r)<=0||(s.has(f.key)||Vc(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return B.resolve(a)}getAllFromCollectionGroup(e,n,r,s){ce(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new HE(this)}getSize(e){return B.resolve(this.size)}}class HE extends VE{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.persistence=e,this.si=new Ns(n=>If(n),kf),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.oi=0,this._i=new Lf,this.targetCount=0,this.ai=yi.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new yi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),B.waitFor(a).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ac(0),this.li=!1,this.li=!0,this.hi=new zE,this.referenceDelegate=e(this),this.Pi=new qE(this),this.indexManager=new kE,this.remoteDocumentCache=function(s){return new WE(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new SE(n),this.Ii=new BE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new $E(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new QE(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class QE extends wN{constructor(e){super(),this.currentSequenceNumber=e}}class Mf{constructor(e){this.persistence=e,this.Ri=new Lf,this.Vi=null}static mi(e){return new Mf(e)}get fi(){if(this.Vi)return this.Vi;throw ce(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const s=ie.fromPath(r);return this.gi(e,s).next(a=>{a||n.removeEntry(s,de.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class cc{constructor(e,n){this.persistence=e,this.pi=new Ns(r=>_N(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=ME(this,n)}static mi(e,n){return new cc(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,s)=>this.br(e,r,s).next(a=>a?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(c=>{c||(r++,a.removeEntry(o,de.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=bl(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=be(),s=be();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Vf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Fj()?8:bN(Vj())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ys(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ws(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new GE;return this.Ss(e,n,o).next(c=>{if(a.result=c,this.Vs)return this.bs(e,n,o,c.size)})}).next(()=>a.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ms()<=_e.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Vs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(Ms()<=_e.DEBUG&&X("QueryEngine","Query:",Vs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ms()<=_e.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Vs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):B.resolve())}ys(e,n){if(Tg(n))return B.resolve(null);let r=In(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ch(n,null,"F"),r=In(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=be(...a);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,ch(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return Tg(n)||s.isEqual(de.min())?B.resolve(null):this.ps.getDocuments(e,r).next(a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,s)?B.resolve(null):(Ms()<=_e.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vs(n)),this.vs(e,o,n,gN(s,Xa)).next(c=>c))})}Ds(e,n){let r=new ct(mv(e));return n.forEach((s,a)=>{Vc(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return Ms()<=_e.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Vs(n)),this.ps.getDocumentsMatchingQuery(e,n,Ar.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="LocalStore",YE=3e8;class XE{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new qe(we),this.xs=new Ns(a=>If(a),kf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FE(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function JE(t,e,n,r){return new XE(t,e,n,r)}async function Vv(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],c=[];let u=be();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of a){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:c}))})})}function ZE(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let v=B.resolve();return g.forEach(T=>{v=v.next(()=>f.getEntry(u,T)).next(E=>{const k=d.docVersions.get(T);Ie(k!==null,48541),E.version.compareTo(k)<0&&(m.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),f.addEntry(E)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=be();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Ov(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function eT(t,e){const n=he(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;c.push(n.Pi.removeMatchingKeys(a,f.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(a,f.addedDocuments,m)));let v=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(Nt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),s=s.insert(m,v),function(E,k,j){return E.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=YE?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(g,v,f)&&c.push(n.Pi.updateTargetData(a,v))});let u=Kn(),d=be();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))}),c.push(tT(a,o,e.documentUpdates).next(f=>{u=f.ks,d=f.qs})),!r.isEqual(de.min())){const f=n.Pi.getLastRemoteSnapshotVersion(a).next(m=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));c.push(f)}return B.waitFor(c).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.Ms=s,a))}function tT(t,e,n){let r=be(),s=be();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Kn();return n.forEach((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(de.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):X(Of,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:s}})}function nT(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Tf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rT(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(a=>a?(s=a,B.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new mr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function mh(t,e,n){const r=he(t),s=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Si(o))throw o;X(Of,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Fg(t,e,n){const r=he(t);let s=de.min(),a=be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=he(u),g=m.xs.get(f);return g!==void 0?B.resolve(m.Ms.get(g)):m.Pi.getTargetData(d,f)}(r,o,In(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{a=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:de.min(),n?a:be())).next(c=>(sT(r,$N(e),c),{documents:c,Qs:a})))}function sT(t,e,n){let r=t.Os.get(e)||de.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class Bg{constructor(){this.activeTargetIds=KN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iT{constructor(){this.Mo=new Bg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Bg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="ConnectivityMonitor";class zg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(Ug,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){X(Ug,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let il=null;function ph(){return il===null?il=function(){return 268435456+Math.round(2147483648*Math.random())}():il++,"0x"+il.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu="RestConnection",oT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lT{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===nc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,a){const o=ph(),c=this.zo(e,n.toUriEncodedString());X(Qu,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,a);const{host:d}=new URL(c),f=bf(d);return this.Jo(e,c,u,r,f).then(m=>(X(Qu,`Received RPC '${e}' ${o}: `,m),m),m=>{throw mi(Qu,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m})}Ho(e,n,r,s,a,o){return this.Go(e,n,r,s,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ti}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}zo(e,n){const r=oT[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection";class uT extends lT{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const o=ph();return new Promise((c,u)=>{const d=new zy;d.setWithCredentials(!0),d.listenOnce($y.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case wl.NO_ERROR:const m=d.getResponseJson();X(St,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case wl.TIMEOUT:X(St,`RPC '${e}' ${o} timed out`),u(new Z(z.DEADLINE_EXCEEDED,"Request time out"));break;case wl.HTTP_ERROR:const g=d.getStatus();if(X(St,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const T=v==null?void 0:v.error;if(T&&T.status&&T.message){const E=function(j){const y=j.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(y)>=0?y:z.UNKNOWN}(T.status);u(new Z(E,T.message))}else u(new Z(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Z(z.UNAVAILABLE,"Connection failed."));break;default:ce(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{X(St,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);X(St,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}T_(e,n,r){const s=ph(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qy(),c=Hy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=a.join("");X(St,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);this.I_(m);let g=!1,v=!1;const T=new cT({Yo:k=>{v?X(St,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(g||(X(St,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),X(St,`RPC '${e}' stream ${s} sending:`,k),m.send(k))},Zo:()=>m.close()}),E=(k,j,y)=>{k.listen(j,_=>{try{y(_)}catch(S){setTimeout(()=>{throw S},0)}})};return E(m,ca.EventType.OPEN,()=>{v||(X(St,`RPC '${e}' stream ${s} transport opened.`),T.o_())}),E(m,ca.EventType.CLOSE,()=>{v||(v=!0,X(St,`RPC '${e}' stream ${s} transport closed`),T.a_(),this.E_(m))}),E(m,ca.EventType.ERROR,k=>{v||(v=!0,mi(St,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),T.a_(new Z(z.UNAVAILABLE,"The operation could not be completed")))}),E(m,ca.EventType.MESSAGE,k=>{var j;if(!v){const y=k.data[0];Ie(!!y,16349);const _=y,S=(_==null?void 0:_.error)||((j=_[0])==null?void 0:j.error);if(S){X(St,`RPC '${e}' stream ${s} received error:`,S);const R=S.status;let L=function(b){const C=et[b];if(C!==void 0)return Ev(C)}(R),w=S.message;L===void 0&&(L=z.INTERNAL,w="Unknown error status: "+R+" with message "+S.message),v=!0,T.a_(new Z(L,w)),m.close()}else X(St,`RPC '${e}' stream ${s} received:`,y),T.u_(y)}}),E(c,Wy.STAT_EVENT,k=>{k.stat===rh.PROXY?X(St,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===rh.NOPROXY&&X(St,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Gu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t){return new mE(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="PersistentStream";class Bv{constructor(e,n,r,s,a,o,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Fv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Z(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return X($g,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(X($g,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dT extends Bv{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xE(this.serializer,e),r=function(a){if(!("targetChange"in a))return de.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?kn(o.readTime):de.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=fh(this.serializer),n.addTarget=function(a,o){let c;const u=o.target;if(c=lh(u)?{documents:wE(a,u)}:{query:bE(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Sv(a,o.resumeToken);const d=uh(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(de.min())>0){c.readTime=lc(a,o.snapshotVersion.toTimestamp());const d=uh(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=_E(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=fh(this.serializer),n.removeTarget=e,this.q_(n)}}class hT extends Bv{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=vE(e.writeResults,e.commitTime),r=kn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=fh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yE(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{}class mT extends fT{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Go(e,dh(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(z.UNKNOWN,a.toString())})}Ho(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,dh(n,r),s,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class pT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(n),this.aa=!1):X("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="RemoteStore";class gT{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Es(this)&&(X(ys,"Restarting streams for network reachability change."),await async function(u){const d=he(u);d.Ea.add(4),await ho(d),d.Ra.set("Unknown"),d.Ea.delete(4),await $c(d)}(this))})}),this.Ra=new pT(r,s)}}async function $c(t){if(Es(t))for(const e of t.da)await e(!0)}async function ho(t){for(const e of t.da)await e(!1)}function Uv(t,e){const n=he(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zf(n)?Uf(n):Ii(n).O_()&&Bf(n,e))}function Ff(t,e){const n=he(t),r=Ii(n);n.Ia.delete(e),r.O_()&&zv(n,e),n.Ia.size===0&&(r.O_()?r.L_():Es(n)&&n.Ra.set("Unknown"))}function Bf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ii(t).Y_(e)}function zv(t,e){t.Va.Ue(e),Ii(t).Z_(e)}function Uf(t){t.Va=new uE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ii(t).start(),t.Ra.ua()}function zf(t){return Es(t)&&!Ii(t).x_()&&t.Ia.size>0}function Es(t){return he(t).Ea.size===0}function $v(t){t.Va=void 0}async function xT(t){t.Ra.set("Online")}async function yT(t){t.Ia.forEach((e,n)=>{Bf(t,e)})}async function vT(t,e){$v(t),zf(t)?(t.Ra.ha(e),Uf(t)):t.Ra.set("Unknown")}async function wT(t,e,n){if(t.Ra.set("Online"),e instanceof Cv&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const c of a.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){X(ys,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await uc(t,r)}else if(e instanceof Nl?t.Va.Ze(e):e instanceof Tv?t.Va.st(e):t.Va.tt(e),!n.isEqual(de.min()))try{const r=await Ov(t.localStore);n.compareTo(r)>=0&&await function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=a.Ia.get(d);f&&a.Ia.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=a.Ia.get(u);if(!f)return;a.Ia.set(u,f.withResumeToken(Nt.EMPTY_BYTE_STRING,f.snapshotVersion)),zv(a,u);const m=new mr(f.target,u,d,f.sequenceNumber);Bf(a,m)}),a.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){X(ys,"Failed to raise snapshot:",r),await uc(t,r)}}async function uc(t,e,n){if(!Si(e))throw e;t.Ea.add(1),await ho(t),t.Ra.set("Offline"),n||(n=()=>Ov(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X(ys,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await $c(t)})}function Wv(t,e){return e().catch(n=>uc(t,n,e))}async function Wc(t){const e=he(t),n=Lr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Tf;for(;bT(e);)try{const s=await nT(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,jT(e,s)}catch(s){await uc(e,s)}Hv(e)&&qv(e)}function bT(t){return Es(t)&&t.Ta.length<10}function jT(t,e){t.Ta.push(e);const n=Lr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Hv(t){return Es(t)&&!Lr(t).x_()&&t.Ta.length>0}function qv(t){Lr(t).start()}async function _T(t){Lr(t).ra()}async function NT(t){const e=Lr(t);for(const n of t.Ta)e.ea(n.mutations)}async function ET(t,e,n){const r=t.Ta.shift(),s=Pf.from(r,e,n);await Wv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Wc(t)}async function TT(t,e){e&&Lr(t).X_&&await async function(r,s){if(function(o){return oE(o)&&o!==z.ABORTED}(s.code)){const a=r.Ta.shift();Lr(r).B_(),await Wv(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Wc(r)}}(t,e),Hv(t)&&qv(t)}async function Wg(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),X(ys,"RemoteStore received new credentials");const r=Es(n);n.Ea.add(3),await ho(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await $c(n)}async function CT(t,e){const n=he(t);e?(n.Ea.delete(2),await $c(n)):e||(n.Ea.add(2),await ho(n),n.Ra.set("Unknown"))}function Ii(t){return t.ma||(t.ma=function(n,r,s){const a=he(n);return a.sa(),new dT(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:xT.bind(null,t),t_:yT.bind(null,t),r_:vT.bind(null,t),H_:wT.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),zf(t)?Uf(t):t.Ra.set("Unknown")):(await t.ma.stop(),$v(t))})),t.ma}function Lr(t){return t.fa||(t.fa=function(n,r,s){const a=he(n);return a.sa(),new hT(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_T.bind(null,t),r_:TT.bind(null,t),ta:NT.bind(null,t),na:ET.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Wc(t)):(await t.fa.stop(),t.Ta.length>0&&(X(ys,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,c=new $f(e,n,o,s,a);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wf(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),Si(t))return new Z(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{static emptySet(e){return new ii(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=ua(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ii)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ii;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(){this.ga=new qe(ie.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class vi{constructor(e,n,r,s,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new vi(e,n,ii.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class IT{constructor(){this.queries=qg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=he(n),a=s.queries;s.queries=qg(),a.forEach((o,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new Z(z.ABORTED,"Firestore shutting down"))}}function qg(){return new Ns(t=>fv(t),Mc)}async function Qv(t,e){const n=he(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new ST,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Wf(o,`Initialization of query '${Vs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&Hf(n)}async function Gv(t,e){const n=he(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kT(t,e){const n=he(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&Hf(n)}function AT(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function Hf(t){t.Ca.forEach(e=>{e.next()})}var gh,Qg;(Qg=gh||(gh={})).Ma="default",Qg.Cache="cache";class Kv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new vi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=vi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this.key=e}}class Xv{constructor(e){this.key=e}}class PT{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=be(),this.mutatedKeys=be(),this.eu=mv(e),this.tu=new ii(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Hg,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),v=Vc(this.query,m)?m:null,T=!!g&&this.mutatedKeys.has(g.key),E=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let k=!1;g&&v?g.data.isEqual(v.data)?T!==E&&(r.track({type:3,doc:v}),k=!0):this.su(g,v)||(r.track({type:2,doc:v}),k=!0,(u&&this.eu(v,u)>0||d&&this.eu(v,d)<0)&&(c=!0)):!g&&v?(r.track({type:0,doc:v}),k=!0):g&&!v&&(r.track({type:1,doc:g}),k=!0,(u||d)&&(c=!0)),k&&(v?(o=o.add(v),a=E?a.add(f):a.delete(f)):(o=o.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,m)=>function(v,T){const E=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce(20277,{Rt:k})}};return E(v)-E(T)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new vi(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=be(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Xv(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Yv(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return vi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qf="SyncEngine";class RT{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class DT{constructor(e){this.key=e,this.hu=!1}}class LT{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ns(c=>fv(c),Mc),this.Iu=new Map,this.Eu=new Set,this.du=new qe(ie.comparator),this.Au=new Map,this.Ru=new Lf,this.Vu={},this.mu=new Map,this.fu=yi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MT(t,e,n=!0){const r=r1(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await Jv(r,e,n,!0),s}async function VT(t,e){const n=r1(t);await Jv(n,e,!0,!1)}async function Jv(t,e,n,r){const s=await rT(t.localStore,In(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await OT(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Uv(t.remoteStore,s),c}async function OT(t,e,n,r,s){t.pu=(m,g,v)=>async function(E,k,j,y){let _=k.view.ru(j);_.Cs&&(_=await Fg(E.localStore,k.query,!1).then(({documents:w})=>k.view.ru(w,_)));const S=y&&y.targetChanges.get(k.targetId),R=y&&y.targetMismatches.get(k.targetId)!=null,L=k.view.applyChanges(_,E.isPrimaryClient,S,R);return Kg(E,k.targetId,L.au),L.snapshot}(t,m,g,v);const a=await Fg(t.localStore,e,!0),o=new PT(e,a.Qs),c=o.ru(a.documents),u=uo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);Kg(t,n,d.au);const f=new RT(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function FT(t,e,n){const r=he(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(o=>!Mc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await mh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ff(r.remoteStore,s.targetId),xh(r,s.targetId)}).catch(Ci)):(xh(r,s.targetId),await mh(r.localStore,s.targetId,!0))}async function BT(t,e){const n=he(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ff(n.remoteStore,r.targetId))}async function UT(t,e,n){const r=GT(t);try{const s=await function(o,c){const u=he(o),d=Ve.now(),f=c.reduce((v,T)=>v.add(T.key),be());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=Kn(),E=be();return u.Ns.getEntries(v,f).next(k=>{T=k,T.forEach((j,y)=>{y.isValidDocument()||(E=E.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,T)).next(k=>{m=k;const j=[];for(const y of c){const _=nE(y,m.get(y.key).overlayedDocument);_!=null&&j.push(new $r(y.key,_,av(_.value.mapValue),Ht.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,j,c)}).next(k=>{g=k;const j=k.applyToLocalDocumentSet(m,E);return u.documentOverlayCache.saveOverlays(v,k.batchId,j)})}).then(()=>({batchId:g.batchId,changes:gv(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new qe(we)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await fo(r,s.changes),await Wc(r.remoteStore)}catch(s){const a=Wf(s,"Failed to persist write");n.reject(a)}}async function Zv(t,e){const n=he(t);try{const r=await eT(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Au.get(a);o&&(Ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ie(o.hu,14607):s.removedDocuments.size>0&&(Ie(o.hu,42227),o.hu=!1))}),await fo(n,r,e)}catch(r){await Ci(r)}}function Gg(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((a,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=he(o);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.Sa)g.va(c)&&(d=!0)}),d&&Hf(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zT(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let o=new qe(ie.comparator);o=o.insert(a,At.newNoDocument(a,de.min()));const c=be().add(a),u=new Uc(de.min(),new Map,new qe(we),o,c);await Zv(r,u),r.du=r.du.remove(a),r.Au.delete(e),Qf(r)}else await mh(r.localStore,e,!1).then(()=>xh(r,e,n)).catch(Ci)}async function $T(t,e){const n=he(t),r=e.batch.batchId;try{const s=await ZE(n.localStore,e);t1(n,r,null),e1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fo(n,s)}catch(s){await Ci(s)}}async function WT(t,e,n){const r=he(t);try{const s=await function(o,c){const u=he(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(Ie(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);t1(r,e,n),e1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fo(r,s)}catch(s){await Ci(s)}}function e1(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function t1(t,e,n){const r=he(t);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function xh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||n1(t,r)})}function n1(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ff(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Qf(t))}function Kg(t,e,n){for(const r of n)r instanceof Yv?(t.Ru.addReference(r.key,e),HT(t,r)):r instanceof Xv?(X(qf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||n1(t,r.key)):ce(19791,{wu:r})}function HT(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(X(qf,"New document in limbo: "+n),t.Eu.add(r),Qf(t))}function Qf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ie(Me.fromString(e)),r=t.fu.next();t.Au.set(r,new DT(n)),t.du=t.du.insert(n,r),Uv(t.remoteStore,new mr(In(Lc(n.path)),r,"TargetPurposeLimboResolution",Ac.ce))}}async function fo(t,e,n){const r=he(t),s=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Vf.As(u.targetId,d);a.push(m)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,d){const f=he(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>B.forEach(d,g=>B.forEach(g.Es,v=>f.persistence.referenceDelegate.addReference(m,g.targetId,v)).next(()=>B.forEach(g.ds,v=>f.persistence.referenceDelegate.removeReference(m,g.targetId,v)))))}catch(m){if(!Si(m))throw m;X(Of,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const v=f.Ms.get(g),T=v.snapshotVersion,E=v.withLastLimboFreeSnapshotVersion(T);f.Ms=f.Ms.insert(g,E)}}}(r.localStore,a))}async function qT(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){X(qf,"User change. New user:",e.toKey());const r=await Vv(n.localStore,e);n.currentUser=e,function(a,o){a.mu.forEach(c=>{c.forEach(u=>{u.reject(new Z(z.CANCELLED,o))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fo(n,r.Ls)}}function QT(t,e){const n=he(t),r=n.Au.get(e);if(r&&r.hu)return be().add(r.key);{let s=be();const a=n.Iu.get(e);if(!a)return s;for(const o of a){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function r1(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zT.bind(null,e),e.Pu.H_=kT.bind(null,e.eventManager),e.Pu.yu=AT.bind(null,e.eventManager),e}function GT(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$T.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WT.bind(null,e),e}class dc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return JE(this.persistence,new KE,e.initialUser,this.serializer)}Cu(e){return new Mv(Mf.mi,this.serializer)}Du(e){return new iT}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dc.provider={build:()=>new dc};class KT extends dc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ie(this.persistence.referenceDelegate instanceof cc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new DE(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ot.withCacheSize(this.cacheSizeBytes):Ot.DEFAULT;return new Mv(r=>cc.mi(r,n),this.serializer)}}class yh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Gg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qT.bind(null,this.syncEngine),await CT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IT}()}createDatastore(e){const n=zc(e.databaseInfo.databaseId),r=function(a){return new uT(a)}(e.databaseInfo);return function(a,o,c,u){return new mT(a,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,c){return new gT(r,s,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Gg(this.syncEngine,n,0),function(){return zg.v()?new zg:new aT}())}createSyncEngine(e,n){return function(s,a,o,c,u,d,f){const m=new LT(s,a,o,c,u,d);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=he(s);X(ys,"RemoteStore shutting down."),a.Ea.add(5),await ho(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}yh.provider={build:()=>new yh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="FirestoreClient";class YT{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=It.UNAUTHENTICATED,this.clientId=Nf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{X(Mr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X(Mr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Wf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ku(t,e){t.asyncQueue.verifyOperationInProgress(),X(Mr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Vv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Yg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await XT(t);X(Mr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Wg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Wg(e.remoteStore,s)),t._onlineComponents=e}async function XT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(Mr,"Using user provided OfflineComponentProvider");try{await Ku(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;mi("Error using user provided cache. Falling back to memory cache: "+n),await Ku(t,new dc)}}else X(Mr,"Using default OfflineComponentProvider"),await Ku(t,new KT(void 0));return t._offlineComponents}async function i1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(Mr,"Using user provided OnlineComponentProvider"),await Yg(t,t._uninitializedComponentsProvider._online)):(X(Mr,"Using default OnlineComponentProvider"),await Yg(t,new yh))),t._onlineComponents}function JT(t){return i1(t).then(e=>e.syncEngine)}async function vh(t){const e=await i1(t),n=e.eventManager;return n.onListen=MT.bind(null,e.syncEngine),n.onUnlisten=FT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=VT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BT.bind(null,e.syncEngine),n}function ZT(t,e,n={}){const r=new Cr;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const f=new s1({next:g=>{f.Nu(),o.enqueueAndForget(()=>Gv(a,m));const v=g.docs.has(c);!v&&g.fromCache?d.reject(new Z(z.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&u&&u.source==="server"?d.reject(new Z(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Kv(Lc(c.path),f,{includeMetadataChanges:!0,qa:!0});return Qv(a,m)}(await vh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="firestore.googleapis.com",Jg=!0;class Zg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Z(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=o1,this.ssl=Jg}else this.host=e.host,this.ssl=e.ssl??Jg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Lv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PE)throw new Z(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iN;switch(r.type){case"firstParty":return new cN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xg.get(n);r&&(X("ComponentProvider","Removing Datastore"),Xg.delete(n),r.terminate())}(this),Promise.resolve()}}function e4(t,e,n,r={}){var d;t=cn(t,Hc);const s=bf(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Pj(`https://${c}`),Mj("Firestore",!0)),a.host!==o1&&a.host!==c&&mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:s,emulatorOptions:r};if(!Jl(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=It.MOCK_USER;else{f=Rj(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Z(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new It(g)}t._authCredentials=new aN(new Gy(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qc(this.firestore,e,this._query)}}class Xe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xe(this.firestore,e,this._key)}toJSON(){return{type:Xe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(lo(n,Xe._jsonSchema))return new Xe(e,r||null,new ie(Me.fromString(n.referencePath)))}}Xe._jsonSchemaVersion="firestore/documentReference/1.0",Xe._jsonSchema={type:rt("string",Xe._jsonSchemaVersion),referencePath:rt("string")};class Sr extends qc{constructor(e,n,r){super(e,n,Lc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xe(this.firestore,null,new ie(e))}withConverter(e){return new Sr(this.firestore,e,this._path)}}function t4(t,e,...n){if(t=vn(t),Ky("collection","path",e),t instanceof Hc){const r=Me.fromString(e,...n);return fg(r),new Sr(t,null,r)}{if(!(t instanceof Xe||t instanceof Sr))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return fg(r),new Sr(t.firestore,null,r)}}function na(t,e,...n){if(t=vn(t),arguments.length===1&&(e=Nf.newId()),Ky("doc","path",e),t instanceof Hc){const r=Me.fromString(e,...n);return hg(r),new Xe(t,null,new ie(r))}{if(!(t instanceof Xe||t instanceof Sr))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return hg(r),new Xe(t.firestore,t instanceof Sr?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="AsyncQueue";class t0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Fv(this,"async_queue_retry"),this._c=()=>{const r=Gu();r&&X(e0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Gu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Gu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Cr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Si(e))throw e;X(e0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",n0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=$f.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&ce(47125,{Pc:n0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function n0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Vr extends Hc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new t0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new t0(e),this._firestoreClient=void 0,await e}}}function s0(t,e){const n=typeof t=="object"?t:q_(),r=typeof t=="string"?t:nc,s=U_(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=kj("firestore");a&&e4(s,...a)}return s}function Qc(t){if(t._terminated)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||n4(t),t._firestoreClient}function n4(t){var r,s,a;const e=t._freezeSettings(),n=function(c,u,d,f){return new TN(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,a1(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new YT(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this._byteString=e}static fromBase64String(e){try{return new an(Nt.fromBase64String(e))}catch(n){throw new Z(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new an(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:an._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(lo(e,an._jsonSchema))return an.fromBase64String(e.bytes)}}an._jsonSchemaVersion="firestore/bytes/1.0",an._jsonSchema={type:rt("string",an._jsonSchemaVersion),bytes:rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:An._jsonSchemaVersion}}static fromJSON(e){if(lo(e,An._jsonSchema))return new An(e.latitude,e.longitude)}}An._jsonSchemaVersion="firestore/geoPoint/1.0",An._jsonSchema={type:rt("string",An._jsonSchemaVersion),latitude:rt("number"),longitude:rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Pn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(lo(e,Pn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Pn(e.vectorValues);throw new Z(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pn._jsonSchemaVersion="firestore/vectorValue/1.0",Pn._jsonSchema={type:rt("string",Pn._jsonSchemaVersion),vectorValues:rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=/^__.*__$/;class s4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $r(e,this.data,this.fieldMask,n,this.fieldTransforms):new co(e,this.data,n,this.fieldTransforms)}}class l1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $r(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function c1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce(40011,{Ac:t})}}class Kf{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(c1(this.Ac)&&r4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class i4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zc(e)}Cc(e,n,r,s=!1){return new Kf({Ac:e,methodName:n,Dc:r,path:bt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yf(t){const e=t._freezeSettings(),n=zc(t._databaseId);return new i4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function u1(t,e,n,r,s,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);Xf("Data must be an object, but it was:",o,r);const c=f1(r,o);let u,d;if(a.merge)u=new Jt(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const f=[];for(const m of a.mergeFields){const g=wh(e,m,n);if(!o.contains(g))throw new Z(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);p1(f,g)||f.push(g)}u=new Jt(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new s4(new Bt(c),u,d)}class Gc extends Gf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gc}}function d1(t,e,n,r){const s=t.Cc(1,e,n);Xf("Data must be an object, but it was:",s,r);const a=[],o=Bt.empty();zr(r,(u,d)=>{const f=Jf(e,u,n);d=vn(d);const m=s.yc(f);if(d instanceof Gc)a.push(f);else{const g=Kc(d,m);g!=null&&(a.push(f),o.set(f,g))}});const c=new Jt(a);return new l1(o,c,s.fieldTransforms)}function h1(t,e,n,r,s,a){const o=t.Cc(1,e,n),c=[wh(e,r,n)],u=[s];if(a.length%2!=0)throw new Z(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)c.push(wh(e,a[g])),u.push(a[g+1]);const d=[],f=Bt.empty();for(let g=c.length-1;g>=0;--g)if(!p1(d,c[g])){const v=c[g];let T=u[g];T=vn(T);const E=o.yc(v);if(T instanceof Gc)d.push(v);else{const k=Kc(T,E);k!=null&&(d.push(v),f.set(v,k))}}const m=new Jt(d);return new l1(f,m,o.fieldTransforms)}function Kc(t,e){if(m1(t=vn(t)))return Xf("Unsupported field value:",e,t),f1(t,e);if(t instanceof Gf)return function(r,s){if(!c1(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const c of r){let u=Kc(c,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ve.fromDate(r);return{timestampValue:lc(s.serializer,a)}}if(r instanceof Ve){const a=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lc(s.serializer,a)}}if(r instanceof An)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof an)return{bytesValue:Sv(s.serializer,r._byteString)};if(r instanceof Xe){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Df(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Pn)return function(o,c){return{mapValue:{fields:{[sv]:{stringValue:iv},[rc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return Af(c.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Ef(r)}`)}(t,e)}function f1(t,e){const n={};return Jy(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zr(t,(r,s)=>{const a=Kc(s,e.mc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function m1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof An||t instanceof an||t instanceof Xe||t instanceof Gf||t instanceof Pn)}function Xf(t,e,n){if(!m1(n)||!Yy(n)){const r=Ef(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function wh(t,e,n){if((e=vn(e))instanceof mo)return e._internalPath;if(typeof e=="string")return Jf(t,e);throw hc("Field path arguments must be of type string or ",t,!1,void 0,n)}const a4=new RegExp("[~\\*/\\[\\]]");function Jf(t,e,n){if(e.search(a4)>=0)throw hc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mo(...e.split("."))._internalPath}catch{throw hc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hc(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Z(z.INVALID_ARGUMENT,c+t+u)}function p1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new o4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(x1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class o4 extends g1{data(){return super.data()}}function x1(t,e){return typeof e=="string"?Jf(t,e):e instanceof mo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class c4{convertValue(e,n="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return zr(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,s,a;const n=(a=(s=(r=e.fields)==null?void 0:r[rc].arrayValue)==null?void 0:s.values)==null?void 0:a.map(o=>Ke(o.doubleValue));return new Pn(n)}convertGeoPoint(e){return new An(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Rc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ja(e));default:return null}}convertTimestamp(e){const n=Pr(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Me.fromString(e);Ie(Dv(r),9688,{name:e});const s=new Za(r.get(1),r.get(3)),a=new ie(r.popFirst(5));return s.isEqual(n)||Gn(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ha{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ds extends g1{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new El(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(x1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ds._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ds._jsonSchemaVersion="firestore/documentSnapshot/1.0",ds._jsonSchema={type:rt("string",ds._jsonSchemaVersion),bundleSource:rt("string","DocumentSnapshot"),bundleName:rt("string"),bundle:rt("string")};class El extends ds{data(e={}){return super.data(e)}}class ai{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ha(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new El(this._firestore,this._userDataWriter,r.key,r,new ha(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new El(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ha(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const u=new El(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ha(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:u4(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ai._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Nf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function u4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t){t=cn(t,Xe);const e=cn(t.firestore,Vr);return ZT(Qc(e),t._key).then(n=>w1(e,t,n))}ai._jsonSchemaVersion="firestore/querySnapshot/1.0",ai._jsonSchema={type:rt("string",ai._jsonSchemaVersion),bundleSource:rt("string","QuerySnapshot"),bundleName:rt("string"),bundle:rt("string")};class v1 extends c4{constructor(e){super(),this.firestore=e}convertBytes(e){return new an(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,n)}}function h4(t,e,n){t=cn(t,Xe);const r=cn(t.firestore,Vr),s=y1(t.converter,e,n);return Yc(r,[u1(Yf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ht.none())])}function f4(t,e,n,...r){t=cn(t,Xe);const s=cn(t.firestore,Vr),a=Yf(s);let o;return o=typeof(e=vn(e))=="string"||e instanceof mo?h1(a,"updateDoc",t._key,e,n,r):d1(a,"updateDoc",t._key,e),Yc(s,[o.toMutation(t._key,Ht.exists(!0))])}function m4(t){return Yc(cn(t.firestore,Vr),[new Bc(t._key,Ht.none())])}function p4(t,...e){var u,d,f;t=vn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||r0(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(r0(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(d=m.error)==null?void 0:d.bind(m),e[r+2]=(f=m.complete)==null?void 0:f.bind(m)}let a,o,c;if(t instanceof Xe)o=cn(t.firestore,Vr),c=Lc(t._key.path),a={next:m=>{e[r]&&e[r](w1(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=cn(t,qc);o=cn(m.firestore,Vr),c=m._query;const g=new v1(o);a={next:v=>{e[r]&&e[r](new ai(o,g,m,v))},error:e[r+1],complete:e[r+2]},l4(t._query)}return function(g,v,T,E){const k=new s1(E),j=new Kv(v,k,T);return g.asyncQueue.enqueueAndForget(async()=>Qv(await vh(g),j)),()=>{k.Nu(),g.asyncQueue.enqueueAndForget(async()=>Gv(await vh(g),j))}}(Qc(o),c,s,a)}function Yc(t,e){return function(r,s){const a=new Cr;return r.asyncQueue.enqueueAndForget(async()=>UT(await JT(r),s,a)),a.promise}(Qc(t),e)}function w1(t,e,n){const r=n.docs.get(e._key),s=new v1(t);return new ds(t,s,e._key,r,new ha(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Yf(e)}set(e,n,r){this._verifyNotCommitted();const s=Yu(e,this._firestore),a=y1(s.converter,n,r),o=u1(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Ht.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=Yu(e,this._firestore);let o;return o=typeof(n=vn(n))=="string"||n instanceof mo?h1(this._dataReader,"WriteBatch.update",a._key,n,r,s):d1(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,Ht.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Yu(e,this._firestore);return this._mutations=this._mutations.concat(new Bc(n._key,Ht.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yu(t,e){if((t=vn(t)).firestore!==e)throw new Z(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(t){return Qc(t=cn(t,Vr)),new g4(t,e=>Yc(t,e))}(function(e,n=!0){(function(s){Ti=s})(H_),ec(new Ka("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new Vr(new oN(r.getProvider("auth-internal")),new uN(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Z(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(d.options.projectId,f)}(o,s),o);return a={useFetchStreams:n,...a},c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),si(lg,cg,e),si(lg,cg,"esm2020")})();const al="SPR_TECHFORGE_FIREBASE_CONFIG",i0={apiKey:"AIzaSyDWiI7gQ-sCLiMfoNPAmbqrT_XNAH2SxL8",authDomain:"sprtechforge.firebaseapp.com",projectId:"sprtechforge",storageBucket:"sprtechforge.firebasestorage.app",messagingSenderId:"576106145208",appId:"1:576106145208:web:fcd3c869f30544efca2bcd",measurementId:"G-JN6S6L5KH5"};class y4{constructor(){Vo(this,"app",null);Vo(this,"db",null);Vo(this,"isInitialized",!1);this.tryInit()}tryInit(){try{const e=localStorage.getItem(al);let n=i0;if(e&&(n=JSON.parse(e)),n.projectId&&n.apiKey)try{this.app=nh(n),this.db=s0(this.app),this.isInitialized=!0,console.log("Firebase Firestore Initialized")}catch(r){console.error("Firebase initialization failed:",r),this.isInitialized=!1}}catch(e){console.error("Failed to initialize firebase",e)}}saveConfig(e){localStorage.setItem(al,JSON.stringify(e)),window.location.reload()}clearConfig(){localStorage.removeItem(al),window.location.reload()}isConfigured(){return this.isInitialized&&!!this.db}getConfig(){const e=localStorage.getItem(al);return e?JSON.parse(e):i0}async testConfig(e){try{const n=JSON.parse(e);if(!n.projectId||!n.apiKey||!n.appId)return{success:!1,error:"Invalid Configuration object. Missing projectId, apiKey, or appId."};const r=nh(n,"testApp"),s=s0(r);try{const a=na(s,"system_check","connection_test");await d4(a)}catch(a){if(a.code==="unavailable"||a.code==="failed-precondition")return{success:!1,error:"Could not reach Firebase. Check your internet connection."}}return{success:!0}}catch(n){return{success:!1,error:n.message||"Invalid JSON format."}}}sanitizeData(e){if(e==null)return e;if(Array.isArray(e))return e.map(n=>this.sanitizeData(n));if(typeof e=="object"){if(typeof e.toDate=="function")return e.toDate().toISOString();if("seconds"in e&&"nanoseconds"in e&&Object.keys(e).length<=2)return new Date(e.seconds*1e3).toISOString();if(e.firestore&&typeof e.path=="string")return e.path;const n={};return Object.keys(e).forEach(r=>{n[r]=this.sanitizeData(e[r])}),n}return e}cleanForSave(e){return JSON.parse(JSON.stringify(e))}subscribe(e,n,r){if(!this.db)return()=>{};const s=t4(this.db,e);return p4(s,o=>{const c=[];o.forEach(u=>{const d=u.data(),f=this.sanitizeData(d);c.push({...f,id:u.id})}),console.log(`Sync: Received ${c.length} items from ${e}`),n(c)},o=>{console.error(`Error subscribing to ${e}:`,o),r&&r(o)})}async saveItem(e,n){if(!this.db)throw new Error("DB not configured");if(!n.id)throw new Error("Item must have an ID");const r=this.cleanForSave(n);await h4(na(this.db,e,n.id),r)}async updateItem(e,n,r){if(!this.db)throw new Error("DB not configured");if(!n)throw new Error("ID required for update");const s=this.cleanForSave(r),a=na(this.db,e,n);await f4(a,s)}async deleteItem(e,n){if(!this.db)throw new Error("DB not configured");await m4(na(this.db,e,n))}async uploadBatch(e,n){if(!this.db)throw new Error("DB not configured");if(n.length===0)return;const r=500;for(let s=0;s<n.length;s+=r){const a=n.slice(s,s+r),o=x4(this.db);a.forEach(c=>{const u=na(this.db,e,c.id),d=this.cleanForSave(c);o.set(u,d)}),await o.commit(),console.log(`Uploaded batch of ${a.length} to ${e}`)}}getSchemaSQL(){return"Firestore is a NoSQL database. No Schema definition is required. Collections are created automatically when you add data."}}const le=new y4,b1=M.createContext(void 0),Ce=()=>{const t=M.useContext(b1);if(!t)throw new Error("useApp must be used within an AppProvider");return t},Xu="SPR_TECHFORGE_FRESH_V10",ol="SPR_TECHFORGE_SESSION_V4",v4=60*60*1e3,Ju={id:"admin-01",name:"Thirumal Reddy",username:"thirumalreddy@sprtechforge.com",password:"ThiruPriya@13",role:"admin",modules:["candidates","finance","users","training"],authProvider:"local",isPasswordChanged:!0},Zu=[{id:"cash-01",name:"Office Cash",type:pe.Cash,openingBalance:0,isSystem:!0}],a0=[lt.Training,lt.ReadyForInterview,lt.Placed,lt.Discontinued],w4=({children:t})=>{const[e,n]=M.useState(null),[r,s]=M.useState(!1),[a,o]=M.useState([Ju]),[c,u]=M.useState([]),[d,f]=M.useState([]),[m,g]=M.useState([]),[v,T]=M.useState(Zu),[E,k]=M.useState([]),[j,y]=M.useState(a0),[_,S]=M.useState([]),[R,L]=M.useState([]),[w,p]=M.useState([]),[b,C]=M.useState([]),[A,P]=M.useState([]),[I,se]=M.useState([]),[fe,Se]=M.useState([]),[ut,Q]=M.useState(null),[ee,oe]=M.useState(null),[U,ae]=M.useState(!1),W=le.isConfigured(),ue=(D,F="success")=>{const $=Date.now().toString();Q({id:$,message:D,type:F}),setTimeout(()=>Q(Ne=>(Ne==null?void 0:Ne.id)===$?null:Ne),3e3)},Y=(D,F,$,Ne)=>{if(!e)return;const ze={id:Lt(),timestamp:new Date().toISOString(),actorId:e.id,actorName:e.name,action:D,description:F,entityType:$,entityId:Ne};L(yt=>[ze,...yt]),W&&le.saveItem("activityLogs",ze).catch(console.error)};M.useEffect(()=>{if(W){const D=Be=>{oe(Be.message),ae(!0)},F=le.subscribe("users",Be=>{Be.length>0?o(Be):o([Ju]),ae(!0),s(!0)},D),$=le.subscribe("candidates",u),Ne=le.subscribe("candidateProfiles",f),ze=le.subscribe("interviews",g),yt=le.subscribe("accounts",Be=>{Be.length>0?T(Be):T(Zu)}),ks=le.subscribe("transactions",k),As=le.subscribe("trainingModules",p),Vn=le.subscribe("trainingTopics",C),er=le.subscribe("trainingLogs",P),Vi=le.subscribe("interviewModules",se),G=le.subscribe("interviewQuestions",Se),ve=le.subscribe("activityLogs",L);return()=>{F(),$(),Ne(),ze(),yt(),ks(),As(),Vn(),er(),Vi(),G(),ve()}}else{try{const D=localStorage.getItem(Xu);if(D){const F=JSON.parse(D);o(F.users||[Ju]),u(F.candidates||[]),f(F.candidateProfiles||[]),g(F.interviews||[]),T(F.accounts||Zu),k(F.transactions||[]),p(F.trainingModules||[]),C(F.trainingTopics||[]),P(F.trainingLogs||[]),se(F.interviewModules||[]),Se(F.interviewQuestions||[]),L(F.activityLogs||[]),y(F.candidateStatuses||a0)}}catch{}ae(!0),s(!0)}},[W]),M.useEffect(()=>{if(U&&!e){const D=localStorage.getItem(ol);if(D)try{const F=JSON.parse(D);if(Date.now()-F.timestamp<v4){const $=a.find(Ne=>Ne.id===F.userId);$&&n($)}}catch{}}},[U,a]),M.useEffect(()=>{!W&&U&&localStorage.setItem(Xu,JSON.stringify({users:a,candidates:c,candidateProfiles:d,interviews:m,accounts:v,transactions:E,trainingModules:w,trainingTopics:b,trainingLogs:A,interviewModules:I,interviewQuestions:fe,activityLogs:R,candidateStatuses:j}))},[a,c,d,m,v,E,w,b,A,I,fe,R,j,W,U]);const ne=async(D,F)=>{if(!D||!F)return{success:!1,message:"Missing credentials"};const $=a.find(Ne=>Ne.username.toLowerCase()===D.toLowerCase());return $&&$.password===F?(n($),localStorage.setItem(ol,JSON.stringify({userId:$.id,timestamp:Date.now()})),Y("LOGIN","User logged in","User",$.id),{success:!0}):{success:!1,message:"Invalid credentials"}},Fe=()=>{n(null),localStorage.removeItem(ol)},Wr=D=>{o(F=>[...F,D]),W&&le.saveItem("users",D),Y("CREATE",`User added: ${D.name}`,"User",D.id)},wn=D=>{o(F=>F.map($=>$.id===D.id?D:$)),W&&le.updateItem("users",D.id,D),(e==null?void 0:e.id)===D.id&&n(D),Y("UPDATE",`User updated: ${D.name}`,"User",D.id)},Ln=D=>{o(F=>F.filter($=>$.id!==D)),W&&le.deleteItem("users",D),Y("DELETE","User deleted","User",D)},Xc=D=>{u(F=>[...F,D]),W&&le.saveItem("candidates",D),Y("CREATE",`Candidate added: ${D.name}`,"Candidate",D.id)},Hr=D=>{u(F=>F.map($=>$.id===D.id?D:$)),W&&le.updateItem("candidates",D.id,D)},ki=D=>{u(F=>F.filter($=>$.id!==D)),W&&le.deleteItem("candidates",D),Y("DELETE","Candidate deleted","Candidate",D)},po=D=>{f(F=>F.find(Ne=>Ne.candidateId===D.candidateId)?F.map(Ne=>Ne.candidateId===D.candidateId?D:Ne):[...F,D]),W&&le.saveItem("candidateProfiles",{...D,id:D.candidateId})},Jc=D=>{g(F=>[...F,D]),W&&le.saveItem("interviews",D)},Ai=D=>{g(F=>F.map($=>$.id===D.id?D:$)),W&&le.updateItem("interviews",D.id,D)},Pi=D=>{g(F=>F.filter($=>$.id!==D)),W&&le.deleteItem("interviews",D)},go=D=>{T(F=>[...F,D]),W&&le.saveItem("accounts",D)},dt=D=>{T(F=>F.map($=>$.id===D.id?D:$)),W&&le.updateItem("accounts",D.id,D)},gt=D=>{T(F=>F.filter($=>$.id!==D)),W&&le.deleteItem("accounts",D)},Cs=D=>{k(F=>[...F,D]),W&&le.saveItem("transactions",D),Y("CREATE",`${D.type} of ${D.amount}`,"Transaction",D.id)},xo=D=>{k(F=>F.map($=>$.id===D.id?D:$)),W&&le.updateItem("transactions",D.id,D)},yo=D=>{k(F=>F.filter($=>$.id!==D)),W&&le.deleteItem("transactions",D)},Zc=D=>{const F=E.find($=>$.id===D);F&&xo({...F,isLocked:!0})},qr=D=>{p(F=>[...F,D]),W&&le.saveItem("trainingModules",D)},vo=D=>{p(F=>F.map($=>$.id===D.id?D:$)),W&&le.updateItem("trainingModules",D.id,D)},wo=D=>{p(F=>F.filter($=>$.id!==D)),W&&le.deleteItem("trainingModules",D)},Ri=D=>{C(F=>[...F,D]),W&&le.saveItem("trainingTopics",D)},eu=D=>{C(F=>F.map($=>$.id===D.id?D:$)),W&&le.updateItem("trainingTopics",D.id,D)},tu=D=>{C(F=>F.filter($=>$.id!==D)),W&&le.deleteItem("trainingTopics",D)},bo=D=>{P(F=>[...F,D]),W&&le.saveItem("trainingLogs",D)},jo=D=>{P(F=>{const $=[...F];return D.forEach(Ne=>{const ze=$.findIndex(yt=>yt.id===Ne.id);ze>=0?$[ze]=Ne:$.push(Ne)}),$}),W&&le.uploadBatch("trainingLogs",D)},Qr=D=>{se(F=>[...F,D]),W&&le.saveItem("interviewModules",D)},Di=D=>{se(F=>F.map($=>$.id===D.id?D:$)),W&&le.updateItem("interviewModules",D.id,D)},Li=D=>{se(F=>F.filter($=>$.id!==D)),W&&le.deleteItem("interviewModules",D)},Mn=D=>{Se(F=>[...F,D]),W&&le.saveItem("interviewQuestions",D)},_o=D=>{Se(F=>F.map($=>$.id===D.id?D:$)),W&&le.updateItem("interviewQuestions",D.id,D)},Ss=D=>{Se(F=>F.filter($=>$.id!==D)),W&&le.deleteItem("interviewQuestions",D)},No=()=>{L([]),W&&ue("Cloud logs must be cleared manually in console.","info")},Gr=D=>{j.includes(D)||y(F=>[...F,D])},Eo=D=>{const F=c.find($=>$.id===D);F&&Hr({...F,agreementSentDate:new Date().toISOString()})},xt=D=>{const F=c.find($=>$.id===D);F&&Hr({...F,agreementAcceptedDate:new Date().toISOString(),agreementRejectedDate:void 0,agreementRejectionReason:void 0})},To=(D,F)=>{const $=c.find(Ne=>Ne.id===D);$&&Hr({...$,agreementRejectedDate:new Date().toISOString(),agreementRejectionReason:F,agreementAcceptedDate:void 0})},Kr=D=>S(F=>[...F,{id:Lt(),username:D,requestDate:new Date().toISOString(),status:"pending"}]),Yr=D=>S(F=>F.filter($=>$.id!==D)),Mi=(D,F)=>{var $,Ne,ze;return F==="Account"?(($=v.find(yt=>yt.id===D))==null?void 0:$.name)||"Unknown":F==="Candidate"?((Ne=c.find(yt=>yt.id===D))==null?void 0:Ne.name)||"Unknown":((ze=a.find(yt=>yt.id===D))==null?void 0:ze.name)||"Unknown"},Xr=(D,F)=>{const $=v.find(Ne=>Ne.id===D);return la(D,F,E,($==null?void 0:$.openingBalance)||0,$==null?void 0:$.type)},Zn=()=>{yj({users:a,candidates:c,candidateProfiles:d,interviews:m,accounts:v,transactions:E,trainingModules:w,trainingTopics:b,trainingLogs:A,interviewModules:I,interviewQuestions:fe,activityLogs:R,candidateStatuses:j},`SPR_Backup_${new Date().toISOString().split("T")[0]}.json`)},nu=()=>{const D=c.map(G=>{const ve=E.filter(Be=>Be.fromEntityId===G.id&&Be.type===xe.Income).reduce((Be,Ps)=>Be+Ps.amount,0)-E.filter(Be=>Be.toEntityId===G.id&&Be.type===xe.Refund).reduce((Be,Ps)=>Be+Ps.amount,0);return{"Full Name":G.name,"Batch ID":G.batchId,Email:G.email,Phone:G.phone,"Agreed Amount":G.agreedAmount,"Paid Amount":ve,"Balance Due":G.agreedAmount-ve,Status:G.status,Active:G.isActive?"Yes":"No","Joined Date":new Date(G.joinedDate).toLocaleDateString()}}),F=[...E].sort((G,ve)=>new Date(ve.date).getTime()-new Date(G.date).getTime()).map(G=>({Date:new Date(G.date).toLocaleDateString(),Type:G.type,Description:G.description,"From (Source)":Mi(G.fromEntityId,G.fromEntityType),"To (Dest)":Mi(G.toEntityId,G.toEntityType),Amount:G.amount,Locked:G.isLocked?"Yes":"No"})),$=v.filter(G=>G.type===pe.Debtor).map(G=>{const ve=Xr(G.id,"Account");return{Entity:G.name,Type:"Sundry Debtor","Amount Owed":ve>0?ve:0}}).filter(G=>G["Amount Owed"]>0),Ne=v.filter(G=>G.type===pe.Creditor||G.type===pe.Salary||G.type===pe.Expense).map(G=>{const ve=Xr(G.id,"Account");return{Entity:G.name,Type:G.type,"Amount Payable (Debt)":ve<0?Math.abs(ve):0}}).filter(G=>G["Amount Payable (Debt)"]>0),ze=D.reduce((G,ve)=>G+(ve["Balance Due"]>0?ve["Balance Due"]:0),0)+v.filter(G=>[pe.Bank,pe.Cash,pe.Debtor].includes(G.type)).reduce((G,ve)=>G+Math.max(0,Xr(ve.id,"Account")),0),yt=Ne.reduce((G,ve)=>G+ve["Amount Payable (Debt)"],0),ks=[{Component:"Current Assets (Cash/Bank)",Value:v.filter(G=>[pe.Cash,pe.Bank].includes(G.type)).reduce((G,ve)=>G+Xr(ve.id,"Account"),0)},{Component:"Accounts Receivable (Candidates)",Value:D.reduce((G,ve)=>G+(ve["Balance Due"]>0?ve["Balance Due"]:0),0)},{Component:"Other Receivables (Sundry Debtors)",Value:$.reduce((G,ve)=>G+ve["Amount Owed"],0)},{Component:"--- TOTAL ASSETS ---",Value:ze},{Component:"",Value:""},{Component:"Current Liabilities (Debts/Creditors/Salary)",Value:yt},{Component:"Owner Equity (Calculated)",Value:ze-yt},{Component:"--- TOTAL LIABILITIES & EQUITY ---",Value:ze}],Vn=E.filter(G=>{if(G.type!==xe.Income)return!1;if(G.fromEntityType==="Candidate")return!0;if(G.fromEntityType==="Account"){const ve=v.find(Be=>Be.id===G.fromEntityId);return(ve==null?void 0:ve.type)===pe.Income}return!1}).reduce((G,ve)=>G+ve.amount,0),er=E.filter(G=>G.type===xe.Payment).reduce((G,ve)=>G+ve.amount,0),Vi=[{Particulars:"Operating Revenue (Training Fees)",Amount:Vn},{Particulars:"Total Revenue (A)",Amount:Vn},{Particulars:"",Amount:""},{Particulars:"Operating Expenses (Rent/Admin/Salaries)",Amount:er},{Particulars:"Total Expenses (B)",Amount:er},{Particulars:"",Amount:""},{Particulars:"NET OPERATING PROFIT (A - B)",Amount:Vn-er}];vj([{name:"Candidates",data:D},{name:"Transactions",data:F},{name:"Sundry Debtors",data:$},{name:"Debts and Creditors",data:Ne},{name:"Balance Sheet",data:ks},{name:"Profit and Loss",data:Vi}],`SPR_Techforge_Full_Report_${new Date().toISOString().split("T")[0]}.xls`),ue("Multi-sheet report generated successfully")},Co=async D=>{try{if(D.users&&o(D.users),D.candidates&&u(D.candidates),D.candidateProfiles&&f(D.candidateProfiles),D.interviews&&g(D.interviews),D.accounts&&T(D.accounts),D.transactions&&k(D.transactions),D.trainingModules&&p(D.trainingModules),D.trainingTopics&&C(D.trainingTopics),D.trainingLogs&&P(D.trainingLogs),D.interviewModules&&se(D.interviewModules),D.interviewQuestions&&Se(D.interviewQuestions),D.activityLogs&&L(D.activityLogs),D.candidateStatuses&&y(D.candidateStatuses),W){ue("Restoring to Cloud... please wait","info");const F=[{name:"users",data:D.users},{name:"candidates",data:D.candidates},{name:"candidateProfiles",data:D.candidateProfiles},{name:"interviews",data:D.interviews},{name:"accounts",data:D.accounts},{name:"transactions",data:D.transactions},{name:"trainingModules",data:D.trainingModules},{name:"trainingTopics",data:D.trainingTopics},{name:"trainingLogs",data:D.trainingLogs},{name:"interviewModules",data:D.interviewModules},{name:"interviewQuestions",data:D.interviewQuestions},{name:"activityLogs",data:D.activityLogs}];for(const $ of F)$.data&&$.data.length>0&&await le.uploadBatch($.name,$.data)}ue("Database restored successfully!","success"),Y("RESTORE","Database restored from backup file","System")}catch(F){console.error(F),ue("Restore failed: Invalid data format","error")}},Is=()=>{window.confirm("CRITICAL: This will delete ALL local data and reset the app to factory defaults. Are you sure?")&&(localStorage.removeItem(Xu),localStorage.removeItem(ol),window.location.reload())},So=async()=>{if(W)try{ue("Syncing all local data to cloud...","info"),await Co({users:a,candidates:c,candidateProfiles:d,interviews:m,accounts:v,transactions:E,trainingModules:w,trainingTopics:b,trainingLogs:A,interviewModules:I,interviewQuestions:fe,activityLogs:R,candidateStatuses:j})}catch{ue("Sync failed","error")}};return i.jsx(b1.Provider,{value:{user:e,login:ne,logout:Fe,isInitialized:r,toast:ut,showToast:ue,users:a,addUser:Wr,updateUser:wn,deleteUser:Ln,candidates:c,addCandidate:Xc,updateCandidate:Hr,deleteCandidate:ki,candidateProfiles:d,updateCandidateProfile:po,interviews:m,addInterview:Jc,updateInterview:Ai,deleteInterview:Pi,accounts:v,addAccount:go,updateAccount:dt,deleteAccount:gt,transactions:E,addTransaction:Cs,updateTransaction:xo,deleteTransaction:yo,lockTransaction:Zc,trainingModules:w,addTrainingModule:qr,updateTrainingModule:vo,deleteTrainingModule:wo,trainingTopics:b,addTrainingTopic:Ri,updateTrainingTopic:eu,deleteTrainingTopic:tu,trainingLogs:A,addTrainingLog:bo,batchUpdateTrainingLogs:jo,interviewModules:I,addInterviewModule:Qr,updateInterviewModule:Di,deleteInterviewModule:Li,interviewQuestions:fe,addInterviewQuestion:Mn,updateInterviewQuestion:_o,deleteInterviewQuestion:Ss,candidateStatuses:j,addCandidateStatus:Gr,passwordResetRequests:_,addPasswordResetRequest:Kr,resolvePasswordResetRequest:Yr,activityLogs:R,clearActivityLogs:No,markAgreementSent:Eo,markAgreementAccepted:xt,markAgreementRejected:To,getEntityName:Mi,getEntityBalance:Xr,exportData:Zn,exportFullExcel:nu,importDatabase:Co,factoryReset:Is,isCloudEnabled:W,syncLocalToCloud:So,cloudError:ee},children:t})},te=({children:t,className:e="",title:n,action:r})=>i.jsxs("div",{className:`bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden ${e}`,children:[(n||r)&&i.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[n&&i.jsx("h3",{className:"text-lg font-bold text-gray-800",children:n}),r&&i.jsx("div",{children:r})]}),i.jsx("div",{className:"p-6 text-gray-600",children:t})]}),K=({children:t,variant:e="primary",className:n="",...r})=>{const s="px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white shadow-sm",a={primary:"bg-spr-accent hover:bg-spr-accent_hover text-white focus:ring-blue-500",secondary:"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-gray-200",danger:"bg-spr-danger hover:bg-red-700 text-white focus:ring-red-500",success:"bg-spr-success hover:bg-emerald-700 text-white focus:ring-emerald-500"};return i.jsx("button",{className:`${s} ${a[e]} ${n} disabled:opacity-50 disabled:cursor-not-allowed`,...r,children:t})},Yn=({className:t=""})=>{const e=Et();return i.jsxs("button",{onClick:()=>e(-1),className:`flex items-center text-gray-500 hover:text-gray-800 transition-colors ${t}`,title:"Go Back",children:[i.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),i.jsx("span",{className:"text-sm font-medium",children:"Back"})]})},me=({label:t,numericOnly:e,className:n="",onChange:r,...s})=>{const[a,o]=M.useState(!1),c=()=>s.type==="number"&&a&&Number(s.value)===0?"":s.value,u=d=>{if(e){const f=d.target.value.replace(/[^0-9]/g,"");d.target.value!==f&&(d.target.value=f)}r&&r(d)};return i.jsxs("div",{className:"mb-4",children:[t&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),i.jsx("input",{className:`w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 placeholder-gray-400 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors shadow-sm ${n}`,...s,onChange:u,value:c(),onFocus:d=>{o(!0),s.onFocus&&s.onFocus(d)},onBlur:d=>{o(!1),s.onBlur&&s.onBlur(d)}})]})},j1=({label:t,children:e,className:n="",...r})=>i.jsxs("div",{className:"mb-4",children:[t&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),i.jsx("select",{className:`w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors shadow-sm ${n}`,...r,children:e})]}),Zf=({currentPage:t,totalPages:e,onPageChange:n})=>e<=1?null:i.jsxs("div",{className:"flex justify-center items-center gap-2 mt-6",children:[i.jsx(K,{variant:"secondary",disabled:t===1,onClick:()=>n(t-1),className:"px-3 py-1 text-sm",children:"Prev"}),i.jsxs("span",{className:"text-gray-600 text-sm font-medium",children:["Page ",t," of ",e]}),i.jsx(K,{variant:"secondary",disabled:t===e,onClick:()=>n(t+1),className:"px-3 py-1 text-sm",children:"Next"})]}),qt=({isOpen:t,onClose:e,title:n,children:r,size:s="md"})=>{if(M.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const a={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl","2xl":"max-w-6xl",full:"max-w-[95vw]"}[s];return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:i.jsxs("div",{className:`bg-white border border-gray-200 rounded-xl shadow-2xl w-full ${a} max-h-[90vh] overflow-y-auto transform transition-all scale-100 flex flex-col`,children:[i.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 sticky top-0 bg-white z-10 shrink-0",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n}),i.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors p-1 rounded hover:bg-gray-100",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"p-6 text-gray-600 flex-1 overflow-y-auto",children:r})]})})},Ts=({isOpen:t,onClose:e,onConfirm:n,title:r,message:s})=>i.jsx(qt,{isOpen:t,onClose:e,title:r,children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:s}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(K,{variant:"secondary",onClick:e,children:"Cancel"}),i.jsx(K,{variant:"danger",onClick:()=>{n(),e()},children:"Delete"})]})]})}),b4=()=>{const{toast:t}=Ce();if(!t)return null;const e=t.type==="success"?"bg-emerald-600":t.type==="error"?"bg-red-600":"bg-blue-600",n=t.type==="success"?i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):t.type==="error"?i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});return i.jsx("div",{className:"fixed top-4 right-4 z-[100] animate-fade-in",children:i.jsxs("div",{className:`${e} text-white px-4 py-3 rounded-lg shadow-xl flex items-center gap-3 min-w-[300px]`,children:[i.jsx("div",{className:"shrink-0",children:n}),i.jsx("span",{className:"font-medium text-sm",children:t.message})]})})},wi=({size:t="sm"})=>i.jsxs("div",{className:`flex items-center gap-3 ${t==="lg"?"flex-col":""}`,children:[i.jsx("div",{className:`relative flex items-center justify-center bg-gradient-to-br from-blue-600 to-indigo-900 rounded-lg shadow-lg shadow-blue-200 transform rotate-3 transition-transform ${t==="lg"?"w-20 h-20":"w-10 h-10"}`,children:i.jsx("svg",{className:"text-white w-3/5 h-3/5 transform -rotate-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),i.jsxs("div",{className:`font-bold tracking-tight text-gray-900 ${t==="lg"?"text-3xl":"text-xl"}`,children:["SPR ",i.jsx("span",{className:"text-spr-accent",children:"Techforge"})]})]}),Ze=({to:t,icon:e,label:n,onClick:r,isSidebarCollapsed:s,setIsSidebarCollapsed:a})=>{const o=js();let c=o.pathname===t;!c&&o.pathname.startsWith(t)&&t!=="/"&&(t==="/candidates"&&o.pathname.startsWith("/candidates/info")?c=!1:c=!0);const u=d=>{s&&a&&a(!1),r&&r()};return i.jsxs(nt,{to:t,onClick:u,title:s?n:"",className:`flex items-center gap-3 px-4 py-2.5 rounded-lg transition-all duration-200 mb-1 font-medium text-sm overflow-hidden whitespace-nowrap ${c?"bg-spr-accent text-white shadow-md":"text-gray-600 hover:bg-spr-50 hover:text-spr-900"} ${s?"justify-center px-0":""}`,children:[e&&i.jsx("span",{className:`shrink-0 flex items-center justify-center transition-transform duration-200 ${s?"w-10 h-10 bg-gray-50/50 rounded-lg group-hover:scale-110":"w-5"}`,children:i.jsx("div",{className:c&&s?"text-white":"",children:e})}),!s&&i.jsx("span",{className:"transition-opacity duration-200",children:n})]})},ra=({id:t,title:e,icon:n,children:r,isSidebarCollapsed:s,setIsSidebarCollapsed:a,openGroupId:o,setOpenGroupId:c})=>{const u=js(),f=Ca.Children.toArray(r).some(v=>{var T;return(T=v.props)!=null&&T.to?u.pathname===v.props.to||v.props.to!=="/"&&u.pathname.startsWith(v.props.to):!1}),m=o===t;M.useEffect(()=>{f&&!s&&o===null&&c(t)},[u.pathname,f,s]);const g=()=>{if(s){a(!1),c(t);return}c(m?null:t)};return i.jsxs("div",{className:"mb-1",children:[i.jsxs("button",{onClick:g,title:s?e:"",className:`w-full flex items-center justify-between px-4 py-3 text-gray-700 hover:bg-spr-50 rounded-lg transition-all duration-200 group ${m&&!s?"bg-spr-50":""} ${s?"justify-center px-0":""}`,children:[i.jsxs("div",{className:`flex items-center gap-3 overflow-hidden ${s?"w-full justify-center":""}`,children:[i.jsx("div",{className:`flex items-center justify-center transition-colors ${m&&!s?"text-spr-600":"text-gray-500"} group-hover:text-spr-600 ${s?"w-10 h-10 bg-gray-50 rounded-lg scale-110 shadow-sm border border-gray-100":"w-5"}`,children:n}),!s&&i.jsx("span",{className:`text-sm whitespace-nowrap ${m?"font-bold text-gray-900":"font-medium"}`,children:e})]}),!s&&i.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${m?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${m&&!s?"max-h-[500px] opacity-100 mt-1":"max-h-0 opacity-0"}`,children:!s&&i.jsx("div",{className:"pl-4 border-l-2 border-spr-100 ml-6 space-y-1",children:r})})]})},Ae=({children:t})=>{const{user:e,logout:n}=Ce(),[r,s]=M.useState(!1),[a,o]=M.useState(!1),[c,u]=M.useState(null),d=Et();if(!e)return i.jsx(i.Fragment,{children:t});const f=()=>s(!1),m=()=>{n(),d("/")},g=e.username==="thirumalreddy@sprtechforge.com";return i.jsxs("div",{className:"min-h-screen bg-white flex flex-col md:flex-row text-slate-900 overflow-hidden",children:[i.jsxs("div",{className:"md:hidden bg-white border-b border-gray-200 p-4 flex justify-between items-center sticky top-0 z-40",children:[i.jsx(wi,{size:"sm"}),i.jsx("button",{onClick:()=>s(!r),className:"text-gray-600",children:i.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:r?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]}),r&&i.jsx("div",{className:"md:hidden fixed inset-0 bg-black/50 z-30",onClick:f}),i.jsxs("aside",{className:`bg-white border-r border-gray-200 flex-shrink-0 fixed md:static inset-y-0 left-0 z-30 transition-all duration-300 ease-in-out ${a?"w-24":"w-64"} ${r?"translate-x-0 shadow-2xl w-64":"-translate-x-full md:translate-x-0"}`,children:[i.jsxs("div",{className:"p-5 border-b border-gray-100 hidden md:flex items-center justify-between overflow-hidden relative",children:[i.jsx("div",{className:`transition-all duration-300 ${a?"opacity-0 w-0":"opacity-100 w-auto"}`,children:i.jsx(wi,{size:"sm"})}),a&&i.jsx("div",{className:"mx-auto bg-spr-900 w-12 h-12 rounded-xl flex items-center justify-center text-white font-black text-xs shadow-lg shadow-blue-100",children:"SPR"}),i.jsx("button",{onClick:()=>o(!a),className:`p-1.5 rounded-lg bg-gray-50 text-gray-400 hover:text-spr-600 hover:bg-spr-50 transition-colors ${a?"hidden":"block"}`,children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),a&&i.jsx("button",{onClick:()=>o(!1),className:"absolute top-5 right-1 p-1 bg-white border border-gray-200 rounded-full shadow-md text-gray-400 hover:text-spr-600 z-10",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]}),i.jsxs("nav",{className:"p-3 overflow-y-auto h-[calc(100vh-80px)] scrollbar-hide",children:[e.role!=="candidate"?i.jsxs(i.Fragment,{children:[i.jsxs(ra,{id:"overview",isSidebarCollapsed:a,setIsSidebarCollapsed:o,openGroupId:c,setOpenGroupId:u,title:"Overview",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),children:[i.jsx(Ze,{to:"/dashboard",label:"Dashboard",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(Ze,{to:"/address-book",label:"Address Book",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o})]}),i.jsxs(ra,{id:"candidates",isSidebarCollapsed:a,setIsSidebarCollapsed:o,openGroupId:c,setOpenGroupId:u,title:"Candidates",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),children:[i.jsx(Ze,{to:"/candidates",label:"Candidate List",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(Ze,{to:"/candidates/info",label:"Candidate Info (Profile)",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o})]}),i.jsxs(ra,{id:"training",isSidebarCollapsed:a,setIsSidebarCollapsed:o,openGroupId:c,setOpenGroupId:u,title:"Training",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),children:[i.jsx(Ze,{to:"/training/interviews",label:"Interviews & Resumes",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(Ze,{to:"/training/monitor",label:"Progress Monitor",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(Ze,{to:"/training/attendance",label:"Class Attendance",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(Ze,{to:"/training/curriculum",label:"Curriculum",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(Ze,{to:"/training/interview-questions",label:"Interview Prep",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o})]}),g&&i.jsxs(ra,{id:"finance",isSidebarCollapsed:a,setIsSidebarCollapsed:o,openGroupId:c,setOpenGroupId:u,title:"Finance",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),children:[i.jsx(Ze,{to:"/finance/transactions",label:"Transactions",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(Ze,{to:"/finance/accounts",label:"Ledger Accounts",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(Ze,{to:"/finance/payroll",label:"Payroll",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(Ze,{to:"/finance/financial-statements",label:"Reports",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o})]}),i.jsxs(ra,{id:"admin",isSidebarCollapsed:a,setIsSidebarCollapsed:o,openGroupId:c,setOpenGroupId:u,title:"Admin",icon:i.jsxs("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),children:[i.jsx(Ze,{to:"/admin/users",label:"Users",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),g&&i.jsx(Ze,{to:"/admin/logs",label:"System Logs",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),g&&i.jsx(Ze,{to:"/admin/cloud",label:"Cloud Setup",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o})]})]}):i.jsxs(i.Fragment,{children:[!a&&i.jsx("div",{className:"px-4 mb-2 text-xs font-bold text-gray-400 uppercase",children:"Student Portal"}),i.jsx(Ze,{isSidebarCollapsed:a,setIsSidebarCollapsed:o,to:"/candidates/info",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),label:"My Profile",onClick:f}),i.jsx(Ze,{isSidebarCollapsed:a,setIsSidebarCollapsed:o,to:"/training/dashboard",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),label:"Training Stats",onClick:f}),i.jsx(Ze,{isSidebarCollapsed:a,setIsSidebarCollapsed:o,to:"/training/interview-questions",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),label:"Interview Prep",onClick:f}),i.jsx(Ze,{isSidebarCollapsed:a,setIsSidebarCollapsed:o,to:"/training/curriculum",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),label:"Curriculum",onClick:f})]}),i.jsxs("div",{className:"mt-8 px-2 pb-4",children:[a?i.jsx("div",{className:"h-px bg-gray-200 mb-4 mx-2"}):i.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100 mb-3 overflow-hidden shadow-sm",children:[i.jsx("p",{className:"text-sm font-bold text-gray-800 truncate",children:e.name}),i.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:e.role})]}),i.jsxs("button",{onClick:m,title:"Sign Out",className:`flex items-center gap-3 w-full px-4 py-2.5 rounded-lg transition-colors font-bold text-sm text-red-600 hover:bg-red-50 overflow-hidden whitespace-nowrap ${a?"justify-center px-0":""}`,children:[i.jsx("div",{className:`shrink-0 flex items-center justify-center ${a?"w-10 h-10 bg-red-50 rounded-lg shadow-sm border border-red-100":"w-5"}`,children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),!a&&i.jsx("span",{children:"Sign Out"})]})]})]})]}),i.jsx("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto h-[calc(100vh-64px)] md:h-screen w-full transition-all duration-300",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:t})})]})},j4=()=>{const{login:t,updateUser:e,user:n,isCloudEnabled:r,cloudError:s,addPasswordResetRequest:a,showToast:o}=Ce(),c=Et(),[u,d]=M.useState(""),[f,m]=M.useState(""),[g,v]=M.useState(""),[T,E]=M.useState(!1),[k,j]=M.useState(!1),[y,_]=M.useState(""),[S,R]=M.useState(""),[L,w]=M.useState(!1),[p,b]=M.useState(""),[C,A]=M.useState("");M.useEffect(()=>{n&&n.isPasswordChanged!==!1?c("/dashboard"):n&&n.isPasswordChanged===!1&&j(!0)},[n,c]);const P=async fe=>{fe.preventDefault(),E(!0),v("");const Se=await t(u,f);Se.success?(o("Login successful"),E(!1)):(v(Se.message||"Login failed"),E(!1))},I=fe=>{if(fe.preventDefault(),y!==S){v("Passwords do not match");return}if(y.length<4){v("Password is too short");return}if(y===(n==null?void 0:n.name)){v("New password cannot be the same as your name");return}n&&(e({...n,password:y,isPasswordChanged:!0}),o("Password updated successfully. You are now logged in."))},se=fe=>{fe.preventDefault(),p.trim()&&(a(p),A("Request sent to Admin. Please contact Thirumal Reddy for your new password."),setTimeout(()=>{w(!1),A(""),b("")},4e3))};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4 relative overflow-hidden",children:[i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 bg-slate-50",children:[i.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-96 h-96 bg-blue-200/50 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-96 h-96 bg-indigo-200/50 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute top-[40%] left-[40%] w-72 h-72 bg-sky-100/40 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"w-full max-w-md z-20",children:[i.jsx("div",{className:"mb-4",children:i.jsxs(nt,{to:"/",className:"inline-flex items-center text-gray-500 hover:text-spr-600 transition-colors text-sm font-medium",children:[i.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Website"]})}),s&&i.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-lg shadow-sm animate-fade-in",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("svg",{className:"w-6 h-6 text-red-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-red-800 font-bold text-sm",children:"Connectivity Issue"}),i.jsx("p",{className:"text-red-600 text-sm",children:s}),s.includes("Permission")&&i.jsx("button",{onClick:()=>c("/admin/cloud"),className:"text-xs text-red-700 underline mt-1",children:"Go to Cloud Setup for fix"})]})]})}),i.jsxs("div",{className:"bg-white/80 border border-white/50 p-8 rounded-2xl shadow-2xl relative backdrop-blur-md",children:[i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx(wi,{size:"lg"})}),k?i.jsxs("div",{className:"animate-fade-in",children:[i.jsx("h2",{className:"text-2xl font-bold text-center text-slate-800 mb-2",children:"Secure Your Account"}),i.jsx("p",{className:"text-center text-slate-500 mb-6 text-sm",children:"This is your first login. Please set a new, secure password to continue to the dashboard."}),i.jsxs("form",{onSubmit:I,children:[i.jsx(me,{label:"New Password",type:"password",value:y,onChange:fe=>_(fe.target.value),required:!0}),i.jsx(me,{label:"Confirm Password",type:"password",value:S,onChange:fe=>R(fe.target.value),required:!0}),g&&i.jsx("p",{className:"text-red-500 text-sm mb-4 text-center",children:g}),i.jsx(K,{type:"submit",className:"w-full py-3 text-lg shadow-lg shadow-blue-100",children:"Update Password & Login"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("h2",{className:"text-2xl font-bold text-center text-slate-800 mb-2",children:"Portal Login"}),i.jsx("p",{className:"text-center text-slate-500 mb-6",children:"Sign in to manage SPR Techforge"}),i.jsxs("form",{onSubmit:P,children:[i.jsx(me,{label:"Username / Login ID",value:u,onChange:fe=>d(fe.target.value),placeholder:"name@sprtechforge.com"}),i.jsx(me,{label:"Password",type:"password",value:f,onChange:fe=>m(fe.target.value),placeholder:"Enter password"}),g&&i.jsx("p",{className:"text-red-500 text-sm mb-4 text-center",children:g}),i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsx("button",{type:"button",onClick:()=>w(!0),className:"text-sm text-spr-accent hover:text-spr-accent_hover hover:underline font-medium",children:"Forgot Password?"})}),i.jsx(K,{type:"submit",className:"w-full py-3 text-lg shadow-lg shadow-blue-100 hover:shadow-blue-200",disabled:T,children:T?"Authenticating...":"Login"})]})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-xs text-slate-400",children:[" 2025 SPR Techforge Pvt Ltd. All rights reserved.",r&&i.jsxs("span",{className:"block mt-1 text-slate-500 font-bold flex items-center justify-center gap-1",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})," Cloud Connected"]})]})})]})]}),i.jsx(qt,{isOpen:L,onClose:()=>w(!1),title:"Reset Password",children:C?i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"text-spr-accent font-bold text-lg mb-2",children:"Request Sent"}),i.jsx("p",{className:"text-gray-600",children:C})]}):i.jsxs("form",{onSubmit:se,children:[i.jsx("p",{className:"text-gray-600 mb-4",children:"Enter your Login ID below. The administrator will be notified to reset your password."}),i.jsx(me,{label:"Your Username / Login ID",value:p,onChange:fe=>b(fe.target.value),placeholder:"spr@sprtechforge.com",required:!0}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(K,{type:"button",variant:"secondary",onClick:()=>w(!1),children:"Cancel"}),i.jsx(K,{type:"submit",children:"Send Request"})]})]})})]})},_4=()=>{const t=Et(),[e,n]=M.useState(!1),[r,s]=M.useState(null);M.useEffect(()=>{const o=()=>{n(window.scrollY>20)};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]);const a=()=>{var o;(o=document.getElementById("contact"))==null||o.scrollIntoView({behavior:"smooth"})};return i.jsxs("div",{className:"min-h-screen bg-white font-sans text-gray-900",children:[i.jsx("nav",{className:`fixed w-full z-50 transition-all duration-300 ${e?"bg-white shadow-md py-2":"bg-transparent py-4"}`,children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:"flex items-center",children:i.jsx(wi,{size:"sm"})}),i.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[i.jsx("a",{href:"#",className:"text-sm font-medium text-gray-700 hover:text-spr-600 transition-colors",children:"Services"}),i.jsx("a",{href:"#",className:"text-sm font-medium text-gray-700 hover:text-spr-600 transition-colors",children:"Industries"}),i.jsx("a",{href:"#",className:"text-sm font-medium text-gray-700 hover:text-spr-600 transition-colors",children:"Insights"}),i.jsx("button",{onClick:()=>s("careers"),className:"text-sm font-medium text-gray-700 hover:text-spr-600 transition-colors",children:"Careers"})]}),i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("button",{onClick:a,className:"text-sm font-bold text-gray-900 hover:text-spr-600 transition-colors uppercase tracking-wide",children:"Contact Us"}),i.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),i.jsx(K,{onClick:()=>t("/login"),className:"bg-spr-900 hover:bg-spr-800 text-white px-6 rounded-full shadow-lg transform hover:scale-105 transition-all",children:"Login"})]})]})})}),i.jsxs("header",{className:"relative bg-spr-900 h-[600px] flex items-center overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-spr-900 via-blue-900 to-indigo-900 opacity-90"}),i.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-30"}),i.jsx("div",{className:"absolute top-0 right-0 w-2/3 h-full bg-gradient-to-l from-blue-500/20 to-transparent transform skew-x-12 translate-x-20"})]}),i.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full pt-16",children:i.jsxs("div",{className:"max-w-3xl animate-fade-in",children:[i.jsx("h2",{className:"text-spr-300 font-bold tracking-widest uppercase mb-4 text-sm",children:"Engineering Digital Future"}),i.jsxs("h1",{className:"text-5xl md:text-6xl font-extrabold text-white leading-tight mb-6",children:["Accelerating Business Velocity with ",i.jsx("span",{className:"text-blue-400",children:"Quality Engineering"})]}),i.jsx("p",{className:"text-xl text-gray-300 mb-8 leading-relaxed max-w-2xl",children:"SPR Techforge empowers enterprises to deliver flawless digital experiences through advanced Software Testing, Cloud Transformation, and Strategic Consulting."}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{className:"bg-white text-spr-900 font-bold px-8 py-3 rounded-md hover:bg-gray-100 transition-colors shadow-lg",children:"Explore Services"}),i.jsx("button",{onClick:a,className:"border-2 border-white text-white font-bold px-8 py-3 rounded-md hover:bg-white/10 transition-colors",children:"Partner With Us"})]})]})})]}),i.jsx("section",{className:"bg-spr-50 py-12 border-b border-gray-200",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-4xl font-bold text-spr-700",children:"50+"}),i.jsx("p",{className:"text-sm text-gray-600 font-medium uppercase mt-1",children:"Enterprise Clients"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-4xl font-bold text-spr-700",children:"100%"}),i.jsx("p",{className:"text-sm text-gray-600 font-medium uppercase mt-1",children:"Project Delivery"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-4xl font-bold text-spr-700",children:"24/7"}),i.jsx("p",{className:"text-sm text-gray-600 font-medium uppercase mt-1",children:"Global Support"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-4xl font-bold text-spr-700",children:"1M+"}),i.jsx("p",{className:"text-sm text-gray-600 font-medium uppercase mt-1",children:"Test Cases Executed"})]})]})})}),i.jsx("section",{className:"py-20 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Our Core Capabilities"}),i.jsx("div",{className:"w-20 h-1 bg-spr-600 mx-auto rounded"}),i.jsx("p",{className:"mt-4 text-gray-600 max-w-2xl mx-auto",children:"We combine deep domain expertise with cutting-edge technology to drive innovation and efficiency."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"group bg-white p-8 rounded-xl border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-blue-50 rounded-lg flex items-center justify-center mb-6 group-hover:bg-blue-600 transition-colors",children:i.jsx("svg",{className:"w-8 h-8 text-blue-600 group-hover:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Quality Engineering"}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:"End-to-end testing services including Automation, Performance, and Security testing to ensure zero-defect delivery."}),i.jsx("a",{href:"#",className:"inline-block mt-4 text-spr-600 font-bold hover:underline",children:"Learn More "})]}),i.jsxs("div",{className:"group bg-white p-8 rounded-xl border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-indigo-50 rounded-lg flex items-center justify-center mb-6 group-hover:bg-indigo-600 transition-colors",children:i.jsx("svg",{className:"w-8 h-8 text-indigo-600 group-hover:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Cloud Consulting"}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Strategic cloud migration, architecture design, and DevOps implementation to accelerate your digital transformation."}),i.jsx("a",{href:"#",className:"inline-block mt-4 text-spr-600 font-bold hover:underline",children:"Learn More "})]}),i.jsxs("div",{className:"group bg-white p-8 rounded-xl border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-emerald-50 rounded-lg flex items-center justify-center mb-6 group-hover:bg-emerald-600 transition-colors",children:i.jsx("svg",{className:"w-8 h-8 text-emerald-600 group-hover:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Staffing & Training"}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Providing top-tier technical talent and corporate training programs to bridge the skills gap in your organization."}),i.jsx("a",{href:"#",className:"inline-block mt-4 text-spr-600 font-bold hover:underline",children:"Learn More "})]})]})]})}),i.jsxs("section",{className:"bg-gray-900 py-20 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-spr-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse"}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center relative z-10",children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:"Ready to Transform Your Business?"}),i.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"Join hands with SPR Techforge to leverage the power of next-gen technology and expert consulting."}),i.jsx("button",{onClick:a,className:"bg-spr-600 hover:bg-spr-500 text-white font-bold px-10 py-4 rounded-md shadow-lg transition-all",children:"Get a Free Consultation"})]})]}),i.jsx("footer",{id:"contact",className:"bg-gray-50 border-t border-gray-200 pt-16 pb-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12 mb-12",children:[i.jsxs("div",{className:"col-span-1 md:col-span-1",children:[i.jsx(wi,{size:"sm"}),i.jsx("p",{className:"mt-6 text-sm text-gray-500 leading-relaxed",children:"SPR Techforge is a premier software testing and consulting firm dedicated to delivering excellence in digital engineering."})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4",children:"Services"}),i.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-spr-600",children:"Quality Assurance"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-spr-600",children:"Test Automation"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-spr-600",children:"Performance Engineering"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-spr-600",children:"DevOps Solutions"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4",children:"Company"}),i.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[i.jsx("li",{children:i.jsx("button",{onClick:()=>s("about"),className:"hover:text-spr-600 text-left",children:"About Us"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>s("careers"),className:"hover:text-spr-600 text-left",children:"Careers"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>s("leadership"),className:"hover:text-spr-600 text-left",children:"Leadership"})}),i.jsx("li",{children:i.jsx("button",{onClick:a,className:"hover:text-spr-600 text-left",children:"Contact"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4",children:"Contact Us"}),i.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[i.jsxs("li",{className:"flex items-start gap-3",children:[i.jsxs("svg",{className:"w-5 h-5 text-spr-600 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),i.jsxs("span",{children:["SPR Techforge Pvt Ltd",i.jsx("br",{}),"Sri Godha Nilayam, 9th Phase Rd, KPHB phase 6, Kukatpally, Hyderabad, Telangana 500085"]})]}),i.jsxs("li",{className:"flex items-center gap-3",children:[i.jsx("svg",{className:"w-5 h-5 text-spr-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("a",{href:"mailto:contact@sprtechforge.com",className:"hover:text-spr-600",children:"contact@sprtechforge.com"})]})]})]})]}),i.jsxs("div",{className:"border-t border-gray-200 pt-8 flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsx("p",{className:"text-xs text-gray-500",children:" 2025 SPR Techforge Pvt Ltd. All rights reserved."}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("a",{href:"#",className:"text-gray-400 hover:text-gray-600",children:[i.jsx("span",{className:"sr-only",children:"LinkedIn"}),i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})]}),i.jsxs("a",{href:"#",className:"text-gray-400 hover:text-gray-600",children:[i.jsx("span",{className:"sr-only",children:"Twitter"}),i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})]})]})]})]})}),i.jsx(qt,{isOpen:r==="about",onClose:()=>s(null),title:"About SPR Techforge",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-lg text-gray-800 leading-relaxed",children:"We are a dedicated consultancy and training organization specializing in Automation Testing and Manual Testing."}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Over the past three years, weve successfully trained and placed 30+ skilled professionals across leading companies. Our focus is to provide training, expert guidance and support after joining one month."}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mt-4",children:[i.jsx("h4",{className:"font-bold text-blue-900 mb-2",children:"Our Mission"}),i.jsx("p",{className:"text-sm text-blue-800",children:"To empower individuals with industry-ready skills and connect enterprises with top-tier engineering talent, fostering innovation and excellence in the tech ecosystem."})]})]})}),i.jsx(qt,{isOpen:r==="careers",onClose:()=>s(null),title:"Careers at SPR Techforge",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"Join our dynamic team! We are always looking for skilled professionals passionate about Quality Engineering and Digital Transformation."}),i.jsxs("div",{className:"space-y-3 mt-4",children:[i.jsxs("div",{className:"border border-gray-200 p-3 rounded hover:bg-gray-50",children:[i.jsx("h4",{className:"font-bold text-gray-900",children:"Automation Test Engineer"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Experience: 2-5 Years  Skills: Java, Selenium, Cucumber"})]}),i.jsxs("div",{className:"border border-gray-200 p-3 rounded hover:bg-gray-50",children:[i.jsx("h4",{className:"font-bold text-gray-900",children:"Performance Tester"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Experience: 3+ Years  Skills: JMeter, LoadRunner"})]})]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["Send your resume to ",i.jsx("a",{href:"mailto:careers@sprtechforge.com",className:"text-spr-600 font-bold hover:underline",children:"careers@sprtechforge.com"})]})]})}),i.jsx(qt,{isOpen:r==="leadership",onClose:()=>s(null),title:"Our Leadership",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-spr-900 text-white flex items-center justify-center text-xl font-bold",children:"TR"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Thirumal Reddy"}),i.jsx("p",{className:"text-spr-600 font-medium text-sm mb-2",children:"Founder & Principal Consultant"}),i.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"An industry veteran with extensive experience in Software Quality Assurance and Corporate Training. Thirumal Reddy leads SPR Techforge with a vision to bridge the gap between academic knowledge and industry requirements, ensuring every professional we train is ready to make an immediate impact."})]})]}),i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg text-sm text-gray-600 italic border-l-4 border-spr-500",children:`"We don't just teach technology; we engineer careers."`})]})})]})},N4=()=>{const{user:t,candidates:e,accounts:n,transactions:r,getEntityBalance:s,trainingTopics:a,trainingLogs:o,interviews:c}=Ce(),u=Et();if(!t)return null;const d=t.username==="thirumalreddy@sprtechforge.com";if(t.role==="candidate"){const R=e.find(A=>A.id===t.linkedCandidateId),L=o.filter(A=>A.candidateId===(R==null?void 0:R.id)),w=c.filter(A=>A.candidateId===(R==null?void 0:R.id)&&A.status==="Scheduled"),p=r.filter(A=>A.fromEntityId===(R==null?void 0:R.id)&&A.type===xe.Income).reduce((A,P)=>A+P.amount,0)-r.filter(A=>A.toEntityId===(R==null?void 0:R.id)&&A.type===xe.Refund).reduce((A,P)=>A+P.amount,0),b=((R==null?void 0:R.agreedAmount)||0)-p,C=a.length>0?Math.round(new Set(L.map(A=>A.topicId)).size/a.length*100):0;return i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Student Dashboard"}),i.jsxs("p",{className:"text-gray-600 mt-1",children:["Hello ",t.name,", tracked your progress and schedule below."]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 px-4 py-2 rounded-xl shadow-sm",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase block tracking-widest",children:"Enrollment Status"}),i.jsx("span",{className:"text-spr-600 font-bold",children:(R==null?void 0:R.status)||"Active"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(te,{title:"Training Progress",className:"border-l-4 border-l-blue-500",children:i.jsxs("div",{className:"text-center py-4",children:[i.jsxs("div",{className:"relative inline-flex items-center justify-center mb-4",children:[i.jsxs("svg",{className:"w-24 h-24 transform -rotate-90",children:[i.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-gray-100"}),i.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"transparent",strokeDasharray:251.2,strokeDashoffset:251.2-251.2*C/100,className:"text-blue-500 transition-all duration-1000"})]}),i.jsxs("span",{className:"absolute text-xl font-black text-gray-800",children:[C,"%"]})]}),i.jsx("p",{className:"text-sm text-gray-500",children:"Curriculum Coverage"}),i.jsx("div",{className:"mt-6",children:i.jsx(K,{variant:"secondary",className:"w-full text-xs",onClick:()=>u("/training/dashboard"),children:"View Syllabus"})})]})}),i.jsx(te,{title:"Fee Standing",className:"border-l-4 border-l-emerald-500",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-50 pb-2",children:[i.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase",children:"Total Agreed"}),i.jsx("span",{className:"font-bold text-gray-900",children:re((R==null?void 0:R.agreedAmount)||0)})]}),i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-50 pb-2",children:[i.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase",children:"Total Paid"}),i.jsx("span",{className:"font-bold text-emerald-600",children:re(p)})]}),i.jsxs("div",{className:"pt-2",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase block mb-1",children:"Balance Due"}),i.jsx("span",{className:`text-2xl font-black ${b>0?"text-amber-600":"text-emerald-600"}`,children:b<=0?"Fully Cleared ":re(b)})]})]})}),i.jsx(te,{title:"Upcoming Interviews",className:"border-l-4 border-l-purple-500",children:i.jsx("div",{className:"space-y-3",children:w.length>0?w.map(A=>i.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-100",children:[i.jsx("p",{className:"font-bold text-gray-900 text-sm",children:A.companyName}),i.jsxs("p",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:[A.round," Round"]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(A.date).toDateString()," at ",A.time]})]},A.id)):i.jsxs("div",{className:"text-center py-8 text-gray-400 italic",children:[i.jsx("svg",{className:"w-10 h-10 mx-auto mb-2 opacity-20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"No interviews scheduled."]})})})]}),i.jsx(te,{title:"Quick Resources",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs(nt,{to:"/training/interview-questions",className:"p-4 bg-orange-50 rounded-xl border border-orange-100 hover:shadow-md transition-all group",children:[i.jsx("div",{className:"text-orange-600 font-bold text-sm mb-1 group-hover:underline",children:"Interview Prep"}),i.jsx("p",{className:"text-[10px] text-orange-400",children:"Master frequently asked Q&A"})]}),i.jsxs(nt,{to:"/candidates/info",className:"p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition-all group",children:[i.jsx("div",{className:"text-blue-600 font-bold text-sm mb-1 group-hover:underline",children:"My Profile"}),i.jsx("p",{className:"text-[10px] text-blue-400",children:"Fill your professional details"})]}),i.jsxs(nt,{to:"/training/curriculum",className:"p-4 bg-purple-50 rounded-xl border border-purple-100 hover:shadow-md transition-all group",children:[i.jsx("div",{className:"text-purple-600 font-bold text-sm mb-1 group-hover:underline",children:"Curriculum"}),i.jsx("p",{className:"text-[10px] text-purple-400",children:"View what you will learn"})]}),i.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-100 opacity-50 grayscale cursor-not-allowed",children:[i.jsx("div",{className:"text-gray-600 font-bold text-sm mb-1",children:"Certificates"}),i.jsx("p",{className:"text-[10px] text-gray-400",children:"Available after placement"})]})]})})]})}if(!d){const R=e.filter(p=>p.isActive),L=e.filter(p=>p.status===lt.Placed).length,w=c.filter(p=>p.date===new Date().toISOString().split("T")[0]);return i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-2",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Management Dashboard"}),i.jsxs("p",{className:"text-gray-600 mt-1",children:["Hello ",t.name,", here's a summary of consultancy operations."]})]})}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(te,{className:"bg-white border-blue-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-blue-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase",children:"Active Students"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R.length})]})]})}),i.jsx(te,{className:"bg-white border-emerald-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-50 rounded-lg text-emerald-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase",children:"Total Placements"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:L})]})]})}),i.jsx(te,{className:"bg-white border-purple-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-purple-50 rounded-lg text-purple-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase",children:"Today's Interviews"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.length})]})]})}),i.jsx(te,{className:"bg-white border-amber-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-50 rounded-lg text-amber-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase",children:"Upcoming Tasks"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"5"})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsx(te,{title:"Today's Interview Pipeline",action:i.jsx(nt,{to:"/training/interviews",className:"text-xs text-spr-600 font-bold hover:underline",children:"View All"}),children:i.jsx("div",{className:"space-y-4",children:w.length>0?w.map(p=>{const b=e.find(C=>C.id===p.candidateId);return i.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-gray-100",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-gray-900 text-sm",children:(b==null?void 0:b.name)||"Unknown"}),i.jsxs("p",{className:"text-[10px] text-gray-500 uppercase",children:[p.companyName,"  ",p.time]})]}),i.jsx("span",{className:"px-2 py-0.5 rounded text-[9px] font-bold uppercase bg-blue-100 text-blue-700",children:p.status})]},p.id)}):i.jsx("div",{className:"text-center py-10 text-gray-400 italic text-sm",children:"No interviews scheduled for today."})})}),i.jsx(te,{title:"Batch Performance",action:i.jsx(nt,{to:"/training/monitor",className:"text-xs text-spr-600 font-bold hover:underline",children:"Full Monitor"}),children:i.jsx("div",{className:"space-y-4",children:e.slice(0,5).map(p=>{const b=o.filter(A=>A.candidateId===p.id),C=a.length>0?Math.round(new Set(b.map(A=>A.topicId)).size/a.length*100):0;return i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-xs font-medium",children:[i.jsxs("span",{className:"text-gray-700",children:[p.name," (",p.batchId,")"]}),i.jsxs("span",{className:"text-gray-500",children:[C,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5",children:i.jsx("div",{className:"bg-emerald-500 h-1.5 rounded-full",style:{width:`${C}%`}})})]},p.id)})})})]})]})}const f=n.filter(R=>R.type===pe.Cash).reduce((R,L)=>R+s(L.id,"Account"),0),m=n.filter(R=>R.type===pe.Bank).reduce((R,L)=>R+s(L.id,"Account"),0),g=r.filter(R=>R.type===xe.Income).reduce((R,L)=>R+L.amount,0),v=r.filter(R=>R.type===xe.Payment).reduce((R,L)=>R+L.amount,0),T=R=>{const L=r.filter(p=>p.fromEntityId===R&&p.type===xe.Income).reduce((p,b)=>p+b.amount,0),w=r.filter(p=>p.toEntityId===R&&p.type===xe.Refund).reduce((p,b)=>p+b.amount,0);return L-w},E=e.filter(R=>R.status===lt.Placed),k=e.filter(R=>R.isActive),j=E.reduce((R,L)=>R+T(L.id),0),y=k.reduce((R,L)=>{const w=T(L.id),p=L.agreedAmount-w;return R+(p>0?p:0)},0),_=n.filter(R=>R.type===pe.Debtor).reduce((R,L)=>{const w=s(L.id,"Account");return R+(w>0?w:0)},0),S=n.filter(R=>R.type===pe.Creditor||R.type===pe.Salary).reduce((R,L)=>{const w=s(L.id,"Account");return R+(w<0?Math.abs(w):0)},0);return i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-2",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Director Dashboard"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Full transparency oversee of consultancy financials."})]}),i.jsxs("div",{className:"text-left md:text-right",children:[i.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Net Liquidity"}),i.jsx("p",{className:"text-2xl font-bold text-emerald-600 whitespace-nowrap tabular-nums",children:re(f+m)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(te,{className:"bg-white border-emerald-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-50 rounded-lg text-emerald-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase truncate",children:"Cash in Hand"}),i.jsx("p",{className:"text-lg font-bold text-gray-900 whitespace-nowrap tabular-nums truncate",children:re(f)})]})]})}),i.jsx(te,{className:"bg-white border-blue-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-blue-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase truncate",children:"Bank Balance"}),i.jsx("p",{className:"text-lg font-bold text-gray-900 whitespace-nowrap tabular-nums truncate",children:re(m)})]})]})}),i.jsx(te,{className:"bg-white border-indigo-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-50 rounded-lg text-indigo-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase truncate",children:"Total Income"}),i.jsx("p",{className:"text-lg font-bold text-gray-900 whitespace-nowrap tabular-nums truncate",children:re(g)})]})]})}),i.jsx(te,{className:"bg-white border-red-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-red-50 rounded-lg text-red-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase truncate",children:"Total Payments"}),i.jsx("p",{className:"text-lg font-bold text-gray-900 whitespace-nowrap tabular-nums truncate",children:re(v)})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx(te,{title:"Candidate Financials",className:"lg:col-span-2",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 pt-2",children:[i.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100 flex flex-col justify-center",children:[i.jsx("p",{className:"text-gray-500 text-[10px] uppercase tracking-wider font-bold",children:"Total Candidates"}),i.jsx("p",{className:"text-2xl font-extrabold text-gray-900 mt-1",children:e.length}),i.jsxs("p",{className:"text-[10px] text-indigo-500 mt-1 font-bold",children:[k.length," Currently Active"]})]}),i.jsxs("div",{className:"bg-emerald-50/50 p-4 rounded-xl border border-emerald-100 flex flex-col justify-center",children:[i.jsx("p",{className:"text-emerald-700 text-[10px] uppercase tracking-wider font-bold",children:"From Placed"}),i.jsx("p",{className:"text-xl font-bold text-emerald-600 mt-1 whitespace-nowrap tabular-nums truncate",children:re(j)})]}),i.jsxs("div",{className:"bg-amber-50/50 p-4 rounded-xl border border-amber-100 flex flex-col justify-center",children:[i.jsx("p",{className:"text-amber-700 text-[10px] uppercase tracking-wider font-bold",children:"Pending Dues"}),i.jsx("p",{className:"text-xl font-bold text-amber-600 mt-1 whitespace-nowrap tabular-nums truncate",children:re(y)})]})]})}),i.jsx(te,{title:"Ledger Summary",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-emerald-50/30 rounded-xl border border-emerald-100",children:[i.jsx("p",{className:"text-[10px] text-emerald-700 uppercase font-bold tracking-wider mb-1",children:"Debtors (Total Receivables)"}),i.jsx("p",{className:"text-2xl font-extrabold text-emerald-600 tabular-nums truncate",children:re(_+y)})]}),i.jsxs("div",{className:"p-4 bg-red-50/30 rounded-xl border border-red-100",children:[i.jsx("p",{className:"text-[10px] text-red-700 uppercase font-bold tracking-wider mb-1",children:"Creditors (Total Payables)"}),i.jsx("p",{className:"text-2xl font-extrabold text-red-600 tabular-nums truncate",children:re(S)})]})]})})]}),i.jsx(te,{title:"Consolidated Profit & Loss (Realized)",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-100 pb-3",children:[i.jsx("span",{className:"text-gray-500 font-medium text-sm",children:"Total Realized Income"}),i.jsx("span",{className:"text-emerald-600 font-bold whitespace-nowrap tabular-nums",children:re(g)})]}),i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-100 pb-3",children:[i.jsx("span",{className:"text-gray-500 font-medium text-sm",children:"Total Realized Payments"}),i.jsxs("span",{className:"text-red-600 font-bold whitespace-nowrap tabular-nums",children:["- ",re(v)]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-1",children:[i.jsx("span",{className:"text-gray-900 text-lg font-extrabold",children:"Net Realized Result"}),i.jsx("span",{className:`text-2xl font-black whitespace-nowrap tabular-nums ${g-v>=0?"text-emerald-600":"text-red-600"}`,children:re(g-v)})]})]})})]})},E4=()=>{const{candidates:t,deleteCandidate:e,updateCandidate:n,transactions:r,candidateStatuses:s,users:a,addUser:o,showToast:c}=Ce(),[u,d]=M.useState(1),[f,m]=M.useState(""),[g,v]=M.useState("All"),[T,E]=M.useState(null),[k,j]=M.useState(null);Et();const y=10,_=t.filter(P=>{const I=f.toLowerCase(),se=P.name.toLowerCase().includes(I)||P.batchId.toLowerCase().includes(I)||P.referredBy&&P.referredBy.toLowerCase().includes(I),fe=g==="All"||P.status===g;return se&&fe}),S=Math.ceil(_.length/y),R=_.slice((u-1)*y,u*y),L=P=>{if(r.some(se=>se.fromEntityId===P||se.toEntityId===P)){alert("Unable to delete candidate due to existing financial entries. Mark as Inactive instead.");return}E(P)},w=()=>{T&&(e(T),E(null))},p=P=>n({...P,isActive:!P.isActive}),b=P=>{const I=a.find(se=>se.linkedCandidateId===P.id||se.username===P.email);if(I){alert(`Account exists: ${I.username}`);return}if(!P.email){alert("Email required.");return}o({id:Lt(),name:P.name,username:P.email,password:P.phone||"pass123",role:"candidate",modules:[],linkedCandidateId:P.id,isPasswordChanged:!1,authProvider:"local"}),c("User account created","success")},C=(P,I)=>{const se=r.filter(Se=>Se.fromEntityId===P&&Se.type===xe.Income).reduce((Se,ut)=>Se+ut.amount,0)-r.filter(Se=>Se.toEntityId===P&&Se.type===xe.Refund).reduce((Se,ut)=>Se+ut.amount,0),fe=I-se;return{paid:se,due:fe}},A=P=>{switch(P){case lt.Placed:return"bg-emerald-100 text-emerald-800 border-emerald-200";case lt.Training:return"bg-blue-100 text-blue-800 border-blue-200";case lt.ReadyForInterview:return"bg-amber-100 text-amber-800 border-amber-200";case lt.Discontinued:return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Yn,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Candidates"})]}),i.jsx(nt,{to:"/candidates/new",children:i.jsx(K,{children:"+ Add Candidate"})})]}),i.jsxs(te,{children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[i.jsx("input",{placeholder:"Search name, batch, or reference...",className:"border border-gray-300 rounded-lg px-4 py-2 flex-1 focus:ring-1 focus:ring-spr-accent outline-none",value:f,onChange:P=>m(P.target.value)}),i.jsxs("select",{className:"border border-gray-300 rounded-lg px-4 py-2 focus:ring-1 focus:ring-spr-accent outline-none",value:g,onChange:P=>v(P.target.value),children:[i.jsx("option",{value:"All",children:"All Statuses"}),s.map(P=>i.jsx("option",{value:P,children:P},P))]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm text-gray-600",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"py-3 px-4",children:"Batch"}),i.jsx("th",{className:"py-3 px-4",children:"Name"}),i.jsx("th",{className:"py-3 px-4",children:"Status"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Agreed"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Paid"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Due"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Active"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:R.map(P=>{const{paid:I,due:se}=C(P.id,P.agreedAmount);return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"bg-blue-50 text-blue-800 px-2 py-1 rounded font-mono text-xs font-bold border border-blue-100",children:P.batchId})}),i.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900",children:[P.name,i.jsx("div",{className:"text-xs text-gray-400",children:P.phone})]}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] uppercase font-bold border ${A(P.status)}`,children:P.status})}),i.jsx("td",{className:"py-3 px-4 text-right font-medium tabular-nums",children:re(P.agreedAmount)}),i.jsx("td",{className:"py-3 px-4 text-right text-emerald-600 font-bold tabular-nums whitespace-nowrap",children:re(I)}),i.jsx("td",{className:`py-3 px-4 text-right font-bold tabular-nums whitespace-nowrap ${se>0?"text-amber-600":"text-emerald-600"}`,children:se<=0?" Cleared":re(se)}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsx("button",{onClick:()=>p(P),className:`w-10 h-5 rounded-full relative transition-colors ${P.isActive?"bg-emerald-500":"bg-gray-300"}`,children:i.jsx("span",{className:`absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform ${P.isActive?"translate-x-5":""}`})})}),i.jsxs("td",{className:"py-3 px-4 text-center flex justify-center gap-2",children:[i.jsx("button",{onClick:()=>j(P),className:"text-gray-400 hover:text-gray-900 p-1 rounded hover:bg-gray-100",title:"View Details",children:i.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),i.jsx(nt,{to:`/candidates/edit/${P.id}`,className:"text-blue-500 hover:text-blue-700 p-1 rounded hover:bg-blue-50",title:"Edit",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),i.jsx(nt,{to:`/candidates/agreement/${P.id}`,className:"text-amber-600 hover:text-amber-800 p-1 rounded hover:bg-amber-50",title:"Agreement",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx(nt,{to:`/finance/statement/Candidate/${P.id}`,className:"text-indigo-500 hover:text-indigo-700 p-1 rounded hover:bg-indigo-50",title:"Financial Statement",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx("button",{onClick:()=>b(P),className:"text-amber-500 hover:text-amber-700 p-1 rounded hover:bg-amber-50",title:"Create Login",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),i.jsx("button",{onClick:()=>L(P.id),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50",title:"Delete",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},P.id)})})]})}),i.jsx(Zf,{currentPage:u,totalPages:S,onPageChange:d})]}),i.jsx(qt,{isOpen:!!k,onClose:()=>j(null),title:"Candidate Detailed Profile",size:"lg",children:k&&(()=>{const{paid:P,due:I}=C(k.id,k.agreedAmount);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-start border-b border-gray-100 pb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:k.name}),i.jsxs("p",{className:"text-gray-500 font-mono text-sm mt-1",children:["Batch ID: ",i.jsx("span",{className:"text-indigo-600 font-bold",children:k.batchId})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${A(k.status)}`,children:k.status}),i.jsx("p",{className:"text-[10px] text-gray-400 mt-2 uppercase tracking-widest font-bold",children:"Current Status"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Contact Details"]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100 space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Email Address"}),i.jsx("p",{className:"text-gray-900 font-medium break-all",children:k.email})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Primary Phone"}),i.jsx("p",{className:"text-gray-900 font-medium",children:k.phone})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Alt Phone"}),i.jsx("p",{className:"text-gray-900 font-medium",children:k.alternatePhone||"-"})]})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[i.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Permanent Address"]}),i.jsx("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100 min-h-[100px]",children:i.jsx("p",{className:"text-gray-700 whitespace-pre-wrap italic",children:k.address||"No address provided."})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Financial Standing"]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[i.jsx("label",{className:"text-[10px] text-slate-500 font-bold uppercase block mb-1",children:"Agreed Total"}),i.jsx("p",{className:"text-xl font-bold text-slate-900 tabular-nums whitespace-nowrap",children:re(k.agreedAmount)})]}),i.jsxs("div",{className:"bg-emerald-50 p-4 rounded-xl border border-emerald-200",children:[i.jsx("label",{className:"text-[10px] text-emerald-600 font-bold uppercase block mb-1",children:"Total Paid"}),i.jsx("p",{className:"text-xl font-bold text-emerald-700 tabular-nums whitespace-nowrap",children:re(P)})]}),i.jsxs("div",{className:`p-4 rounded-xl border tabular-nums whitespace-nowrap ${I>0?"bg-amber-50 border-amber-200 text-amber-700":"bg-green-50 border-green-200 text-green-700"}`,children:[i.jsx("label",{className:"text-[10px] font-bold uppercase block mb-1",children:"Balance Due"}),i.jsx("p",{className:"text-xl font-bold",children:I<=0?"CLEARED":re(I)})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t border-gray-100",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Joined Date"}),i.jsx("p",{className:"text-gray-900 font-medium",children:new Date(k.joinedDate).toLocaleDateString(void 0,{dateStyle:"full"})})]}),k.notes&&i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Admin Notes"}),i.jsx("p",{className:"text-gray-600 text-sm italic",children:k.notes})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-6",children:[i.jsx(K,{variant:"secondary",onClick:()=>j(null),children:"Close Profile"}),i.jsx(nt,{to:`/candidates/edit/${k.id}`,children:i.jsx(K,{children:"Edit Candidate"})})]})]})})()}),i.jsx(Ts,{isOpen:!!T,onClose:()=>E(null),onConfirm:w,title:"Delete Candidate",message:"Are you sure you want to delete this candidate? This cannot be undone if they have no financial history."})]})},T4=()=>{const{user:t,candidates:e,candidateProfiles:n,updateCandidateProfile:r,trainingModules:s,trainingTopics:a,trainingLogs:o,interviews:c,showToast:u}=Ce(),[d,f]=M.useState("Personal"),[m,g]=M.useState(null),[v,T]=M.useState(""),E=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="staff",k=E?m:t==null?void 0:t.linkedCandidateId,j=e.find(p=>p.id===k),[y,_]=M.useState({candidateId:k||""});M.useEffect(()=>{if(k){const p=n.find(b=>b.candidateId===k);_(p||{candidateId:k})}},[k,n]);const S=p=>{p.preventDefault(),k&&(r(y),u("Profile updated successfully"))},R=e.filter(p=>p.name.toLowerCase().includes(v.toLowerCase())||p.batchId.toLowerCase().includes(v.toLowerCase()));if(E&&!m)return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Yn,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Candidate Information"})]})}),i.jsxs(te,{title:"Select a Candidate to View Self-Filled Info",children:[i.jsx("div",{className:"mb-6",children:i.jsx("input",{placeholder:"Search candidates by name or batch...",className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-1 focus:ring-spr-accent outline-none",value:v,onChange:p=>T(p.target.value)})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[R.map(p=>i.jsxs("div",{className:"p-4 border border-gray-200 rounded-xl hover:shadow-md transition-shadow flex items-center justify-between bg-white group",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-gray-900",children:p.name}),i.jsx("p",{className:"text-xs text-gray-500 font-mono",children:p.batchId})]}),i.jsx(K,{variant:"secondary",onClick:()=>g(p.id),className:"text-xs",children:"View Info"})]},p.id)),R.length===0&&i.jsx("div",{className:"col-span-full py-10 text-center text-gray-400 italic",children:"No candidates found."})]})]})]});if(!j)return i.jsx("div",{className:"p-8 text-center text-gray-500",children:"No candidate profile linked to this account or selected."});const L=o.filter(p=>p.candidateId===k),w=c.filter(p=>p.candidateId===k).sort((p,b)=>new Date(b.date).getTime()-new Date(p.date).getTime());return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[E?i.jsxs("button",{onClick:()=>g(null),className:"text-gray-500 hover:text-gray-800 flex items-center gap-1",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),i.jsx("span",{className:"font-medium",children:"Back to List"})]}):i.jsx(Yn,{}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Details"}),i.jsxs("p",{className:"text-gray-500",children:[j.name," (",j.batchId,")"]})]})]}),E&&i.jsx("div",{className:"px-3 py-1 bg-amber-50 text-amber-700 text-xs font-bold rounded-full border border-amber-200 uppercase tracking-widest",children:"Admin View Mode"})]}),i.jsx("div",{className:"flex gap-2 border-b border-gray-200 overflow-x-auto scrollbar-hide",children:["Personal","Education","Experience","Training","Interviews"].map(p=>i.jsx("button",{onClick:()=>f(p),className:`px-4 py-2 font-medium transition-colors whitespace-nowrap ${d===p?"border-b-2 border-spr-600 text-spr-600":"text-gray-500 hover:text-gray-800"}`,children:p==="Interviews"?"Interview History":p==="Training"?"Training Progress":`${p} Details`},p))}),i.jsx(te,{children:["Personal","Education","Experience"].includes(d)?i.jsxs("form",{onSubmit:S,children:[d==="Personal"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[i.jsx(me,{label:"Date of Birth",type:"date",value:y.dob||"",onChange:p=>_({...y,dob:p.target.value}),disabled:E}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),i.jsxs("select",{className:"w-full border rounded-lg px-4 py-2",value:y.gender||"",onChange:p=>_({...y,gender:p.target.value}),disabled:E,children:[i.jsx("option",{value:"",children:"Select"}),i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsx(me,{label:"Nationality",value:y.nationality||"",onChange:p=>_({...y,nationality:p.target.value}),disabled:E}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Permanent Address"}),i.jsx("textarea",{className:"w-full border rounded-lg p-2 focus:ring-1 focus:ring-spr-accent outline-none",rows:2,value:y.permanentAddress||"",onChange:p=>_({...y,permanentAddress:p.target.value}),disabled:E})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Address"}),i.jsx("textarea",{className:"w-full border rounded-lg p-2 focus:ring-1 focus:ring-spr-accent outline-none",rows:2,value:y.currentAddress||"",onChange:p=>_({...y,currentAddress:p.target.value}),disabled:E})]})]}),d==="Education"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[i.jsx(me,{label:"Highest Degree",value:y.degree||"",onChange:p=>_({...y,degree:p.target.value}),placeholder:"e.g. B.Tech CSE",disabled:E}),i.jsx(me,{label:"University / College",value:y.university||"",onChange:p=>_({...y,university:p.target.value}),disabled:E}),i.jsx(me,{label:"Passing Year",value:y.passingYear||"",onChange:p=>_({...y,passingYear:p.target.value}),disabled:E}),i.jsx(me,{label:"Percentage / CGPA",value:y.percentage||"",onChange:p=>_({...y,percentage:p.target.value}),disabled:E})]}),d==="Experience"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[i.jsxs("div",{className:"col-span-2 flex items-center gap-2 mb-4",children:[i.jsx("input",{type:"checkbox",checked:y.hasExperience||!1,onChange:p=>_({...y,hasExperience:p.target.checked}),id:"exp",disabled:E}),i.jsx("label",{htmlFor:"exp",className:"text-sm font-medium",children:"Candidate has previous work experience"})]}),y.hasExperience&&i.jsxs(i.Fragment,{children:[i.jsx(me,{label:"Last Company",value:y.lastCompany||"",onChange:p=>_({...y,lastCompany:p.target.value}),disabled:E}),i.jsx(me,{label:"Designation",value:y.designation||"",onChange:p=>_({...y,designation:p.target.value}),disabled:E}),i.jsx(me,{label:"Years of Experience",type:"number",value:y.yearsOfExperience||0,onChange:p=>_({...y,yearsOfExperience:parseFloat(p.target.value)}),disabled:E})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Technical Skills"}),i.jsx("textarea",{className:"w-full border rounded-lg p-2 focus:ring-1 focus:ring-spr-accent outline-none",rows:3,value:y.skills||"",onChange:p=>_({...y,skills:p.target.value}),placeholder:"Java, Selenium, SQL...",disabled:E})]})]}),!E&&i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx(K,{type:"submit",children:"Update My Profile"})})]}):d==="Training"?i.jsxs("div",{className:"space-y-4 animate-fade-in",children:[s.sort((p,b)=>p.order-b.order).map(p=>i.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-4 py-2 font-bold text-gray-800 border-b border-gray-200",children:p.title}),i.jsx("div",{className:"divide-y divide-gray-100",children:a.filter(b=>b.moduleId===p.id).map(b=>{const C=L.find(A=>A.topicId===b.id);return i.jsxs("div",{className:"flex justify-between items-center p-3 hover:bg-gray-50",children:[i.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[i.jsx("span",{className:C?"text-emerald-500 font-bold":"text-gray-300",children:C?"":""}),i.jsx("span",{className:C?"text-gray-900 font-medium":"text-gray-500",children:b.title})]}),C&&i.jsx("span",{className:"text-[10px] uppercase font-bold bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded border border-emerald-200",children:C.attendanceStatus})]},b.id)})})]},p.id)),s.length===0&&i.jsx("p",{className:"text-gray-500 text-center py-4 italic",children:"No curriculum modules defined."})]}):i.jsx("div",{className:"space-y-4 animate-fade-in",children:w.length>0?w.map(p=>i.jsxs("div",{className:"flex justify-between items-center p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-gray-900",children:p.companyName}),i.jsxs("p",{className:"text-sm text-gray-600",children:[p.round,"  ",p.interviewType]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(p.date).toDateString()," at ",p.time]})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded border uppercase tracking-wider ${p.status==="Completed"?"bg-emerald-50 text-emerald-700 border-emerald-100":p.status==="Scheduled"?"bg-blue-50 text-blue-700 border-blue-100":"bg-gray-100 text-gray-700 border-gray-200"}`,children:p.status})})]},p.id)):i.jsx("p",{className:"text-gray-500 text-center py-8 italic border border-dashed border-gray-200 rounded-xl",children:"No interview history recorded."})})})]})},o0=()=>{const{addCandidate:t,updateCandidate:e,candidates:n,candidateStatuses:r,addCandidateStatus:s,showToast:a,transactions:o}=Ce(),c=Et(),{id:u}=_s(),[d,f]=M.useState(null),m=`CANDIDATURE AGREEMENT

1. I, [CANDIDATE NAME], agree to join SPR Techforge for the training program.
2. I agree to pay the total sum of [AMOUNT] as discussed.
3. I understand that the advance payment is non-refundable unless specified otherwise.
4. I will maintain professional conduct during the training period.
5. Upon placement, I agree to fulfill the financial obligations as per the agreement.

Date: _________________
Signature: _________________`,[g,v]=M.useState({name:"",batchId:"",email:"",phone:"",alternatePhone:"",referredBy:"",address:"",agreedAmount:0,paidAmount:0,status:lt.Training,placedCompany:"",packageDetails:"",isActive:!0,notes:"",agreementText:m}),[T,E]=M.useState(0);M.useEffect(()=>{if(u){const S=n.find(R=>R.id===u);if(S){const R=o.filter(L=>L.fromEntityId===u&&L.type===xe.Income).reduce((L,w)=>L+w.amount,0)-o.filter(L=>L.toEntityId===u&&L.type===xe.Refund).reduce((L,w)=>L+w.amount,0);E(R),v({...S,paidAmount:R,agreementText:S.agreementText||m.replace("[CANDIDATE NAME]",S.name).replace("[AMOUNT]",S.agreedAmount.toString())})}}},[u,n,o]);const k=(g.agreedAmount||0)-T,j=()=>!g.agreedAmount||g.agreedAmount<=0?i.jsx("span",{className:"text-gray-400",children:"Awaiting agreement amount"}):k>0?i.jsxs("span",{className:"text-amber-600",children:["Current Due: ",re(k)]}):i.jsx("span",{className:"text-emerald-600",children:"Fees Fully Cleared "}),y=S=>{if(S.preventDefault(),f(null),!g.name||!g.name.trim()){f("Full Name is required");return}if(!g.batchId||!g.batchId.trim()){f("Batch ID is required");return}if(!g.email||!g.email.trim()){f("Email Address is required");return}if(!g.phone||!g.phone.trim()){f("Phone Number is required");return}if(g.agreedAmount===void 0||g.agreedAmount<0){f("Agreed Amount is required");return}if(n.some(w=>{var p,b;return w.id!==(u||"")&&(w.email&&w.email.trim().toLowerCase()===((p=g.email)==null?void 0:p.trim().toLowerCase())||w.phone&&w.phone.trim()===((b=g.phone)==null?void 0:b.trim()))})){f("A candidate with this Email or Phone Number already exists.");return}const L={...g,id:u||Lt(),joinedDate:g.joinedDate||new Date().toISOString(),paidAmount:T};u?(e(L),a("Candidate updated successfully")):(t(L),a("Candidate added successfully")),c("/candidates")},_=()=>{const S=window.prompt("Enter new status name:");S&&S.trim()&&(s(S.trim()),v({...g,status:S.trim()}))};return i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:u?"Edit Candidate":"Add New Candidate"}),d&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded shadow-sm animate-fade-in",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm text-red-700 font-bold",children:d})})})}),i.jsxs("form",{onSubmit:y,children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsx("div",{className:"space-y-6",children:i.jsxs(te,{title:"Personal & Contact Details",children:[i.jsx("div",{className:"flex justify-end mb-4",children:i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer bg-gray-50 px-4 py-2 rounded-lg border border-spr-700 hover:bg-gray-100",children:[i.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Active Status"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"checkbox",className:"sr-only peer",checked:g.isActive,onChange:S=>v({...g,isActive:S.target.checked})}),i.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-spr-accent"})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Full Name"}),i.jsx(me,{value:g.name,onChange:S=>v({...g,name:S.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Batch ID"}),i.jsx(me,{value:g.batchId,onChange:S=>v({...g,batchId:S.target.value}),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Phone Number"}),i.jsx(me,{value:g.phone,onChange:S=>v({...g,phone:S.target.value}),required:!0,numericOnly:!0,maxLength:15,placeholder:"Digits only"})]}),i.jsx(me,{label:"Alternate Phone",value:g.alternatePhone||"",onChange:S=>v({...g,alternatePhone:S.target.value}),numericOnly:!0,maxLength:15,placeholder:"Digits only"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Email Address"}),i.jsx(me,{type:"email",value:g.email,onChange:S=>v({...g,email:S.target.value}),required:!0})]}),i.jsx(me,{label:"Referred By",value:g.referredBy||"",onChange:S=>v({...g,referredBy:S.target.value}),placeholder:"Name of referrer (Optional)"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Complete Address"}),i.jsx("textarea",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",rows:3,value:g.address,onChange:S=>v({...g,address:S.target.value}),placeholder:"Enter full address"})]})]})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(te,{title:"Financial Overview",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Agreed Total Amount ()"}),i.jsx(me,{type:"number",value:g.agreedAmount,onChange:S=>v({...g,agreedAmount:parseFloat(S.target.value)||0}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Paid as per Ledger ()"}),i.jsx("div",{className:"px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg font-bold text-emerald-700 tabular-nums",children:re(T)}),i.jsx("div",{className:"text-xs mt-1 font-bold",children:j()})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 required-label",children:"Current Status"}),i.jsx("button",{type:"button",onClick:_,className:"text-xs text-spr-accent hover:underline font-medium",children:"+ Add Status"})]}),i.jsx("select",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors",value:g.status,onChange:S=>v({...g,status:S.target.value}),required:!0,children:r.map(S=>i.jsx("option",{value:S,children:S},S))})]}),g.status===lt.Placed&&i.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200 mb-4 space-y-3 animate-fade-in",children:[i.jsx("h4",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wide",children:"Placement Details"}),i.jsx(me,{label:"Company Name",value:g.placedCompany||"",onChange:S=>v({...g,placedCompany:S.target.value}),placeholder:"e.g. Google, Microsoft"}),i.jsx(me,{label:"Package / Salary Details",value:g.packageDetails||"",onChange:S=>v({...g,packageDetails:S.target.value}),placeholder:"e.g. 12 LPA"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),i.jsx("textarea",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",rows:2,value:g.notes,onChange:S=>v({...g,notes:S.target.value})})]})]}),i.jsx(te,{title:"Candidature Agreement",children:i.jsx("textarea",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-800 font-mono text-sm focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",rows:8,value:g.agreementText,onChange:S=>v({...g,agreementText:S.target.value})})})]})]}),i.jsxs("div",{className:"mt-6 flex gap-4 justify-end pb-10",children:[i.jsx(K,{type:"button",variant:"secondary",onClick:()=>c("/candidates"),children:"Cancel"}),i.jsx(K,{type:"submit",children:u?"Update Candidate":"Save Candidate"})]})]})]})},C4=()=>{const{candidates:t,markAgreementSent:e,markAgreementAccepted:n,isCloudEnabled:r}=Ce(),{id:s}=_s(),a=Et(),o=t.find(d=>d.id===s);if(!o)return i.jsx("div",{className:"p-8 text-center text-gray-500",children:"Candidate not found"});const c=()=>{if(!o.email){alert("No email address found for this candidate.");return}const f=`${window.location.href.split("#")[0]}#/portal/agreement/${o.id}`,m=encodeURIComponent(`Training Agreement - ${o.name} (${o.batchId})`),g=`Dear ${o.name},

Please review and accept your training agreement with SPR Techforge using the link below:

CLICK HERE TO ACCEPT AGREEMENT:
${f}

--------------------------------------------------
Alternatively, the text is provided below for your reference:

${o.agreementText}

Regards,
SPR Techforge Pvt Ltd`,v=encodeURIComponent(g);e(o.id),window.open(`mailto:${o.email}?subject=${m}&body=${v}`)},u=()=>{window.confirm("Confirm that the candidate has physically signed or accepted the agreement?")&&n(o.id)};return i.jsxs("div",{className:"bg-white min-h-screen text-black p-8",children:[i.jsxs("div",{className:"print:hidden mb-8 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center bg-gray-100 p-4 rounded-lg border border-gray-300",children:[i.jsx(K,{variant:"secondary",onClick:()=>a(-1),className:"text-gray-800",children:"Back"}),i.jsxs("div",{className:"flex gap-2",children:[o.agreementAcceptedDate?i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-100 text-emerald-800 rounded-lg font-bold border border-emerald-200",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Accepted on ",new Date(o.agreementAcceptedDate).toLocaleDateString()]}):i.jsxs(i.Fragment,{children:[i.jsx(K,{variant:"secondary",onClick:c,className:"border-blue-300 text-blue-700 bg-blue-50 hover:bg-blue-100",children:"Email Agreement & Link"}),i.jsx(K,{variant:"success",onClick:u,children:"Mark as Accepted"})]}),i.jsx(K,{onClick:()=>window.print(),children:"Print / Save PDF"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:`p-3 rounded border ${o.agreementSentDate?"bg-blue-50 border-blue-200 text-blue-800":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[i.jsx("span",{className:"font-bold text-xs uppercase block",children:"Status: Sent"}),o.agreementSentDate?new Date(o.agreementSentDate).toLocaleString():"Not Sent yet"]}),i.jsxs("div",{className:`p-3 rounded border ${o.agreementAcceptedDate?"bg-emerald-50 border-emerald-200 text-emerald-800":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[i.jsx("span",{className:"font-bold text-xs uppercase block",children:"Status: Accepted"}),o.agreementAcceptedDate?new Date(o.agreementAcceptedDate).toLocaleString():"Pending"]}),i.jsxs("div",{className:`p-3 rounded border ${o.agreementRejectedDate?"bg-red-50 border-red-200 text-red-800":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[i.jsx("span",{className:"font-bold text-xs uppercase block",children:"Status: Rejected"}),o.agreementRejectedDate?i.jsxs("div",{children:[i.jsx("p",{className:"text-xs",children:new Date(o.agreementRejectedDate).toLocaleString()}),i.jsxs("p",{className:"text-[10px] italic mt-1",children:["Reason: ",o.agreementRejectionReason]})]}):"No Rejections"]})]}),!r&&i.jsxs("div",{className:"bg-amber-50 text-amber-800 text-xs p-2 rounded border border-amber-200",children:[i.jsx("strong",{children:"Note:"}),' Online Acceptance Link only works when Cloud Sync is enabled. If offline, please use "Mark as Accepted" manually.']})]}),i.jsxs("div",{className:"max-w-3xl mx-auto print:w-full",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8 border-b-2 border-indigo-600 pb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-indigo-600 rounded-lg",children:i.jsx("svg",{className:"text-white w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-indigo-900",children:"SPR Techforge Pvt Ltd"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Excellence in Training & Placement"})]})]}),i.jsxs("div",{className:"text-right text-sm text-gray-600",children:[i.jsxs("p",{children:["Date: ",new Date().toLocaleDateString()]}),i.jsxs("p",{children:["Ref: ",o.batchId]})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-center uppercase underline mb-6",children:"Candidature Training Agreement"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 bg-gray-50 p-4 rounded border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Candidate Name"}),i.jsx("p",{className:"font-bold text-lg",children:o.name})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Batch ID"}),i.jsx("p",{className:"font-bold text-lg",children:o.batchId})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Contact"}),i.jsx("p",{children:o.phone}),i.jsx("p",{children:o.email})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Address"}),i.jsx("p",{className:"whitespace-pre-wrap",children:o.address||"N/A"})]})]}),i.jsx("div",{className:"prose max-w-none",children:i.jsx("div",{className:"whitespace-pre-wrap font-serif text-justify leading-relaxed text-gray-800",children:o.agreementText||"No agreement text provided."})})]}),i.jsxs("div",{className:"mt-20 grid grid-cols-2 gap-10",children:[i.jsxs("div",{className:"border-t border-black pt-2 text-center",children:[i.jsx("p",{className:"font-bold",children:"SPR Techforge Representative"}),i.jsx("p",{className:"text-xs text-gray-500",children:"(Authorized Signatory)"})]}),i.jsxs("div",{className:"border-t border-black pt-2 text-center relative",children:[i.jsx("p",{className:"font-bold",children:o.name}),i.jsx("p",{className:"text-xs text-gray-500",children:"(Candidate Signature)"}),o.agreementAcceptedDate&&i.jsxs("div",{className:"absolute top-[-40px] left-1/2 transform -translate-x-1/2 border-2 border-emerald-600 text-emerald-600 px-4 py-1 font-bold rounded opacity-80 rotate-[-10deg]",children:["DIGITALLY ACCEPTED",i.jsx("div",{className:"text-[8px] text-center",children:new Date(o.agreementAcceptedDate).toLocaleDateString()})]}),o.agreementRejectedDate&&i.jsxs("div",{className:"absolute top-[-40px] left-1/2 transform -translate-x-1/2 border-2 border-red-600 text-red-600 px-4 py-1 font-bold rounded opacity-80 rotate-[-10deg]",children:["REJECTED",i.jsx("div",{className:"text-[8px] text-center",children:new Date(o.agreementRejectedDate).toLocaleDateString()})]})]})]}),i.jsx("div",{className:"mt-12 text-center text-xs text-gray-400 print:fixed print:bottom-4 print:w-full",children:i.jsx("p",{children:"SPR Techforge Pvt Ltd | Sri Godha Nilayam, 9th Phase Rd, KPHB phase 6, Kukatpally, Hyderabad | contact@sprtechforge.com"})})]})]})},S4=()=>{const{transactions:t,getEntityName:e,deleteTransaction:n,user:r,accounts:s,candidates:a}=Ce(),[o,c]=M.useState(1),[u,d]=M.useState(""),[f,m]=M.useState("All"),[g,v]=M.useState("All"),[T,E]=M.useState(""),[k,j]=M.useState(""),[y,_]=M.useState(""),[S,R]=M.useState(""),[L,w]=M.useState(null),[p,b]=M.useState(null),C=Et(),A=10,I=[...t].sort((U,ae)=>new Date(ae.date).getTime()-new Date(U.date).getTime()).filter(U=>{const ae=f==="All"||U.type===f,W=g==="All"||g==="Locked"&&U.isLocked||g==="Unlocked"&&!U.isLocked,ue=T===""||U.fromEntityId===T,Y=k===""||U.toEntityId===k,ne=e(U.fromEntityId,U.fromEntityType).toLowerCase(),Fe=e(U.toEntityId,U.toEntityType).toLowerCase(),Wr=U.description.toLowerCase().includes(u.toLowerCase())||ne.includes(u.toLowerCase())||Fe.includes(u.toLowerCase());let wn=!0;if(y){const Ln=new Date(y);Ln.setHours(0,0,0,0),wn=wn&&new Date(U.date)>=Ln}if(S){const Ln=new Date(S);Ln.setHours(23,59,59,999),wn=wn&&new Date(U.date)<=Ln}return ae&&Wr&&wn&&W&&ue&&Y}),se=Math.ceil(I.length/A),fe=I.slice((o-1)*A,o*A),Se=U=>{if(U.isLocked&&(r==null?void 0:r.role)!=="admin"){alert("This transaction is locked.");return}b(U.id)},ut=()=>{p&&(n(p),b(null))},Q=()=>{const U=I.map(ae=>({Date:new Date(ae.date).toLocaleDateString(),Type:ae.type,Description:ae.description,From:e(ae.fromEntityId,ae.fromEntityType),To:e(ae.toEntityId,ae.toEntityType),Amount:ae.amount,Locked:ae.isLocked?"Yes":"No"}));Ga(U,"transactions.csv")},ee=[...s].sort((U,ae)=>U.name.localeCompare(ae.name)),oe=[...a].sort((U,ae)=>U.name.localeCompare(ae.name));return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Transactions"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(K,{variant:"secondary",onClick:Q,children:"Export CSV"}),i.jsx(nt,{to:"/finance/transactions/new",children:i.jsx(K,{children:"+ New Entry"})})]})]}),i.jsxs(te,{children:[i.jsxs("div",{className:"mb-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx("input",{placeholder:"Search description...",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none placeholder-gray-400",value:u,onChange:U=>d(U.target.value)}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:f,onChange:U=>m(U.target.value),children:[i.jsx("option",{value:"All",children:"All Types"}),Object.values(xe).map(U=>i.jsx("option",{value:U,children:U},U))]}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:g,onChange:U=>v(U.target.value),children:[i.jsx("option",{value:"All",children:"All Statuses"}),i.jsx("option",{value:"Locked",children:"Locked"}),i.jsx("option",{value:"Unlocked",children:"Unlocked"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-gray-100 pt-4",children:[i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:T,onChange:U=>E(U.target.value),children:[i.jsx("option",{value:"",children:"All Sources (From)"}),i.jsx("optgroup",{label:"Accounts",children:ee.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))}),i.jsx("optgroup",{label:"Candidates",children:oe.map(U=>i.jsxs("option",{value:U.id,children:[U.name," (",U.batchId,")"]},U.id))})]}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:k,onChange:U=>j(U.target.value),children:[i.jsx("option",{value:"",children:"All Destinations (To)"}),i.jsx("optgroup",{label:"Accounts",children:ee.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))}),i.jsx("optgroup",{label:"Candidates",children:oe.map(U=>i.jsxs("option",{value:U.id,children:[U.name," (",U.batchId,")"]},U.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-gray-100 pt-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold w-12",children:"From"}),i.jsx("input",{type:"date",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none placeholder-gray-400",value:y,onChange:U=>_(U.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold w-12",children:"To"}),i.jsx("input",{type:"date",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none placeholder-gray-400",value:S,onChange:U=>R(U.target.value)})]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase tracking-wider text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-3 px-4 w-28",children:"Date"}),i.jsx("th",{className:"py-3 px-4",children:"Description"}),i.jsx("th",{className:"py-3 px-4",children:"From (Source)"}),i.jsx("th",{className:"py-3 px-4",children:"To (Dest)"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Amount"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:fe.length>0?fe.map(U=>{const ae=U.isLocked,W=!ae||(r==null?void 0:r.role)==="admin";return i.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ae?"bg-gray-50/50":""}`,children:[i.jsx("td",{className:"py-3 px-4 text-sm text-gray-500",children:new Date(U.date).toLocaleDateString()}),i.jsxs("td",{className:"py-3 px-4 cursor-pointer group",onClick:()=>w(U),children:[i.jsxs("div",{className:`font-medium flex items-center gap-2 transition-colors ${ae?"text-gray-500":"text-gray-900 hover:text-indigo-600"}`,children:[U.description,ae?i.jsxs("svg",{className:"w-4 h-4 text-amber-600/70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("title",{children:"Locked Transaction"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]}):i.jsxs("svg",{className:"w-3 h-3 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("title",{children:"Editable"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})]})]}),i.jsx("div",{className:"text-xs text-gray-500 inline-block px-1 rounded bg-gray-100 border border-gray-200",children:U.type})]}),i.jsx("td",{className:"py-3 px-4 text-sm",children:e(U.fromEntityId,U.fromEntityType)}),i.jsx("td",{className:"py-3 px-4 text-sm",children:e(U.toEntityId,U.toEntityType)}),i.jsx("td",{className:`py-3 px-4 text-right font-mono font-bold whitespace-nowrap tabular-nums ${U.type===xe.Income?"text-emerald-600":U.type===xe.Payment?"text-red-600":"text-gray-700"}`,children:re(U.amount)}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsx("button",{onClick:()=>w(U),className:"text-gray-400 hover:text-gray-900 p-1 rounded hover:bg-gray-100",title:"View Details",children:i.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),W?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>C(`/finance/transactions/edit/${U.id}`),className:"text-blue-500 hover:text-blue-700 p-1 rounded hover:bg-blue-50",title:"Edit",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),i.jsx("button",{onClick:()=>Se(U),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50",title:"Delete",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}):i.jsx("div",{className:"p-1 px-2",title:"Locked",children:i.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]})})]},U.id)}):i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"py-8 text-center text-gray-500",children:"No transactions found matching your criteria."})})})]})}),i.jsx(Zf,{currentPage:o,totalPages:se,onPageChange:c})]}),i.jsx(qt,{isOpen:!!L,onClose:()=>w(null),title:"Transaction Details",children:L&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center pb-4 border-b border-spr-700",children:[i.jsx("p",{className:"text-gray-500 text-sm uppercase tracking-wider font-bold",children:"Amount"}),i.jsx("p",{className:`text-4xl font-bold mt-2 whitespace-nowrap tabular-nums ${L.type===xe.Income?"text-emerald-600":L.type===xe.Payment?"text-red-600":"text-gray-900"}`,children:re(L.amount)}),i.jsx("div",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-gray-200 text-gray-700",children:L.type})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1 font-bold",children:"Date"}),i.jsx("p",{className:"text-gray-900 font-medium",children:new Date(L.date).toDateString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1 font-bold",children:"Transaction ID"}),i.jsx("p",{className:"text-gray-600 font-mono text-sm truncate",title:L.id,children:L.id})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1 font-bold",children:"Description"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"text-gray-900 text-lg leading-relaxed",children:L.description}),L.isLocked&&i.jsxs("svg",{className:"w-5 h-5 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("title",{children:"Locked"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-spr-700 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"From (Source)"}),i.jsx("p",{className:"text-indigo-600 font-bold",children:e(L.fromEntityId,L.fromEntityType)})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-white text-gray-500 border border-spr-700 font-medium",children:L.fromEntityType})})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"To (Destination)"}),i.jsx("p",{className:"text-indigo-600 font-bold",children:e(L.toEntityId,L.toEntityType)})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-white text-gray-500 border border-spr-700 font-medium",children:L.toEntityType})})]})]}),L.isLocked&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded text-amber-800 text-sm",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"This transaction is locked and cannot be modified by staff."]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(K,{variant:"secondary",onClick:()=>w(null),children:"Close"})})]})}),i.jsx(Ts,{isOpen:!!p,onClose:()=>b(null),onConfirm:ut,title:"Delete Transaction",message:"Are you sure you want to delete this transaction? This will affect account balances."})]})},l0=()=>{const{addTransaction:t,updateTransaction:e,transactions:n,accounts:r,candidates:s,showToast:a}=Ce(),o=Et(),{id:c}=_s(),[u,d]=M.useState(xe.Income),[f,m]=M.useState(new Date().toISOString().split("T")[0]),[g,v]=M.useState(""),[T,E]=M.useState(""),[k,j]=M.useState(""),[y,_]=M.useState("");M.useEffect(()=>{if(c){const b=n.find(C=>C.id===c);b&&(d(b.type),m(b.date.split("T")[0]),v(b.amount.toString()),E(b.description),j(b.fromEntityId),_(b.toEntityId))}},[c,n]);const S=r.filter(b=>b.type===pe.Bank||b.type===pe.Cash),R=r.filter(b=>b.type===pe.Creditor||b.type===pe.Salary),L=r.filter(b=>![pe.Bank,pe.Cash,pe.Creditor,pe.Salary].includes(b.type)),w=b=>i.jsxs(i.Fragment,{children:[i.jsxs("option",{value:"",children:["-- Select ",b," --"]}),i.jsx("optgroup",{label:"Bank & Cash",children:S.map(C=>i.jsxs("option",{value:C.id,children:[C.subType?`${C.subType} > `:"",C.name]},C.id))}),i.jsx("optgroup",{label:"Candidates",children:s.map(C=>i.jsxs("option",{value:C.id,children:[C.name," (",C.batchId,")"]},C.id))}),i.jsx("optgroup",{label:"Creditors / Staff",children:R.map(C=>i.jsxs("option",{value:C.id,children:[C.subType?`${C.subType} > `:"",C.name]},C.id))}),i.jsx("optgroup",{label:"Other Ledgers",children:L.map(C=>i.jsxs("option",{value:C.id,children:[C.subType?`${C.subType} > `:"",C.name]},C.id))})]}),p=b=>{if(b.preventDefault(),!k||!y||!g){alert("Please fill all mandatory fields.");return}const C=s.some(I=>I.id===k),A=s.some(I=>I.id===y),P={id:c||Lt(),date:new Date(f).toISOString(),type:u,amount:parseFloat(g),description:T||`${u} Entry`,fromEntityId:k,fromEntityType:C?"Candidate":"Account",toEntityId:y,toEntityType:A?"Candidate":"Account",isLocked:!1};c?e(P):t(P),a(c?"Transaction updated":"Transaction recorded"),o("/finance/transactions")};return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("button",{onClick:()=>o(-1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),i.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[c?"Edit":"Record"," Transaction"]})]}),i.jsx(te,{children:i.jsxs("form",{onSubmit:p,className:"space-y-6",children:[i.jsx("div",{className:"flex bg-gray-100 p-1.5 rounded-xl border border-gray-200",children:Object.values(xe).map(b=>i.jsx("button",{type:"button",onClick:()=>d(b),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${u===b?"bg-white text-spr-900 shadow-sm border border-gray-100":"text-gray-500 hover:text-gray-700"}`,children:b},b))}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Transaction Date"}),i.jsx("input",{type:"date",className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:f,onChange:b=>m(b.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Amount ()"}),i.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 font-bold focus:ring-1 focus:ring-spr-accent outline-none",placeholder:"0.00",value:g,onChange:b=>v(b.target.value),required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"From (Source of Funds)"}),i.jsx("select",{className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:k,onChange:b=>j(b.target.value),required:!0,children:w("Payer")}),i.jsx("p",{className:"text-[10px] text-gray-400 mt-1 uppercase font-medium",children:"Select who is paying or where money is coming from"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"To (Destination Ledger)"}),i.jsx("select",{className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:y,onChange:b=>_(b.target.value),required:!0,children:w("Receiver")}),i.jsx("p",{className:"text-[10px] text-gray-400 mt-1 uppercase font-medium",children:"Select where the money is being deposited"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Description / Memo"}),i.jsx("textarea",{className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",rows:2,value:T,onChange:b=>E(b.target.value),placeholder:"e.g. Monthly Rent, Registration Fee, Staff Salary..."})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[i.jsx(K,{type:"button",variant:"secondary",onClick:()=>o("/finance/transactions"),children:"Cancel"}),i.jsx(K,{type:"submit",className:"px-10",children:c?"Update Entry":"Save Transaction"})]})]})})]})},I4=()=>{const{accounts:t,getEntityBalance:e,deleteAccount:n}=Ce(),r=Et(),[s,a]=M.useState(""),[o,c]=M.useState(null),u=(v,T)=>{if(T){alert("Cannot delete system accounts");return}c(v)},d=()=>{o&&(n(o),c(null))},f=v=>v>0?"text-emerald-600":v<0?"text-red-600":"text-gray-400",g=t.filter(v=>v.name.toLowerCase().includes(s.toLowerCase())||v.subType&&v.subType.toLowerCase().includes(s.toLowerCase())).reduce((v,T)=>{const E=T.subType||`General ${T.type}`;return v[E]||(v[E]=[]),v[E].push(T),v},{});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ledger Accounts"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Manage your Chart of Accounts organized by Sub Ledgers."})]}),i.jsx(nt,{to:"/finance/accounts/new",children:i.jsx(K,{children:"+ Add Account"})})]}),i.jsx(te,{className:"p-0",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-gray-500 ml-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),i.jsx("input",{placeholder:"Search accounts or sub-ledgers...",className:"w-full bg-white border-none rounded-lg px-2 py-4 text-gray-900 focus:ring-0 outline-none placeholder-gray-400",value:s,onChange:v=>a(v.target.value)})]})}),Object.keys(g).length>0?Object.entries(g).sort().map(([v,T])=>i.jsx(te,{title:v,action:i.jsx("span",{className:"text-[10px] font-bold bg-gray-100 text-gray-500 px-2 py-1 rounded uppercase tracking-widest",children:T[0].type}),className:"mb-6 border-l-4 border-l-indigo-500",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-100 text-[10px] uppercase font-bold text-gray-400",children:[i.jsx("th",{className:"py-2 px-4",children:"Ledger Name"}),i.jsx("th",{className:"py-2 px-4 text-right",children:"Current Balance"}),i.jsx("th",{className:"py-2 px-4 text-center w-32",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-50",children:T.map(E=>{const k=e(E.id,"Account");return i.jsxs("tr",{className:"hover:bg-indigo-50/30 transition-colors",children:[i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("div",{className:"font-bold text-gray-800",children:E.name}),E.description&&i.jsx("div",{className:"text-[10px] text-gray-400 italic",children:E.description})]}),i.jsx("td",{className:`py-3 px-4 text-right font-mono font-bold whitespace-nowrap tabular-nums ${f(k)}`,children:re(k)}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsxs("div",{className:"flex justify-center gap-1",children:[i.jsx("button",{onClick:()=>r(`/finance/statement/Account/${E.id}`),className:"p-1.5 text-indigo-600 hover:bg-indigo-100 rounded",title:"Statement",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx("button",{onClick:()=>r(`/finance/accounts/edit/${E.id}`),className:"p-1.5 text-blue-600 hover:bg-blue-100 rounded",title:"Edit",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),!E.isSystem&&i.jsx("button",{onClick:()=>u(E.id,E.isSystem),className:"p-1.5 text-red-500 hover:bg-red-100 rounded",title:"Delete",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},E.id)})})]})})},v)):i.jsx("div",{className:"text-center text-gray-500 py-12 bg-white rounded-xl border border-gray-300 border-dashed",children:i.jsxs("p",{children:['No ledger accounts found matching "',s,'".']})}),i.jsx(Ts,{isOpen:!!o,onClose:()=>c(null),onConfirm:d,title:"Delete Account",message:"Are you sure you want to delete this account? History will be preserved but the account name will be lost in filters."})]})},c0=()=>{const{addAccount:t,updateAccount:e,accounts:n,showToast:r}=Ce(),s=Et(),{id:a}=_s(),[o,c]=M.useState({name:"",type:pe.Expense,subType:"",openingBalance:0,description:"",recurringAmount:0,recurringStartDate:"",recurringDueDay:1});M.useEffect(()=>{if(a){const f=n.find(m=>m.id===a);f&&c(f)}},[a,n]);const u=f=>{if(f.preventDefault(),!o.name)return alert("Account Name is required");const m={...o,id:a||Lt()};a?(e(m),r("Ledger Account updated successfully")):(t(m),r("Ledger Account created successfully")),s("/finance/accounts")},d=o.type===pe.Salary||o.type===pe.Expense;return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:a?"Edit Account":"Add New Account"}),i.jsx(te,{children:i.jsxs("form",{onSubmit:u,children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx("div",{className:"col-span-2",children:i.jsx(me,{label:"Account / Ledger Name",value:o.name,onChange:f=>c({...o,name:f.target.value}),placeholder:o.type==="Salary"?"e.g. John Doe Salary A/c":"e.g. Axis Bank, Office Rent",required:!0})}),i.jsx(j1,{label:"Account Type",value:o.type,onChange:f=>c({...o,type:f.target.value}),children:Object.values(pe).map(f=>i.jsx("option",{value:f,children:f},f))}),i.jsx(me,{label:"Sub Ledger / Grouping",value:o.subType,onChange:f=>c({...o,subType:f.target.value}),placeholder:"e.g. Utilities, Employee, HDFC"}),i.jsx(me,{label:"Opening Balance ()",type:"number",value:o.openingBalance,onChange:f=>c({...o,openingBalance:parseFloat(f.target.value)||0})})]}),d&&i.jsxs("div",{className:"mt-6 bg-blue-50 p-4 rounded-lg border border-blue-200 animate-fade-in",children:[i.jsx("h3",{className:"text-sm font-bold text-blue-900 uppercase mb-3",children:"Fixed Monthly Obligations"}),i.jsx("p",{className:"text-xs text-blue-800 mb-3",children:"Configure this if you have a fixed monthly payment for this account (e.g., Employee Salary, Office Rent)."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fixed Monthly Amount ()"}),i.jsx(me,{type:"number",value:o.recurringAmount||0,onChange:f=>c({...o,recurringAmount:parseFloat(f.target.value)||0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Month/Date"}),i.jsx(me,{type:"date",value:o.recurringStartDate||"",onChange:f=>c({...o,recurringStartDate:f.target.value})})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Day of Month"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"number",min:"1",max:"31",className:"w-24 bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors shadow-sm",value:o.recurringDueDay||1,onChange:f=>c({...o,recurringDueDay:parseInt(f.target.value)||1})}),i.jsx("p",{className:"text-xs text-gray-500 italic",children:'The payment will show as "Pending" after this day passes each month. Use 31 for end of month.'})]})]})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx(me,{label:"Description",value:o.description||"",onChange:f=>c({...o,description:f.target.value})})}),i.jsxs("div",{className:"mt-6 flex gap-4 justify-end",children:[i.jsx(K,{type:"button",variant:"secondary",onClick:()=>s("/finance/accounts"),children:"Cancel"}),i.jsx(K,{type:"submit",children:"Save Account"})]})]})})]})},k4=()=>{const{transactions:t,getEntityName:e,accounts:n,candidates:r}=Ce(),{type:s,id:a}=_s(),o=Et();if(!s||!a)return i.jsx("div",{children:"Invalid Parameters"});const c=s==="Account"?n.find(T=>T.id===a):null,u=s==="Candidate"?r.find(T=>T.id===a):null,d=(u==null?void 0:u.name)||(c==null?void 0:c.name);if(!d)return i.jsx("div",{className:"text-gray-900 p-4",children:"Entity not found."});const m=[...t.filter(T=>T.fromEntityId===a&&T.fromEntityType===s||T.toEntityId===a&&T.toEntityType===s).sort((T,E)=>new Date(E.date).getTime()-new Date(T.date).getTime())].reverse();let g=0;s==="Account"&&c&&(g=c.openingBalance);const v=m.map(T=>{let E=0;return T.toEntityId===a&&T.toEntityType===s?E=T.amount:E=-T.amount,g+=E,{...T,impact:E,runningBalance:g}}).reverse();return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx(K,{variant:"secondary",onClick:()=>o(-1),className:"mb-2 text-xs",children:"Back"}),i.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Statement: ",d]}),i.jsxs("p",{className:"text-gray-500 text-sm font-medium",children:[s," ",c!=null&&c.subType?` Group: ${c.subType}`:""]})]}),i.jsx(K,{onClick:()=>Ga(v,`${d}_Statement.csv`),children:"Download CSV"})]}),i.jsx(te,{children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-3 px-4",children:"Date"}),i.jsx("th",{className:"py-3 px-4",children:"Description"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Credit (+)"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Debit (-)"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Balance"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:v.length>0?v.map(T=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4 text-sm font-medium",children:new Date(T.date).toLocaleDateString()}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("div",{className:"text-gray-900",children:T.description}),i.jsx("div",{className:"text-xs text-gray-500",children:T.impact>0?`From: ${e(T.fromEntityId,T.fromEntityType)}`:`To: ${e(T.toEntityId,T.toEntityType)}`})]}),i.jsx("td",{className:"py-3 px-4 text-right text-emerald-600 font-medium whitespace-nowrap tabular-nums",children:T.impact>0?re(T.amount):"-"}),i.jsx("td",{className:"py-3 px-4 text-right text-red-600 font-medium whitespace-nowrap tabular-nums",children:T.impact<0?re(T.amount):"-"}),i.jsx("td",{className:"py-3 px-4 text-right font-mono font-bold text-gray-900 whitespace-nowrap tabular-nums",children:re(T.runningBalance)})]},T.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"text-center py-8 text-gray-500",children:"No transactions recorded for this entity."})})})]})})]})},A4=()=>{const{transactions:t,accounts:e,candidates:n,getEntityBalance:r}=Ce(),[s,a]=M.useState("BS"),o=t.filter(w=>{if(w.type!==xe.Income)return!1;if(w.fromEntityType==="Candidate")return!0;if(w.fromEntityType==="Account"){const p=e.find(b=>b.id===w.fromEntityId);return(p==null?void 0:p.type)===pe.Income}return!1}),c=t.filter(w=>w.type===xe.Payment),u=o.reduce((w,p)=>w+p.amount,0),d=c.reduce((w,p)=>w+p.amount,0),f=u-d,m=c.reduce((w,p)=>{let b="General Payment";if(p.toEntityType==="Account"){const C=e.find(A=>A.id===p.toEntityId);C&&(b=C.subType||C.name)}return w[b]=(w[b]||0)+p.amount,w},{}),g=e.filter(w=>w.type===pe.Cash),v=e.filter(w=>w.type===pe.Bank),T=e.filter(w=>w.type===pe.Debtor),E=g.reduce((w,p)=>w+r(p.id,"Account"),0),k=v.reduce((w,p)=>w+r(p.id,"Account"),0),j=T.reduce((w,p)=>w+r(p.id,"Account"),0),y=n.reduce((w,p)=>{if(!p.isActive&&p.status==="Discontinued")return w;const b=t.filter(I=>I.fromEntityId===p.id&&I.type===xe.Income).reduce((I,se)=>I+se.amount,0),C=t.filter(I=>I.toEntityId===p.id&&I.type===xe.Refund).reduce((I,se)=>I+se.amount,0),A=b-C,P=p.agreedAmount-A;return w+(P>0?P:0)},0),_=E+k+j+y,R=e.filter(w=>w.type===pe.Creditor).reduce((w,p)=>{const b=r(p.id,"Account");return w+(b<0?Math.abs(b):0)},0),L=_-R;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center print:hidden",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Financial Statements"}),i.jsx(K,{onClick:()=>window.print(),children:"Print / Save PDF"})]}),i.jsxs("div",{className:"print:hidden flex space-x-4 border-b border-gray-200",children:[i.jsx("button",{className:`py-2 px-4 font-medium border-b-2 transition-colors ${s==="BS"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>a("BS"),children:"Balance Sheet"}),i.jsx("button",{className:`py-2 px-4 font-medium border-b-2 transition-colors ${s==="PL"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>a("PL"),children:"Profit & Loss"})]}),i.jsxs("div",{className:"bg-white p-8 min-h-screen shadow-sm border border-gray-200 print:shadow-none print:border-none print:p-0",children:[i.jsxs("div",{className:"text-center border-b-2 border-gray-800 pb-6 mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 uppercase tracking-widest",children:"SPR Techforge Pvt Ltd"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Consultancy & Training Services"}),i.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Generated on: ",new Date().toLocaleDateString()]})]}),(s==="BS"||typeof window<"u")&&i.jsxs("div",{className:s==="BS"?"block":"hidden print:block print:break-after-page",children:[i.jsx("h3",{className:"text-xl font-bold text-center underline mb-6",children:"BALANCE SHEET"}),i.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 mb-2",children:[i.jsx("span",{className:"font-bold text-emerald-800",children:"ASSETS"}),i.jsx("span",{className:"font-bold text-emerald-800",children:"Amount ()"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsx("div",{className:"flex justify-between font-semibold text-gray-700",children:i.jsx("span",{children:"Current Assets"})}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Cash on Hand"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:re(E)})]}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Bank Accounts"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:re(k)})]}),i.jsx("div",{className:"flex justify-between font-semibold text-gray-700 mt-4",children:i.jsx("span",{children:"Receivables"})}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Candidate Fees Pending"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:re(y)})]}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Sundry Debtors"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:re(j)})]})]}),i.jsxs("div",{className:"flex justify-between border-t border-gray-800 pt-2 mt-8 font-bold text-gray-900 text-lg",children:[i.jsx("span",{children:"TOTAL ASSETS"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:re(_)})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 mb-2",children:[i.jsx("span",{className:"font-bold text-red-800",children:"LIABILITIES"}),i.jsx("span",{className:"font-bold text-red-800",children:"Amount ()"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsx("div",{className:"flex justify-between font-semibold text-gray-700",children:i.jsx("span",{children:"Current Liabilities"})}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Sundry Creditors (Loans/Payables)"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:re(R)})]})]}),i.jsxs("div",{className:"flex justify-between border-t border-gray-300 pt-2 mt-8 font-bold text-gray-700",children:[i.jsx("span",{children:"Total Liabilities"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:re(R)})]}),i.jsxs("div",{className:"mt-8",children:[i.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 mb-2",children:[i.jsx("span",{className:"font-bold text-indigo-800",children:"EQUITY"}),i.jsx("span",{className:"font-bold text-indigo-800",children:"Amount ()"})]}),i.jsx("div",{className:"space-y-2 text-sm",children:i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Owners Capital / Net Value"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:re(L)})]})})]}),i.jsxs("div",{className:"flex justify-between border-t border-gray-800 pt-2 mt-8 font-bold text-gray-900 text-lg",children:[i.jsx("span",{children:"TOTAL LIABILITIES & EQUITY"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:re(R+L)})]})]})]})]}),(s==="PL"||typeof window<"u")&&i.jsxs("div",{className:`${s==="PL"?"block":"hidden print:block"} print:mt-8`,children:[i.jsx("h3",{className:"text-xl font-bold text-center underline mb-6",children:"PROFIT & LOSS ACCOUNT (Operating)"}),i.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-gray-100 text-gray-900 font-bold",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 border-r border-gray-300 w-2/3",children:"Particulars"}),i.jsx("th",{className:"p-3 text-right",children:"Amount ()"})]})}),i.jsxs("tbody",{className:"divide-y divide-gray-200",children:[i.jsxs("tr",{className:"bg-emerald-50/50 font-bold text-emerald-800",children:[i.jsx("td",{className:"p-3 border-r border-gray-200",children:"OPERATING INCOME"}),i.jsx("td",{className:"p-3 text-right"})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"p-3 pl-8 border-r border-gray-200 text-gray-700",children:"Fees & Consultancy Revenue"}),i.jsx("td",{className:"p-3 text-right text-gray-900 whitespace-nowrap tabular-nums",children:re(u)})]}),i.jsxs("tr",{className:"font-bold bg-gray-50",children:[i.jsx("td",{className:"p-3 border-r border-gray-200 text-right",children:"Total Operating Revenue (A)"}),i.jsx("td",{className:"p-3 text-right text-emerald-700 whitespace-nowrap tabular-nums",children:re(u)})]}),i.jsxs("tr",{className:"bg-red-50/50 font-bold text-red-800",children:[i.jsx("td",{className:"p-3 border-r border-gray-200",children:"OPERATING EXPENSES"}),i.jsx("td",{className:"p-3 text-right"})]}),Object.entries(m).map(([w,p])=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-3 pl-8 border-r border-gray-200 text-gray-700",children:w}),i.jsx("td",{className:"p-3 text-right text-gray-900 whitespace-nowrap tabular-nums",children:re(p)})]},w)),i.jsxs("tr",{className:"font-bold bg-gray-50",children:[i.jsx("td",{className:"p-3 border-r border-gray-200 text-right",children:"Total Operating Expenses (B)"}),i.jsx("td",{className:"p-3 text-right text-red-700 whitespace-nowrap tabular-nums",children:re(d)})]}),i.jsxs("tr",{className:`text-lg font-bold ${f>=0?"bg-emerald-100 text-emerald-900":"bg-red-100 text-red-900"}`,children:[i.jsx("td",{className:"p-4 border-r border-gray-300 text-right uppercase",children:f>=0?"Net Operating Profit (A - B)":"Net Operating Loss (A - B)"}),i.jsx("td",{className:"p-4 text-right whitespace-nowrap tabular-nums",children:re(f)})]})]})]})}),i.jsx("p",{className:"mt-4 text-[10px] text-gray-400 italic",children:"* Loans and liability receipts are excluded from Operating Profit."})]}),i.jsx("div",{className:"mt-12 text-center text-xs text-gray-400",children:i.jsx("p",{children:"This is a computer-generated statement."})})]})]})},P4=()=>{const{accounts:t,transactions:e}=Ce(),n=t.filter(a=>(a.type===pe.Salary||a.recurringAmount!==void 0&&a.recurringAmount>0)&&a.recurringStartDate),r=(a,o=1,c)=>{const u=new Date(a),d=c?new Date(c):new Date;let f=0,m=new Date(u.getFullYear(),u.getMonth(),1),g=0;const v=600;for(;m<=d&&g<v;){g++;let T=m.getFullYear(),E=m.getMonth(),k=o;const j=new Date(T,E+1,0).getDate();k>j&&(k=j);const y=new Date(T,E,k);d>=y&&f++,m.setMonth(m.getMonth()+1)}return f},s=a=>{const o=["th","st","nd","rd"],c=a%100;return a+(o[(c-20)%10]||o[c]||o[0])};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Payroll & Fixed Expenses"}),i.jsx("p",{className:"text-gray-500",children:"Track monthly salaries, office rent, and other recurring fixed obligations."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(nt,{to:"/finance/accounts/new",children:i.jsx(K,{variant:"secondary",children:"+ New Ledger"})}),i.jsx(nt,{to:"/finance/transactions/new",children:i.jsx(K,{children:"+ Make Payment"})})]})]}),i.jsx(te,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-3 px-4",children:"Ledger / Employee"}),i.jsx("th",{className:"py-3 px-4",children:"Cycle"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Months Due"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Fixed Monthly ()"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Total Payable"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Total Paid"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Balance Pending"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:n.length>0?n.map(a=>{const o=r(a.recurringStartDate,a.recurringDueDay,a.recurringEndDate),c=o*(a.recurringAmount||0),u=e.filter(f=>f.toEntityId===a.id&&f.toEntityType==="Account"&&f.type===xe.Payment).reduce((f,m)=>f+m.amount,0),d=c-u;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900",children:[a.name,a.subType&&i.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase",children:a.subType})]}),i.jsx("td",{className:"py-3 px-4 text-sm",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-medium text-indigo-600",children:a.recurringDueDay===31?"End of month":`${s(a.recurringDueDay||1)} of month`}),i.jsxs("span",{className:"text-[10px] text-gray-400",children:["Since ",new Date(a.recurringStartDate).toLocaleDateString(void 0,{month:"short",year:"numeric"})]})]})}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsxs("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs font-bold ${o>0?"bg-indigo-50 text-indigo-700 border border-indigo-100":"bg-gray-100 text-gray-400"}`,children:[o," Mo."]})}),i.jsx("td",{className:"py-3 px-4 text-right text-gray-900 whitespace-nowrap tabular-nums",children:re(a.recurringAmount||0)}),i.jsx("td",{className:"py-3 px-4 text-right font-medium whitespace-nowrap tabular-nums text-gray-400",children:re(c)}),i.jsx("td",{className:"py-3 px-4 text-right text-emerald-600 font-medium whitespace-nowrap tabular-nums",children:re(u)}),i.jsx("td",{className:`py-3 px-4 text-right font-bold whitespace-nowrap tabular-nums ${d>0?"text-red-600":"text-emerald-600"}`,children:d>0?i.jsxs("div",{className:"flex flex-col items-end",children:[i.jsx("span",{children:re(d)}),i.jsx("span",{className:"text-[9px] uppercase tracking-tighter text-red-400",children:"Arrears"})]}):"CLEARED "}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsx(nt,{to:`/finance/statement/Account/${a.id}`,className:"text-gray-400 hover:text-indigo-600 transition-colors",title:"Statement",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx(nt,{to:`/finance/accounts/edit/${a.id}`,className:"text-gray-400 hover:text-blue-600 transition-colors",title:"Edit Schedule",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})})]})})]},a.id)}):i.jsx("tr",{children:i.jsxs("td",{colSpan:8,className:"py-12 text-center text-gray-500",children:[i.jsxs("div",{className:"flex flex-col items-center opacity-40",children:[i.jsx("svg",{className:"w-12 h-12 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),i.jsx("p",{className:"font-medium",children:"No fixed recurring payments found."})]}),i.jsx("p",{className:"text-xs mt-2 text-gray-400",children:'Create a Ledger Account (Type: Salary or Expense) and set a "Fixed Monthly Amount" to see it here.'})]})})})]})})}),i.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-100 flex items-start gap-3",children:[i.jsx("svg",{className:"w-5 h-5 text-amber-600 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsxs("div",{className:"text-xs text-amber-800 leading-relaxed",children:[i.jsx("strong",{children:"How calculations work:"}),` The system checks the "Due Day" for every month since your configured start date. If today's date has reached or passed that day in the current month, it is added to your total obligations. "Balance Pending" is the difference between total obligations and payments recorded in your ledger.`]})]})]})},R4=()=>{const{exportData:t,exportFullExcel:e,importDatabase:n,factoryReset:r,isCloudEnabled:s,transactions:a,accounts:o,candidates:c,getEntityBalance:u}=Ce(),[d,f]=Ca.useState("Data"),m=Ca.useRef(null),g=S=>{var w;const R=(w=S.target.files)==null?void 0:w[0];if(!R)return;const L=new FileReader;L.onload=async p=>{var b;try{const C=JSON.parse((b=p.target)==null?void 0:b.result);let A="You are about to restore the database from a backup file. This will OVERWRITE current local data.";s&&(A+=" Since Cloud is enabled, this will also upload the backup data to Firebase, potentially overwriting or adding to existing records."),window.confirm(A+`

Are you sure you want to proceed?`)&&await n(C)}catch{alert("Invalid JSON File. Please upload a valid backup file.")}m.current&&(m.current.value="")},L.readAsText(R)},v=a.filter(S=>S.type===xe.Income).reduce((S,R)=>S+R.amount,0),T=a.filter(S=>S.type===xe.Payment).reduce((S,R)=>S+R.amount,0),E=o.filter(S=>S.type===pe.Creditor||S.type===pe.Salary).reduce((S,R)=>{const L=u(R.id,"Account");return S+(L<0?Math.abs(L):0)},0),k=o.filter(S=>S.type===pe.Debtor).reduce((S,R)=>{const L=u(R.id,"Account");return S+(L>0?L:0)},0)+c.reduce((S,R)=>{if(!R.isActive&&R.status===lt.Discontinued)return S;const L=a.filter(p=>p.fromEntityId===R.id&&p.type===xe.Income).reduce((p,b)=>p+b.amount,0)-a.filter(p=>p.toEntityId===R.id&&p.type===xe.Refund).reduce((p,b)=>p+b.amount,0),w=R.agreedAmount-L;return S+(w>0?w:0)},0),y=Array.from({length:6},(S,R)=>{const L=new Date;return L.setMonth(L.getMonth()-(5-R)),L}).map(S=>{const R=S.toLocaleString("default",{month:"short",year:"2-digit"}),L=a.filter(p=>p.type===xe.Income&&new Date(p.date).getMonth()===S.getMonth()&&new Date(p.date).getFullYear()===S.getFullYear()).reduce((p,b)=>p+b.amount,0),w=a.filter(p=>p.type===xe.Payment&&new Date(p.date).getMonth()===S.getMonth()&&new Date(p.date).getFullYear()===S.getFullYear()).reduce((p,b)=>p+b.amount,0);return{label:R,income:L,payment:w}}),_=Math.max(...y.map(S=>Math.max(S.income,S.payment)),5e3);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Management & Reports"}),i.jsx("p",{className:"text-gray-500",children:"Comprehensive financial analysis and system health."})]}),i.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>f("Data"),className:`px-4 py-2 rounded-md font-medium transition-all ${d==="Data"?"bg-white text-spr-accent shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Data & Metrics"}),i.jsx("button",{onClick:()=>f("Info"),className:`px-4 py-2 rounded-md font-medium transition-all ${d==="Info"?"bg-white text-spr-accent shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"System Status"})]})]}),d==="Data"&&i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsx(te,{title:"Advanced Data Export",className:"border-l-4 border-l-indigo-600",children:i.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Comprehensive Excel Report"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Download a single Excel file containing multiple sheets: Candidates, Transactions, Debtors, Creditors, Balance Sheet, and P&L."})]}),i.jsxs(K,{onClick:e,className:"shrink-0 bg-indigo-700 hover:bg-indigo-800 py-3 px-8",children:[i.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Full Excel Report"]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(te,{title:"Pending Obligations Summary",action:i.jsx("span",{className:"text-[10px] font-bold text-amber-600 bg-amber-50 px-2 py-1 rounded border border-amber-100 uppercase",children:"Snapshot"}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50/50 rounded-xl border border-red-100",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-red-700 font-bold uppercase tracking-wider",children:"Pending Payments (Payables)"}),i.jsx("p",{className:"text-xs text-red-500",children:"Money you owe to Creditors/Staff"})]}),i.jsx("p",{className:"text-xl font-black text-red-600 tabular-nums",children:re(E)})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 bg-emerald-50/50 rounded-xl border border-emerald-100",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-emerald-700 font-bold uppercase tracking-wider",children:"Pending Receivables"}),i.jsx("p",{className:"text-xs text-emerald-500",children:"Money owed to you by Students/Debtors"})]}),i.jsx("p",{className:"text-xl font-black text-emerald-600 tabular-nums",children:re(k)})]}),i.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Projected Net Liquidity Increase"}),i.jsx("span",{className:`text-lg font-black tabular-nums ${k-E>=0?"text-spr-600":"text-red-600"}`,children:re(k-E)})]}),i.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:"Total Receivables minus Total Payables"})]})]})}),i.jsx(te,{title:"Cash Flow Integrity",action:i.jsx("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded border border-indigo-100 uppercase",children:"Realized"}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-50 pb-2",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Total Income (Cash In)"}),i.jsx("span",{className:"font-bold text-emerald-600 tabular-nums",children:re(v)})]}),i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-50 pb-2",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Total Payments (Cash Out)"}),i.jsx("span",{className:"font-bold text-red-600 tabular-nums",children:re(T)})]}),i.jsxs("div",{className:"flex justify-between items-center pt-2",children:[i.jsx("span",{className:"text-base font-bold text-gray-900",children:"Net Realized Profit"}),i.jsx("span",{className:"text-xl font-black text-gray-900 tabular-nums",children:re(v-T)})]})]})})]}),i.jsxs(te,{title:"Financial Performance Overview (Realized Cash Flow)",children:[i.jsx("div",{className:"h-64 flex items-end justify-between gap-4 px-2 pb-2 pt-6",children:y.map((S,R)=>i.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center gap-2 group",children:[i.jsxs("div",{className:"w-full flex justify-center gap-1 h-full items-end relative",children:[i.jsxs("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-gray-900 text-white text-[10px] p-2 rounded shadow-xl z-10 whitespace-nowrap",children:[i.jsxs("span",{className:"text-emerald-400",children:["In: ",re(S.income)]}),i.jsx("br",{}),i.jsxs("span",{className:"text-red-400",children:["Out: ",re(S.payment)]})]}),i.jsx("div",{className:"w-4 bg-emerald-500/80 hover:bg-emerald-500 rounded-t-sm transition-all duration-300",style:{height:`${S.income/_*100}%`}}),i.jsx("div",{className:"w-4 bg-red-500/80 hover:bg-red-500 rounded-t-sm transition-all duration-300",style:{height:`${S.payment/_*100}%`}})]}),i.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-tighter",children:S.label})]},R))}),i.jsxs("div",{className:"flex justify-center gap-6 mt-6 border-t border-gray-100 pt-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-2.5 h-2.5 bg-emerald-500 rounded-full"}),i.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Income"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-2.5 h-2.5 bg-red-500 rounded-full"}),i.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Payments"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(te,{className:"flex flex-col justify-between hover:border-blue-200 transition-colors",children:[i.jsxs("div",{children:[i.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-lg flex items-center justify-center mb-4",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),i.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"System Backup (JSON)"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Generate a full technical snapshot of all modules, transactions, and settings for migration or recovery."})]}),i.jsx(K,{onClick:t,className:"w-full",children:"Export Database"})]}),i.jsxs(te,{className:"flex flex-col justify-between hover:border-emerald-200 transition-colors",children:[i.jsxs("div",{children:[i.jsx("div",{className:"w-10 h-10 bg-emerald-50 text-emerald-600 rounded-lg flex items-center justify-center mb-4",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13l-3-3m0 0l-3 3m3-3v12"})})}),i.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Restore System"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Upload a backup file to restore the application to a previous state."})]}),i.jsxs("div",{children:[i.jsx("input",{type:"file",accept:".json",ref:m,style:{display:"none"},onChange:g}),i.jsx(K,{variant:"secondary",onClick:()=>{var S;return(S=m.current)==null?void 0:S.click()},className:"w-full",children:"Import JSON File"})]})]}),i.jsxs(te,{className:"flex flex-col justify-between border-red-100 bg-red-50/20 hover:bg-red-50/40 transition-colors",children:[i.jsxs("div",{children:[i.jsx("div",{className:"w-10 h-10 bg-red-50 text-red-600 rounded-lg flex items-center justify-center mb-4",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),i.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Factory Reset"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Wipe all local data and start fresh. Make sure you have a backup first."})]}),i.jsx(K,{variant:"danger",onClick:r,className:"w-full",children:"Reset to Fresh"})]})]})]}),d==="Info"&&i.jsx("div",{className:"animate-fade-in",children:i.jsx(te,{title:"System Environment",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:`p-4 rounded-xl ${s?"bg-emerald-50 text-emerald-600":"bg-gray-100 text-gray-600"}`,children:i.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-gray-900",children:"Database Engine"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Mode: ",s?"Google Firebase Cloud":"Browser IndexedDB / LocalStorage"]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:s?"Your data is secured in real-time across devices.":"Your data is stored privately on this device."})]})]}),i.jsxs("div",{className:"border-t border-gray-100 pt-6",children:[i.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:"Storage Statistics"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Total Entries"}),i.jsxs("span",{className:"text-xl font-bold text-gray-800",children:[a.length," Transactions"]})]}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Total Accounts"}),i.jsxs("span",{className:"text-xl font-bold text-gray-800",children:[o.length," Ledgers"]})]}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Total Students"}),i.jsxs("span",{className:"text-xl font-bold text-gray-800",children:[c.length," Candidates"]})]}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Last Sync"}),i.jsx("span",{className:"text-sm font-medium text-gray-600",children:new Date().toLocaleTimeString()})]})]})]})]})})})]})},D4=()=>{const{users:t,candidates:e}=Ce(),[n,r]=M.useState(""),[s,a]=M.useState("All"),o=t.filter(f=>!f.linkedCandidateId).map(f=>({id:f.id,name:f.name||f.username,role:f.role==="admin"?"Administrator":"Staff",email:f.email||f.username,phone:"",type:"Staff"})),c=e.filter(f=>f.isActive).map(f=>({id:f.id,name:f.name,role:`Candidate (${f.batchId})`,email:f.email,phone:f.phone,type:"Candidate"})),d=[...o,...c].filter(f=>{const m=f.name.toLowerCase().includes(n.toLowerCase())||f.email.toLowerCase().includes(n.toLowerCase())||f.role.toLowerCase().includes(n.toLowerCase()),g=s==="All"||f.type===s;return m&&g});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Address Book"}),i.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[i.jsx("input",{placeholder:"Search contacts...",className:"bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none flex-1",value:n,onChange:f=>r(f.target.value)}),i.jsxs("select",{className:"bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:s,onChange:f=>a(f.target.value),children:[i.jsx("option",{value:"All",children:"All Contacts"}),i.jsx("option",{value:"Candidate",children:"Candidates"}),i.jsx("option",{value:"Staff",children:"Staff"})]})]})]}),d.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(f=>i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold text-white ${f.type==="Staff"?"bg-indigo-600":"bg-emerald-500"}`,children:f.name.charAt(0).toUpperCase()}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-gray-900",children:f.name}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${f.type==="Staff"?"bg-indigo-50 text-indigo-700 border-indigo-100":"bg-emerald-50 text-emerald-700 border-emerald-100"}`,children:f.role})]})]}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-600 flex-1",children:[f.phone&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),i.jsx("span",{children:f.phone})]}),f.email&&i.jsxs("div",{className:"flex items-center gap-2 break-all",children:[i.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("span",{children:f.email})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-100",children:[f.phone&&i.jsx("a",{href:`tel:${f.phone}`,className:"flex-1 py-2 text-center rounded-lg bg-green-50 text-green-700 font-medium hover:bg-green-100 transition-colors text-sm",children:"Call"}),f.email&&i.jsx("a",{href:`mailto:${f.email}`,className:"flex-1 py-2 text-center rounded-lg bg-blue-50 text-blue-700 font-medium hover:bg-blue-100 transition-colors text-sm",children:"Mail"})]})]},f.id))}):i.jsx("div",{className:"text-center py-20 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:i.jsx("p",{className:"text-gray-500 font-medium",children:"No contacts found matching your criteria."})})]})},L4=()=>{const{users:t,deleteUser:e,user:n,passwordResetRequests:r,resolvePasswordResetRequest:s}=Ce(),[a,o]=M.useState(null),[c,u]=M.useState({}),d=Et(),f=(n==null?void 0:n.id)==="admin-01"||(n==null?void 0:n.username)==="thirumalreddy@sprtechforge.com",m=(n==null?void 0:n.role)==="admin",g=k=>{if(k===(n==null?void 0:n.id)){alert("You cannot delete yourself.");return}o(k)},v=()=>{a&&(e(a),o(null))},T=k=>{u(j=>({...j,[k]:!j[k]}))},E=(k,j)=>{s(k),j?d(`/admin/users/edit/${j}`):alert("User not found.")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Yn,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"})]}),m&&i.jsx(nt,{to:"/admin/users/new",children:i.jsx(K,{children:"+ Add User"})})]}),m&&r.length>0&&i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-amber-800 mb-3",children:"Pending Password Reset Requests"}),i.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map(k=>{const j=t.find(y=>y.username===k.username);return i.jsxs("div",{className:"flex justify-between bg-white p-4 rounded border border-amber-200 shadow-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:k.username}),i.jsx("p",{className:"text-xs text-gray-500",children:new Date(k.requestDate).toLocaleString()})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(K,{variant:"secondary",onClick:()=>s(k.id),className:"text-xs",children:"Dismiss"}),i.jsx(K,{onClick:()=>E(k.id,(j==null?void 0:j.id)||""),className:"text-xs",disabled:!j,children:"Reset"})]})]},k.id)})})]}),i.jsx(te,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"py-3 px-4",children:"Full Name"}),i.jsx("th",{className:"py-3 px-4",children:"Login ID"}),m&&i.jsx("th",{className:"py-3 px-4",children:"Password"}),i.jsx("th",{className:"py-3 px-4",children:"Role"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map(k=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:k.name}),i.jsx("td",{className:"py-3 px-4 font-mono text-sm",children:k.username}),m&&i.jsxs("td",{className:"py-3 px-4 text-sm font-mono flex items-center gap-2",children:[c[k.id]?k.password:"",i.jsx("button",{onClick:()=>T(k.id),className:"text-gray-400 hover:text-indigo-600 focus:outline-none",children:c[k.id]?i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):i.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),i.jsx("td",{className:"py-3 px-4 capitalize",children:k.role}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsx(nt,{to:`/admin/users/edit/${k.id}`,className:"text-blue-600 hover:underline text-sm",children:"Edit"}),f&&k.id!==(n==null?void 0:n.id)&&i.jsx("button",{onClick:()=>g(k.id),className:"text-red-500 hover:underline text-sm",children:"Delete"})]})})]},k.id))})]})})}),i.jsx(Ts,{isOpen:!!a,onClose:()=>o(null),onConfirm:v,title:"Delete User",message:"Are you sure? This cannot be undone."})]})},u0=()=>{const{users:t,addUser:e,updateUser:n,showToast:r}=Ce(),s=Et(),{id:a}=_s(),[o,c]=M.useState(null),[u,d]=M.useState({name:"",username:"",password:"",role:"staff",modules:["candidates"]});M.useEffect(()=>{if(a){const m=t.find(g=>g.id===a);m&&d(m)}},[a,t]);const f=m=>{if(m.preventDefault(),!u.name||!u.username){c("Name and Login ID required");return}const g={id:a||Lt(),name:u.name,username:u.username,password:u.password||u.name,role:u.role,modules:u.role==="admin"?["candidates","users","training"]:u.modules||[],isPasswordChanged:a?u.isPasswordChanged:!1};a?(n(g),r("User updated")):(e(g),r("User added")),s("/admin/users")};return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:a?"Edit User":"Add New User"}),o&&i.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded mb-4",children:o}),i.jsx(te,{children:i.jsxs("form",{onSubmit:f,children:[i.jsx(me,{label:"Full Name",value:u.name,onChange:m=>d({...u,name:m.target.value}),required:!0}),i.jsx(me,{label:"Login ID",value:u.username,onChange:m=>d({...u,username:m.target.value}),required:!0}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Default Password"}),i.jsx("div",{className:"text-gray-500 text-sm font-mono",children:a?"********":u.name||"Same as name"})]}),i.jsxs(j1,{label:"Role",value:u.role,onChange:m=>d({...u,role:m.target.value}),children:[i.jsx("option",{value:"staff",children:"Staff"}),i.jsx("option",{value:"admin",children:"Admin"}),i.jsx("option",{value:"candidate",children:"Candidate"})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[i.jsx(K,{type:"button",variant:"secondary",onClick:()=>s("/admin/users"),children:"Cancel"}),i.jsx(K,{type:"submit",children:"Save"})]})]})})]})},M4=()=>{const{activityLogs:t,clearActivityLogs:e,user:n}=Ce(),[r,s]=M.useState(1),[a,o]=M.useState(""),[c,u]=M.useState(!1),d=15,f=(n==null?void 0:n.id)==="admin-01",m=t.filter(E=>E.description.toLowerCase().includes(a.toLowerCase())||E.actorName.toLowerCase().includes(a.toLowerCase())),g=Math.ceil(m.length/d),v=m.slice((r-1)*d,r*d),T=()=>{const E=t.map(k=>({Timestamp:new Date(k.timestamp).toISOString(),User:k.actorName,Action:k.action,Entity:k.entityType,ID:k.entityId||"",Description:k.description}));Ga(E,"System_Logs.csv")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Yn,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Logs"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(K,{variant:"secondary",onClick:T,children:"Export CSV"}),f&&i.jsx(K,{variant:"danger",onClick:()=>u(!0),children:"Clear Logs"})]})]}),i.jsxs(te,{children:[i.jsx("div",{className:"mb-4",children:i.jsx("input",{placeholder:"Search logs...",className:"w-full border rounded px-4 py-2",value:a,onChange:E=>o(E.target.value)})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600 text-sm",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Time"}),i.jsx("th",{className:"p-3",children:"User"}),i.jsx("th",{className:"p-3",children:"Action"}),i.jsx("th",{className:"p-3",children:"Description"})]})}),i.jsxs("tbody",{className:"divide-y",children:[v.map(E=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-3 font-mono text-xs",children:new Date(E.timestamp).toLocaleString()}),i.jsx("td",{className:"p-3 font-medium",children:E.actorName}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:E.action})}),i.jsx("td",{className:"p-3",children:E.description})]},E.id)),v.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"text-center p-8 text-gray-400",children:"No logs found."})})]})]})}),i.jsx(Zf,{currentPage:r,totalPages:g,onPageChange:s})]}),i.jsx(Ts,{isOpen:c,onClose:()=>u(!1),onConfirm:()=>{e(),u(!1)},title:"Clear All Logs",message:"Are you sure you want to permanently delete all system logs? This action cannot be undone."})]})},V4=()=>{const t=Ce(),[e,n]=M.useState([]),[r,s]=M.useState(!1),[a,o]=M.useState({total:0,passed:0,failed:0,time:0}),c=(d,f,m,g=0)=>{n(v=>[...v,{id:Date.now()+Math.random(),name:d,status:f,message:m,duration:g}])},u=async()=>{s(!0),n([]),o({total:0,passed:0,failed:0,time:0});const d=performance.now();let f=0,m=0,g=0;const v=async(S,R)=>{g++;const L=performance.now();try{await R();const w=performance.now()-L;c(S,"PASS","Test execution successful",w),f++}catch(w){const p=performance.now()-L;c(S,"FAIL",w.message||"Unknown error",p),m++}};await v("Unit: Currency Formatting",()=>{const S=re(1500.5);if(!S.includes("1,500.50")&&!S.includes("1,500.5"))throw new Error(`Formatting failed: ${S}`)}),await v("Unit: ID Generation",()=>{const S=Lt(),R=Lt();if(S===R)throw new Error("ID collision detected");if(S.length<5)throw new Error("ID too short")}),await v("Unit: Balance Calculation Logic",()=>{const S=[{id:"t1",amount:1e3,type:xe.Income,fromEntityId:"C1",fromEntityType:"Candidate",toEntityId:"A1",toEntityType:"Account",date:"",description:"",isLocked:!1},{id:"t2",amount:200,type:xe.Payment,fromEntityId:"A1",fromEntityType:"Account",toEntityId:"V1",toEntityType:"Account",date:"",description:"",isLocked:!1}],R=la("A1","Account",S,0);if(R!==800)throw new Error(`Account Balance calc failed. Expected 800, got ${R}`);const L=la("C1","Candidate",S,0);if(L!==-1e3)throw new Error(`Candidate Balance calc failed. Expected -1000, got ${L}`)});const T=Date.now(),E=`test-user-${T}`,k=`test-cand-${T}`,j=`test-acc-${T}`;await v("API: User Creation",()=>{t.addUser({id:E,name:`User ${T}`,username:`u${T}`,password:"123",role:"staff",modules:[]})}),await v("API: User Update",()=>{t.updateUser({id:E,name:`User ${T} Updated`,username:`u${T}_updated`,password:"123",role:"staff",modules:["finance"]})}),await v("API: Candidate Creation",()=>{t.addCandidate({id:k,name:"API Tester",batchId:"API-01",email:"test@api.com",phone:"9999999999",agreedAmount:1e4,status:lt.Training,isActive:!0,joinedDate:new Date().toISOString()})}),await v("API: Candidate Update",()=>{t.updateCandidate({id:k,name:"API Tester (Updated)",batchId:"API-01",email:"test@api.com",phone:"9999999999",agreedAmount:15e3,status:lt.ReadyForInterview,isActive:!0,joinedDate:new Date().toISOString()})}),await v("API: Account Creation",()=>{t.addAccount({id:j,name:"API Test Bank",type:pe.Bank,openingBalance:5e3})});const y=`test-tx-${T}`;await v("API: Transaction Record",()=>{t.addTransaction({id:y,date:new Date().toISOString(),type:xe.Income,amount:2e3,fromEntityId:k,fromEntityType:"Candidate",toEntityId:j,toEntityType:"Account",description:"API Test Fee",isLocked:!1})}),await v("E2E: Payment Logic Verification",()=>{const S=[{id:"x",date:"",type:xe.Income,amount:2e3,fromEntityId:k,fromEntityType:"Candidate",toEntityId:j,toEntityType:"Account",description:"",isLocked:!1}],R=la(j,"Account",S,5e3);if(R!==7e3)throw new Error(`E2E Balance Check Failed: Expected 7000, Got ${R}`);const p=15e3-Math.abs(la(k,"Candidate",S,0));if(p!==13e3)throw new Error(`E2E Due Check Failed: Expected 13000, Got ${p}`)}),await v("Negative: Delete System Account",()=>{try{throw t.deleteAccount("cash-01"),new Error("Failed to block system account deletion")}catch(S){if(!S.message.includes("Cannot delete a System Account"))throw S}}),await v("Negative: Delete Last User",()=>{if(t.users.length===1)try{throw t.deleteUser(t.users[0].id),new Error("Failed to block last user deletion")}catch(S){if(!S.message.includes("Cannot delete the last user"))throw S}}),await v("Cleanup: Remove Test Data",()=>{t.deleteTransaction(y),t.deleteCandidate(k),t.deleteAccount(j),t.deleteUser(E)});const _=performance.now()-d;o({total:g,passed:f,failed:m,time:_}),s(!1)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Diagnostics & API Testing"}),i.jsx("p",{className:"text-gray-600",children:"Automated testing suite for internal logic, integration flows, and negative scenarios."})]}),i.jsx(K,{onClick:u,disabled:r,children:r?"Running Tests...":"Run Full Test Suite"})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs(te,{className:"text-center py-4",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Tests"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.total})]}),i.jsxs(te,{className:"text-center py-4 border-emerald-200 bg-emerald-50",children:[i.jsx("p",{className:"text-xs text-emerald-700 uppercase font-bold",children:"Passed"}),i.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:a.passed})]}),i.jsxs(te,{className:"text-center py-4 border-red-200 bg-red-50",children:[i.jsx("p",{className:"text-xs text-red-700 uppercase font-bold",children:"Failed"}),i.jsx("p",{className:"text-2xl font-bold text-red-700",children:a.failed})]}),i.jsxs(te,{className:"text-center py-4",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Duration"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[a.time.toFixed(2)," ms"]})]})]}),i.jsx(te,{title:"Execution Log",children:i.jsxs("div",{className:"h-96 overflow-y-auto space-y-2 font-mono text-sm bg-gray-50 p-4 rounded border border-spr-700",children:[e.length===0&&i.jsx("p",{className:"text-gray-400 text-center italic",children:"Ready to start diagnostics..."}),e.map(d=>i.jsxs("div",{className:`flex items-start gap-3 p-2 rounded border ${d.status==="PASS"?"bg-white border-emerald-200":d.status==="FAIL"?"bg-red-50 border-red-200":"bg-gray-100 border-gray-200"}`,children:[i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold w-16 text-center shrink-0 ${d.status==="PASS"?"bg-emerald-100 text-emerald-700":d.status==="FAIL"?"bg-red-100 text-red-700":"bg-gray-200 text-gray-600"}`,children:d.status}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-bold text-gray-900",children:d.name}),i.jsx("p",{className:"text-gray-600",children:d.message})]}),i.jsxs("span",{className:"text-gray-400 text-xs shrink-0",children:[d.duration.toFixed(2),"ms"]})]},d.id))]})}),i.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200 text-sm text-blue-800",children:[i.jsx("strong",{children:"Note on Testing:"})," This runner executes commands against the live Application Context. Integration tests create temporary entities prefixed with ",i.jsx("code",{children:"TEST_"})," and attempt to clean them up immediately. Negative testing purposefully attempts invalid operations to ensure the API blocks them correctly."]})]})},O4=()=>{const{isCloudEnabled:t,syncLocalToCloud:e,cloudError:n}=Ce(),[r,s]=M.useState(""),[a,o]=M.useState("unknown"),[c,u]=M.useState(""),[d,f]=M.useState(!1),[m,g]=M.useState(!1);M.useEffect(()=>{const E=le.getConfig();E&&(s(JSON.stringify(E,null,2)),o("connected")),n&&(o("error"),u(n),n.includes("Permission")&&g(!0))},[n]);const v=async()=>{var k;if(u(""),o("unknown"),!r.trim()){u("Please paste the Firebase Configuration JSON."),o("error");return}f(!0);const E=await le.testConfig(r);if(f(!1),E.success)try{const j=JSON.parse(r);le.saveConfig(j),o("connected"),u("Configuration Saved. App will reload.")}catch{o("error"),u("Invalid JSON syntax.")}else o("error"),u(E.error||"Connection verification failed."),(k=E.error)!=null&&k.includes("permission")&&g(!0)},T=()=>{window.confirm("Are you sure? This will disconnect the app from Firebase and revert to Local Storage.")&&le.clearConfig()};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Cloud Setup"}),i.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M3.89 15.67L6.47 4.08C6.56 3.66 7.11 3.55 7.36 3.89L10.94 8.89L3.89 15.67Z",fill:"#FFC107"}),i.jsx("path",{d:"M15.56 8.89L19.14 3.89C19.39 3.55 19.94 3.66 20.03 4.08L22.61 15.67H3.89L15.56 8.89Z",fill:"#FFC107"}),i.jsx("path",{d:"M13.25 2.3L11.81 0.32C11.56 -0.02 11.09 -0.02 10.84 0.32L9.4 2.3C9.23 2.54 9.29 2.86 9.53 3.02L10.94 3.96L12.35 3.02C12.59 2.86 12.65 2.54 12.48 2.3H13.25Z",fill:"#FFC107"}),i.jsx("path",{d:"M3.89 15.67H22.61L14.62 20.23C13.98 20.59 13.2 20.67 12.5 20.45L11.73 20.21L3.89 15.67Z",fill:"#FFA000"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[a==="connected"&&i.jsxs("span",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-bold border border-orange-200 flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 bg-orange-600 rounded-full animate-pulse"})," Firebase Connected"]}),a==="error"&&i.jsx("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-bold border border-red-200",children:"Connection Failed"})]})]}),m&&i.jsxs("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded shadow-sm animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-amber-900 font-bold text-lg mb-2",children:"Missing Permissions?"}),i.jsxs("p",{className:"text-amber-800 text-sm mb-2",children:["It looks like your Firestore Security Rules are blocking the application. Since this app manages users internally, you need to enable ",i.jsx("strong",{children:"Test Mode"})," or allow public read/write in the Firebase Console."]}),i.jsx("p",{className:"text-amber-800 text-sm font-bold mb-2",children:"Go to Firebase Console > Firestore Database > Rules and paste this:"})]}),i.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),i.jsxs("div",{className:"bg-gray-900 p-3 rounded text-gray-100 font-mono text-xs overflow-x-auto relative group",children:[i.jsx("pre",{children:`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}`}),i.jsx("button",{onClick:()=>navigator.clipboard.writeText(`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}`),className:"absolute top-2 right-2 bg-white text-gray-900 px-2 py-1 rounded text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity",children:"Copy"})]})]}),i.jsx(te,{title:"Firebase Configuration",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-gray-600",children:["Connect this application to ",i.jsx("strong",{children:"Google Firebase (Firestore)"})," for real-time data synchronization and cloud backup."]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded text-sm text-blue-900",children:[i.jsx("strong",{children:"How to get configuration:"}),i.jsxs("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:[i.jsxs("li",{children:["Go to ",i.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",className:"underline font-bold",children:"Firebase Console"}),"."]}),i.jsx("li",{children:"Open your Project Settings (Gear Icon)."}),i.jsx("li",{children:'Scroll down to "Your apps" and select the Web App.'}),i.jsxs("li",{children:["Copy the ",i.jsx("code",{children:"firebaseConfig"})," object (the part inside the curly braces)."]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Config Object (JSON)"}),i.jsx("textarea",{className:"w-full bg-gray-900 text-green-400 font-mono text-xs border border-spr-700 rounded-lg px-4 py-4 focus:ring-1 focus:ring-spr-accent outline-none h-64",value:r,onChange:E=>s(E.target.value),placeholder:`{
  "apiKey": "AIza...",
  "authDomain": "project-id.firebaseapp.com",
  "projectId": "project-id",
  "storageBucket": "project-id.appspot.com",
  "messagingSenderId": "...",
  "appId": "..."
}`})]}),a==="error"&&i.jsxs("div",{className:"bg-red-50 border border-red-200 p-3 rounded mt-2 text-red-700 text-sm",children:[i.jsx("strong",{children:"Error:"})," ",c]}),i.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[i.jsx(K,{variant:"secondary",onClick:()=>g(!m),children:m?"Hide Rules Help":"Troubleshoot Permissions"}),t&&i.jsx(K,{variant:"danger",onClick:T,children:"Disconnect"}),i.jsx(K,{onClick:v,disabled:d,children:d?"Verifying...":t?"Update & Reconnect":"Connect & Save"})]})]})}),t&&a==="connected"&&!n&&i.jsx(te,{title:"Data Synchronization",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-gray-900",children:"Upload Local Data"}),i.jsxs("p",{className:"text-sm text-gray-500",children:["Push your current local browser data to Firestore.",i.jsx("br",{}),i.jsx("span",{className:"text-xs text-orange-600 font-bold",children:"Note: Firestore creates collections automatically. No SQL setup required."})]})]}),i.jsx(K,{variant:"secondary",onClick:e,children:"Sync Local -> Cloud"})]})})]})},F4=()=>{const{candidates:t,markAgreementAccepted:e,markAgreementRejected:n,isCloudEnabled:r}=Ce(),{id:s}=_s(),[a,o]=M.useState(!1),[c,u]=M.useState(!1),[d,f]=M.useState(null),[m,g]=M.useState(!1),[v,T]=M.useState(""),E=t.find(y=>y.id===s);M.useEffect(()=>{E!=null&&E.agreementAcceptedDate&&o(!0),E!=null&&E.agreementRejectedDate&&u(!0)},[E]);const k=()=>{if(s&&E){if(!r){f("The system is currently in Offline Mode. Acceptance cannot be recorded. Please contact admin.");return}try{e(s),o(!0),u(!1)}catch{f("Failed to record acceptance. Please try again.")}}},j=y=>{if(y.preventDefault(),s&&E&&v.trim())try{n(s,v),u(!0),o(!1),g(!1)}catch{f("Failed to record rejection.")}};return E?i.jsxs("div",{className:"min-h-screen bg-gray-100 py-10 px-4",children:[i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx(wi,{size:"lg"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Training Candidature Agreement"}),i.jsx("p",{className:"text-gray-600",children:"SPR Techforge Pvt Ltd"})]}),d&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded text-red-700",children:d}),i.jsxs(te,{className:"mb-6",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mb-6",children:[i.jsx("h3",{className:"text-sm font-bold text-blue-800 uppercase mb-2",children:"Candidate Details"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Name:"})," ",i.jsx("span",{className:"font-bold text-gray-900",children:E.name})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Batch ID:"})," ",i.jsx("span",{className:"font-bold text-gray-900",children:E.batchId})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Email:"})," ",i.jsx("span",{className:"text-gray-900",children:E.email})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Phone:"})," ",i.jsx("span",{className:"text-gray-900",children:E.phone})]})]})]}),i.jsx("div",{className:"prose max-w-none border-t border-b border-gray-100 py-6 my-6",children:i.jsx("div",{className:"whitespace-pre-wrap font-serif text-justify leading-relaxed text-gray-800",children:E.agreementText||"Agreement text not available."})}),i.jsx("div",{className:"flex flex-col items-center gap-4 mt-8",children:a?i.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-6 text-center w-full animate-fade-in",children:[i.jsx("svg",{className:"w-16 h-16 text-emerald-500 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:"Agreement Accepted"}),i.jsxs("p",{className:"text-emerald-600 text-sm mt-1",children:["Recorded on ",new Date(E.agreementAcceptedDate).toLocaleString()]}),i.jsx("p",{className:"text-gray-500 text-xs mt-4",children:"You may close this window. We have recorded your acceptance as digital proof."})]}):c?i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center w-full animate-fade-in",children:[i.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),i.jsx("h2",{className:"text-xl font-bold text-red-800",children:"Agreement Rejected"}),i.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["Recorded on ",new Date(E.agreementRejectedDate).toLocaleString()]}),i.jsxs("p",{className:"text-gray-700 text-sm mt-2 italic",children:['"',E.agreementRejectionReason,'"']}),i.jsx("p",{className:"text-gray-500 text-xs mt-4",children:"Our team will contact you to discuss your concerns. You can still accept later if terms are clarified."}),i.jsx(K,{variant:"secondary",className:"mt-4",onClick:()=>u(!1),children:"View Agreement Again"})]}):i.jsxs("div",{className:"w-full space-y-6",children:[i.jsxs("div",{className:"flex items-start gap-3 bg-amber-50 p-4 rounded text-sm text-amber-800 border border-amber-100",children:[i.jsx("input",{type:"checkbox",className:"mt-1 w-5 h-5 accent-amber-600 cursor-pointer",id:"consent"}),i.jsxs("label",{htmlFor:"consent",className:"cursor-pointer",children:["I, ",i.jsx("strong",{children:E.name}),', have read and understood the terms and conditions mentioned above. By clicking "Accept & Sign", I agree to abide by the rules and regulations of SPR Techforge Pvt Ltd.']})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-center",children:[i.jsx(K,{variant:"secondary",className:"w-full md:w-auto px-8",onClick:()=>g(!0),children:"I Disagree / Reject"}),i.jsx(K,{className:"w-full md:w-auto px-12 py-3 text-lg font-bold",onClick:()=>{const y=document.getElementById("consent");y&&y.checked?k():alert("Please check the box to confirm you have read the agreement.")},children:"Accept & Sign"})]})]})})]}),i.jsx("div",{className:"text-center text-xs text-gray-400 mt-8 pb-8",children:" 2025 SPR Techforge Pvt Ltd. All rights reserved."})]}),i.jsx(qt,{isOpen:m,onClose:()=>g(!1),title:"Reject Agreement",children:i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Please provide a reason for rejecting the agreement. This will help us understand your concerns."}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Reason for Rejection"}),i.jsx("textarea",{className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-1 focus:ring-spr-accent outline-none text-gray-900",rows:4,value:v,onChange:y=>T(y.target.value),placeholder:"e.g. Disagree with payment terms, Correction needed in details...",required:!0})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[i.jsx(K,{variant:"secondary",type:"button",onClick:()=>g(!1),children:"Cancel"}),i.jsx(K,{variant:"danger",type:"submit",children:"Confirm Rejection"})]})]})})]}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-xl font-bold text-gray-400",children:"Loading Agreement..."}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"If this takes too long, the link may be invalid or the system is offline."})]})})},B4=()=>{const{user:t,trainingModules:e,addTrainingModule:n,updateTrainingModule:r,deleteTrainingModule:s,trainingTopics:a,addTrainingTopic:o,updateTrainingTopic:c,deleteTrainingTopic:u,showToast:d}=Ce(),[f,m]=M.useState(!1),[g,v]=M.useState(null),[T,E]=M.useState(""),[k,j]=M.useState(""),[y,_]=M.useState(!1),[S,R]=M.useState(null),[L,w]=M.useState(null),[p,b]=M.useState(""),[C,A]=M.useState(1),[P,I]=M.useState(null),se=(t==null?void 0:t.role)==="admin",fe=[...e].sort((Y,ne)=>Y.order-ne.order),Se=Y=>{if(Y.preventDefault(),!!T.trim()){if(g){const ne=e.find(Fe=>Fe.id===g);ne&&r({...ne,title:T,description:k}),d("Module updated")}else n({id:Lt(),title:T,description:k,order:e.length+1}),d("Module created");ee()}},ut=()=>{v(null),E(""),j(""),m(!0)},Q=Y=>{v(Y.id),E(Y.title),j(Y.description||""),m(!0)},ee=()=>{m(!1)},oe=Y=>{if(Y.preventDefault(),!!p.trim()){if(S){const ne=a.find(Fe=>Fe.id===S);ne&&c({...ne,title:p,estimatedHours:C}),d("Topic updated")}else{if(!L)return;o({id:Lt(),moduleId:L,title:p,estimatedHours:C}),d("Topic added")}W()}},U=Y=>{R(null),w(Y),b(""),A(1),_(!0)},ae=Y=>{R(Y.id),w(Y.moduleId),b(Y.title),A(Y.estimatedHours),_(!0)},W=()=>{_(!1)},ue=()=>{P&&(P.type==="module"?(s(P.id),d("Module deleted")):(u(P.id),d("Topic deleted")),I(null))};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Yn,{}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Curriculum Manager"}),i.jsx("p",{className:"text-gray-500",children:"Define training modules, topics, and syllabus structure."})]})]}),se&&i.jsx(K,{onClick:ut,children:"+ New Module"})]}),i.jsx("div",{className:"grid grid-cols-1 gap-6",children:fe.map(Y=>i.jsxs(te,{className:"border-l-4 border-l-spr-600",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-gray-100 pb-2",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[i.jsxs("span",{className:"bg-spr-100 text-spr-800 text-xs px-2 py-1 rounded-full",children:["Module ",Y.order]}),Y.title]}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:Y.description})]}),se&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>Q(Y),className:"text-blue-600 hover:bg-blue-50 p-1 rounded",title:"Edit Module",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),i.jsx("button",{onClick:()=>I({id:Y.id,type:"module"}),className:"text-red-600 hover:bg-red-50 p-1 rounded",title:"Delete Module",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),i.jsx(K,{variant:"secondary",className:"text-xs ml-2",onClick:()=>U(Y.id),children:"+ Add Topic"})]})]}),i.jsxs("div",{className:"space-y-2",children:[a.filter(ne=>ne.moduleId===Y.id).map((ne,Fe)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border border-gray-200 hover:bg-white hover:shadow-sm transition-all group",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-gray-400 font-mono text-xs",children:[Fe+1,"."]}),i.jsx("span",{className:"text-gray-800 font-medium",children:ne.title})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-xs text-gray-500 bg-white px-2 py-1 rounded border border-gray-200",children:[ne.estimatedHours," hrs"]}),se&&i.jsxs("div",{className:"hidden group-hover:flex gap-1",children:[i.jsx("button",{onClick:()=>ae(ne),className:"text-blue-500 hover:text-blue-700 p-1",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),i.jsx("button",{onClick:()=>I({id:ne.id,type:"topic"}),className:"text-red-500 hover:text-red-700 p-1",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},ne.id)),a.filter(ne=>ne.moduleId===Y.id).length===0&&i.jsx("p",{className:"text-sm text-gray-400 italic p-2",children:"No topics defined yet."})]})]},Y.id))}),i.jsx(qt,{isOpen:f,onClose:ee,title:g?"Edit Training Module":"Add Training Module",children:i.jsxs("form",{onSubmit:Se,children:[i.jsx(me,{label:"Module Title",value:T,onChange:Y=>E(Y.target.value),required:!0,placeholder:"e.g. Automation Testing"}),i.jsx(me,{label:"Description",value:k,onChange:Y=>j(Y.target.value),placeholder:"Short summary..."}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(K,{type:"button",variant:"secondary",onClick:ee,children:"Cancel"}),i.jsx(K,{type:"submit",children:g?"Update Module":"Create Module"})]})]})}),i.jsx(qt,{isOpen:y,onClose:W,title:S?"Edit Topic":"Add Topic",children:i.jsxs("form",{onSubmit:oe,children:[i.jsx(me,{label:"Topic Title",value:p,onChange:Y=>b(Y.target.value),required:!0,placeholder:"e.g. Writing Test Scripts"}),i.jsx(me,{type:"number",label:"Estimated Hours",value:C,onChange:Y=>A(parseInt(Y.target.value)),required:!0}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(K,{type:"button",variant:"secondary",onClick:W,children:"Cancel"}),i.jsx(K,{type:"submit",children:S?"Update Topic":"Add Topic"})]})]})}),i.jsx(Ts,{isOpen:!!P,onClose:()=>I(null),onConfirm:ue,title:"Confirm Deletion",message:`Are you sure you want to delete this ${P==null?void 0:P.type}?`})]})},U4=()=>{const{user:t,candidates:e,trainingModules:n,trainingTopics:r,trainingLogs:s}=Ce(),a=e.find(m=>m.id===(t==null?void 0:t.linkedCandidateId)),o=s.filter(m=>m.candidateId===(a==null?void 0:a.id)),c=o.reduce((m,g)=>m+g.timeSpentMinutes/60,0),u=new Set(o.map(m=>m.topicId)).size,d=r.length,f=d>0?Math.round(u/d*100):0;return a?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome, ",a.name]}),i.jsxs("p",{className:"text-gray-500",children:["Batch: ",a.batchId]})]}),i.jsxs("div",{className:"bg-white px-4 py-2 rounded-lg shadow-sm border border-gray-200 flex gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Hours"}),i.jsxs("p",{className:"text-xl font-bold text-indigo-600",children:[c.toFixed(1),"h"]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Progress"}),i.jsxs("p",{className:"text-xl font-bold text-emerald-600",children:[f,"%"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:i.jsx(te,{title:"My Attendance & Progress History",children:i.jsxs("div",{className:"space-y-3",children:[o.sort((m,g)=>new Date(g.date).getTime()-new Date(m.date).getTime()).map(m=>{var v;const g=((v=r.find(T=>T.id===m.topicId))==null?void 0:v.title)||"Unknown Topic";return i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-gray-900 text-sm",children:g}),i.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(m.date).toDateString(),"  ",m.timeSpentMinutes," min"]})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded border ${m.attendanceStatus==="Present"?"bg-emerald-100 text-emerald-700 border-emerald-200":m.attendanceStatus==="Absent"?"bg-red-100 text-red-700 border-red-200":"bg-amber-100 text-amber-800 border-amber-200"}`,children:m.attendanceStatus})})]},m.id)}),o.length===0&&i.jsx("p",{className:"text-gray-400 text-center italic py-8",children:"No attendance records found."})]})})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsx(te,{title:"Your Syllabus",className:"h-full max-h-[80vh] overflow-y-auto",children:i.jsxs("div",{className:"space-y-4",children:[n.sort((m,g)=>m.order-g.order).map(m=>i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-2",children:m.title}),i.jsx("div",{className:"space-y-1 ml-2 border-l-2 border-gray-200 pl-3",children:r.filter(g=>g.moduleId===m.id).map(g=>{const v=o.some(T=>T.topicId===g.id);return i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[v?i.jsx("span",{className:"text-emerald-500 font-bold",children:""}):i.jsx("span",{className:"text-gray-300",children:""}),i.jsx("span",{className:v?"text-gray-500 line-through":"text-gray-700",children:g.title})]},g.id)})})]},m.id)),n.length===0&&i.jsx("p",{className:"text-xs text-gray-400 italic",children:"Syllabus not yet defined by admin."})]})})})]})]}):i.jsx("div",{className:"p-8 text-center text-red-600",children:"No candidate profile linked to this user account. Please contact admin."})},z4=()=>{const{candidates:t,trainingLogs:e,trainingTopics:n}=Ce(),[r,s]=M.useState(""),a=t.filter(c=>c.isActive&&c.name.toLowerCase().includes(r.toLowerCase())),o=n.length;return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Yn,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Progress Monitor"})]})}),i.jsxs(te,{children:[i.jsx("div",{className:"mb-4",children:i.jsx("input",{placeholder:"Search candidate...",className:"border rounded px-4 py-2 w-full md:w-1/3",value:r,onChange:c=>s(c.target.value)})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm text-gray-600",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Candidate"}),i.jsx("th",{className:"p-3",children:"Status"}),i.jsx("th",{className:"p-3 text-center",children:"Topics %"}),i.jsx("th",{className:"p-3 text-center",children:"Attendance (Present/Total)"}),i.jsx("th",{className:"p-3 text-center",children:"Last Active"})]})}),i.jsx("tbody",{className:"divide-y",children:a.map(c=>{const u=e.filter(T=>T.candidateId===c.id),d=u.filter(T=>T.attendanceStatus==="Present").length,f=u.length,m=new Set(u.map(T=>T.topicId)).size,g=o>0?Math.round(m/o*100):0,v=u.sort((T,E)=>new Date(E.date).getTime()-new Date(T.date).getTime())[0];return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsxs("td",{className:"p-3 font-medium text-gray-900",children:[c.name," ",i.jsxs("span",{className:"text-gray-400 text-xs",children:["(",c.batchId,")"]})]}),i.jsx("td",{className:"p-3",children:c.status}),i.jsxs("td",{className:"p-3 text-center",children:[i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 max-w-[100px] mx-auto",children:i.jsx("div",{className:"bg-spr-600 h-2 rounded-full",style:{width:`${g}%`}})}),i.jsxs("span",{className:"text-xs",children:[g,"% (",m,"/",o,")"]})]}),i.jsxs("td",{className:"p-3 text-center",children:[i.jsx("span",{className:"text-emerald-600 font-bold",children:d})," / ",f]}),i.jsx("td",{className:"p-3 text-center text-xs",children:v?new Date(v.date).toLocaleDateString():"-"})]},c.id)})})]})})]})]})},$4=()=>{const{candidates:t,trainingModules:e,trainingTopics:n,trainingLogs:r,batchUpdateTrainingLogs:s,showToast:a}=Ce(),[o,c]=M.useState(new Date().toISOString().split("T")[0]),[u,d]=M.useState(""),[f,m]=M.useState({}),g=t.filter(j=>j.isActive&&j.status!==lt.Placed&&j.status!==lt.Discontinued);M.useEffect(()=>{const j={};g.forEach(y=>{const _=r.find(S=>S.date===o&&S.candidateId===y.id);_?(j[y.id]=_.attendanceStatus==="No Class"?"Excused":_.attendanceStatus,!u&&_.topicId&&d(_.topicId)):j[y.id]="Present"}),m(j)},[o,g.length,r.length]);const v=(j,y)=>{m(_=>({..._,[j]:y}))},T=()=>{if(!u){a("Please select the Topic covered today before saving.","error");return}const j=n.find(S=>S.id===u),y=j?j.estimatedHours*60:60,_=[];g.forEach(S=>{const R=f[S.id],L=r.find(p=>p.date===o&&p.candidateId===S.id),w={id:L?L.id:Lt(),candidateId:S.id,date:o,topicId:u,timeSpentMinutes:R==="Present"?y:0,assignmentStatus:L?L.assignmentStatus:"N/A",attendanceStatus:R==="Excused"?"No Class":R,notes:L?L.notes:""};_.push(w)}),s(_),a("Attendance saved successfully for "+_.length+" candidates.")},E=()=>{const j=g.map(y=>{const _=r.filter(L=>L.candidateId===y.id).sort((L,w)=>new Date(L.date).getTime()-new Date(w.date).getTime()),S=_.filter(L=>L.attendanceStatus==="Present").length,R=_.filter(L=>L.attendanceStatus==="Absent").length;return{"Candidate Name":y.name,Batch:y.batchId,Status:y.status,"Total Present":S,"Total Absent":R,[`Status on ${o}`]:f[y.id]||"N/A"}});Ga(j,`Attendance_Summary_${o}.csv`),a("Attendance Summary Exported")},k=()=>{const j=[];if(g.forEach(y=>{r.filter(S=>S.candidateId===y.id).forEach(S=>{var L;const R=((L=n.find(w=>w.id===S.topicId))==null?void 0:L.title)||"Unknown";j.push({Date:S.date,"Candidate Name":y.name,Batch:y.batchId,Topic:R,Attendance:S.attendanceStatus,"Time Spent (Mins)":S.timeSpentMinutes})})}),j.length===0){a("No attendance records found to export.","info");return}j.sort((y,_)=>new Date(_.Date).getTime()-new Date(y.Date).getTime()),Ga(j,"Detailed_Attendance_Logs.csv"),a("Full History Exported")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Class Attendance"}),i.jsx("p",{className:"text-gray-500",children:"Mark daily attendance and topics for active candidates."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(K,{variant:"secondary",onClick:k,children:"Export Full History"}),i.jsx(K,{variant:"secondary",onClick:E,children:"Export Today's Summary"})]})]}),i.jsxs(te,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Date"}),i.jsx(me,{type:"date",value:o,onChange:j=>c(j.target.value)})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Topic Covered Today"}),i.jsxs("select",{className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:u,onChange:j=>d(j.target.value),children:[i.jsx("option",{value:"",children:"-- Select Topic from Curriculum --"}),e.sort((j,y)=>j.order-y.order).map(j=>i.jsx("optgroup",{label:j.title,children:n.filter(y=>y.moduleId===j.id).map(y=>i.jsxs("option",{value:y.id,children:[y.title," (",y.estimatedHours,"h)"]},y.id))},j.id))]}),e.length===0&&i.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No curriculum found. Please add Modules & Topics in Curriculum Manager first."})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 text-xs uppercase text-gray-500 bg-gray-100",children:[i.jsx("th",{className:"py-3 px-4",children:"Candidate Name"}),i.jsx("th",{className:"py-3 px-4",children:"Batch"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Attendance Status"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:g.length>0?g.map(j=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:j.name}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs border border-blue-100",children:j.batchId})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsxs("label",{className:`cursor-pointer px-3 py-1.5 rounded border text-sm font-medium transition-colors ${f[j.id]==="Present"?"bg-emerald-500 text-white border-emerald-600":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[i.jsx("input",{type:"radio",className:"sr-only",checked:f[j.id]==="Present",onChange:()=>v(j.id,"Present")}),"Present"]}),i.jsxs("label",{className:`cursor-pointer px-3 py-1.5 rounded border text-sm font-medium transition-colors ${f[j.id]==="Absent"?"bg-red-500 text-white border-red-600":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[i.jsx("input",{type:"radio",className:"sr-only",checked:f[j.id]==="Absent",onChange:()=>v(j.id,"Absent")}),"Absent"]}),i.jsxs("label",{className:`cursor-pointer px-3 py-1.5 rounded border text-sm font-medium transition-colors ${f[j.id]==="Excused"?"bg-amber-400 text-white border-amber-500":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[i.jsx("input",{type:"radio",className:"sr-only",checked:f[j.id]==="Excused",onChange:()=>v(j.id,"Excused")}),"Excused"]})]})})]},j.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"py-8 text-center text-gray-500",children:"No active candidates found for training."})})})]})}),i.jsx("div",{className:"mt-6 flex justify-end border-t border-gray-100 pt-4",children:i.jsx(K,{onClick:T,className:"w-full md:w-auto px-8",children:"Save Attendance"})})]})]})},W4=[{label:"Orange",value:"border-l-orange-500"},{label:"Green",value:"border-l-green-500"},{label:"Blue",value:"border-l-blue-500"},{label:"Purple",value:"border-l-purple-500"},{label:"Red",value:"border-l-red-500"},{label:"Indigo",value:"border-l-indigo-500"}],H4=()=>{const{user:t,showToast:e,interviewModules:n,addInterviewModule:r,updateInterviewModule:s,deleteInterviewModule:a,interviewQuestions:o,addInterviewQuestion:c,deleteInterviewQuestion:u}=Ce(),[d,f]=M.useState(!1),[m,g]=M.useState(null),[v,T]=M.useState(""),[E,k]=M.useState("border-l-blue-500"),[j,y]=M.useState(!1),[_,S]=M.useState(null),[R,L]=M.useState(""),[w,p]=M.useState(null),[b,C]=M.useState([]),A=(t==null?void 0:t.role)==="admin",P=async W=>{const ue=`${W} Explain this interview question in detail with examples.`;try{await navigator.clipboard.writeText(ue),e("Copied! Please paste (Ctrl+V) in ChatGPT if it does not auto-fill.","info")}catch(ne){console.error("Copy failed",ne)}const Y=encodeURIComponent(ue);window.open(`https://chatgpt.com/?q=${Y}&hints=search`,"_blank")},I=W=>{if(W.preventDefault(),!!v.trim()){if(m){const ue=n.find(Y=>Y.id===m);ue&&(s({...ue,title:v,color:E}),e("Module updated successfully"))}else r({id:Lt(),title:v,color:E,order:n.length+1}),e("Module created successfully");f(!1),ut()}},se=()=>{w&&(a(w),p(null),e("Module deleted"))},fe=()=>{ut(),f(!0)},Se=W=>{g(W.id),T(W.title),k(W.color),f(!0)},ut=()=>{g(null),T(""),k("border-l-blue-500")},Q=W=>{S(W),L(""),y(!0)},ee=W=>{if(W.preventDefault(),!R.trim()||!_)return;const ue=o.filter(ne=>ne.moduleId===_),Y=ue.length>0?Math.max(...ue.map(ne=>ne.order)):0;c({id:Lt(),moduleId:_,question:R,order:Y+1}),e("Question added"),y(!1),L("")},oe=W=>{C(ue=>ue.includes(W)?ue.filter(Y=>Y!==W):[...ue,W])},U=W=>{if(!window.confirm("Delete selected questions?"))return;const ue=b.filter(Y=>{const ne=o.find(Fe=>Fe.id===Y);return ne&&ne.moduleId===W});ue.forEach(Y=>u(Y)),C(Y=>Y.filter(ne=>!ue.includes(ne))),e(`${ue.length} questions deleted`)},ae=[...n].sort((W,ue)=>W.order-ue.order);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Yn,{}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Interview Preparation"}),i.jsx("p",{className:"text-gray-500",children:"Click on any question to ask ChatGPT AI for a detailed answer."})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[A&&i.jsx(K,{onClick:fe,children:"+ Add Module"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-emerald-600 bg-emerald-50 px-3 py-1 rounded-full border border-emerald-100",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),i.jsx("span",{children:"Powered by ChatGPT 5.1"})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ae.map(W=>{const ue=o.filter(ne=>ne.moduleId===W.id).sort((ne,Fe)=>ne.order-Fe.order),Y=ue.some(ne=>b.includes(ne.id));return i.jsxs(te,{className:`border-l-4 ${W.color} relative group-card h-full flex flex-col`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-4 pb-2 border-b border-gray-100",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800",children:W.title}),A&&i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{type:"button",onClick:()=>Se(W),className:"text-blue-500 hover:text-blue-700 p-1 rounded hover:bg-blue-50",title:"Edit Module",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),i.jsx("button",{type:"button",onClick:()=>p(W.id),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50",title:"Delete Module",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),i.jsxs("div",{className:"space-y-3 flex-1",children:[ue.map(ne=>i.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden bg-white hover:shadow-md transition-all duration-200",children:[A&&i.jsx("div",{className:"pl-3 pr-1 py-3 bg-gray-50 border-r border-gray-100 flex items-center",children:i.jsx("input",{type:"checkbox",className:"w-4 h-4 text-spr-600 rounded border-gray-300 focus:ring-spr-500 cursor-pointer",checked:b.includes(ne.id),onChange:()=>oe(ne.id),onClick:Fe=>Fe.stopPropagation()})}),i.jsxs("button",{onClick:()=>P(ne.question),className:"flex-1 text-left p-3 flex justify-between items-center group hover:bg-gray-50 transition-colors focus:outline-none",title:"Click to ask ChatGPT",children:[i.jsx("span",{className:"font-medium text-gray-800 text-sm pr-2 group-hover:text-emerald-700 transition-colors",children:ne.question}),i.jsx("span",{className:"text-gray-300 group-hover:text-emerald-500 transition-colors shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})})]})]},ne.id)),ue.length===0&&i.jsx("p",{className:"text-gray-400 italic text-sm text-center py-4",children:"No questions added yet."})]}),A&&i.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-3 border-t border-gray-100",children:[Y&&i.jsx("button",{onClick:()=>U(W.id),className:"w-8 h-8 flex items-center justify-center rounded-full bg-red-100 text-red-600 hover:bg-red-600 hover:text-white transition-all shadow-sm border border-red-200 animate-fade-in",title:"Delete Selected Questions",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),i.jsx("button",{onClick:()=>Q(W.id),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 text-gray-600 hover:bg-spr-600 hover:text-white transition-all shadow-sm border border-gray-300",title:"Add Question",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]},W.id)})}),i.jsx(qt,{isOpen:d,onClose:()=>f(!1),title:m?"Edit Module":"Add New Module",children:i.jsxs("form",{onSubmit:I,children:[i.jsx(me,{label:"Module Title",value:v,onChange:W=>T(W.target.value),required:!0,placeholder:"e.g. Advanced Python"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Theme"}),i.jsx("div",{className:"flex gap-3 flex-wrap",children:W4.map(W=>i.jsx("button",{type:"button",onClick:()=>k(W.value),className:`w-8 h-8 rounded-full border-2 ${W.value.replace("border-l-","bg-")} ${E===W.value?"border-gray-800 scale-110 ring-2 ring-offset-2 ring-gray-400":"border-transparent opacity-70 hover:opacity-100"}`,title:W.label},W.value))})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx(K,{type:"button",variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),i.jsx(K,{type:"submit",children:"Save Module"})]})]})}),i.jsx(qt,{isOpen:j,onClose:()=>y(!1),title:"Add Question",children:i.jsxs("form",{onSubmit:ee,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),i.jsx("textarea",{className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none h-32",value:R,onChange:W=>L(W.target.value),placeholder:"Type your interview question here...",required:!0})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(K,{type:"button",variant:"secondary",onClick:()=>y(!1),children:"Cancel"}),i.jsx(K,{type:"submit",children:"Add Question"})]})]})}),i.jsx(Ts,{isOpen:!!w,onClose:()=>p(null),onConfirm:se,title:"Delete Module",message:"Are you sure you want to delete this module? All contained questions will be lost."})]})},q4=()=>{const{candidates:t,updateCandidate:e,interviews:n,addInterview:r,updateInterview:s,deleteInterview:a,showToast:o}=Ce(),[c,u]=M.useState("ReadyCandidates"),[d,f]=M.useState(null),m=(_,S)=>{var w;const R=(w=_.target.files)==null?void 0:w[0];if(!R)return;if(R.size>5*1024*1024){o("Max 5MB","error");return}const L=new FileReader;L.onload=p=>{var C;const b=t.find(A=>A.id===S);b&&e({...b,resume:(C=p.target)==null?void 0:C.result,resumeName:R.name}),o("Resume uploaded")},L.readAsDataURL(R)},g=_=>{var R;if(!_.resume)return;const S=(R=_.resumeName)==null?void 0:R.endsWith(".pdf");f({type:S?"pdf":"docx",data:_.resume,name:_.resumeName||"Resume"})},[v,T]=M.useState({}),[E,k]=M.useState(!1),j=_=>{if(_.preventDefault(),!v.candidateId||!v.date||!v.companyName)return;const S={id:v.id||Lt(),candidateId:v.candidateId,date:v.date,time:v.time||"10:00",companyName:v.companyName,interviewType:v.interviewType||"Zoom",round:v.round||"L1",supportPerson:v.supportPerson,status:"Scheduled",notes:v.notes};v.id?s(S):r(S),o("Interview scheduled"),k(!1),T({})},y=t.filter(_=>_.status===lt.ReadyForInterview&&_.isActive);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Yn,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Interviews & Placements"})]}),i.jsx(K,{onClick:()=>{T({}),k(!0)},children:"+ Schedule Interview"})]}),i.jsxs("div",{className:"flex gap-4 border-b border-gray-200",children:[i.jsx("button",{onClick:()=>u("ReadyCandidates"),className:`pb-2 px-4 font-medium ${c==="ReadyCandidates"?"border-b-2 border-spr-600 text-spr-600":"text-gray-500"}`,children:"Ready Candidates"}),i.jsx("button",{onClick:()=>u("DailyView"),className:`pb-2 px-4 font-medium ${c==="DailyView"?"border-b-2 border-spr-600 text-spr-600":"text-gray-500"}`,children:"Interview Schedule"})]}),c==="ReadyCandidates"&&i.jsx(te,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm text-gray-600",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Candidate"}),i.jsx("th",{className:"p-3",children:"Batch"}),i.jsx("th",{className:"p-3",children:"Resume"}),i.jsx("th",{className:"p-3 text-center",children:"Action"})]})}),i.jsxs("tbody",{className:"divide-y",children:[y.map(_=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-3 font-medium text-gray-900",children:_.name}),i.jsx("td",{className:"p-3",children:_.batchId}),i.jsx("td",{className:"p-3",children:_.resume?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded truncate max-w-[150px]",children:_.resumeName}),i.jsx("button",{onClick:()=>g(_),className:"text-blue-600 hover:underline text-xs",children:"View"})]}):i.jsx("span",{className:"text-gray-400 italic",children:"Missing"})}),i.jsxs("td",{className:"p-3 text-center flex justify-center gap-2",children:[i.jsxs("label",{className:"cursor-pointer text-xs bg-gray-100 px-2 py-1 rounded hover:bg-gray-200",children:["Upload",i.jsx("input",{type:"file",className:"hidden",accept:".pdf,.docx",onChange:S=>m(S,_.id)})]}),i.jsx("button",{onClick:()=>{T({candidateId:_.id}),k(!0)},className:"text-xs bg-spr-600 text-white px-2 py-1 rounded hover:bg-spr-700",children:"Book Interview"})]})]},_.id)),y.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"No candidates currently marked as 'Ready for Interview'."})})]})]})})}),c==="DailyView"&&i.jsxs("div",{className:"space-y-4",children:[Object.entries(n.reduce((_,S)=>{const R=_[S.date]||[];return R.push(S),_[S.date]=R,_},{})).sort().map(([_,S])=>i.jsx(te,{title:new Date(_).toDateString(),children:i.jsx("div",{className:"space-y-2",children:S.map(R=>{const L=t.find(w=>w.id===R.candidateId);return i.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded border border-gray-100",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-gray-900",children:[R.time," - ",L==null?void 0:L.name," ",i.jsxs("span",{className:"text-gray-400 font-normal",children:["(",L==null?void 0:L.batchId,")"]})]}),i.jsxs("p",{className:"text-sm text-indigo-700 font-medium",children:[R.companyName," (",R.round,") - ",R.interviewType]}),R.supportPerson&&i.jsxs("p",{className:"text-xs text-amber-700 mt-1",children:["Support: ",R.supportPerson]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-white border border-gray-200 block mb-1",children:R.status}),i.jsx("button",{onClick:()=>{T(R),k(!0)},className:"text-blue-600 text-xs hover:underline",children:"Edit"})]})]},R.id)})})},_)),n.length===0&&i.jsx("p",{className:"text-center text-gray-500",children:"No interviews scheduled."})]}),i.jsx(qt,{isOpen:E,onClose:()=>k(!1),title:"Schedule Interview",children:i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Candidate"}),i.jsxs("select",{className:"w-full border rounded px-3 py-2",value:v.candidateId||"",onChange:_=>T({...v,candidateId:_.target.value}),required:!0,children:[i.jsx("option",{value:"",children:"Select Candidate"}),y.map(_=>i.jsx("option",{value:_.id,children:_.name},_.id))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(me,{type:"date",label:"Date",value:v.date||"",onChange:_=>T({...v,date:_.target.value}),required:!0}),i.jsx(me,{type:"time",label:"Time",value:v.time||"",onChange:_=>T({...v,time:_.target.value}),required:!0})]}),i.jsx(me,{label:"Company Name",value:v.companyName||"",onChange:_=>T({...v,companyName:_.target.value}),required:!0}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),i.jsxs("select",{className:"w-full border rounded px-3 py-2",value:v.interviewType||"Zoom",onChange:_=>T({...v,interviewType:_.target.value}),children:[i.jsx("option",{children:"Zoom"}),i.jsx("option",{children:"Teams"}),i.jsx("option",{children:"F2F"}),i.jsx("option",{children:"Telephonic"})]})]}),i.jsx(me,{label:"Round",value:v.round||"",onChange:_=>T({...v,round:_.target.value}),placeholder:"e.g. L1, Managerial"})]}),i.jsx(me,{label:"Support Person (if any)",value:v.supportPerson||"",onChange:_=>T({...v,supportPerson:_.target.value})}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx(K,{type:"submit",children:"Save Schedule"})})]})}),i.jsx(qt,{isOpen:!!d,onClose:()=>f(null),title:`View Resume: ${d==null?void 0:d.name}`,children:i.jsxs("div",{className:"h-[80vh] flex flex-col",children:[i.jsx("div",{className:"flex justify-end mb-2",children:i.jsx("a",{href:d==null?void 0:d.data,download:d==null?void 0:d.name,className:"text-blue-600 font-bold hover:underline",children:"Download"})}),i.jsx("div",{className:"flex-1 bg-gray-100 rounded",children:(d==null?void 0:d.type)==="pdf"?i.jsx("object",{data:d.data,type:"application/pdf",className:"w-full h-full",children:i.jsx("p",{children:"Preview not supported."})}):i.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Preview only available for PDF. Please download."})})]})})]})},Gt=({children:t})=>{const{user:e,isInitialized:n}=Ce();return n?e?i.jsx(i.Fragment,{children:t}):i.jsx(Qa,{to:"/login",replace:!0}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:"Loading..."})},ed=({children:t})=>{const{user:e,isInitialized:n}=Ce();return n?e?e.role==="admin"||e.modules.includes("users")?i.jsx(i.Fragment,{children:t}):i.jsx(Qa,{to:"/dashboard",replace:!0}):i.jsx(Qa,{to:"/login",replace:!0}):null},Kt=({children:t})=>{const{user:e,isInitialized:n}=Ce();return n?e?e.username!=="thirumalreddy@sprtechforge.com"?i.jsx(Qa,{to:"/dashboard",replace:!0}):i.jsx(i.Fragment,{children:t}):i.jsx(Qa,{to:"/login",replace:!0}):null},Q4=()=>i.jsxs(oj,{children:[i.jsx(Ee,{path:"/",element:i.jsx(_4,{})}),i.jsx(Ee,{path:"/login",element:i.jsx(j4,{})}),i.jsx(Ee,{path:"/portal/agreement/:id",element:i.jsx(F4,{})}),i.jsx(Ee,{path:"/dashboard",element:i.jsx(Gt,{children:i.jsx(Ae,{children:i.jsx(N4,{})})})}),i.jsx(Ee,{path:"/candidates",element:i.jsx(Gt,{children:i.jsx(Ae,{children:i.jsx(E4,{})})})}),i.jsx(Ee,{path:"/candidates/info",element:i.jsx(Gt,{children:i.jsx(Ae,{children:i.jsx(T4,{})})})}),i.jsx(Ee,{path:"/candidates/new",element:i.jsx(Gt,{children:i.jsx(Ae,{children:i.jsx(o0,{})})})}),i.jsx(Ee,{path:"/candidates/edit/:id",element:i.jsx(Gt,{children:i.jsx(Ae,{children:i.jsx(o0,{})})})}),i.jsx(Ee,{path:"/candidates/agreement/:id",element:i.jsx(Gt,{children:i.jsx(C4,{})})}),i.jsx(Ee,{path:"/address-book",element:i.jsx(Gt,{children:i.jsx(Ae,{children:i.jsx(D4,{})})})}),i.jsx(Ee,{path:"/finance/transactions",element:i.jsx(Kt,{children:i.jsx(Ae,{children:i.jsx(S4,{})})})}),i.jsx(Ee,{path:"/finance/transactions/new",element:i.jsx(Kt,{children:i.jsx(Ae,{children:i.jsx(l0,{})})})}),i.jsx(Ee,{path:"/finance/transactions/edit/:id",element:i.jsx(Kt,{children:i.jsx(Ae,{children:i.jsx(l0,{})})})}),i.jsx(Ee,{path:"/finance/accounts",element:i.jsx(Kt,{children:i.jsx(Ae,{children:i.jsx(I4,{})})})}),i.jsx(Ee,{path:"/finance/accounts/new",element:i.jsx(Kt,{children:i.jsx(Ae,{children:i.jsx(c0,{})})})}),i.jsx(Ee,{path:"/finance/accounts/edit/:id",element:i.jsx(Kt,{children:i.jsx(Ae,{children:i.jsx(c0,{})})})}),i.jsx(Ee,{path:"/finance/statement/:type/:id",element:i.jsx(Kt,{children:i.jsx(Ae,{children:i.jsx(k4,{})})})}),i.jsx(Ee,{path:"/finance/financial-statements",element:i.jsx(Kt,{children:i.jsx(Ae,{children:i.jsx(A4,{})})})}),i.jsx(Ee,{path:"/finance/payroll",element:i.jsx(Kt,{children:i.jsx(Ae,{children:i.jsx(P4,{})})})}),i.jsx(Ee,{path:"/finance/reports",element:i.jsx(Kt,{children:i.jsx(Ae,{children:i.jsx(R4,{})})})}),i.jsx(Ee,{path:"/admin/users",element:i.jsx(ed,{children:i.jsx(Ae,{children:i.jsx(L4,{})})})}),i.jsx(Ee,{path:"/admin/users/new",element:i.jsx(ed,{children:i.jsx(Ae,{children:i.jsx(u0,{})})})}),i.jsx(Ee,{path:"/admin/users/edit/:id",element:i.jsx(ed,{children:i.jsx(Ae,{children:i.jsx(u0,{})})})}),i.jsx(Ee,{path:"/training/curriculum",element:i.jsx(Gt,{children:i.jsx(Ae,{children:i.jsx(B4,{})})})}),i.jsx(Ee,{path:"/training/monitor",element:i.jsx(Gt,{children:i.jsx(Ae,{children:i.jsx(z4,{})})})}),i.jsx(Ee,{path:"/training/dashboard",element:i.jsx(Gt,{children:i.jsx(Ae,{children:i.jsx(U4,{})})})}),i.jsx(Ee,{path:"/training/attendance",element:i.jsx(Gt,{children:i.jsx(Ae,{children:i.jsx($4,{})})})}),i.jsx(Ee,{path:"/training/interview-questions",element:i.jsx(Gt,{children:i.jsx(Ae,{children:i.jsx(H4,{})})})}),i.jsx(Ee,{path:"/training/interviews",element:i.jsx(Gt,{children:i.jsx(Ae,{children:i.jsx(q4,{})})})}),i.jsx(Ee,{path:"/admin/logs",element:i.jsx(Kt,{children:i.jsx(Ae,{children:i.jsx(M4,{})})})}),i.jsx(Ee,{path:"/admin/test-runner",element:i.jsx(Kt,{children:i.jsx(Ae,{children:i.jsx(V4,{})})})}),i.jsx(Ee,{path:"/admin/cloud",element:i.jsx(Kt,{children:i.jsx(Ae,{children:i.jsx(O4,{})})})})]});function G4(){return i.jsx(w4,{children:i.jsxs(mj,{children:[i.jsx(b4,{}),i.jsx(Q4,{})]})})}const _1=document.getElementById("root");if(!_1)throw new Error("Could not find root element to mount to");const K4=td.createRoot(_1);K4.render(i.jsx(Ca.StrictMode,{children:i.jsx(G4,{})}));
