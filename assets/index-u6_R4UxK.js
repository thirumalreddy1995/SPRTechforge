var B1=Object.defineProperty;var U1=(t,e,n)=>e in t?B1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Oo=(t,e,n)=>U1(t,typeof e!="symbol"?e+"":e,n);function z1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function $1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var h0={exports:{}},mc={},f0={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var so=Symbol.for("react.element"),W1=Symbol.for("react.portal"),H1=Symbol.for("react.fragment"),q1=Symbol.for("react.strict_mode"),Q1=Symbol.for("react.profiler"),G1=Symbol.for("react.provider"),K1=Symbol.for("react.context"),Y1=Symbol.for("react.forward_ref"),X1=Symbol.for("react.suspense"),J1=Symbol.for("react.memo"),Z1=Symbol.for("react.lazy"),Rm=Symbol.iterator;function ew(t){return t===null||typeof t!="object"?null:(t=Rm&&t[Rm]||t["@@iterator"],typeof t=="function"?t:null)}var m0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p0=Object.assign,g0={};function ji(t,e,n){this.props=t,this.context=e,this.refs=g0,this.updater=n||m0}ji.prototype.isReactComponent={};ji.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ji.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function x0(){}x0.prototype=ji.prototype;function jh(t,e,n){this.props=t,this.context=e,this.refs=g0,this.updater=n||m0}var _h=jh.prototype=new x0;_h.constructor=jh;p0(_h,ji.prototype);_h.isPureReactComponent=!0;var Dm=Array.isArray,y0=Object.prototype.hasOwnProperty,Nh={current:null},v0={key:!0,ref:!0,__self:!0,__source:!0};function w0(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)y0.call(e,r)&&!v0.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:so,type:t,key:a,ref:o,props:s,_owner:Nh.current}}function tw(t,e){return{$$typeof:so,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Eh(t){return typeof t=="object"&&t!==null&&t.$$typeof===so}function nw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Lm=/\/+/g;function pu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nw(""+t.key):e.toString(36)}function cl(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case so:case W1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+pu(o,0):r,Dm(s)?(n="",t!=null&&(n=t.replace(Lm,"$&/")+"/"),cl(s,e,n,"",function(d){return d})):s!=null&&(Eh(s)&&(s=tw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Lm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Dm(t))for(var c=0;c<t.length;c++){a=t[c];var u=r+pu(a,c);o+=cl(a,e,n,u,s)}else if(u=ew(t),typeof u=="function")for(t=u.call(t),c=0;!(a=t.next()).done;)a=a.value,u=r+pu(a,c++),o+=cl(a,e,n,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fo(t,e,n){if(t==null)return t;var r=[],s=0;return cl(t,r,"","",function(a){return e.call(n,a,s++)}),r}function rw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},ul={transition:null},sw={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:ul,ReactCurrentOwner:Nh};function b0(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Fo,forEach:function(t,e,n){Fo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fo(t,function(){e++}),e},toArray:function(t){return Fo(t,function(e){return e})||[]},only:function(t){if(!Eh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=ji;ye.Fragment=H1;ye.Profiler=Q1;ye.PureComponent=jh;ye.StrictMode=q1;ye.Suspense=X1;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sw;ye.act=b0;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=p0({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Nh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)y0.call(e,u)&&!v0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:so,type:t.type,key:s,ref:a,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:K1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:G1,_context:t},t.Consumer=t};ye.createElement=w0;ye.createFactory=function(t){var e=w0.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:Y1,render:t}};ye.isValidElement=Eh;ye.lazy=function(t){return{$$typeof:Z1,_payload:{_status:-1,_result:t},_init:rw}};ye.memo=function(t,e){return{$$typeof:J1,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=ul.transition;ul.transition={};try{t()}finally{ul.transition=e}};ye.unstable_act=b0;ye.useCallback=function(t,e){return Mt.current.useCallback(t,e)};ye.useContext=function(t){return Mt.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};ye.useEffect=function(t,e){return Mt.current.useEffect(t,e)};ye.useId=function(){return Mt.current.useId()};ye.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return Mt.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};ye.useRef=function(t){return Mt.current.useRef(t)};ye.useState=function(t){return Mt.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return Mt.current.useTransition()};ye.version="18.3.1";f0.exports=ye;var L=f0.exports;const ka=$1(L),iw=z1({__proto__:null,default:ka},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw=L,ow=Symbol.for("react.element"),lw=Symbol.for("react.fragment"),cw=Object.prototype.hasOwnProperty,uw=aw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dw={key:!0,ref:!0,__self:!0,__source:!0};function j0(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cw.call(e,r)&&!dw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ow,type:t,key:a,ref:o,props:s,_owner:uw.current}}mc.Fragment=lw;mc.jsx=j0;mc.jsxs=j0;h0.exports=mc;var i=h0.exports,nd={},_0={exports:{}},tn={},N0={exports:{}},E0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,te){var le=q.length;q.push(te);e:for(;0<le;){var U=le-1>>>1,oe=q[U];if(0<s(oe,te))q[U]=te,q[le]=oe,le=U;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var te=q[0],le=q.pop();if(le!==te){q[0]=le;e:for(var U=0,oe=q.length,W=oe>>>1;U<W;){var de=2*(U+1)-1,Y=q[de],re=de+1,Be=q[re];if(0>s(Y,le))re<oe&&0>s(Be,Y)?(q[U]=Be,q[re]=le,U=re):(q[U]=Y,q[de]=le,U=de);else if(re<oe&&0>s(Be,le))q[U]=Be,q[re]=le,U=re;else break e}}return te}function s(q,te){var le=q.sortIndex-te.sortIndex;return le!==0?le:q.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,m=null,g=3,v=!1,T=!1,C=!1,I=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(q){for(var te=n(d);te!==null;){if(te.callback===null)r(d);else if(te.startTime<=q)r(d),te.sortIndex=te.expirationTime,e(u,te);else break;te=n(d)}}function S(q){if(C=!1,_(q),!T)if(n(u)!==null)T=!0,Ae(P);else{var te=n(d);te!==null&&Fe(S,te.startTime-q)}}function P(q,te){T=!1,C&&(C=!1,j(p),p=-1),v=!0;var le=g;try{for(_(te),m=n(u);m!==null&&(!(m.expirationTime>te)||q&&!A());){var U=m.callback;if(typeof U=="function"){m.callback=null,g=m.priorityLevel;var oe=U(m.expirationTime<=te);te=t.unstable_now(),typeof oe=="function"?m.callback=oe:m===n(u)&&r(u),_(te)}else r(u);m=n(u)}if(m!==null)var W=!0;else{var de=n(d);de!==null&&Fe(S,de.startTime-te),W=!1}return W}finally{m=null,g=le,v=!1}}var R=!1,w=null,p=-1,b=5,k=-1;function A(){return!(t.unstable_now()-k<b)}function M(){if(w!==null){var q=t.unstable_now();k=q;var te=!0;try{te=w(!0,q)}finally{te?N():(R=!1,w=null)}}else R=!1}var N;if(typeof y=="function")N=function(){y(M)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ie=J.port2;J.port1.onmessage=M,N=function(){ie.postMessage(null)}}else N=function(){I(M,0)};function Ae(q){w=q,R||(R=!0,N())}function Fe(q,te){p=I(function(){q(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){T||v||(T=!0,Ae(P))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var te=3;break;default:te=g}var le=g;g=te;try{return q()}finally{g=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,te){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var le=g;g=q;try{return te()}finally{g=le}},t.unstable_scheduleCallback=function(q,te,le){var U=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?U+le:U):le=U,q){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=le+oe,q={id:f++,callback:te,priorityLevel:q,startTime:le,expirationTime:oe,sortIndex:-1},le>U?(q.sortIndex=le,e(d,q),n(u)===null&&q===n(d)&&(C?(j(p),p=-1):C=!0,Fe(S,le-U))):(q.sortIndex=oe,e(u,q),T||v||(T=!0,Ae(P))),q},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(q){var te=g;return function(){var le=g;g=te;try{return q.apply(this,arguments)}finally{g=le}}}})(E0);N0.exports=E0;var hw=N0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw=L,Zt=hw;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T0=new Set,Ia={};function vs(t,e){oi(t,e),oi(t+"Capture",e)}function oi(t,e){for(Ia[t]=e,t=0;t<e.length;t++)T0.add(e[t])}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rd=Object.prototype.hasOwnProperty,mw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mm={},Vm={};function pw(t){return rd.call(Vm,t)?!0:rd.call(Mm,t)?!1:mw.test(t)?Vm[t]=!0:(Mm[t]=!0,!1)}function gw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xw(t,e,n,r){if(e===null||typeof e>"u"||gw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vt(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var _t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_t[t]=new Vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];_t[e]=new Vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){_t[t]=new Vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_t[t]=new Vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_t[t]=new Vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){_t[t]=new Vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){_t[t]=new Vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){_t[t]=new Vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){_t[t]=new Vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Th=/[\-:]([a-z])/g;function Ch(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Th,Ch);_t[e]=new Vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Th,Ch);_t[e]=new Vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Th,Ch);_t[e]=new Vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){_t[t]=new Vt(t,1,!1,t.toLowerCase(),null,!1,!1)});_t.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){_t[t]=new Vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sh(t,e,n,r){var s=_t.hasOwnProperty(e)?_t[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xw(e,n,s,r)&&(n=null),r||s===null?pw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yn=fw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bo=Symbol.for("react.element"),Bs=Symbol.for("react.portal"),Us=Symbol.for("react.fragment"),kh=Symbol.for("react.strict_mode"),sd=Symbol.for("react.profiler"),C0=Symbol.for("react.provider"),S0=Symbol.for("react.context"),Ih=Symbol.for("react.forward_ref"),id=Symbol.for("react.suspense"),ad=Symbol.for("react.suspense_list"),Ah=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),k0=Symbol.for("react.offscreen"),Om=Symbol.iterator;function Yi(t){return t===null||typeof t!="object"?null:(t=Om&&t[Om]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Object.assign,gu;function aa(t){if(gu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gu=e&&e[1]||""}return`
`+gu+t}var xu=!1;function yu(t,e){if(!t||xu)return"";xu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,c=a.length-1;1<=o&&0<=c&&s[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==a[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{xu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?aa(t):""}function yw(t){switch(t.tag){case 5:return aa(t.type);case 16:return aa("Lazy");case 13:return aa("Suspense");case 19:return aa("SuspenseList");case 0:case 2:case 15:return t=yu(t.type,!1),t;case 11:return t=yu(t.type.render,!1),t;case 1:return t=yu(t.type,!0),t;default:return""}}function od(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Us:return"Fragment";case Bs:return"Portal";case sd:return"Profiler";case kh:return"StrictMode";case id:return"Suspense";case ad:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case S0:return(t.displayName||"Context")+".Consumer";case C0:return(t._context.displayName||"Context")+".Provider";case Ih:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ah:return e=t.displayName||null,e!==null?e:od(t.type)||"Memo";case ar:e=t._payload,t=t._init;try{return od(t(e))}catch{}}return null}function vw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return od(e);case 8:return e===kh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function I0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ww(t){var e=I0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Uo(t){t._valueTracker||(t._valueTracker=ww(t))}function A0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=I0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ld(t,e){var n=e.checked;return qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Fm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Sr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function P0(t,e){e=e.checked,e!=null&&Sh(t,"checked",e,!1)}function cd(t,e){P0(t,e);var n=Sr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ud(t,e.type,n):e.hasOwnProperty("defaultValue")&&ud(t,e.type,Sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Bm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ud(t,e,n){(e!=="number"||Cl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var oa=Array.isArray;function Js(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Sr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function dd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Um(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(oa(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sr(n)}}function R0(t,e){var n=Sr(e.value),r=Sr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function D0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?D0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zo,L0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zo=zo||document.createElement("div"),zo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Aa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bw=["Webkit","ms","Moz","O"];Object.keys(pa).forEach(function(t){bw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pa[e]=pa[t]})});function M0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pa.hasOwnProperty(t)&&pa[t]?(""+e).trim():e+"px"}function V0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=M0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var jw=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fd(t,e){if(e){if(jw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function md(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pd=null;function Ph(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gd=null,Zs=null,ei=null;function $m(t){if(t=oo(t)){if(typeof gd!="function")throw Error(H(280));var e=t.stateNode;e&&(e=vc(e),gd(t.stateNode,t.type,e))}}function O0(t){Zs?ei?ei.push(t):ei=[t]:Zs=t}function F0(){if(Zs){var t=Zs,e=ei;if(ei=Zs=null,$m(t),e)for(t=0;t<e.length;t++)$m(e[t])}}function B0(t,e){return t(e)}function U0(){}var vu=!1;function z0(t,e,n){if(vu)return t(e,n);vu=!0;try{return B0(t,e,n)}finally{vu=!1,(Zs!==null||ei!==null)&&(U0(),F0())}}function Pa(t,e){var n=t.stateNode;if(n===null)return null;var r=vc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var xd=!1;if($n)try{var Xi={};Object.defineProperty(Xi,"passive",{get:function(){xd=!0}}),window.addEventListener("test",Xi,Xi),window.removeEventListener("test",Xi,Xi)}catch{xd=!1}function _w(t,e,n,r,s,a,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ga=!1,Sl=null,kl=!1,yd=null,Nw={onError:function(t){ga=!0,Sl=t}};function Ew(t,e,n,r,s,a,o,c,u){ga=!1,Sl=null,_w.apply(Nw,arguments)}function Tw(t,e,n,r,s,a,o,c,u){if(Ew.apply(this,arguments),ga){if(ga){var d=Sl;ga=!1,Sl=null}else throw Error(H(198));kl||(kl=!0,yd=d)}}function ws(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Wm(t){if(ws(t)!==t)throw Error(H(188))}function Cw(t){var e=t.alternate;if(!e){if(e=ws(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Wm(s),t;if(a===r)return Wm(s),e;a=a.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=a;break}if(c===r){o=!0,r=s,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=s;break}if(c===r){o=!0,r=a,n=s;break}c=c.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function W0(t){return t=Cw(t),t!==null?H0(t):null}function H0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=H0(t);if(e!==null)return e;t=t.sibling}return null}var q0=Zt.unstable_scheduleCallback,Hm=Zt.unstable_cancelCallback,Sw=Zt.unstable_shouldYield,kw=Zt.unstable_requestPaint,Xe=Zt.unstable_now,Iw=Zt.unstable_getCurrentPriorityLevel,Rh=Zt.unstable_ImmediatePriority,Q0=Zt.unstable_UserBlockingPriority,Il=Zt.unstable_NormalPriority,Aw=Zt.unstable_LowPriority,G0=Zt.unstable_IdlePriority,pc=null,Cn=null;function Pw(t){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(pc,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:Lw,Rw=Math.log,Dw=Math.LN2;function Lw(t){return t>>>=0,t===0?32:31-(Rw(t)/Dw|0)|0}var $o=64,Wo=4194304;function la(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Al(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=la(c):(a&=o,a!==0&&(r=la(a)))}else o=n&~s,o!==0?r=la(o):a!==0&&(r=la(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gn(e),s=1<<n,r|=t[n],e&=~s;return r}function Mw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-gn(a),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=Mw(c,e)):u<=e&&(t.expiredLanes|=c),a&=~c}}function vd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function K0(){var t=$o;return $o<<=1,!($o&4194240)&&($o=64),t}function wu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function io(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function Ow(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-gn(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function Dh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ke=0;function Y0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var X0,Lh,J0,Z0,ex,wd=!1,Ho=[],mr=null,pr=null,gr=null,Ra=new Map,Da=new Map,lr=[],Fw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qm(t,e){switch(t){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Ra.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Da.delete(e.pointerId)}}function Ji(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=oo(e),e!==null&&Lh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Bw(t,e,n,r,s){switch(e){case"focusin":return mr=Ji(mr,t,e,n,r,s),!0;case"dragenter":return pr=Ji(pr,t,e,n,r,s),!0;case"mouseover":return gr=Ji(gr,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Ra.set(a,Ji(Ra.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Da.set(a,Ji(Da.get(a)||null,t,e,n,r,s)),!0}return!1}function tx(t){var e=is(t.target);if(e!==null){var n=ws(e);if(n!==null){if(e=n.tag,e===13){if(e=$0(n),e!==null){t.blockedOn=e,ex(t.priority,function(){J0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function dl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);pd=r,n.target.dispatchEvent(r),pd=null}else return e=oo(n),e!==null&&Lh(e),t.blockedOn=n,!1;e.shift()}return!0}function Qm(t,e,n){dl(t)&&n.delete(e)}function Uw(){wd=!1,mr!==null&&dl(mr)&&(mr=null),pr!==null&&dl(pr)&&(pr=null),gr!==null&&dl(gr)&&(gr=null),Ra.forEach(Qm),Da.forEach(Qm)}function Zi(t,e){t.blockedOn===e&&(t.blockedOn=null,wd||(wd=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,Uw)))}function La(t){function e(s){return Zi(s,t)}if(0<Ho.length){Zi(Ho[0],t);for(var n=1;n<Ho.length;n++){var r=Ho[n];r.blockedOn===t&&(r.blockedOn=null)}}for(mr!==null&&Zi(mr,t),pr!==null&&Zi(pr,t),gr!==null&&Zi(gr,t),Ra.forEach(e),Da.forEach(e),n=0;n<lr.length;n++)r=lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)tx(n),n.blockedOn===null&&lr.shift()}var ti=Yn.ReactCurrentBatchConfig,Pl=!0;function zw(t,e,n,r){var s=ke,a=ti.transition;ti.transition=null;try{ke=1,Mh(t,e,n,r)}finally{ke=s,ti.transition=a}}function $w(t,e,n,r){var s=ke,a=ti.transition;ti.transition=null;try{ke=4,Mh(t,e,n,r)}finally{ke=s,ti.transition=a}}function Mh(t,e,n,r){if(Pl){var s=bd(t,e,n,r);if(s===null)Iu(t,e,r,Rl,n),qm(t,r);else if(Bw(s,t,e,n,r))r.stopPropagation();else if(qm(t,r),e&4&&-1<Fw.indexOf(t)){for(;s!==null;){var a=oo(s);if(a!==null&&X0(a),a=bd(t,e,n,r),a===null&&Iu(t,e,r,Rl,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Iu(t,e,r,null,n)}}var Rl=null;function bd(t,e,n,r){if(Rl=null,t=Ph(r),t=is(t),t!==null)if(e=ws(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rl=t,null}function nx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Iw()){case Rh:return 1;case Q0:return 4;case Il:case Aw:return 16;case G0:return 536870912;default:return 16}default:return 16}}var ur=null,Vh=null,hl=null;function rx(){if(hl)return hl;var t,e=Vh,n=e.length,r,s="value"in ur?ur.value:ur.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return hl=s.slice(t,1<r?1-r:void 0)}function fl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qo(){return!0}function Gm(){return!1}function nn(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?qo:Gm,this.isPropagationStopped=Gm,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),e}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oh=nn(_i),ao=qe({},_i,{view:0,detail:0}),Ww=nn(ao),bu,ju,ea,gc=qe({},ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ea&&(ea&&t.type==="mousemove"?(bu=t.screenX-ea.screenX,ju=t.screenY-ea.screenY):ju=bu=0,ea=t),bu)},movementY:function(t){return"movementY"in t?t.movementY:ju}}),Km=nn(gc),Hw=qe({},gc,{dataTransfer:0}),qw=nn(Hw),Qw=qe({},ao,{relatedTarget:0}),_u=nn(Qw),Gw=qe({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),Kw=nn(Gw),Yw=qe({},_i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xw=nn(Yw),Jw=qe({},_i,{data:0}),Ym=nn(Jw),Zw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=t2[t])?!!e[t]:!1}function Fh(){return n2}var r2=qe({},ao,{key:function(t){if(t.key){var e=Zw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?e2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fh,charCode:function(t){return t.type==="keypress"?fl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),s2=nn(r2),i2=qe({},gc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xm=nn(i2),a2=qe({},ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fh}),o2=nn(a2),l2=qe({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),c2=nn(l2),u2=qe({},gc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),d2=nn(u2),h2=[9,13,27,32],Bh=$n&&"CompositionEvent"in window,xa=null;$n&&"documentMode"in document&&(xa=document.documentMode);var f2=$n&&"TextEvent"in window&&!xa,sx=$n&&(!Bh||xa&&8<xa&&11>=xa),Jm=" ",Zm=!1;function ix(t,e){switch(t){case"keyup":return h2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ax(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zs=!1;function m2(t,e){switch(t){case"compositionend":return ax(e);case"keypress":return e.which!==32?null:(Zm=!0,Jm);case"textInput":return t=e.data,t===Jm&&Zm?null:t;default:return null}}function p2(t,e){if(zs)return t==="compositionend"||!Bh&&ix(t,e)?(t=rx(),hl=Vh=ur=null,zs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sx&&e.locale!=="ko"?null:e.data;default:return null}}var g2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ep(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!g2[t.type]:e==="textarea"}function ox(t,e,n,r){O0(r),e=Dl(e,"onChange"),0<e.length&&(n=new Oh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ya=null,Ma=null;function x2(t){yx(t,0)}function xc(t){var e=Hs(t);if(A0(e))return t}function y2(t,e){if(t==="change")return e}var lx=!1;if($n){var Nu;if($n){var Eu="oninput"in document;if(!Eu){var tp=document.createElement("div");tp.setAttribute("oninput","return;"),Eu=typeof tp.oninput=="function"}Nu=Eu}else Nu=!1;lx=Nu&&(!document.documentMode||9<document.documentMode)}function np(){ya&&(ya.detachEvent("onpropertychange",cx),Ma=ya=null)}function cx(t){if(t.propertyName==="value"&&xc(Ma)){var e=[];ox(e,Ma,t,Ph(t)),z0(x2,e)}}function v2(t,e,n){t==="focusin"?(np(),ya=e,Ma=n,ya.attachEvent("onpropertychange",cx)):t==="focusout"&&np()}function w2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xc(Ma)}function b2(t,e){if(t==="click")return xc(e)}function j2(t,e){if(t==="input"||t==="change")return xc(e)}function _2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yn=typeof Object.is=="function"?Object.is:_2;function Va(t,e){if(yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!rd.call(e,s)||!yn(t[s],e[s]))return!1}return!0}function rp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sp(t,e){var n=rp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rp(n)}}function ux(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ux(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dx(){for(var t=window,e=Cl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cl(t.document)}return e}function Uh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function N2(t){var e=dx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ux(n.ownerDocument.documentElement,n)){if(r!==null&&Uh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=sp(n,a);var o=sp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var E2=$n&&"documentMode"in document&&11>=document.documentMode,$s=null,jd=null,va=null,_d=!1;function ip(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_d||$s==null||$s!==Cl(r)||(r=$s,"selectionStart"in r&&Uh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),va&&Va(va,r)||(va=r,r=Dl(jd,"onSelect"),0<r.length&&(e=new Oh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$s)))}function Qo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ws={animationend:Qo("Animation","AnimationEnd"),animationiteration:Qo("Animation","AnimationIteration"),animationstart:Qo("Animation","AnimationStart"),transitionend:Qo("Transition","TransitionEnd")},Tu={},hx={};$n&&(hx=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function yc(t){if(Tu[t])return Tu[t];if(!Ws[t])return t;var e=Ws[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hx)return Tu[t]=e[n];return t}var fx=yc("animationend"),mx=yc("animationiteration"),px=yc("animationstart"),gx=yc("transitionend"),xx=new Map,ap="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){xx.set(t,e),vs(e,[t])}for(var Cu=0;Cu<ap.length;Cu++){var Su=ap[Cu],T2=Su.toLowerCase(),C2=Su[0].toUpperCase()+Su.slice(1);Or(T2,"on"+C2)}Or(fx,"onAnimationEnd");Or(mx,"onAnimationIteration");Or(px,"onAnimationStart");Or("dblclick","onDoubleClick");Or("focusin","onFocus");Or("focusout","onBlur");Or(gx,"onTransitionEnd");oi("onMouseEnter",["mouseout","mouseover"]);oi("onMouseLeave",["mouseout","mouseover"]);oi("onPointerEnter",["pointerout","pointerover"]);oi("onPointerLeave",["pointerout","pointerover"]);vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S2=new Set("cancel close invalid load scroll toggle".split(" ").concat(ca));function op(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Tw(r,e,void 0,t),t.currentTarget=null}function yx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==a&&s.isPropagationStopped())break e;op(s,c,d),a=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==a&&s.isPropagationStopped())break e;op(s,c,d),a=u}}}if(kl)throw t=yd,kl=!1,yd=null,t}function Le(t,e){var n=e[Sd];n===void 0&&(n=e[Sd]=new Set);var r=t+"__bubble";n.has(r)||(vx(e,t,2,!1),n.add(r))}function ku(t,e,n){var r=0;e&&(r|=4),vx(n,t,r,e)}var Go="_reactListening"+Math.random().toString(36).slice(2);function Oa(t){if(!t[Go]){t[Go]=!0,T0.forEach(function(n){n!=="selectionchange"&&(S2.has(n)||ku(n,!1,t),ku(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Go]||(e[Go]=!0,ku("selectionchange",!1,e))}}function vx(t,e,n,r){switch(nx(e)){case 1:var s=zw;break;case 4:s=$w;break;default:s=Mh}n=s.bind(null,e,n,t),s=void 0,!xd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Iu(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=is(c),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}c=c.parentNode}}r=r.return}z0(function(){var d=a,f=Ph(n),m=[];e:{var g=xx.get(t);if(g!==void 0){var v=Oh,T=t;switch(t){case"keypress":if(fl(n)===0)break e;case"keydown":case"keyup":v=s2;break;case"focusin":T="focus",v=_u;break;case"focusout":T="blur",v=_u;break;case"beforeblur":case"afterblur":v=_u;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Km;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=qw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=o2;break;case fx:case mx:case px:v=Kw;break;case gx:v=c2;break;case"scroll":v=Ww;break;case"wheel":v=d2;break;case"copy":case"cut":case"paste":v=Xw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Xm}var C=(e&4)!==0,I=!C&&t==="scroll",j=C?g!==null?g+"Capture":null:g;C=[];for(var y=d,_;y!==null;){_=y;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,j!==null&&(S=Pa(y,j),S!=null&&C.push(Fa(y,S,_)))),I)break;y=y.return}0<C.length&&(g=new v(g,T,null,n,f),m.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==pd&&(T=n.relatedTarget||n.fromElement)&&(is(T)||T[Wn]))break e;if((v||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,v?(T=n.relatedTarget||n.toElement,v=d,T=T?is(T):null,T!==null&&(I=ws(T),T!==I||T.tag!==5&&T.tag!==6)&&(T=null)):(v=null,T=d),v!==T)){if(C=Km,S="onMouseLeave",j="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(C=Xm,S="onPointerLeave",j="onPointerEnter",y="pointer"),I=v==null?g:Hs(v),_=T==null?g:Hs(T),g=new C(S,y+"leave",v,n,f),g.target=I,g.relatedTarget=_,S=null,is(f)===d&&(C=new C(j,y+"enter",T,n,f),C.target=_,C.relatedTarget=I,S=C),I=S,v&&T)t:{for(C=v,j=T,y=0,_=C;_;_=Ls(_))y++;for(_=0,S=j;S;S=Ls(S))_++;for(;0<y-_;)C=Ls(C),y--;for(;0<_-y;)j=Ls(j),_--;for(;y--;){if(C===j||j!==null&&C===j.alternate)break t;C=Ls(C),j=Ls(j)}C=null}else C=null;v!==null&&lp(m,g,v,C,!1),T!==null&&I!==null&&lp(m,I,T,C,!0)}}e:{if(g=d?Hs(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var P=y2;else if(ep(g))if(lx)P=j2;else{P=w2;var R=v2}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(P=b2);if(P&&(P=P(t,d))){ox(m,P,n,f);break e}R&&R(t,g,d),t==="focusout"&&(R=g._wrapperState)&&R.controlled&&g.type==="number"&&ud(g,"number",g.value)}switch(R=d?Hs(d):window,t){case"focusin":(ep(R)||R.contentEditable==="true")&&($s=R,jd=d,va=null);break;case"focusout":va=jd=$s=null;break;case"mousedown":_d=!0;break;case"contextmenu":case"mouseup":case"dragend":_d=!1,ip(m,n,f);break;case"selectionchange":if(E2)break;case"keydown":case"keyup":ip(m,n,f)}var w;if(Bh)e:{switch(t){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else zs?ix(t,n)&&(p="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(p="onCompositionStart");p&&(sx&&n.locale!=="ko"&&(zs||p!=="onCompositionStart"?p==="onCompositionEnd"&&zs&&(w=rx()):(ur=f,Vh="value"in ur?ur.value:ur.textContent,zs=!0)),R=Dl(d,p),0<R.length&&(p=new Ym(p,t,null,n,f),m.push({event:p,listeners:R}),w?p.data=w:(w=ax(n),w!==null&&(p.data=w)))),(w=f2?m2(t,n):p2(t,n))&&(d=Dl(d,"onBeforeInput"),0<d.length&&(f=new Ym("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=w))}yx(m,e)})}function Fa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Pa(t,n),a!=null&&r.unshift(Fa(t,a,s)),a=Pa(t,e),a!=null&&r.push(Fa(t,a,s))),t=t.return}return r}function Ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lp(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Pa(n,a),u!=null&&o.unshift(Fa(n,u,c))):s||(u=Pa(n,a),u!=null&&o.push(Fa(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var k2=/\r\n?/g,I2=/\u0000|\uFFFD/g;function cp(t){return(typeof t=="string"?t:""+t).replace(k2,`
`).replace(I2,"")}function Ko(t,e,n){if(e=cp(e),cp(t)!==e&&n)throw Error(H(425))}function Ll(){}var Nd=null,Ed=null;function Td(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cd=typeof setTimeout=="function"?setTimeout:void 0,A2=typeof clearTimeout=="function"?clearTimeout:void 0,up=typeof Promise=="function"?Promise:void 0,P2=typeof queueMicrotask=="function"?queueMicrotask:typeof up<"u"?function(t){return up.resolve(null).then(t).catch(R2)}:Cd;function R2(t){setTimeout(function(){throw t})}function Au(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),La(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);La(e)}function xr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ni=Math.random().toString(36).slice(2),Tn="__reactFiber$"+Ni,Ba="__reactProps$"+Ni,Wn="__reactContainer$"+Ni,Sd="__reactEvents$"+Ni,D2="__reactListeners$"+Ni,L2="__reactHandles$"+Ni;function is(t){var e=t[Tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wn]||n[Tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dp(t);t!==null;){if(n=t[Tn])return n;t=dp(t)}return e}t=n,n=t.parentNode}return null}function oo(t){return t=t[Tn]||t[Wn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function vc(t){return t[Ba]||null}var kd=[],qs=-1;function Fr(t){return{current:t}}function Oe(t){0>qs||(t.current=kd[qs],kd[qs]=null,qs--)}function Re(t,e){qs++,kd[qs]=t.current,t.current=e}var kr={},Pt=Fr(kr),zt=Fr(!1),hs=kr;function li(t,e){var n=t.type.contextTypes;if(!n)return kr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $t(t){return t=t.childContextTypes,t!=null}function Ml(){Oe(zt),Oe(Pt)}function hp(t,e,n){if(Pt.current!==kr)throw Error(H(168));Re(Pt,e),Re(zt,n)}function wx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,vw(t)||"Unknown",s));return qe({},n,r)}function Vl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,hs=Pt.current,Re(Pt,t),Re(zt,zt.current),!0}function fp(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=wx(t,e,hs),r.__reactInternalMemoizedMergedChildContext=t,Oe(zt),Oe(Pt),Re(Pt,t)):Oe(zt),Re(zt,n)}var Fn=null,wc=!1,Pu=!1;function bx(t){Fn===null?Fn=[t]:Fn.push(t)}function M2(t){wc=!0,bx(t)}function Br(){if(!Pu&&Fn!==null){Pu=!0;var t=0,e=ke;try{var n=Fn;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fn=null,wc=!1}catch(s){throw Fn!==null&&(Fn=Fn.slice(t+1)),q0(Rh,Br),s}finally{ke=e,Pu=!1}}return null}var Qs=[],Gs=0,Ol=null,Fl=0,rn=[],sn=0,fs=null,Bn=1,Un="";function ns(t,e){Qs[Gs++]=Fl,Qs[Gs++]=Ol,Ol=t,Fl=e}function jx(t,e,n){rn[sn++]=Bn,rn[sn++]=Un,rn[sn++]=fs,fs=t;var r=Bn;t=Un;var s=32-gn(r)-1;r&=~(1<<s),n+=1;var a=32-gn(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Bn=1<<32-gn(e)+s|n<<s|r,Un=a+t}else Bn=1<<a|n<<s|r,Un=t}function zh(t){t.return!==null&&(ns(t,1),jx(t,1,0))}function $h(t){for(;t===Ol;)Ol=Qs[--Gs],Qs[Gs]=null,Fl=Qs[--Gs],Qs[Gs]=null;for(;t===fs;)fs=rn[--sn],rn[sn]=null,Un=rn[--sn],rn[sn]=null,Bn=rn[--sn],rn[sn]=null}var Jt=null,Yt=null,ze=!1,pn=null;function _x(t,e){var n=on(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jt=t,Yt=xr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jt=t,Yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fs!==null?{id:Bn,overflow:Un}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=on(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jt=t,Yt=null,!0):!1;default:return!1}}function Id(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ad(t){if(ze){var e=Yt;if(e){var n=e;if(!mp(t,e)){if(Id(t))throw Error(H(418));e=xr(n.nextSibling);var r=Jt;e&&mp(t,e)?_x(r,n):(t.flags=t.flags&-4097|2,ze=!1,Jt=t)}}else{if(Id(t))throw Error(H(418));t.flags=t.flags&-4097|2,ze=!1,Jt=t}}}function pp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jt=t}function Yo(t){if(t!==Jt)return!1;if(!ze)return pp(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Td(t.type,t.memoizedProps)),e&&(e=Yt)){if(Id(t))throw Nx(),Error(H(418));for(;e;)_x(t,e),e=xr(e.nextSibling)}if(pp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yt=xr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yt=null}}else Yt=Jt?xr(t.stateNode.nextSibling):null;return!0}function Nx(){for(var t=Yt;t;)t=xr(t.nextSibling)}function ci(){Yt=Jt=null,ze=!1}function Wh(t){pn===null?pn=[t]:pn.push(t)}var V2=Yn.ReactCurrentBatchConfig;function ta(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var c=s.refs;o===null?delete c[a]:c[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Xo(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gp(t){var e=t._init;return e(t._payload)}function Ex(t){function e(j,y){if(t){var _=j.deletions;_===null?(j.deletions=[y],j.flags|=16):_.push(y)}}function n(j,y){if(!t)return null;for(;y!==null;)e(j,y),y=y.sibling;return null}function r(j,y){for(j=new Map;y!==null;)y.key!==null?j.set(y.key,y):j.set(y.index,y),y=y.sibling;return j}function s(j,y){return j=br(j,y),j.index=0,j.sibling=null,j}function a(j,y,_){return j.index=_,t?(_=j.alternate,_!==null?(_=_.index,_<y?(j.flags|=2,y):_):(j.flags|=2,y)):(j.flags|=1048576,y)}function o(j){return t&&j.alternate===null&&(j.flags|=2),j}function c(j,y,_,S){return y===null||y.tag!==6?(y=Fu(_,j.mode,S),y.return=j,y):(y=s(y,_),y.return=j,y)}function u(j,y,_,S){var P=_.type;return P===Us?f(j,y,_.props.children,S,_.key):y!==null&&(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ar&&gp(P)===y.type)?(S=s(y,_.props),S.ref=ta(j,y,_),S.return=j,S):(S=wl(_.type,_.key,_.props,null,j.mode,S),S.ref=ta(j,y,_),S.return=j,S)}function d(j,y,_,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=Bu(_,j.mode,S),y.return=j,y):(y=s(y,_.children||[]),y.return=j,y)}function f(j,y,_,S,P){return y===null||y.tag!==7?(y=us(_,j.mode,S,P),y.return=j,y):(y=s(y,_),y.return=j,y)}function m(j,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Fu(""+y,j.mode,_),y.return=j,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Bo:return _=wl(y.type,y.key,y.props,null,j.mode,_),_.ref=ta(j,null,y),_.return=j,_;case Bs:return y=Bu(y,j.mode,_),y.return=j,y;case ar:var S=y._init;return m(j,S(y._payload),_)}if(oa(y)||Yi(y))return y=us(y,j.mode,_,null),y.return=j,y;Xo(j,y)}return null}function g(j,y,_,S){var P=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return P!==null?null:c(j,y,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Bo:return _.key===P?u(j,y,_,S):null;case Bs:return _.key===P?d(j,y,_,S):null;case ar:return P=_._init,g(j,y,P(_._payload),S)}if(oa(_)||Yi(_))return P!==null?null:f(j,y,_,S,null);Xo(j,_)}return null}function v(j,y,_,S,P){if(typeof S=="string"&&S!==""||typeof S=="number")return j=j.get(_)||null,c(y,j,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Bo:return j=j.get(S.key===null?_:S.key)||null,u(y,j,S,P);case Bs:return j=j.get(S.key===null?_:S.key)||null,d(y,j,S,P);case ar:var R=S._init;return v(j,y,_,R(S._payload),P)}if(oa(S)||Yi(S))return j=j.get(_)||null,f(y,j,S,P,null);Xo(y,S)}return null}function T(j,y,_,S){for(var P=null,R=null,w=y,p=y=0,b=null;w!==null&&p<_.length;p++){w.index>p?(b=w,w=null):b=w.sibling;var k=g(j,w,_[p],S);if(k===null){w===null&&(w=b);break}t&&w&&k.alternate===null&&e(j,w),y=a(k,y,p),R===null?P=k:R.sibling=k,R=k,w=b}if(p===_.length)return n(j,w),ze&&ns(j,p),P;if(w===null){for(;p<_.length;p++)w=m(j,_[p],S),w!==null&&(y=a(w,y,p),R===null?P=w:R.sibling=w,R=w);return ze&&ns(j,p),P}for(w=r(j,w);p<_.length;p++)b=v(w,j,p,_[p],S),b!==null&&(t&&b.alternate!==null&&w.delete(b.key===null?p:b.key),y=a(b,y,p),R===null?P=b:R.sibling=b,R=b);return t&&w.forEach(function(A){return e(j,A)}),ze&&ns(j,p),P}function C(j,y,_,S){var P=Yi(_);if(typeof P!="function")throw Error(H(150));if(_=P.call(_),_==null)throw Error(H(151));for(var R=P=null,w=y,p=y=0,b=null,k=_.next();w!==null&&!k.done;p++,k=_.next()){w.index>p?(b=w,w=null):b=w.sibling;var A=g(j,w,k.value,S);if(A===null){w===null&&(w=b);break}t&&w&&A.alternate===null&&e(j,w),y=a(A,y,p),R===null?P=A:R.sibling=A,R=A,w=b}if(k.done)return n(j,w),ze&&ns(j,p),P;if(w===null){for(;!k.done;p++,k=_.next())k=m(j,k.value,S),k!==null&&(y=a(k,y,p),R===null?P=k:R.sibling=k,R=k);return ze&&ns(j,p),P}for(w=r(j,w);!k.done;p++,k=_.next())k=v(w,j,p,k.value,S),k!==null&&(t&&k.alternate!==null&&w.delete(k.key===null?p:k.key),y=a(k,y,p),R===null?P=k:R.sibling=k,R=k);return t&&w.forEach(function(M){return e(j,M)}),ze&&ns(j,p),P}function I(j,y,_,S){if(typeof _=="object"&&_!==null&&_.type===Us&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Bo:e:{for(var P=_.key,R=y;R!==null;){if(R.key===P){if(P=_.type,P===Us){if(R.tag===7){n(j,R.sibling),y=s(R,_.props.children),y.return=j,j=y;break e}}else if(R.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ar&&gp(P)===R.type){n(j,R.sibling),y=s(R,_.props),y.ref=ta(j,R,_),y.return=j,j=y;break e}n(j,R);break}else e(j,R);R=R.sibling}_.type===Us?(y=us(_.props.children,j.mode,S,_.key),y.return=j,j=y):(S=wl(_.type,_.key,_.props,null,j.mode,S),S.ref=ta(j,y,_),S.return=j,j=S)}return o(j);case Bs:e:{for(R=_.key;y!==null;){if(y.key===R)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(j,y.sibling),y=s(y,_.children||[]),y.return=j,j=y;break e}else{n(j,y);break}else e(j,y);y=y.sibling}y=Bu(_,j.mode,S),y.return=j,j=y}return o(j);case ar:return R=_._init,I(j,y,R(_._payload),S)}if(oa(_))return T(j,y,_,S);if(Yi(_))return C(j,y,_,S);Xo(j,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(n(j,y.sibling),y=s(y,_),y.return=j,j=y):(n(j,y),y=Fu(_,j.mode,S),y.return=j,j=y),o(j)):n(j,y)}return I}var ui=Ex(!0),Tx=Ex(!1),Bl=Fr(null),Ul=null,Ks=null,Hh=null;function qh(){Hh=Ks=Ul=null}function Qh(t){var e=Bl.current;Oe(Bl),t._currentValue=e}function Pd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ni(t,e){Ul=t,Hh=Ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ut=!0),t.firstContext=null)}function un(t){var e=t._currentValue;if(Hh!==t)if(t={context:t,memoizedValue:e,next:null},Ks===null){if(Ul===null)throw Error(H(308));Ks=t,Ul.dependencies={lanes:0,firstContext:t}}else Ks=Ks.next=t;return e}var as=null;function Gh(t){as===null?as=[t]:as.push(t)}function Cx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Gh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hn(t,r)}function Hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var or=!1;function Kh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hn(t,n)}return s=r.interleaved,s===null?(e.next=e,Gh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hn(t,n)}function ml(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dh(t,n)}}function xp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zl(t,e,n,r){var s=t.updateQueue;or=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(a!==null){var m=s.baseState;o=0,f=d=u=null,c=a;do{var g=c.lane,v=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var T=t,C=c;switch(g=e,v=n,C.tag){case 1:if(T=C.payload,typeof T=="function"){m=T.call(v,m,g);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=C.payload,g=typeof T=="function"?T.call(v,m,g):T,g==null)break e;m=qe({},m,g);break e;case 2:or=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else v={eventTime:v,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=v,u=m):f=f.next=v,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);ps|=o,t.lanes=o,t.memoizedState=m}}function yp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var lo={},Sn=Fr(lo),Ua=Fr(lo),za=Fr(lo);function os(t){if(t===lo)throw Error(H(174));return t}function Yh(t,e){switch(Re(za,e),Re(Ua,t),Re(Sn,lo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hd(e,t)}Oe(Sn),Re(Sn,e)}function di(){Oe(Sn),Oe(Ua),Oe(za)}function kx(t){os(za.current);var e=os(Sn.current),n=hd(e,t.type);e!==n&&(Re(Ua,t),Re(Sn,n))}function Xh(t){Ua.current===t&&(Oe(Sn),Oe(Ua))}var We=Fr(0);function $l(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ru=[];function Jh(){for(var t=0;t<Ru.length;t++)Ru[t]._workInProgressVersionPrimary=null;Ru.length=0}var pl=Yn.ReactCurrentDispatcher,Du=Yn.ReactCurrentBatchConfig,ms=0,He=null,at=null,mt=null,Wl=!1,wa=!1,$a=0,O2=0;function Tt(){throw Error(H(321))}function Zh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yn(t[n],e[n]))return!1;return!0}function ef(t,e,n,r,s,a){if(ms=a,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pl.current=t===null||t.memoizedState===null?z2:$2,t=n(r,s),wa){a=0;do{if(wa=!1,$a=0,25<=a)throw Error(H(301));a+=1,mt=at=null,e.updateQueue=null,pl.current=W2,t=n(r,s)}while(wa)}if(pl.current=Hl,e=at!==null&&at.next!==null,ms=0,mt=at=He=null,Wl=!1,e)throw Error(H(300));return t}function tf(){var t=$a!==0;return $a=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?He.memoizedState=mt=t:mt=mt.next=t,mt}function dn(){if(at===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var e=mt===null?He.memoizedState:mt.next;if(e!==null)mt=e,at=t;else{if(t===null)throw Error(H(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},mt===null?He.memoizedState=mt=t:mt=mt.next=t}return mt}function Wa(t,e){return typeof e=="function"?e(t):e}function Lu(t){var e=dn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=at,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var c=o=null,u=null,d=a;do{var f=d.lane;if((ms&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,He.lanes|=f,ps|=f}d=d.next}while(d!==null&&d!==a);u===null?o=r:u.next=c,yn(r,e.memoizedState)||(Ut=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,He.lanes|=a,ps|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mu(t){var e=dn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);yn(a,e.memoizedState)||(Ut=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Ix(){}function Ax(t,e){var n=He,r=dn(),s=e(),a=!yn(r.memoizedState,s);if(a&&(r.memoizedState=s,Ut=!0),r=r.queue,nf(Dx.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,Ha(9,Rx.bind(null,n,r,s,e),void 0,null),pt===null)throw Error(H(349));ms&30||Px(n,e,s)}return s}function Px(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Rx(t,e,n,r){e.value=n,e.getSnapshot=r,Lx(e)&&Mx(t)}function Dx(t,e,n){return n(function(){Lx(e)&&Mx(t)})}function Lx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yn(t,n)}catch{return!0}}function Mx(t){var e=Hn(t,1);e!==null&&xn(e,t,1,-1)}function vp(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:t},e.queue=t,t=t.dispatch=U2.bind(null,He,t),[e.memoizedState,t]}function Ha(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Vx(){return dn().memoizedState}function gl(t,e,n,r){var s=Nn();He.flags|=t,s.memoizedState=Ha(1|e,n,void 0,r===void 0?null:r)}function bc(t,e,n,r){var s=dn();r=r===void 0?null:r;var a=void 0;if(at!==null){var o=at.memoizedState;if(a=o.destroy,r!==null&&Zh(r,o.deps)){s.memoizedState=Ha(e,n,a,r);return}}He.flags|=t,s.memoizedState=Ha(1|e,n,a,r)}function wp(t,e){return gl(8390656,8,t,e)}function nf(t,e){return bc(2048,8,t,e)}function Ox(t,e){return bc(4,2,t,e)}function Fx(t,e){return bc(4,4,t,e)}function Bx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ux(t,e,n){return n=n!=null?n.concat([t]):null,bc(4,4,Bx.bind(null,e,t),n)}function rf(){}function zx(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $x(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Wx(t,e,n){return ms&21?(yn(n,e)||(n=K0(),He.lanes|=n,ps|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ut=!0),t.memoizedState=n)}function F2(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=Du.transition;Du.transition={};try{t(!1),e()}finally{ke=n,Du.transition=r}}function Hx(){return dn().memoizedState}function B2(t,e,n){var r=wr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qx(t))Qx(e,n);else if(n=Cx(t,e,n,r),n!==null){var s=Dt();xn(n,t,r,s),Gx(n,e,r)}}function U2(t,e,n){var r=wr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qx(t))Qx(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,c=a(o,n);if(s.hasEagerState=!0,s.eagerState=c,yn(c,o)){var u=e.interleaved;u===null?(s.next=s,Gh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Cx(t,e,s,r),n!==null&&(s=Dt(),xn(n,t,r,s),Gx(n,e,r))}}function qx(t){var e=t.alternate;return t===He||e!==null&&e===He}function Qx(t,e){wa=Wl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Gx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dh(t,n)}}var Hl={readContext:un,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},z2={readContext:un,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:un,useEffect:wp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gl(4194308,4,Bx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gl(4194308,4,t,e)},useInsertionEffect:function(t,e){return gl(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=B2.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:vp,useDebugValue:rf,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=vp(!1),e=t[0];return t=F2.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,s=Nn();if(ze){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),pt===null)throw Error(H(349));ms&30||Px(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,wp(Dx.bind(null,r,a,t),[t]),r.flags|=2048,Ha(9,Rx.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Nn(),e=pt.identifierPrefix;if(ze){var n=Un,r=Bn;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$a++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=O2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$2={readContext:un,useCallback:zx,useContext:un,useEffect:nf,useImperativeHandle:Ux,useInsertionEffect:Ox,useLayoutEffect:Fx,useMemo:$x,useReducer:Lu,useRef:Vx,useState:function(){return Lu(Wa)},useDebugValue:rf,useDeferredValue:function(t){var e=dn();return Wx(e,at.memoizedState,t)},useTransition:function(){var t=Lu(Wa)[0],e=dn().memoizedState;return[t,e]},useMutableSource:Ix,useSyncExternalStore:Ax,useId:Hx,unstable_isNewReconciler:!1},W2={readContext:un,useCallback:zx,useContext:un,useEffect:nf,useImperativeHandle:Ux,useInsertionEffect:Ox,useLayoutEffect:Fx,useMemo:$x,useReducer:Mu,useRef:Vx,useState:function(){return Mu(Wa)},useDebugValue:rf,useDeferredValue:function(t){var e=dn();return at===null?e.memoizedState=t:Wx(e,at.memoizedState,t)},useTransition:function(){var t=Mu(Wa)[0],e=dn().memoizedState;return[t,e]},useMutableSource:Ix,useSyncExternalStore:Ax,useId:Hx,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jc={isMounted:function(t){return(t=t._reactInternals)?ws(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dt(),s=wr(t),a=zn(r,s);a.payload=e,n!=null&&(a.callback=n),e=yr(t,a,s),e!==null&&(xn(e,t,s,r),ml(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dt(),s=wr(t),a=zn(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=yr(t,a,s),e!==null&&(xn(e,t,s,r),ml(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dt(),r=wr(t),s=zn(n,r);s.tag=2,e!=null&&(s.callback=e),e=yr(t,s,r),e!==null&&(xn(e,t,r,n),ml(e,t,r))}};function bp(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Va(n,r)||!Va(s,a):!0}function Kx(t,e,n){var r=!1,s=kr,a=e.contextType;return typeof a=="object"&&a!==null?a=un(a):(s=$t(e)?hs:Pt.current,r=e.contextTypes,a=(r=r!=null)?li(t,s):kr),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function jp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jc.enqueueReplaceState(e,e.state,null)}function Dd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Kh(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=un(a):(a=$t(e)?hs:Pt.current,s.context=li(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Rd(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&jc.enqueueReplaceState(s,s.state,null),zl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function hi(t,e){try{var n="",r=e;do n+=yw(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Vu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ld(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var H2=typeof WeakMap=="function"?WeakMap:Map;function Yx(t,e,n){n=zn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ql||(Ql=!0,Hd=r),Ld(t,e)},n}function Xx(t,e,n){n=zn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ld(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Ld(t,e),typeof r!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _p(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new H2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ib.bind(null,t,e,n),e.then(t,t))}function Np(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ep(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zn(-1,1),e.tag=2,yr(n,e,1))),n.lanes|=1),t)}var q2=Yn.ReactCurrentOwner,Ut=!1;function Rt(t,e,n,r){e.child=t===null?Tx(e,null,n,r):ui(e,t.child,n,r)}function Tp(t,e,n,r,s){n=n.render;var a=e.ref;return ni(e,s),r=ef(t,e,n,r,a,s),n=tf(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qn(t,e,s)):(ze&&n&&zh(e),e.flags|=1,Rt(t,e,r,s),e.child)}function Cp(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!hf(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,Jx(t,e,a,r,s)):(t=wl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Va,n(o,r)&&t.ref===e.ref)return qn(t,e,s)}return e.flags|=1,t=br(a,r),t.ref=e.ref,t.return=e,e.child=t}function Jx(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(Va(a,r)&&t.ref===e.ref)if(Ut=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(Ut=!0);else return e.lanes=t.lanes,qn(t,e,s)}return Md(t,e,n,r,s)}function Zx(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Xs,Kt),Kt|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(Xs,Kt),Kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Re(Xs,Kt),Kt|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Re(Xs,Kt),Kt|=r;return Rt(t,e,s,n),e.child}function ey(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Md(t,e,n,r,s){var a=$t(n)?hs:Pt.current;return a=li(e,a),ni(e,s),n=ef(t,e,n,r,a,s),r=tf(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qn(t,e,s)):(ze&&r&&zh(e),e.flags|=1,Rt(t,e,n,s),e.child)}function Sp(t,e,n,r,s){if($t(n)){var a=!0;Vl(e)}else a=!1;if(ni(e,s),e.stateNode===null)xl(t,e),Kx(e,n,r),Dd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=un(d):(d=$t(n)?hs:Pt.current,d=li(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&jp(e,o,r,d),or=!1;var g=e.memoizedState;o.state=g,zl(e,r,o,s),u=e.memoizedState,c!==r||g!==u||zt.current||or?(typeof f=="function"&&(Rd(e,n,f,r),u=e.memoizedState),(c=or||bp(e,n,c,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Sx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:fn(e.type,c),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=un(u):(u=$t(n)?hs:Pt.current,u=li(e,u));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||g!==u)&&jp(e,o,r,u),or=!1,g=e.memoizedState,o.state=g,zl(e,r,o,s);var T=e.memoizedState;c!==m||g!==T||zt.current||or?(typeof v=="function"&&(Rd(e,n,v,r),T=e.memoizedState),(d=or||bp(e,n,d,r,g,T,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Vd(t,e,n,r,a,s)}function Vd(t,e,n,r,s,a){ey(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&fp(e,n,!1),qn(t,e,a);r=e.stateNode,q2.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ui(e,t.child,null,a),e.child=ui(e,null,c,a)):Rt(t,e,c,a),e.memoizedState=r.state,s&&fp(e,n,!0),e.child}function ty(t){var e=t.stateNode;e.pendingContext?hp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&hp(t,e.context,!1),Yh(t,e.containerInfo)}function kp(t,e,n,r,s){return ci(),Wh(s),e.flags|=256,Rt(t,e,n,r),e.child}var Od={dehydrated:null,treeContext:null,retryLane:0};function Fd(t){return{baseLanes:t,cachePool:null,transitions:null}}function ny(t,e,n){var r=e.pendingProps,s=We.current,a=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Re(We,s&1),t===null)return Ad(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Ec(o,r,0,null),t=us(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Fd(n),e.memoizedState=Od,t):sf(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return Q2(t,e,o,r,c,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=br(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?a=br(c,a):(a=us(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Fd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=Od,r}return a=t.child,t=a.sibling,r=br(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sf(t,e){return e=Ec({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jo(t,e,n,r){return r!==null&&Wh(r),ui(e,t.child,null,n),t=sf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Q2(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Vu(Error(H(422))),Jo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=Ec({mode:"visible",children:r.children},s,0,null),a=us(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&ui(e,t.child,null,o),e.child.memoizedState=Fd(o),e.memoizedState=Od,a);if(!(e.mode&1))return Jo(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(H(419)),r=Vu(a,r,void 0),Jo(t,e,o,r)}if(c=(o&t.childLanes)!==0,Ut||c){if(r=pt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Hn(t,s),xn(r,t,s,-1))}return df(),r=Vu(Error(H(421))),Jo(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ab.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Yt=xr(s.nextSibling),Jt=e,ze=!0,pn=null,t!==null&&(rn[sn++]=Bn,rn[sn++]=Un,rn[sn++]=fs,Bn=t.id,Un=t.overflow,fs=e),e=sf(e,r.children),e.flags|=4096,e)}function Ip(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pd(t.return,e,n)}function Ou(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function ry(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(Rt(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ip(t,n,e);else if(t.tag===19)Ip(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Re(We,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&$l(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ou(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&$l(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ou(e,!0,n,null,a);break;case"together":Ou(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ps|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function G2(t,e,n){switch(e.tag){case 3:ty(e),ci();break;case 5:kx(e);break;case 1:$t(e.type)&&Vl(e);break;case 4:Yh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Re(Bl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Re(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?ny(t,e,n):(Re(We,We.current&1),t=qn(t,e,n),t!==null?t.sibling:null);Re(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ry(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Re(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,Zx(t,e,n)}return qn(t,e,n)}var sy,Bd,iy,ay;sy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bd=function(){};iy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,os(Sn.current);var a=null;switch(n){case"input":s=ld(t,s),r=ld(t,r),a=[];break;case"select":s=qe({},s,{value:void 0}),r=qe({},r,{value:void 0}),a=[];break;case"textarea":s=dd(t,s),r=dd(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ll)}fd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ia.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ia.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Le("scroll",t),a||c===u||(a=[])):(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};ay=function(t,e,n,r){n!==r&&(e.flags|=4)};function na(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function K2(t,e,n){var r=e.pendingProps;switch($h(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return $t(e.type)&&Ml(),Ct(e),null;case 3:return r=e.stateNode,di(),Oe(zt),Oe(Pt),Jh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pn!==null&&(Gd(pn),pn=null))),Bd(t,e),Ct(e),null;case 5:Xh(e);var s=os(za.current);if(n=e.type,t!==null&&e.stateNode!=null)iy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Ct(e),null}if(t=os(Sn.current),Yo(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Tn]=e,r[Ba]=a,t=(e.mode&1)!==0,n){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(s=0;s<ca.length;s++)Le(ca[s],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Fm(r,a),Le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Le("invalid",r);break;case"textarea":Um(r,a),Le("invalid",r)}fd(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&Ko(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Ko(r.textContent,c,t),s=["children",""+c]):Ia.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Le("scroll",r)}switch(n){case"input":Uo(r),Bm(r,a,!0);break;case"textarea":Uo(r),zm(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Ll)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=D0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Tn]=e,t[Ba]=r,sy(t,e,!1,!1),e.stateNode=t;e:{switch(o=md(n,r),n){case"dialog":Le("cancel",t),Le("close",t),s=r;break;case"iframe":case"object":case"embed":Le("load",t),s=r;break;case"video":case"audio":for(s=0;s<ca.length;s++)Le(ca[s],t);s=r;break;case"source":Le("error",t),s=r;break;case"img":case"image":case"link":Le("error",t),Le("load",t),s=r;break;case"details":Le("toggle",t),s=r;break;case"input":Fm(t,r),s=ld(t,r),Le("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=qe({},r,{value:void 0}),Le("invalid",t);break;case"textarea":Um(t,r),s=dd(t,r),Le("invalid",t);break;default:s=r}fd(n,s),c=s;for(a in c)if(c.hasOwnProperty(a)){var u=c[a];a==="style"?V0(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&L0(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Aa(t,u):typeof u=="number"&&Aa(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ia.hasOwnProperty(a)?u!=null&&a==="onScroll"&&Le("scroll",t):u!=null&&Sh(t,a,u,o))}switch(n){case"input":Uo(t),Bm(t,r,!1);break;case"textarea":Uo(t),zm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Sr(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Js(t,!!r.multiple,a,!1):r.defaultValue!=null&&Js(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ll)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)ay(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=os(za.current),os(Sn.current),Yo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tn]=e,(a=r.nodeValue!==n)&&(t=Jt,t!==null))switch(t.tag){case 3:Ko(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ko(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tn]=e,e.stateNode=r}return Ct(e),null;case 13:if(Oe(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&Yt!==null&&e.mode&1&&!(e.flags&128))Nx(),ci(),e.flags|=98560,a=!1;else if(a=Yo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(H(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(H(317));a[Tn]=e}else ci(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),a=!1}else pn!==null&&(Gd(pn),pn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?lt===0&&(lt=3):df())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return di(),Bd(t,e),t===null&&Oa(e.stateNode.containerInfo),Ct(e),null;case 10:return Qh(e.type._context),Ct(e),null;case 17:return $t(e.type)&&Ml(),Ct(e),null;case 19:if(Oe(We),a=e.memoizedState,a===null)return Ct(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)na(a,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$l(t),o!==null){for(e.flags|=128,na(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re(We,We.current&1|2),e.child}t=t.sibling}a.tail!==null&&Xe()>fi&&(e.flags|=128,r=!0,na(a,!1),e.lanes=4194304)}else{if(!r)if(t=$l(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),na(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ze)return Ct(e),null}else 2*Xe()-a.renderingStartTime>fi&&n!==1073741824&&(e.flags|=128,r=!0,na(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Xe(),e.sibling=null,n=We.current,Re(We,r?n&1|2:n&1),e):(Ct(e),null);case 22:case 23:return uf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kt&1073741824&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function Y2(t,e){switch($h(e),e.tag){case 1:return $t(e.type)&&Ml(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return di(),Oe(zt),Oe(Pt),Jh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xh(e),null;case 13:if(Oe(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));ci()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(We),null;case 4:return di(),null;case 10:return Qh(e.type._context),null;case 22:case 23:return uf(),null;case 24:return null;default:return null}}var Zo=!1,It=!1,X2=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Ys(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(t,e,r)}else n.current=null}function Ud(t,e,n){try{n()}catch(r){Ke(t,e,r)}}var Ap=!1;function J2(t,e){if(Nd=Pl,t=dx(),Uh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var v;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==a||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=o),g===a&&++f===r&&(u=o),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ed={focusedElem:t,selectionRange:n},Pl=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var C=T.memoizedProps,I=T.memoizedState,j=e.stateNode,y=j.getSnapshotBeforeUpdate(e.elementType===e.type?C:fn(e.type,C),I);j.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(S){Ke(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return T=Ap,Ap=!1,T}function ba(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&Ud(e,n,a)}s=s.next}while(s!==r)}}function _c(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oy(t){var e=t.alternate;e!==null&&(t.alternate=null,oy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tn],delete e[Ba],delete e[Sd],delete e[D2],delete e[L2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ly(t){return t.tag===5||t.tag===3||t.tag===4}function Pp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ly(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $d(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ll));else if(r!==4&&(t=t.child,t!==null))for($d(t,e,n),t=t.sibling;t!==null;)$d(t,e,n),t=t.sibling}function Wd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wd(t,e,n),t=t.sibling;t!==null;)Wd(t,e,n),t=t.sibling}var vt=null,mn=!1;function ir(t,e,n){for(n=n.child;n!==null;)cy(t,e,n),n=n.sibling}function cy(t,e,n){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(pc,n)}catch{}switch(n.tag){case 5:It||Ys(n,e);case 6:var r=vt,s=mn;vt=null,ir(t,e,n),vt=r,mn=s,vt!==null&&(mn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(mn?(t=vt,n=n.stateNode,t.nodeType===8?Au(t.parentNode,n):t.nodeType===1&&Au(t,n),La(t)):Au(vt,n.stateNode));break;case 4:r=vt,s=mn,vt=n.stateNode.containerInfo,mn=!0,ir(t,e,n),vt=r,mn=s;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Ud(n,e,o),s=s.next}while(s!==r)}ir(t,e,n);break;case 1:if(!It&&(Ys(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ke(n,e,c)}ir(t,e,n);break;case 21:ir(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,ir(t,e,n),It=r):ir(t,e,n);break;default:ir(t,e,n)}}function Rp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new X2),e.forEach(function(r){var s=ob.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:vt=c.stateNode,mn=!1;break e;case 3:vt=c.stateNode.containerInfo,mn=!0;break e;case 4:vt=c.stateNode.containerInfo,mn=!0;break e}c=c.return}if(vt===null)throw Error(H(160));cy(a,o,s),vt=null,mn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ke(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uy(e,t),e=e.sibling}function uy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hn(e,t),_n(t),r&4){try{ba(3,t,t.return),_c(3,t)}catch(C){Ke(t,t.return,C)}try{ba(5,t,t.return)}catch(C){Ke(t,t.return,C)}}break;case 1:hn(e,t),_n(t),r&512&&n!==null&&Ys(n,n.return);break;case 5:if(hn(e,t),_n(t),r&512&&n!==null&&Ys(n,n.return),t.flags&32){var s=t.stateNode;try{Aa(s,"")}catch(C){Ke(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&P0(s,a),md(c,o);var d=md(c,a);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?V0(s,m):f==="dangerouslySetInnerHTML"?L0(s,m):f==="children"?Aa(s,m):Sh(s,f,m,d)}switch(c){case"input":cd(s,a);break;case"textarea":R0(s,a);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?Js(s,!!a.multiple,v,!1):g!==!!a.multiple&&(a.defaultValue!=null?Js(s,!!a.multiple,a.defaultValue,!0):Js(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ba]=a}catch(C){Ke(t,t.return,C)}}break;case 6:if(hn(e,t),_n(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(C){Ke(t,t.return,C)}}break;case 3:if(hn(e,t),_n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{La(e.containerInfo)}catch(C){Ke(t,t.return,C)}break;case 4:hn(e,t),_n(t);break;case 13:hn(e,t),_n(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(lf=Xe())),r&4&&Rp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(It=(d=It)||f,hn(e,t),It=d):hn(e,t),_n(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Z=t,f=t.child;f!==null;){for(m=Z=f;Z!==null;){switch(g=Z,v=g.child,g.tag){case 0:case 11:case 14:case 15:ba(4,g,g.return);break;case 1:Ys(g,g.return);var T=g.stateNode;if(typeof T.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(C){Ke(r,n,C)}}break;case 5:Ys(g,g.return);break;case 22:if(g.memoizedState!==null){Lp(m);continue}}v!==null?(v.return=g,Z=v):Lp(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=M0("display",o))}catch(C){Ke(t,t.return,C)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(C){Ke(t,t.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:hn(e,t),_n(t),r&4&&Rp(t);break;case 21:break;default:hn(e,t),_n(t)}}function _n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ly(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Aa(s,""),r.flags&=-33);var a=Pp(t);Wd(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Pp(t);$d(t,c,o);break;default:throw Error(H(161))}}catch(u){Ke(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Z2(t,e,n){Z=t,dy(t)}function dy(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var s=Z,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Zo;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||It;c=Zo;var d=It;if(Zo=o,(It=u)&&!d)for(Z=s;Z!==null;)o=Z,u=o.child,o.tag===22&&o.memoizedState!==null?Mp(s):u!==null?(u.return=o,Z=u):Mp(s);for(;a!==null;)Z=a,dy(a),a=a.sibling;Z=s,Zo=c,It=d}Dp(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Z=a):Dp(t)}}function Dp(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||_c(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&yp(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yp(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&La(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}It||e.flags&512&&zd(e)}catch(g){Ke(e,e.return,g)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Lp(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Mp(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_c(4,e)}catch(u){Ke(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ke(e,s,u)}}var a=e.return;try{zd(e)}catch(u){Ke(e,a,u)}break;case 5:var o=e.return;try{zd(e)}catch(u){Ke(e,o,u)}}}catch(u){Ke(e,e.return,u)}if(e===t){Z=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Z=c;break}Z=e.return}}var eb=Math.ceil,ql=Yn.ReactCurrentDispatcher,af=Yn.ReactCurrentOwner,ln=Yn.ReactCurrentBatchConfig,Te=0,pt=null,nt=null,jt=0,Kt=0,Xs=Fr(0),lt=0,qa=null,ps=0,Nc=0,of=0,ja=null,Ft=null,lf=0,fi=1/0,On=null,Ql=!1,Hd=null,vr=null,el=!1,dr=null,Gl=0,_a=0,qd=null,yl=-1,vl=0;function Dt(){return Te&6?Xe():yl!==-1?yl:yl=Xe()}function wr(t){return t.mode&1?Te&2&&jt!==0?jt&-jt:V2.transition!==null?(vl===0&&(vl=K0()),vl):(t=ke,t!==0||(t=window.event,t=t===void 0?16:nx(t.type)),t):1}function xn(t,e,n,r){if(50<_a)throw _a=0,qd=null,Error(H(185));io(t,n,r),(!(Te&2)||t!==pt)&&(t===pt&&(!(Te&2)&&(Nc|=n),lt===4&&cr(t,jt)),Wt(t,r),n===1&&Te===0&&!(e.mode&1)&&(fi=Xe()+500,wc&&Br()))}function Wt(t,e){var n=t.callbackNode;Vw(t,e);var r=Al(t,t===pt?jt:0);if(r===0)n!==null&&Hm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Hm(n),e===1)t.tag===0?M2(Vp.bind(null,t)):bx(Vp.bind(null,t)),P2(function(){!(Te&6)&&Br()}),n=null;else{switch(Y0(r)){case 1:n=Rh;break;case 4:n=Q0;break;case 16:n=Il;break;case 536870912:n=G0;break;default:n=Il}n=vy(n,hy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hy(t,e){if(yl=-1,vl=0,Te&6)throw Error(H(327));var n=t.callbackNode;if(ri()&&t.callbackNode!==n)return null;var r=Al(t,t===pt?jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kl(t,r);else{e=r;var s=Te;Te|=2;var a=my();(pt!==t||jt!==e)&&(On=null,fi=Xe()+500,cs(t,e));do try{rb();break}catch(c){fy(t,c)}while(!0);qh(),ql.current=a,Te=s,nt!==null?e=0:(pt=null,jt=0,e=lt)}if(e!==0){if(e===2&&(s=vd(t),s!==0&&(r=s,e=Qd(t,s))),e===1)throw n=qa,cs(t,0),cr(t,r),Wt(t,Xe()),n;if(e===6)cr(t,r);else{if(s=t.current.alternate,!(r&30)&&!tb(s)&&(e=Kl(t,r),e===2&&(a=vd(t),a!==0&&(r=a,e=Qd(t,a))),e===1))throw n=qa,cs(t,0),cr(t,r),Wt(t,Xe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:rs(t,Ft,On);break;case 3:if(cr(t,r),(r&130023424)===r&&(e=lf+500-Xe(),10<e)){if(Al(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Dt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Cd(rs.bind(null,t,Ft,On),e);break}rs(t,Ft,On);break;case 4:if(cr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-gn(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eb(r/1960))-r,10<r){t.timeoutHandle=Cd(rs.bind(null,t,Ft,On),r);break}rs(t,Ft,On);break;case 5:rs(t,Ft,On);break;default:throw Error(H(329))}}}return Wt(t,Xe()),t.callbackNode===n?hy.bind(null,t):null}function Qd(t,e){var n=ja;return t.current.memoizedState.isDehydrated&&(cs(t,e).flags|=256),t=Kl(t,e),t!==2&&(e=Ft,Ft=n,e!==null&&Gd(e)),t}function Gd(t){Ft===null?Ft=t:Ft.push.apply(Ft,t)}function tb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!yn(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cr(t,e){for(e&=~of,e&=~Nc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),r=1<<n;t[n]=-1,e&=~r}}function Vp(t){if(Te&6)throw Error(H(327));ri();var e=Al(t,0);if(!(e&1))return Wt(t,Xe()),null;var n=Kl(t,e);if(t.tag!==0&&n===2){var r=vd(t);r!==0&&(e=r,n=Qd(t,r))}if(n===1)throw n=qa,cs(t,0),cr(t,e),Wt(t,Xe()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rs(t,Ft,On),Wt(t,Xe()),null}function cf(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(fi=Xe()+500,wc&&Br())}}function gs(t){dr!==null&&dr.tag===0&&!(Te&6)&&ri();var e=Te;Te|=1;var n=ln.transition,r=ke;try{if(ln.transition=null,ke=1,t)return t()}finally{ke=r,ln.transition=n,Te=e,!(Te&6)&&Br()}}function uf(){Kt=Xs.current,Oe(Xs)}function cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,A2(n)),nt!==null)for(n=nt.return;n!==null;){var r=n;switch($h(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ml();break;case 3:di(),Oe(zt),Oe(Pt),Jh();break;case 5:Xh(r);break;case 4:di();break;case 13:Oe(We);break;case 19:Oe(We);break;case 10:Qh(r.type._context);break;case 22:case 23:uf()}n=n.return}if(pt=t,nt=t=br(t.current,null),jt=Kt=e,lt=0,qa=null,of=Nc=ps=0,Ft=ja=null,as!==null){for(e=0;e<as.length;e++)if(n=as[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}as=null}return t}function fy(t,e){do{var n=nt;try{if(qh(),pl.current=Hl,Wl){for(var r=He.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Wl=!1}if(ms=0,mt=at=He=null,wa=!1,$a=0,af.current=null,n===null||n.return===null){lt=1,qa=e,nt=null;break}e:{var a=t,o=n.return,c=n,u=e;if(e=jt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=Np(o);if(v!==null){v.flags&=-257,Ep(v,o,c,a,e),v.mode&1&&_p(a,d,e),e=v,u=d;var T=e.updateQueue;if(T===null){var C=new Set;C.add(u),e.updateQueue=C}else T.add(u);break e}else{if(!(e&1)){_p(a,d,e),df();break e}u=Error(H(426))}}else if(ze&&c.mode&1){var I=Np(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Ep(I,o,c,a,e),Wh(hi(u,c));break e}}a=u=hi(u,c),lt!==4&&(lt=2),ja===null?ja=[a]:ja.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var j=Yx(a,u,e);xp(a,j);break e;case 1:c=u;var y=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(vr===null||!vr.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e;var S=Xx(a,c,e);xp(a,S);break e}}a=a.return}while(a!==null)}gy(n)}catch(P){e=P,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function my(){var t=ql.current;return ql.current=Hl,t===null?Hl:t}function df(){(lt===0||lt===3||lt===2)&&(lt=4),pt===null||!(ps&268435455)&&!(Nc&268435455)||cr(pt,jt)}function Kl(t,e){var n=Te;Te|=2;var r=my();(pt!==t||jt!==e)&&(On=null,cs(t,e));do try{nb();break}catch(s){fy(t,s)}while(!0);if(qh(),Te=n,ql.current=r,nt!==null)throw Error(H(261));return pt=null,jt=0,lt}function nb(){for(;nt!==null;)py(nt)}function rb(){for(;nt!==null&&!Sw();)py(nt)}function py(t){var e=yy(t.alternate,t,Kt);t.memoizedProps=t.pendingProps,e===null?gy(t):nt=e,af.current=null}function gy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Y2(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,nt=null;return}}else if(n=K2(n,e,Kt),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);lt===0&&(lt=5)}function rs(t,e,n){var r=ke,s=ln.transition;try{ln.transition=null,ke=1,sb(t,e,n,r)}finally{ln.transition=s,ke=r}return null}function sb(t,e,n,r){do ri();while(dr!==null);if(Te&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(Ow(t,a),t===pt&&(nt=pt=null,jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||el||(el=!0,vy(Il,function(){return ri(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ln.transition,ln.transition=null;var o=ke;ke=1;var c=Te;Te|=4,af.current=null,J2(t,n),uy(n,t),N2(Ed),Pl=!!Nd,Ed=Nd=null,t.current=n,Z2(n),kw(),Te=c,ke=o,ln.transition=a}else t.current=n;if(el&&(el=!1,dr=t,Gl=s),a=t.pendingLanes,a===0&&(vr=null),Pw(n.stateNode),Wt(t,Xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ql)throw Ql=!1,t=Hd,Hd=null,t;return Gl&1&&t.tag!==0&&ri(),a=t.pendingLanes,a&1?t===qd?_a++:(_a=0,qd=t):_a=0,Br(),null}function ri(){if(dr!==null){var t=Y0(Gl),e=ln.transition,n=ke;try{if(ln.transition=null,ke=16>t?16:t,dr===null)var r=!1;else{if(t=dr,dr=null,Gl=0,Te&6)throw Error(H(331));var s=Te;for(Te|=4,Z=t.current;Z!==null;){var a=Z,o=a.child;if(Z.flags&16){var c=a.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Z=d;Z!==null;){var f=Z;switch(f.tag){case 0:case 11:case 15:ba(8,f,a)}var m=f.child;if(m!==null)m.return=f,Z=m;else for(;Z!==null;){f=Z;var g=f.sibling,v=f.return;if(oy(f),f===d){Z=null;break}if(g!==null){g.return=v,Z=g;break}Z=v}}}var T=a.alternate;if(T!==null){var C=T.child;if(C!==null){T.child=null;do{var I=C.sibling;C.sibling=null,C=I}while(C!==null)}}Z=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Z=o;else e:for(;Z!==null;){if(a=Z,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ba(9,a,a.return)}var j=a.sibling;if(j!==null){j.return=a.return,Z=j;break e}Z=a.return}}var y=t.current;for(Z=y;Z!==null;){o=Z;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Z=_;else e:for(o=y;Z!==null;){if(c=Z,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:_c(9,c)}}catch(P){Ke(c,c.return,P)}if(c===o){Z=null;break e}var S=c.sibling;if(S!==null){S.return=c.return,Z=S;break e}Z=c.return}}if(Te=s,Br(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(pc,t)}catch{}r=!0}return r}finally{ke=n,ln.transition=e}}return!1}function Op(t,e,n){e=hi(n,e),e=Yx(t,e,1),t=yr(t,e,1),e=Dt(),t!==null&&(io(t,1,e),Wt(t,e))}function Ke(t,e,n){if(t.tag===3)Op(t,t,n);else for(;e!==null;){if(e.tag===3){Op(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vr===null||!vr.has(r))){t=hi(n,t),t=Xx(e,t,1),e=yr(e,t,1),t=Dt(),e!==null&&(io(e,1,t),Wt(e,t));break}}e=e.return}}function ib(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dt(),t.pingedLanes|=t.suspendedLanes&n,pt===t&&(jt&n)===n&&(lt===4||lt===3&&(jt&130023424)===jt&&500>Xe()-lf?cs(t,0):of|=n),Wt(t,e)}function xy(t,e){e===0&&(t.mode&1?(e=Wo,Wo<<=1,!(Wo&130023424)&&(Wo=4194304)):e=1);var n=Dt();t=Hn(t,e),t!==null&&(io(t,e,n),Wt(t,n))}function ab(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xy(t,n)}function ob(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),xy(t,n)}var yy;yy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zt.current)Ut=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ut=!1,G2(t,e,n);Ut=!!(t.flags&131072)}else Ut=!1,ze&&e.flags&1048576&&jx(e,Fl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xl(t,e),t=e.pendingProps;var s=li(e,Pt.current);ni(e,n),s=ef(null,e,r,t,s,n);var a=tf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(r)?(a=!0,Vl(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Kh(e),s.updater=jc,e.stateNode=s,s._reactInternals=e,Dd(e,r,t,n),e=Vd(null,e,r,!0,a,n)):(e.tag=0,ze&&a&&zh(e),Rt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=cb(r),t=fn(r,t),s){case 0:e=Md(null,e,r,t,n);break e;case 1:e=Sp(null,e,r,t,n);break e;case 11:e=Tp(null,e,r,t,n);break e;case 14:e=Cp(null,e,r,fn(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Md(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Sp(t,e,r,s,n);case 3:e:{if(ty(e),t===null)throw Error(H(387));r=e.pendingProps,a=e.memoizedState,s=a.element,Sx(t,e),zl(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=hi(Error(H(423)),e),e=kp(t,e,r,n,s);break e}else if(r!==s){s=hi(Error(H(424)),e),e=kp(t,e,r,n,s);break e}else for(Yt=xr(e.stateNode.containerInfo.firstChild),Jt=e,ze=!0,pn=null,n=Tx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ci(),r===s){e=qn(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return kx(e),t===null&&Ad(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Td(r,s)?o=null:a!==null&&Td(r,a)&&(e.flags|=32),ey(t,e),Rt(t,e,o,n),e.child;case 6:return t===null&&Ad(e),null;case 13:return ny(t,e,n);case 4:return Yh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ui(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Tp(t,e,r,s,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,Re(Bl,r._currentValue),r._currentValue=o,a!==null)if(yn(a.value,o)){if(a.children===s.children&&!zt.current){e=qn(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=zn(-1,n&-n),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Pd(a.return,n,e),c.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(H(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Pd(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Rt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ni(e,n),s=un(s),r=r(s),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,s=fn(r,e.pendingProps),s=fn(r.type,s),Cp(t,e,r,s,n);case 15:return Jx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),xl(t,e),e.tag=1,$t(r)?(t=!0,Vl(e)):t=!1,ni(e,n),Kx(e,r,s),Dd(e,r,s,n),Vd(null,e,r,!0,t,n);case 19:return ry(t,e,n);case 22:return Zx(t,e,n)}throw Error(H(156,e.tag))};function vy(t,e){return q0(t,e)}function lb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,e,n,r){return new lb(t,e,n,r)}function hf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cb(t){if(typeof t=="function")return hf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ih)return 11;if(t===Ah)return 14}return 2}function br(t,e){var n=t.alternate;return n===null?(n=on(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wl(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")hf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Us:return us(n.children,s,a,e);case kh:o=8,s|=8;break;case sd:return t=on(12,n,e,s|2),t.elementType=sd,t.lanes=a,t;case id:return t=on(13,n,e,s),t.elementType=id,t.lanes=a,t;case ad:return t=on(19,n,e,s),t.elementType=ad,t.lanes=a,t;case k0:return Ec(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C0:o=10;break e;case S0:o=9;break e;case Ih:o=11;break e;case Ah:o=14;break e;case ar:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=on(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function us(t,e,n,r){return t=on(7,t,r,e),t.lanes=n,t}function Ec(t,e,n,r){return t=on(22,t,r,e),t.elementType=k0,t.lanes=n,t.stateNode={isHidden:!1},t}function Fu(t,e,n){return t=on(6,t,null,e),t.lanes=n,t}function Bu(t,e,n){return e=on(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ub(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wu(0),this.expirationTimes=wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ff(t,e,n,r,s,a,o,c,u){return t=new ub(t,e,n,c,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=on(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kh(a),t}function db(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function wy(t){if(!t)return kr;t=t._reactInternals;e:{if(ws(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if($t(n))return wx(t,n,e)}return e}function by(t,e,n,r,s,a,o,c,u){return t=ff(n,r,!0,t,s,a,o,c,u),t.context=wy(null),n=t.current,r=Dt(),s=wr(n),a=zn(r,s),a.callback=e??null,yr(n,a,s),t.current.lanes=s,io(t,s,r),Wt(t,r),t}function Tc(t,e,n,r){var s=e.current,a=Dt(),o=wr(s);return n=wy(n),e.context===null?e.context=n:e.pendingContext=n,e=zn(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yr(s,e,o),t!==null&&(xn(t,s,o,a),ml(t,s,o)),o}function Yl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Fp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mf(t,e){Fp(t,e),(t=t.alternate)&&Fp(t,e)}function hb(){return null}var jy=typeof reportError=="function"?reportError:function(t){console.error(t)};function pf(t){this._internalRoot=t}Cc.prototype.render=pf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Tc(t,e,null,null)};Cc.prototype.unmount=pf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gs(function(){Tc(null,t,null,null)}),e[Wn]=null}};function Cc(t){this._internalRoot=t}Cc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Z0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lr.length&&e!==0&&e<lr[n].priority;n++);lr.splice(n,0,t),n===0&&tx(t)}};function gf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bp(){}function fb(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var d=Yl(o);a.call(d)}}var o=by(e,r,t,0,null,!1,!1,"",Bp);return t._reactRootContainer=o,t[Wn]=o.current,Oa(t.nodeType===8?t.parentNode:t),gs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Yl(u);c.call(d)}}var u=ff(t,0,!1,null,null,!1,!1,"",Bp);return t._reactRootContainer=u,t[Wn]=u.current,Oa(t.nodeType===8?t.parentNode:t),gs(function(){Tc(e,u,n,r)}),u}function kc(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var c=s;s=function(){var u=Yl(o);c.call(u)}}Tc(e,o,t,s)}else o=fb(n,e,t,s,r);return Yl(o)}X0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=la(e.pendingLanes);n!==0&&(Dh(e,n|1),Wt(e,Xe()),!(Te&6)&&(fi=Xe()+500,Br()))}break;case 13:gs(function(){var r=Hn(t,1);if(r!==null){var s=Dt();xn(r,t,1,s)}}),mf(t,1)}};Lh=function(t){if(t.tag===13){var e=Hn(t,134217728);if(e!==null){var n=Dt();xn(e,t,134217728,n)}mf(t,134217728)}};J0=function(t){if(t.tag===13){var e=wr(t),n=Hn(t,e);if(n!==null){var r=Dt();xn(n,t,e,r)}mf(t,e)}};Z0=function(){return ke};ex=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};gd=function(t,e,n){switch(e){case"input":if(cd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=vc(r);if(!s)throw Error(H(90));A0(r),cd(r,s)}}}break;case"textarea":R0(t,n);break;case"select":e=n.value,e!=null&&Js(t,!!n.multiple,e,!1)}};B0=cf;U0=gs;var mb={usingClientEntryPoint:!1,Events:[oo,Hs,vc,O0,F0,cf]},ra={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pb={bundleType:ra.bundleType,version:ra.version,rendererPackageName:ra.rendererPackageName,rendererConfig:ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=W0(t),t===null?null:t.stateNode},findFiberByHostInstance:ra.findFiberByHostInstance||hb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tl.isDisabled&&tl.supportsFiber)try{pc=tl.inject(pb),Cn=tl}catch{}}tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mb;tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gf(e))throw Error(H(200));return db(t,e,null,n)};tn.createRoot=function(t,e){if(!gf(t))throw Error(H(299));var n=!1,r="",s=jy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ff(t,1,!1,null,null,n,!1,r,s),t[Wn]=e.current,Oa(t.nodeType===8?t.parentNode:t),new pf(e)};tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=W0(e),t=t===null?null:t.stateNode,t};tn.flushSync=function(t){return gs(t)};tn.hydrate=function(t,e,n){if(!Sc(e))throw Error(H(200));return kc(null,t,e,!0,n)};tn.hydrateRoot=function(t,e,n){if(!gf(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=jy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=by(e,null,t,1,n??null,s,!1,a,o),t[Wn]=e.current,Oa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Cc(e)};tn.render=function(t,e,n){if(!Sc(e))throw Error(H(200));return kc(null,t,e,!1,n)};tn.unmountComponentAtNode=function(t){if(!Sc(t))throw Error(H(40));return t._reactRootContainer?(gs(function(){kc(null,null,t,!1,function(){t._reactRootContainer=null,t[Wn]=null})}),!0):!1};tn.unstable_batchedUpdates=cf;tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sc(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return kc(t,e,n,!1,r)};tn.version="18.3.1-next-f1338f8080-20240426";function _y(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_y)}catch(t){console.error(t)}}_y(),_0.exports=tn;var gb=_0.exports,Up=gb;nd.createRoot=Up.createRoot,nd.hydrateRoot=Up.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qa(){return Qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qa.apply(this,arguments)}var hr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(hr||(hr={}));const zp="popstate";function xb(t){t===void 0&&(t={});function e(s,a){let{pathname:o="/",search:c="",hash:u=""}=bs(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Kd("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){let o=s.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=s.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof a=="string"?a:Xl(a))}function r(s,a){Ic(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return vb(e,n,r,t)}function Ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ic(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yb(){return Math.random().toString(36).substr(2,8)}function $p(t,e){return{usr:t.state,key:t.key,idx:e}}function Kd(t,e,n,r){return n===void 0&&(n=null),Qa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?bs(e):e,{state:n,key:e&&e.key||r||yb()})}function Xl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function bs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function vb(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,c=hr.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(Qa({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){c=hr.Pop;let I=f(),j=I==null?null:I-d;d=I,u&&u({action:c,location:C.location,delta:j})}function g(I,j){c=hr.Push;let y=Kd(C.location,I,j);n&&n(y,I),d=f()+1;let _=$p(y,d),S=C.createHref(y);try{o.pushState(_,"",S)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(S)}a&&u&&u({action:c,location:C.location,delta:1})}function v(I,j){c=hr.Replace;let y=Kd(C.location,I,j);n&&n(y,I),d=f();let _=$p(y,d),S=C.createHref(y);o.replaceState(_,"",S),a&&u&&u({action:c,location:C.location,delta:0})}function T(I){let j=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof I=="string"?I:Xl(I);return y=y.replace(/ $/,"%20"),Ze(j,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,j)}let C={get action(){return c},get location(){return t(s,o)},listen(I){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(zp,m),u=I,()=>{s.removeEventListener(zp,m),u=null}},createHref(I){return e(s,I)},createURL:T,encodeLocation(I){let j=T(I);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:g,replace:v,go(I){return o.go(I)}};return C}var Wp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Wp||(Wp={}));function wb(t,e,n){return n===void 0&&(n="/"),bb(t,e,n)}function bb(t,e,n,r){let s=typeof e=="string"?bs(e):e,a=xf(s.pathname||"/",n);if(a==null)return null;let o=Ny(t);jb(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=Db(a);c=Ab(o[u],d)}return c}function Ny(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Ze(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=jr([r,u.relativePath]),f=n.concat(u);a.children&&a.children.length>0&&(Ze(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Ny(a.children,e,f,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:kb(d,a.index),routesMeta:f})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))s(a,o);else for(let u of Ey(a.path))s(a,o,u)}),e}function Ey(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=Ey(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function jb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Ib(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _b=/^:[\w-]+$/,Nb=3,Eb=2,Tb=1,Cb=10,Sb=-2,Hp=t=>t==="*";function kb(t,e){let n=t.split("/"),r=n.length;return n.some(Hp)&&(r+=Sb),e&&(r+=Eb),n.filter(s=>!Hp(s)).reduce((s,a)=>s+(_b.test(a)?Nb:a===""?Tb:Cb),r)}function Ib(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Ab(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",m=Pb({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:jr([a,m.pathname]),pathnameBase:Fb(jr([a,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(a=jr([a,m.pathnameBase]))}return o}function Pb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Rb(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:v}=f;if(g==="*"){let C=c[m]||"";o=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const T=c[m];return v&&!T?d[g]=void 0:d[g]=(T||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function Rb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ic(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Db(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ic(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function xf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Lb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mb=t=>Lb.test(t);function Vb(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?bs(t):t,a;if(n)if(Mb(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Ic(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?a=qp(n.substring(1),"/"):a=qp(n,e)}else a=e;return{pathname:a,search:Bb(r),hash:Ub(s)}}function qp(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Uu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ob(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function yf(t,e){let n=Ob(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function vf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=bs(t):(s=Qa({},t),Ze(!s.pathname||!s.pathname.includes("?"),Uu("?","pathname","search",s)),Ze(!s.pathname||!s.pathname.includes("#"),Uu("#","pathname","hash",s)),Ze(!s.search||!s.search.includes("#"),Uu("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,c;if(o==null)c=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}c=m>=0?e[m]:"/"}let u=Vb(s,c),d=o&&o!=="/"&&o.endsWith("/"),f=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const jr=t=>t.join("/").replace(/\/\/+/g,"/"),Fb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Bb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ub=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function zb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ty=["post","put","patch","delete"];new Set(Ty);const $b=["get",...Ty];new Set($b);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ga(){return Ga=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ga.apply(this,arguments)}const wf=L.createContext(null),Wb=L.createContext(null),Ur=L.createContext(null),Ac=L.createContext(null),Xn=L.createContext({outlet:null,matches:[],isDataRoute:!1}),Cy=L.createContext(null);function Hb(t,e){let{relative:n}=e===void 0?{}:e;Ei()||Ze(!1);let{basename:r,navigator:s}=L.useContext(Ur),{hash:a,pathname:o,search:c}=ky(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:jr([r,o])),s.createHref({pathname:u,search:c,hash:a})}function Ei(){return L.useContext(Ac)!=null}function js(){return Ei()||Ze(!1),L.useContext(Ac).location}function Sy(t){L.useContext(Ur).static||L.useLayoutEffect(t)}function Et(){let{isDataRoute:t}=L.useContext(Xn);return t?sj():qb()}function qb(){Ei()||Ze(!1);let t=L.useContext(wf),{basename:e,future:n,navigator:r}=L.useContext(Ur),{matches:s}=L.useContext(Xn),{pathname:a}=js(),o=JSON.stringify(yf(s,n.v7_relativeSplatPath)),c=L.useRef(!1);return Sy(()=>{c.current=!0}),L.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let m=vf(d,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:jr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,a,t])}function _s(){let{matches:t}=L.useContext(Xn),e=t[t.length-1];return e?e.params:{}}function ky(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=L.useContext(Ur),{matches:s}=L.useContext(Xn),{pathname:a}=js(),o=JSON.stringify(yf(s,r.v7_relativeSplatPath));return L.useMemo(()=>vf(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function Qb(t,e){return Gb(t,e)}function Gb(t,e,n,r){Ei()||Ze(!1);let{navigator:s}=L.useContext(Ur),{matches:a}=L.useContext(Xn),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=js(),f;if(e){var m;let I=typeof e=="string"?bs(e):e;u==="/"||(m=I.pathname)!=null&&m.startsWith(u)||Ze(!1),f=I}else f=d;let g=f.pathname||"/",v=g;if(u!=="/"){let I=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(I.length).join("/")}let T=wb(t,{pathname:v}),C=Zb(T&&T.map(I=>Object.assign({},I,{params:Object.assign({},c,I.params),pathname:jr([u,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?u:jr([u,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),a,n,r);return e&&C?L.createElement(Ac.Provider,{value:{location:Ga({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:hr.Pop}},C):C}function Kb(){let t=rj(),e=zb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:s},n):null,null)}const Yb=L.createElement(Kb,null);class Xb extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(Xn.Provider,{value:this.props.routeContext},L.createElement(Cy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Jb(t){let{routeContext:e,match:n,children:r}=t,s=L.useContext(wf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(Xn.Provider,{value:e},r)}function Zb(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let f=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);f>=0||Ze(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:v}=n,T=m.route.loader&&g[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||T){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let v,T=!1,C=null,I=null;n&&(v=c&&m.route.id?c[m.route.id]:void 0,C=m.route.errorElement||Yb,u&&(d<0&&g===0?(ij("route-fallback"),T=!0,I=null):d===g&&(T=!0,I=m.route.hydrateFallbackElement||null)));let j=e.concat(o.slice(0,g+1)),y=()=>{let _;return v?_=C:T?_=I:m.route.Component?_=L.createElement(m.route.Component,null):m.route.element?_=m.route.element:_=f,L.createElement(Jb,{match:m,routeContext:{outlet:f,matches:j,isDataRoute:n!=null},children:_})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?L.createElement(Xb,{location:n.location,revalidation:n.revalidation,component:C,error:v,children:y(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):y()},null)}var Iy=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Iy||{}),Ay=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ay||{});function ej(t){let e=L.useContext(wf);return e||Ze(!1),e}function tj(t){let e=L.useContext(Wb);return e||Ze(!1),e}function nj(t){let e=L.useContext(Xn);return e||Ze(!1),e}function Py(t){let e=nj(),n=e.matches[e.matches.length-1];return n.route.id||Ze(!1),n.route.id}function rj(){var t;let e=L.useContext(Cy),n=tj(),r=Py();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function sj(){let{router:t}=ej(Iy.UseNavigateStable),e=Py(Ay.UseNavigateStable),n=L.useRef(!1);return Sy(()=>{n.current=!0}),L.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ga({fromRouteId:e},a)))},[t,e])}const Qp={};function ij(t,e,n){Qp[t]||(Qp[t]=!0)}function aj(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ka(t){let{to:e,replace:n,state:r,relative:s}=t;Ei()||Ze(!1);let{future:a,static:o}=L.useContext(Ur),{matches:c}=L.useContext(Xn),{pathname:u}=js(),d=Et(),f=vf(e,yf(c,a.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return L.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function Ee(t){Ze(!1)}function oj(t){let{basename:e="/",children:n=null,location:r,navigationType:s=hr.Pop,navigator:a,static:o=!1,future:c}=t;Ei()&&Ze(!1);let u=e.replace(/^\/*/,"/"),d=L.useMemo(()=>({basename:u,navigator:a,static:o,future:Ga({v7_relativeSplatPath:!1},c)}),[u,c,a,o]);typeof r=="string"&&(r=bs(r));let{pathname:f="/",search:m="",hash:g="",state:v=null,key:T="default"}=r,C=L.useMemo(()=>{let I=xf(f,u);return I==null?null:{location:{pathname:I,search:m,hash:g,state:v,key:T},navigationType:s}},[u,f,m,g,v,T,s]);return C==null?null:L.createElement(Ur.Provider,{value:d},L.createElement(Ac.Provider,{children:n,value:C}))}function lj(t){let{children:e,location:n}=t;return Qb(Yd(e),n)}new Promise(()=>{});function Yd(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(r,s)=>{if(!L.isValidElement(r))return;let a=[...e,s];if(r.type===L.Fragment){n.push.apply(n,Yd(r.props.children,a));return}r.type!==Ee&&Ze(!1),!r.props.index||!r.props.children||Ze(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Yd(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xd(){return Xd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xd.apply(this,arguments)}function cj(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function uj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dj(t,e){return t.button===0&&(!e||e==="_self")&&!uj(t)}const hj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fj="6";try{window.__reactRouterVersion=fj}catch{}const mj="startTransition",Gp=iw[mj];function pj(t){let{basename:e,children:n,future:r,window:s}=t,a=L.useRef();a.current==null&&(a.current=xb({window:s,v5Compat:!0}));let o=a.current,[c,u]=L.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=L.useCallback(m=>{d&&Gp?Gp(()=>u(m)):u(m)},[u,d]);return L.useLayoutEffect(()=>o.listen(f),[o,f]),L.useEffect(()=>aj(r),[r]),L.createElement(oj,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const gj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rt=L.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=cj(e,hj),{basename:v}=L.useContext(Ur),T,C=!1;if(typeof d=="string"&&xj.test(d)&&(T=d,gj))try{let _=new URL(window.location.href),S=d.startsWith("//")?new URL(_.protocol+d):new URL(d),P=xf(S.pathname,v);S.origin===_.origin&&P!=null?d=P+S.search+S.hash:C=!0}catch{}let I=Hb(d,{relative:s}),j=yj(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:m});function y(_){r&&r(_),_.defaultPrevented||j(_)}return L.createElement("a",Xd({},g,{href:T||I,onClick:C||a?r:y,ref:n,target:u}))});var Kp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Kp||(Kp={}));var Yp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Yp||(Yp={}));function yj(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:c}=e===void 0?{}:e,u=Et(),d=js(),f=ky(t,{relative:o});return L.useCallback(m=>{if(dj(m,n)){m.preventDefault();let g=r!==void 0?r:Xl(d)===Xl(f);u(t,{replace:g,state:s,preventScrollReset:a,relative:o,viewTransition:c})}},[d,u,f,r,s,n,t,a,o,c])}var ct=(t=>(t.Training="Training",t.ReadyForInterview="Ready for Interview",t.Placed="Placed",t.Discontinued="Discontinued",t))(ct||{}),pe=(t=>(t.Bank="Bank",t.Cash="Cash",t.Debtor="Debtor",t.Creditor="Creditor",t.Expense="Expense",t.Salary="Salary",t.Income="Income",t.Equity="Equity",t))(pe||{}),xe=(t=>(t.Income="Income",t.Payment="Payment",t.Transfer="Transfer",t.Refund="Refund",t))(xe||{});const se=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(t),Lt=()=>Math.random().toString(36).substr(2,9),vj=(t,e)=>{const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)},mi=(t,e)=>{if(t.length===0)return;const n=Object.keys(t[0]).join(","),r=t.map(u=>Object.values(u).map(d=>`"${d}"`).join(",")).join(`
`),s=`${n}
${r}`,a=new Blob([s],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(a),c=document.createElement("a");c.href=o,c.download=e,document.body.appendChild(c),c.click(),document.body.removeChild(c)},wj=(t,e)=>{let n=`<?xml version="1.0" encoding="UTF-8"?>
<?mso-application progid="Excel.Sheet"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40">
 <Styles>
  <Style ss:ID="Default" ss:Name="Normal">
   <Alignment ss:Vertical="Bottom"/>
   <Borders/>
   <Font ss:FontName="Calibri" x:Family="Swiss" ss:Size="11" ss:Color="#000000"/>
   <Interior/>
   <NumberFormat/>
   <Protection/>
  </Style>
  <Style ss:ID="sHeader">
   <Font ss:FontName="Calibri" x:Family="Swiss" ss:Size="11" ss:Color="#FFFFFF" ss:Bold="1"/>
   <Interior ss:Color="#1e3a8a" ss:Pattern="Solid"/>
  </Style>
 </Styles>`;t.forEach(o=>{if(n+=`<Worksheet ss:Name="${o.name}">`,n+="<Table>",o.data.length>0){const c=Object.keys(o.data[0]);n+="<Row>",c.forEach(u=>{n+=`<Cell ss:StyleID="sHeader"><Data ss:Type="String">${u}</Data></Cell>`}),n+="</Row>",o.data.forEach(u=>{n+="<Row>",c.forEach(d=>{const f=u[d];n+=`<Cell><Data ss:Type="${typeof f=="number"?"Number":"String"}">${f??""}</Data></Cell>`}),n+="</Row>"})}else n+='<Row><Cell><Data ss:Type="String">No data available</Data></Cell></Row>';n+="</Table></Worksheet>"}),n+="</Workbook>";const r=new Blob([n],{type:"application/vnd.ms-excel"}),s=URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},ua=(t,e,n,r=0,s)=>{let a=0;return e==="Account"&&(s===pe.Creditor||s===pe.Salary?a-=r:a+=r),n.forEach(o=>{o.toEntityId===t&&o.toEntityType===e&&(a+=o.amount),o.fromEntityId===t&&o.fromEntityType===e&&(a-=o.amount)}),a},bj=()=>{};var Xp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},jj=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Dy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=a>>2,m=(a&3)<<4|c>>4;let g=(c&15)<<2|d>>6,v=d&63;u||(v=64,o||(g=64)),r.push(n[f],n[m],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ry(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||c==null||d==null||m==null)throw new _j;const g=a<<2|c>>4;if(r.push(g),d!==64){const v=c<<4&240|d>>2;if(r.push(v),m!==64){const T=d<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _j extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Nj=function(t){const e=Ry(t);return Dy.encodeByteArray(e,!0)},Jl=function(t){return Nj(t).replace(/\./g,"")},Ej=function(t){try{return Dy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=()=>Tj().__FIREBASE_DEFAULTS__,Sj=()=>{if(typeof process>"u"||typeof Xp>"u")return;const t=Xp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ej(t[1]);return e&&JSON.parse(e)},bf=()=>{try{return bj()||Cj()||Sj()||kj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ij=t=>{var e,n;return(n=(e=bf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Aj=t=>{const e=Ij(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ly=()=>{var t;return(t=bf())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Rj(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Jl(JSON.stringify(n)),Jl(JSON.stringify(o)),""].join(".")}const Na={};function Lj(){const t={prod:[],emulator:[]};for(const e of Object.keys(Na))Na[e]?t.emulator.push(e):t.prod.push(e);return t}function Mj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Jp=!1;function Vj(t,e){if(typeof window>"u"||typeof document>"u"||!jf(window.location.host)||Na[t]===e||Na[t]||Jp)return;Na[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=Lj().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Jp=!0,o()},g}function f(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=Mj(r),v=n("text"),T=document.getElementById(v)||document.createElement("span"),C=n("learnmore"),I=document.getElementById(C)||document.createElement("a"),j=n("preprendIcon"),y=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const _=g.element;c(_),f(I,C);const S=d();u(y,j),_.append(y,T,I,S),document.body.appendChild(_)}a?(T.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fj(){var e;const t=(e=bf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bj(){return!Fj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uj(){try{return typeof indexedDB=="object"}catch{return!1}}function zj(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="FirebaseError";class Ti extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$j,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,My.prototype.create)}}class My{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?Wj(a,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Ti(s,c,r)}}function Wj(t,e){return t.replace(Hj,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Hj=/\{\$([^}]+)}/g;function Zl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(Zp(a)&&Zp(o)){if(!Zl(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Zp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t){return t&&t._delegate?t._delegate:t}class Ya{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Pj;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gj(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Qj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Qj(t){return t===ss?void 0:t}function Gj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const Yj={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},Xj=_e.INFO,Jj={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},Zj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Jj[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vy{constructor(e){this.name=e,this._logLevel=Xj,this._logHandler=Zj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const e_=(t,e)=>e.some(n=>t instanceof n);let eg,tg;function t_(){return eg||(eg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function n_(){return tg||(tg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Oy=new WeakMap,Jd=new WeakMap,Fy=new WeakMap,zu=new WeakMap,_f=new WeakMap;function r_(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(_r(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Oy.set(n,t)}).catch(()=>{}),_f.set(e,t),e}function s_(t){if(Jd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Jd.set(t,e)}let Zd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Fy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function i_(t){Zd=t(Zd)}function a_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($u(this),e,...n);return Fy.set(r,e.sort?e.sort():[e]),_r(r)}:n_().includes(t)?function(...e){return t.apply($u(this),e),_r(Oy.get(this))}:function(...e){return _r(t.apply($u(this),e))}}function o_(t){return typeof t=="function"?a_(t):(t instanceof IDBTransaction&&s_(t),e_(t,t_())?new Proxy(t,Zd):t)}function _r(t){if(t instanceof IDBRequest)return r_(t);if(zu.has(t))return zu.get(t);const e=o_(t);return e!==t&&(zu.set(t,e),_f.set(e,t)),e}const $u=t=>_f.get(t);function l_(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),c=_r(o);return r&&o.addEventListener("upgradeneeded",u=>{r(_r(o.result),u.oldVersion,u.newVersion,_r(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const c_=["get","getKey","getAll","getAllKeys","count"],u_=["put","add","delete","clear"],Wu=new Map;function ng(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wu.get(e))return Wu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=u_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||c_.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Wu.set(e,a),a}i_(t=>({...t,get:(e,n,r)=>ng(e,n)||t.get(e,n,r),has:(e,n)=>!!ng(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(h_(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function h_(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const eh="@firebase/app",rg="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new Vy("@firebase/app"),f_="@firebase/app-compat",m_="@firebase/analytics-compat",p_="@firebase/analytics",g_="@firebase/app-check-compat",x_="@firebase/app-check",y_="@firebase/auth",v_="@firebase/auth-compat",w_="@firebase/database",b_="@firebase/data-connect",j_="@firebase/database-compat",__="@firebase/functions",N_="@firebase/functions-compat",E_="@firebase/installations",T_="@firebase/installations-compat",C_="@firebase/messaging",S_="@firebase/messaging-compat",k_="@firebase/performance",I_="@firebase/performance-compat",A_="@firebase/remote-config",P_="@firebase/remote-config-compat",R_="@firebase/storage",D_="@firebase/storage-compat",L_="@firebase/firestore",M_="@firebase/ai",V_="@firebase/firestore-compat",O_="firebase",F_="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th="[DEFAULT]",B_={[eh]:"fire-core",[f_]:"fire-core-compat",[p_]:"fire-analytics",[m_]:"fire-analytics-compat",[x_]:"fire-app-check",[g_]:"fire-app-check-compat",[y_]:"fire-auth",[v_]:"fire-auth-compat",[w_]:"fire-rtdb",[b_]:"fire-data-connect",[j_]:"fire-rtdb-compat",[__]:"fire-fn",[N_]:"fire-fn-compat",[E_]:"fire-iid",[T_]:"fire-iid-compat",[C_]:"fire-fcm",[S_]:"fire-fcm-compat",[k_]:"fire-perf",[I_]:"fire-perf-compat",[A_]:"fire-rc",[P_]:"fire-rc-compat",[R_]:"fire-gcs",[D_]:"fire-gcs-compat",[L_]:"fire-fst",[V_]:"fire-fst-compat",[M_]:"fire-vertex","fire-js":"fire-js",[O_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new Map,U_=new Map,nh=new Map;function sg(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function tc(t){const e=t.name;if(nh.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;nh.set(e,t);for(const n of ec.values())sg(n,t);for(const n of U_.values())sg(n,t);return!0}function z_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $_(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new My("app","Firebase",W_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=F_;function rh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:th,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Nr.create("bad-app-name",{appName:String(s)});if(n||(n=Ly()),!n)throw Nr.create("no-options");const a=ec.get(s);if(a){if(Zl(n,a.options)&&Zl(r,a.config))return a;throw Nr.create("duplicate-app",{appName:s})}const o=new Kj(s);for(const u of nh.values())o.addComponent(u);const c=new H_(n,r,o);return ec.set(s,c),c}function Q_(t=th){const e=ec.get(t);if(!e&&t===th&&Ly())return rh();if(!e)throw Nr.create("no-app",{appName:t});return e}function si(t,e,n){let r=B_[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(o.join(" "));return}tc(new Ya(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="firebase-heartbeat-database",K_=1,Xa="firebase-heartbeat-store";let Hu=null;function By(){return Hu||(Hu=l_(G_,K_,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Nr.create("idb-open",{originalErrorMessage:t.message})})),Hu}async function Y_(t){try{const n=(await By()).transaction(Xa),r=await n.objectStore(Xa).get(Uy(t));return await n.done,r}catch(e){if(e instanceof Ti)Qn.warn(e.message);else{const n=Nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qn.warn(n.message)}}}async function ig(t,e){try{const r=(await By()).transaction(Xa,"readwrite");await r.objectStore(Xa).put(e,Uy(t)),await r.done}catch(n){if(n instanceof Ti)Qn.warn(n.message);else{const r=Nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qn.warn(r.message)}}}function Uy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=1024,J_=30;class Z_{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ag();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>J_){const o=nN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ag(),{heartbeatsToSend:r,unsentEntries:s}=eN(this._heartbeatsCache.heartbeats),a=Jl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Qn.warn(n),""}}}function ag(){return new Date().toISOString().substring(0,10)}function eN(t,e=X_){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),og(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),og(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class tN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Uj()?zj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Y_(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ig(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ig(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function og(t){return Jl(JSON.stringify({version:2,heartbeats:t})).length}function nN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(t){tc(new Ya("platform-logger",e=>new d_(e),"PRIVATE")),tc(new Ya("heartbeat",e=>new Z_(e),"PRIVATE")),si(eh,rg,t),si(eh,rg,"esm2020"),si("fire-js","")}rN("");var sN="firebase",iN="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */si(sN,iN,"app");var lg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Er,zy;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,p){function b(){}b.prototype=p.prototype,w.F=p.prototype,w.prototype=new b,w.prototype.constructor=w,w.D=function(k,A,M){for(var N=Array(arguments.length-2),J=2;J<arguments.length;J++)N[J-2]=arguments[J];return p.prototype[A].apply(k,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,p,b){b||(b=0);const k=Array(16);if(typeof p=="string")for(var A=0;A<16;++A)k[A]=p.charCodeAt(b++)|p.charCodeAt(b++)<<8|p.charCodeAt(b++)<<16|p.charCodeAt(b++)<<24;else for(A=0;A<16;++A)k[A]=p[b++]|p[b++]<<8|p[b++]<<16|p[b++]<<24;p=w.g[0],b=w.g[1],A=w.g[2];let M=w.g[3],N;N=p+(M^b&(A^M))+k[0]+3614090360&4294967295,p=b+(N<<7&4294967295|N>>>25),N=M+(A^p&(b^A))+k[1]+3905402710&4294967295,M=p+(N<<12&4294967295|N>>>20),N=A+(b^M&(p^b))+k[2]+606105819&4294967295,A=M+(N<<17&4294967295|N>>>15),N=b+(p^A&(M^p))+k[3]+3250441966&4294967295,b=A+(N<<22&4294967295|N>>>10),N=p+(M^b&(A^M))+k[4]+4118548399&4294967295,p=b+(N<<7&4294967295|N>>>25),N=M+(A^p&(b^A))+k[5]+1200080426&4294967295,M=p+(N<<12&4294967295|N>>>20),N=A+(b^M&(p^b))+k[6]+2821735955&4294967295,A=M+(N<<17&4294967295|N>>>15),N=b+(p^A&(M^p))+k[7]+4249261313&4294967295,b=A+(N<<22&4294967295|N>>>10),N=p+(M^b&(A^M))+k[8]+1770035416&4294967295,p=b+(N<<7&4294967295|N>>>25),N=M+(A^p&(b^A))+k[9]+2336552879&4294967295,M=p+(N<<12&4294967295|N>>>20),N=A+(b^M&(p^b))+k[10]+4294925233&4294967295,A=M+(N<<17&4294967295|N>>>15),N=b+(p^A&(M^p))+k[11]+2304563134&4294967295,b=A+(N<<22&4294967295|N>>>10),N=p+(M^b&(A^M))+k[12]+1804603682&4294967295,p=b+(N<<7&4294967295|N>>>25),N=M+(A^p&(b^A))+k[13]+4254626195&4294967295,M=p+(N<<12&4294967295|N>>>20),N=A+(b^M&(p^b))+k[14]+2792965006&4294967295,A=M+(N<<17&4294967295|N>>>15),N=b+(p^A&(M^p))+k[15]+1236535329&4294967295,b=A+(N<<22&4294967295|N>>>10),N=p+(A^M&(b^A))+k[1]+4129170786&4294967295,p=b+(N<<5&4294967295|N>>>27),N=M+(b^A&(p^b))+k[6]+3225465664&4294967295,M=p+(N<<9&4294967295|N>>>23),N=A+(p^b&(M^p))+k[11]+643717713&4294967295,A=M+(N<<14&4294967295|N>>>18),N=b+(M^p&(A^M))+k[0]+3921069994&4294967295,b=A+(N<<20&4294967295|N>>>12),N=p+(A^M&(b^A))+k[5]+3593408605&4294967295,p=b+(N<<5&4294967295|N>>>27),N=M+(b^A&(p^b))+k[10]+38016083&4294967295,M=p+(N<<9&4294967295|N>>>23),N=A+(p^b&(M^p))+k[15]+3634488961&4294967295,A=M+(N<<14&4294967295|N>>>18),N=b+(M^p&(A^M))+k[4]+3889429448&4294967295,b=A+(N<<20&4294967295|N>>>12),N=p+(A^M&(b^A))+k[9]+568446438&4294967295,p=b+(N<<5&4294967295|N>>>27),N=M+(b^A&(p^b))+k[14]+3275163606&4294967295,M=p+(N<<9&4294967295|N>>>23),N=A+(p^b&(M^p))+k[3]+4107603335&4294967295,A=M+(N<<14&4294967295|N>>>18),N=b+(M^p&(A^M))+k[8]+1163531501&4294967295,b=A+(N<<20&4294967295|N>>>12),N=p+(A^M&(b^A))+k[13]+2850285829&4294967295,p=b+(N<<5&4294967295|N>>>27),N=M+(b^A&(p^b))+k[2]+4243563512&4294967295,M=p+(N<<9&4294967295|N>>>23),N=A+(p^b&(M^p))+k[7]+1735328473&4294967295,A=M+(N<<14&4294967295|N>>>18),N=b+(M^p&(A^M))+k[12]+2368359562&4294967295,b=A+(N<<20&4294967295|N>>>12),N=p+(b^A^M)+k[5]+4294588738&4294967295,p=b+(N<<4&4294967295|N>>>28),N=M+(p^b^A)+k[8]+2272392833&4294967295,M=p+(N<<11&4294967295|N>>>21),N=A+(M^p^b)+k[11]+1839030562&4294967295,A=M+(N<<16&4294967295|N>>>16),N=b+(A^M^p)+k[14]+4259657740&4294967295,b=A+(N<<23&4294967295|N>>>9),N=p+(b^A^M)+k[1]+2763975236&4294967295,p=b+(N<<4&4294967295|N>>>28),N=M+(p^b^A)+k[4]+1272893353&4294967295,M=p+(N<<11&4294967295|N>>>21),N=A+(M^p^b)+k[7]+4139469664&4294967295,A=M+(N<<16&4294967295|N>>>16),N=b+(A^M^p)+k[10]+3200236656&4294967295,b=A+(N<<23&4294967295|N>>>9),N=p+(b^A^M)+k[13]+681279174&4294967295,p=b+(N<<4&4294967295|N>>>28),N=M+(p^b^A)+k[0]+3936430074&4294967295,M=p+(N<<11&4294967295|N>>>21),N=A+(M^p^b)+k[3]+3572445317&4294967295,A=M+(N<<16&4294967295|N>>>16),N=b+(A^M^p)+k[6]+76029189&4294967295,b=A+(N<<23&4294967295|N>>>9),N=p+(b^A^M)+k[9]+3654602809&4294967295,p=b+(N<<4&4294967295|N>>>28),N=M+(p^b^A)+k[12]+3873151461&4294967295,M=p+(N<<11&4294967295|N>>>21),N=A+(M^p^b)+k[15]+530742520&4294967295,A=M+(N<<16&4294967295|N>>>16),N=b+(A^M^p)+k[2]+3299628645&4294967295,b=A+(N<<23&4294967295|N>>>9),N=p+(A^(b|~M))+k[0]+4096336452&4294967295,p=b+(N<<6&4294967295|N>>>26),N=M+(b^(p|~A))+k[7]+1126891415&4294967295,M=p+(N<<10&4294967295|N>>>22),N=A+(p^(M|~b))+k[14]+2878612391&4294967295,A=M+(N<<15&4294967295|N>>>17),N=b+(M^(A|~p))+k[5]+4237533241&4294967295,b=A+(N<<21&4294967295|N>>>11),N=p+(A^(b|~M))+k[12]+1700485571&4294967295,p=b+(N<<6&4294967295|N>>>26),N=M+(b^(p|~A))+k[3]+2399980690&4294967295,M=p+(N<<10&4294967295|N>>>22),N=A+(p^(M|~b))+k[10]+4293915773&4294967295,A=M+(N<<15&4294967295|N>>>17),N=b+(M^(A|~p))+k[1]+2240044497&4294967295,b=A+(N<<21&4294967295|N>>>11),N=p+(A^(b|~M))+k[8]+1873313359&4294967295,p=b+(N<<6&4294967295|N>>>26),N=M+(b^(p|~A))+k[15]+4264355552&4294967295,M=p+(N<<10&4294967295|N>>>22),N=A+(p^(M|~b))+k[6]+2734768916&4294967295,A=M+(N<<15&4294967295|N>>>17),N=b+(M^(A|~p))+k[13]+1309151649&4294967295,b=A+(N<<21&4294967295|N>>>11),N=p+(A^(b|~M))+k[4]+4149444226&4294967295,p=b+(N<<6&4294967295|N>>>26),N=M+(b^(p|~A))+k[11]+3174756917&4294967295,M=p+(N<<10&4294967295|N>>>22),N=A+(p^(M|~b))+k[2]+718787259&4294967295,A=M+(N<<15&4294967295|N>>>17),N=b+(M^(A|~p))+k[9]+3951481745&4294967295,w.g[0]=w.g[0]+p&4294967295,w.g[1]=w.g[1]+(A+(N<<21&4294967295|N>>>11))&4294967295,w.g[2]=w.g[2]+A&4294967295,w.g[3]=w.g[3]+M&4294967295}r.prototype.v=function(w,p){p===void 0&&(p=w.length);const b=p-this.blockSize,k=this.C;let A=this.h,M=0;for(;M<p;){if(A==0)for(;M<=b;)s(this,w,M),M+=this.blockSize;if(typeof w=="string"){for(;M<p;)if(k[A++]=w.charCodeAt(M++),A==this.blockSize){s(this,k),A=0;break}}else for(;M<p;)if(k[A++]=w[M++],A==this.blockSize){s(this,k),A=0;break}}this.h=A,this.o+=p},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var p=1;p<w.length-8;++p)w[p]=0;p=this.o*8;for(var b=w.length-8;b<w.length;++b)w[b]=p&255,p/=256;for(this.v(w),w=Array(16),p=0,b=0;b<4;++b)for(let k=0;k<32;k+=8)w[p++]=this.g[b]>>>k&255;return w};function a(w,p){var b=c;return Object.prototype.hasOwnProperty.call(b,w)?b[w]:b[w]=p(w)}function o(w,p){this.h=p;const b=[];let k=!0;for(let A=w.length-1;A>=0;A--){const M=w[A]|0;k&&M==p||(b[A]=M,k=!1)}this.g=b}var c={};function u(w){return-128<=w&&w<128?a(w,function(p){return new o([p|0],p<0?-1:0)}):new o([w|0],w<0?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(w<0)return I(d(-w));const p=[];let b=1;for(let k=0;w>=b;k++)p[k]=w/b|0,b*=4294967296;return new o(p,0)}function f(w,p){if(w.length==0)throw Error("number format error: empty string");if(p=p||10,p<2||36<p)throw Error("radix out of range: "+p);if(w.charAt(0)=="-")return I(f(w.substring(1),p));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=d(Math.pow(p,8));let k=m;for(let M=0;M<w.length;M+=8){var A=Math.min(8,w.length-M);const N=parseInt(w.substring(M,M+A),p);A<8?(A=d(Math.pow(p,A)),k=k.j(A).add(d(N))):(k=k.j(b),k=k.add(d(N)))}return k}var m=u(0),g=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-I(this).m();let w=0,p=1;for(let b=0;b<this.g.length;b++){const k=this.i(b);w+=(k>=0?k:4294967296+k)*p,p*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(T(this))return"0";if(C(this))return"-"+I(this).toString(w);const p=d(Math.pow(w,6));var b=this;let k="";for(;;){const A=S(b,p).g;b=j(b,A.j(p));let M=((b.g.length>0?b.g[0]:b.h)>>>0).toString(w);if(b=A,T(b))return M+k;for(;M.length<6;)M="0"+M;k=M+k}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function T(w){if(w.h!=0)return!1;for(let p=0;p<w.g.length;p++)if(w.g[p]!=0)return!1;return!0}function C(w){return w.h==-1}t.l=function(w){return w=j(this,w),C(w)?-1:T(w)?0:1};function I(w){const p=w.g.length,b=[];for(let k=0;k<p;k++)b[k]=~w.g[k];return new o(b,~w.h).add(g)}t.abs=function(){return C(this)?I(this):this},t.add=function(w){const p=Math.max(this.g.length,w.g.length),b=[];let k=0;for(let A=0;A<=p;A++){let M=k+(this.i(A)&65535)+(w.i(A)&65535),N=(M>>>16)+(this.i(A)>>>16)+(w.i(A)>>>16);k=N>>>16,M&=65535,N&=65535,b[A]=N<<16|M}return new o(b,b[b.length-1]&-2147483648?-1:0)};function j(w,p){return w.add(I(p))}t.j=function(w){if(T(this)||T(w))return m;if(C(this))return C(w)?I(this).j(I(w)):I(I(this).j(w));if(C(w))return I(this.j(I(w)));if(this.l(v)<0&&w.l(v)<0)return d(this.m()*w.m());const p=this.g.length+w.g.length,b=[];for(var k=0;k<2*p;k++)b[k]=0;for(k=0;k<this.g.length;k++)for(let A=0;A<w.g.length;A++){const M=this.i(k)>>>16,N=this.i(k)&65535,J=w.i(A)>>>16,ie=w.i(A)&65535;b[2*k+2*A]+=N*ie,y(b,2*k+2*A),b[2*k+2*A+1]+=M*ie,y(b,2*k+2*A+1),b[2*k+2*A+1]+=N*J,y(b,2*k+2*A+1),b[2*k+2*A+2]+=M*J,y(b,2*k+2*A+2)}for(w=0;w<p;w++)b[w]=b[2*w+1]<<16|b[2*w];for(w=p;w<2*p;w++)b[w]=0;return new o(b,0)};function y(w,p){for(;(w[p]&65535)!=w[p];)w[p+1]+=w[p]>>>16,w[p]&=65535,p++}function _(w,p){this.g=w,this.h=p}function S(w,p){if(T(p))throw Error("division by zero");if(T(w))return new _(m,m);if(C(w))return p=S(I(w),p),new _(I(p.g),I(p.h));if(C(p))return p=S(w,I(p)),new _(I(p.g),p.h);if(w.g.length>30){if(C(w)||C(p))throw Error("slowDivide_ only works with positive integers.");for(var b=g,k=p;k.l(w)<=0;)b=P(b),k=P(k);var A=R(b,1),M=R(k,1);for(k=R(k,2),b=R(b,2);!T(k);){var N=M.add(k);N.l(w)<=0&&(A=A.add(b),M=N),k=R(k,1),b=R(b,1)}return p=j(w,A.j(p)),new _(A,p)}for(A=m;w.l(p)>=0;){for(b=Math.max(1,Math.floor(w.m()/p.m())),k=Math.ceil(Math.log(b)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),M=d(b),N=M.j(p);C(N)||N.l(w)>0;)b-=k,M=d(b),N=M.j(p);T(M)&&(M=g),A=A.add(M),w=j(w,N)}return new _(A,w)}t.B=function(w){return S(this,w).h},t.and=function(w){const p=Math.max(this.g.length,w.g.length),b=[];for(let k=0;k<p;k++)b[k]=this.i(k)&w.i(k);return new o(b,this.h&w.h)},t.or=function(w){const p=Math.max(this.g.length,w.g.length),b=[];for(let k=0;k<p;k++)b[k]=this.i(k)|w.i(k);return new o(b,this.h|w.h)},t.xor=function(w){const p=Math.max(this.g.length,w.g.length),b=[];for(let k=0;k<p;k++)b[k]=this.i(k)^w.i(k);return new o(b,this.h^w.h)};function P(w){const p=w.g.length+1,b=[];for(let k=0;k<p;k++)b[k]=w.i(k)<<1|w.i(k-1)>>>31;return new o(b,w.h)}function R(w,p){const b=p>>5;p%=32;const k=w.g.length-b,A=[];for(let M=0;M<k;M++)A[M]=p>0?w.i(M+b)>>>p|w.i(M+b+1)<<32-p:w.i(M+b);return new o(A,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,zy=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Er=o}).apply(typeof lg<"u"?lg:typeof self<"u"?self:typeof window<"u"?window:{});var nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $y,da,Wy,bl,sh,Hy,qy,Qy;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof nl=="object"&&nl];for(var h=0;h<l.length;++h){var x=l[h];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var x=r;l=l.split(".");for(var E=0;E<l.length-1;E++){var V=l[E];if(!(V in x))break e;x=x[V]}l=l[l.length-1],E=x[l],h=h(E),h!=E&&h!=null&&e(x,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var x=[],E;for(E in h)Object.prototype.hasOwnProperty.call(h,E)&&x.push([E,h[E]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,x){return l.call.apply(l.bind,arguments)}function d(l,h,x){return d=u,d.apply(null,arguments)}function f(l,h){var x=Array.prototype.slice.call(arguments,1);return function(){var E=x.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function m(l,h){function x(){}x.prototype=h.prototype,l.Z=h.prototype,l.prototype=new x,l.prototype.constructor=l,l.Ob=function(E,V,O){for(var Q=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)Q[ge-2]=arguments[ge];return h.prototype[V].apply(E,Q)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function v(l){const h=l.length;if(h>0){const x=Array(h);for(let E=0;E<h;E++)x[E]=l[E];return x}return[]}function T(l,h){for(let E=1;E<arguments.length;E++){const V=arguments[E];var x=typeof V;if(x=x!="object"?x:V?Array.isArray(V)?"array":x:"null",x=="array"||x=="object"&&typeof V.length=="number"){x=l.length||0;const O=V.length||0;l.length=x+O;for(let Q=0;Q<O;Q++)l[x+Q]=V[Q]}else l.push(V)}}class C{constructor(h,x){this.i=h,this.j=x,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function I(l){o.setTimeout(()=>{throw l},0)}function j(){var l=w;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class y{constructor(){this.h=this.g=null}add(h,x){const E=_.get();E.set(h,x),this.h?this.h.next=E:this.g=E,this.h=E}}var _=new C(()=>new S,l=>l.reset());class S{constructor(){this.next=this.g=this.h=null}set(h,x){this.h=h,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let P,R=!1,w=new y,p=()=>{const l=Promise.resolve(void 0);P=()=>{l.then(b)}};function b(){for(var l;l=j();){try{l.h.call(l.g)}catch(x){I(x)}var h=_;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}R=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const x=()=>{};o.addEventListener("test",x,h),o.removeEventListener("test",x,h)}catch{}return l}();function N(l){return/^[\s\xa0]*$/.test(l)}function J(l,h){A.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}m(J,A),J.prototype.init=function(l,h){const x=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(x=="mouseover"?h=l.fromElement:x=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&J.Z.h.call(this)},J.prototype.h=function(){J.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),Ae=0;function Fe(l,h,x,E,V){this.listener=l,this.proxy=null,this.src=h,this.type=x,this.capture=!!E,this.ha=V,this.key=++Ae,this.da=this.fa=!1}function q(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function te(l,h,x){for(const E in l)h.call(x,l[E],E,l)}function le(l,h){for(const x in l)h.call(void 0,l[x],x,l)}function U(l){const h={};for(const x in l)h[x]=l[x];return h}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(l,h){let x,E;for(let V=1;V<arguments.length;V++){E=arguments[V];for(x in E)l[x]=E[x];for(let O=0;O<oe.length;O++)x=oe[O],Object.prototype.hasOwnProperty.call(E,x)&&(l[x]=E[x])}}function de(l){this.src=l,this.g={},this.h=0}de.prototype.add=function(l,h,x,E,V){const O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);const Q=re(l,h,E,V);return Q>-1?(h=l[Q],x||(h.fa=!1)):(h=new Fe(h,this.src,O,!!E,V),h.fa=x,l.push(h)),h};function Y(l,h){const x=h.type;if(x in l.g){var E=l.g[x],V=Array.prototype.indexOf.call(E,h,void 0),O;(O=V>=0)&&Array.prototype.splice.call(E,V,1),O&&(q(h),l.g[x].length==0&&(delete l.g[x],l.h--))}}function re(l,h,x,E){for(let V=0;V<l.length;++V){const O=l[V];if(!O.da&&O.listener==h&&O.capture==!!x&&O.ha==E)return V}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),Wr={};function wn(l,h,x,E,V){if(Array.isArray(h)){for(let O=0;O<h.length;O++)wn(l,h[O],x,E,V);return null}return x=xo(x),l&&l[ie]?l.J(h,x,c(E)?!!E.capture:!1,V):Ln(l,h,x,!1,E,V)}function Ln(l,h,x,E,V,O){if(!h)throw Error("Invalid event type");const Q=c(V)?!!V.capture:!!V;let ge=Ri(l);if(ge||(l[Be]=ge=new de(l)),x=ge.add(h,x,E,Q,O),x.proxy)return x;if(E=Jc(),x.proxy=E,E.src=l,E.listener=x,l.addEventListener)M||(V=Q),V===void 0&&(V=!1),l.addEventListener(h.toString(),E,V);else if(l.attachEvent)l.attachEvent(go(h.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Jc(){function l(x){return h.call(l.src,l.listener,x)}const h=Zc;return l}function Hr(l,h,x,E,V){if(Array.isArray(h))for(var O=0;O<h.length;O++)Hr(l,h[O],x,E,V);else E=c(E)?!!E.capture:!!E,x=xo(x),l&&l[ie]?(l=l.i,O=String(h).toString(),O in l.g&&(h=l.g[O],x=re(h,x,E,V),x>-1&&(q(h[x]),Array.prototype.splice.call(h,x,1),h.length==0&&(delete l.g[O],l.h--)))):l&&(l=Ri(l))&&(h=l.g[h.toString()],l=-1,h&&(l=re(h,x,E,V)),(x=l>-1?h[l]:null)&&Pi(x))}function Pi(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[ie])Y(h.i,l);else{var x=l.type,E=l.proxy;h.removeEventListener?h.removeEventListener(x,E,l.capture):h.detachEvent?h.detachEvent(go(x),E):h.addListener&&h.removeListener&&h.removeListener(E),(x=Ri(h))?(Y(x,l),x.h==0&&(x.src=null,h[Be]=null)):q(l)}}}function go(l){return l in Wr?Wr[l]:Wr[l]="on"+l}function Zc(l,h){if(l.da)l=!0;else{h=new J(h,this);const x=l.listener,E=l.ha||l.src;l.fa&&Pi(l),l=x.call(E,h)}return l}function Ri(l){return l=l[Be],l instanceof de?l:null}var Di="__closure_events_fn_"+(Math.random()*1e9>>>0);function xo(l){return typeof l=="function"?l:(l[Di]||(l[Di]=function(h){return l.handleEvent(h)}),l[Di])}function dt(){k.call(this),this.i=new de(this),this.M=this,this.G=null}m(dt,k),dt.prototype[ie]=!0,dt.prototype.removeEventListener=function(l,h,x,E){Hr(this,l,h,x,E)};function gt(l,h){var x,E=l.G;if(E)for(x=[];E;E=E.G)x.push(E);if(l=l.M,E=h.type||h,typeof h=="string")h=new A(h,l);else if(h instanceof A)h.target=h.target||l;else{var V=h;h=new A(E,l),W(h,V)}V=!0;let O,Q;if(x)for(Q=x.length-1;Q>=0;Q--)O=h.g=x[Q],V=Cs(O,E,!0,h)&&V;if(O=h.g=l,V=Cs(O,E,!0,h)&&V,V=Cs(O,E,!1,h)&&V,x)for(Q=0;Q<x.length;Q++)O=h.g=x[Q],V=Cs(O,E,!1,h)&&V}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const x=l.g[h];for(let E=0;E<x.length;E++)q(x[E]);delete l.g[h],l.h--}}this.G=null},dt.prototype.J=function(l,h,x,E){return this.i.add(String(l),h,!1,x,E)},dt.prototype.K=function(l,h,x,E){return this.i.add(String(l),h,!0,x,E)};function Cs(l,h,x,E){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let V=!0;for(let O=0;O<h.length;++O){const Q=h[O];if(Q&&!Q.da&&Q.capture==x){const ge=Q.listener,it=Q.ha||Q.src;Q.fa&&Y(l.i,Q),V=ge.call(it,E)!==!1&&V}}return V&&!E.defaultPrevented}function yo(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function vo(l){l.g=yo(()=>{l.g=null,l.i&&(l.i=!1,vo(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class eu extends k{constructor(h,x){super(),this.m=h,this.l=x,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:vo(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(l){k.call(this),this.h=l,this.g={}}m(qr,k);var wo=[];function bo(l){te(l.g,function(h,x){this.g.hasOwnProperty(x)&&Pi(h)},l),l.g={}}qr.prototype.N=function(){qr.Z.N.call(this),bo(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Li=o.JSON.stringify,tu=o.JSON.parse,nu=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function jo(){}function _o(){}var Qr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Mi(){A.call(this,"d")}m(Mi,A);function Vi(){A.call(this,"c")}m(Vi,A);var Mn={},No=null;function Ss(){return No=No||new dt}Mn.Ia="serverreachability";function Eo(l){A.call(this,Mn.Ia,l)}m(Eo,A);function Gr(l){const h=Ss();gt(h,new Eo(h))}Mn.STAT_EVENT="statevent";function To(l,h){A.call(this,Mn.STAT_EVENT,l),this.stat=h}m(To,A);function xt(l){const h=Ss();gt(h,new To(h,l))}Mn.Ja="timingevent";function Co(l,h){A.call(this,Mn.Ja,l),this.size=h}m(Co,A);function Kr(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function Yr(){this.g=!0}Yr.prototype.ua=function(){this.g=!1};function Oi(l,h,x,E,V,O){l.info(function(){if(l.g)if(O){var Q="",ge=O.split("&");for(let Pe=0;Pe<ge.length;Pe++){var it=ge[Pe].split("=");if(it.length>1){const ht=it[0];it=it[1];const jn=ht.split("_");Q=jn.length>=2&&jn[1]=="type"?Q+(ht+"="+it+"&"):Q+(ht+"=redacted&")}}}else Q=null;else Q=O;return"XMLHTTP REQ ("+E+") [attempt "+V+"]: "+h+`
`+x+`
`+Q})}function Xr(l,h,x,E,V,O,Q){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+V+"]: "+h+`
`+x+`
`+O+" "+Q})}function Jn(l,h,x,E){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+So(l,x)+(E?" "+E:"")})}function ru(l,h){l.info(function(){return"TIMEOUT: "+h})}Yr.prototype.info=function(){};function So(l,h){if(!l.g)return h;if(!h)return null;try{const O=JSON.parse(h);if(O){for(l=0;l<O.length;l++)if(Array.isArray(O[l])){var x=O[l];if(!(x.length<2)){var E=x[1];if(Array.isArray(E)&&!(E.length<1)){var V=E[0];if(V!="noop"&&V!="stop"&&V!="close")for(let Q=1;Q<E.length;Q++)E[Q]=""}}}}return Li(O)}catch{return h}}var ks={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ko={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},D;function F(){}m(F,jo),F.prototype.g=function(){return new XMLHttpRequest},D=new F;function $(l){return encodeURIComponent(String(l))}function Ne(l){var h=1;l=l.split(":");const x=[];for(;h>0&&l.length;)x.push(l.shift()),h--;return l.length&&x.push(l.join(":")),x}function $e(l,h,x,E){this.j=l,this.i=h,this.l=x,this.S=E||1,this.V=new qr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yt}function yt(){this.i=null,this.g="",this.h=!1}var Is={},As={};function Vn(l,h,x){l.M=1,l.A=Io(bn(h)),l.u=x,l.R=!0,Zn(l,null)}function Zn(l,h){l.F=Date.now(),Ue(l),l.B=bn(l.A);var x=l.B,E=l.S;Array.isArray(E)||(E=[String(E)]),dm(x.i,"t",E),l.C=0,x=l.j.L,l.h=new yt,l.g=km(l.j,x?h:null,!l.u),l.P>0&&(l.O=new eu(d(l.Y,l,l.g),l.P)),h=l.V,x=l.g,E=l.ba;var V="readystatechange";Array.isArray(V)||(V&&(wo[0]=V.toString()),V=wo);for(let O=0;O<V.length;O++){const Q=wn(x,V[O],E||h.handleEvent,!1,h.h||h);if(!Q)break;h.g[Q.key]=Q}h=l.J?U(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),Gr(),Oi(l.i,l.v,l.B,l.l,l.S,l.u)}$e.prototype.ba=function(l){l=l.target;const h=this.O;h&&nr(l)==3?h.j():this.Y(l)},$e.prototype.Y=function(l){try{if(l==this.g)e:{const ge=nr(this.g),it=this.g.ya(),Pe=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||ym(this.g)))){this.K||ge!=4||it==7||(it==8||Pe<=0?Gr(3):Gr(2)),su(this);var h=this.g.ca();this.X=h;var x=Fi(this);if(this.o=h==200,Xr(this.i,this.v,this.B,this.l,this.S,ge,h),this.o){if(this.U&&!this.L){t:{if(this.g){var E,V=this.g;if((E=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(E)){var O=E;break t}}O=null}if(l=O)Jn(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,iu(this,l);else{this.o=!1,this.m=3,xt(12),Jr(this),Bi(this);break e}}if(this.R){l=!0;let ht;for(;!this.K&&this.C<x.length;)if(ht=ve(this,x),ht==As){ge==4&&(this.m=4,xt(14),l=!1),Jn(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==Is){this.m=4,xt(15),Jn(this.i,this.l,x,"[Invalid Chunk]"),l=!1;break}else Jn(this.i,this.l,ht,null),iu(this,ht);if(K(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||x.length!=0||this.h.h||(this.m=1,xt(16),l=!1),this.o=this.o&&l,!l)Jn(this.i,this.l,x,"[Invalid Chunked Response]"),Jr(this),Bi(this);else if(x.length>0&&!this.W){this.W=!0;var Q=this.j;Q.g==this&&Q.aa&&!Q.P&&(Q.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),fu(Q),Q.P=!0,xt(11))}}else Jn(this.i,this.l,x,null),iu(this,x);ge==4&&Jr(this),this.o&&!this.K&&(ge==4?Em(this.j,this):(this.o=!1,Ue(this)))}else O1(this.g),h==400&&x.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),Jr(this),Bi(this)}}}catch{}finally{}};function Fi(l){if(!K(l))return l.g.la();const h=ym(l.g);if(h==="")return"";let x="";const E=h.length,V=nr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Jr(l),Bi(l),"";l.h.i=new o.TextDecoder}for(let O=0;O<E;O++)l.h.h=!0,x+=l.h.i.decode(h[O],{stream:!(V&&O==E-1)});return h.length=0,l.h.g+=x,l.C=0,l.h.g}function K(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function ve(l,h){var x=l.C,E=h.indexOf(`
`,x);return E==-1?As:(x=Number(h.substring(x,E)),isNaN(x)?Is:(E+=1,E+x>h.length?As:(h=h.slice(E,E+x),l.C=E+x,h)))}$e.prototype.cancel=function(){this.K=!0,Jr(this)};function Ue(l){l.T=Date.now()+l.H,Ps(l,l.H)}function Ps(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Kr(d(l.aa,l),h)}function su(l){l.D&&(o.clearTimeout(l.D),l.D=null)}$e.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(ru(this.i,this.B),this.M!=2&&(Gr(),xt(17)),Jr(this),this.m=2,Bi(this)):Ps(this,this.T-l)};function Bi(l){l.j.I==0||l.K||Em(l.j,l)}function Jr(l){su(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,bo(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function iu(l,h){try{var x=l.j;if(x.I!=0&&(x.g==l||au(x.h,l))){if(!l.L&&au(x.h,l)&&x.I==3){try{var E=x.Ba.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var V=E;if(V[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<l.F)Lo(x),Ro(x);else break e;hu(x),xt(18)}}else x.xa=V[1],0<x.xa-x.K&&V[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Kr(d(x.Va,x),6e3));rm(x.h)<=1&&x.ta&&(x.ta=void 0)}else es(x,11)}else if((l.L||x.g==l)&&Lo(x),!N(h))for(V=x.Ba.g.parse(h),h=0;h<V.length;h++){let Pe=V[h];const ht=Pe[0];if(!(ht<=x.K))if(x.K=ht,Pe=Pe[1],x.I==2)if(Pe[0]=="c"){x.M=Pe[1],x.ba=Pe[2];const jn=Pe[3];jn!=null&&(x.ka=jn,x.j.info("VER="+x.ka));const ts=Pe[4];ts!=null&&(x.za=ts,x.j.info("SVER="+x.za));const rr=Pe[5];rr!=null&&typeof rr=="number"&&rr>0&&(E=1.5*rr,x.O=E,x.j.info("backChannelRequestTimeoutMs_="+E)),E=x;const sr=l.g;if(sr){const Vo=sr.g?sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vo){var O=E.h;O.g||Vo.indexOf("spdy")==-1&&Vo.indexOf("quic")==-1&&Vo.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(ou(O,O.h),O.h=null))}if(E.G){const mu=sr.g?sr.g.getResponseHeader("X-HTTP-Session-Id"):null;mu&&(E.wa=mu,De(E.J,E.G,mu))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-l.F,x.j.info("Handshake RTT: "+x.T+"ms")),E=x;var Q=l;if(E.na=Sm(E,E.L?E.ba:null,E.W),Q.L){sm(E.h,Q);var ge=Q,it=E.O;it&&(ge.H=it),ge.D&&(su(ge),Ue(ge)),E.g=Q}else _m(E);x.i.length>0&&Do(x)}else Pe[0]!="stop"&&Pe[0]!="close"||es(x,7);else x.I==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?es(x,7):du(x):Pe[0]!="noop"&&x.l&&x.l.qa(Pe),x.A=0)}}Gr(4)}catch{}}var E1=class{constructor(l,h){this.g=l,this.map=h}};function tm(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function rm(l){return l.h?1:l.g?l.g.size:0}function au(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function ou(l,h){l.g?l.g.add(h):l.h=h}function sm(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}tm.prototype.cancel=function(){if(this.i=im(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function im(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const x of l.g.values())h=h.concat(x.G);return h}return v(l.i)}var am=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function T1(l,h){if(l){l=l.split("&");for(let x=0;x<l.length;x++){const E=l[x].indexOf("=");let V,O=null;E>=0?(V=l[x].substring(0,E),O=l[x].substring(E+1)):V=l[x],h(V,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function er(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof er?(this.l=l.l,Ui(this,l.j),this.o=l.o,this.g=l.g,zi(this,l.u),this.h=l.h,lu(this,hm(l.i)),this.m=l.m):l&&(h=String(l).match(am))?(this.l=!1,Ui(this,h[1]||"",!0),this.o=$i(h[2]||""),this.g=$i(h[3]||"",!0),zi(this,h[4]),this.h=$i(h[5]||"",!0),lu(this,h[6]||"",!0),this.m=$i(h[7]||"")):(this.l=!1,this.i=new Hi(null,this.l))}er.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(Wi(h,om,!0),":");var x=this.g;return(x||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Wi(h,om,!0),"@"),l.push($(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&l.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&l.push("/"),l.push(Wi(x,x.charAt(0)=="/"?k1:S1,!0))),(x=this.i.toString())&&l.push("?",x),(x=this.m)&&l.push("#",Wi(x,A1)),l.join("")},er.prototype.resolve=function(l){const h=bn(this);let x=!!l.j;x?Ui(h,l.j):x=!!l.o,x?h.o=l.o:x=!!l.g,x?h.g=l.g:x=l.u!=null;var E=l.h;if(x)zi(h,l.u);else if(x=!!l.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var V=h.h.lastIndexOf("/");V!=-1&&(E=h.h.slice(0,V+1)+E)}if(V=E,V==".."||V==".")E="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){E=V.lastIndexOf("/",0)==0,V=V.split("/");const O=[];for(let Q=0;Q<V.length;){const ge=V[Q++];ge=="."?E&&Q==V.length&&O.push(""):ge==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),E&&Q==V.length&&O.push("")):(O.push(ge),E=!0)}E=O.join("/")}else E=V}return x?h.h=E:x=l.i.toString()!=="",x?lu(h,hm(l.i)):x=!!l.m,x&&(h.m=l.m),h};function bn(l){return new er(l)}function Ui(l,h,x){l.j=x?$i(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function zi(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function lu(l,h,x){h instanceof Hi?(l.i=h,P1(l.i,l.l)):(x||(h=Wi(h,I1)),l.i=new Hi(h,l.l))}function De(l,h,x){l.i.set(h,x)}function Io(l){return De(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function $i(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Wi(l,h,x){return typeof l=="string"?(l=encodeURI(l).replace(h,C1),x&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function C1(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var om=/[#\/\?@]/g,S1=/[#\?:]/g,k1=/[#\?]/g,I1=/[#\?@]/g,A1=/#/g;function Hi(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Zr(l){l.g||(l.g=new Map,l.h=0,l.i&&T1(l.i,function(h,x){l.add(decodeURIComponent(h.replace(/\+/g," ")),x)}))}t=Hi.prototype,t.add=function(l,h){Zr(this),this.i=null,l=Rs(this,l);let x=this.g.get(l);return x||this.g.set(l,x=[]),x.push(h),this.h+=1,this};function lm(l,h){Zr(l),h=Rs(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function cm(l,h){return Zr(l),h=Rs(l,h),l.g.has(h)}t.forEach=function(l,h){Zr(this),this.g.forEach(function(x,E){x.forEach(function(V){l.call(h,V,E,this)},this)},this)};function um(l,h){Zr(l);let x=[];if(typeof h=="string")cm(l,h)&&(x=x.concat(l.g.get(Rs(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)x=x.concat(l[h]);return x}t.set=function(l,h){return Zr(this),this.i=null,l=Rs(this,l),cm(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=um(this,l),l.length>0?String(l[0]):h):h};function dm(l,h,x){lm(l,h),x.length>0&&(l.i=null,l.g.set(Rs(l,h),v(x)),l.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let E=0;E<h.length;E++){var x=h[E];const V=$(x);x=um(this,x);for(let O=0;O<x.length;O++){let Q=V;x[O]!==""&&(Q+="="+$(x[O])),l.push(Q)}}return this.i=l.join("&")};function hm(l){const h=new Hi;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function Rs(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function P1(l,h){h&&!l.j&&(Zr(l),l.i=null,l.g.forEach(function(x,E){const V=E.toLowerCase();E!=V&&(lm(this,E),dm(this,V,x))},l)),l.j=h}function R1(l,h){const x=new Yr;if(o.Image){const E=new Image;E.onload=f(tr,x,"TestLoadImage: loaded",!0,h,E),E.onerror=f(tr,x,"TestLoadImage: error",!1,h,E),E.onabort=f(tr,x,"TestLoadImage: abort",!1,h,E),E.ontimeout=f(tr,x,"TestLoadImage: timeout",!1,h,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else h(!1)}function D1(l,h){const x=new Yr,E=new AbortController,V=setTimeout(()=>{E.abort(),tr(x,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:E.signal}).then(O=>{clearTimeout(V),O.ok?tr(x,"TestPingServer: ok",!0,h):tr(x,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),tr(x,"TestPingServer: error",!1,h)})}function tr(l,h,x,E,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),E(x)}catch{}}function L1(){this.g=new nu}function cu(l){this.i=l.Sb||null,this.h=l.ab||!1}m(cu,jo),cu.prototype.g=function(){return new Ao(this.i,this.h)};function Ao(l,h){dt.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Ao,dt),t=Ao.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,Qi(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qi(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Qi(this)),this.g&&(this.readyState=3,Qi(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fm(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function fm(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?qi(this):Qi(this),this.readyState==3&&fm(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,qi(this))},t.Na=function(l){this.g&&(this.response=l,qi(this))},t.ga=function(){this.g&&qi(this)};function qi(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Qi(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var x=h.next();!x.done;)x=x.value,l.push(x[0]+": "+x[1]),x=h.next();return l.join(`\r
`)};function Qi(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ao.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function mm(l){let h="";return te(l,function(x,E){h+=E,h+=":",h+=x,h+=`\r
`}),h}function uu(l,h,x){e:{for(E in x){var E=!1;break e}E=!0}E||(x=mm(x),typeof l=="string"?x!=null&&$(x):De(l,h,x))}function Ge(l){dt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Ge,dt);var M1=/^https?$/i,V1=["POST","PUT"];t=Ge.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,x,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():D.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){pm(this,O);return}if(l=x||"",x=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var V in E)x.set(V,E[V]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const O of E.keys())x.set(O,E.get(O));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(x.keys()).find(O=>O.toLowerCase()=="content-type"),V=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(V1,h,void 0)>=0)||E||V||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,Q]of x)this.g.setRequestHeader(O,Q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(O){pm(this,O)}};function pm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,gm(l),Po(l)}function gm(l){l.A||(l.A=!0,gt(l,"complete"),gt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,gt(this,"complete"),gt(this,"abort"),Po(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Po(this,!0)),Ge.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?xm(this):this.Xa())},t.Xa=function(){xm(this)};function xm(l){if(l.h&&typeof a<"u"){if(l.v&&nr(l)==4)setTimeout(l.Ca.bind(l),0);else if(gt(l,"readystatechange"),nr(l)==4){l.h=!1;try{const O=l.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var x;if(!(x=h)){var E;if(E=O===0){let Q=String(l.D).match(am)[1]||null;!Q&&o.self&&o.self.location&&(Q=o.self.location.protocol.slice(0,-1)),E=!M1.test(Q?Q.toLowerCase():"")}x=E}if(x)gt(l,"complete"),gt(l,"success");else{l.o=6;try{var V=nr(l)>2?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.ca()+"]",gm(l)}}finally{Po(l)}}}}function Po(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const x=l.g;l.g=null,h||gt(l,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function nr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return nr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),tu(h)}};function ym(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function O1(l){const h={};l=(l.g&&nr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(N(l[E]))continue;var x=Ne(l[E]);const V=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const O=h[V]||[];h[V]=O,O.push(x)}le(h,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gi(l,h,x){return x&&x.internalChannelParams&&x.internalChannelParams[l]||h}function vm(l){this.za=0,this.i=[],this.j=new Yr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Gi("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Gi("baseRetryDelayMs",5e3,l),this.Za=Gi("retryDelaySeedMs",1e4,l),this.Ta=Gi("forwardChannelMaxRetries",2,l),this.va=Gi("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new tm(l&&l.concurrentRequestLimit),this.Ba=new L1,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=vm.prototype,t.ka=8,t.I=1,t.connect=function(l,h,x,E){xt(0),this.W=l,this.H=h||{},x&&E!==void 0&&(this.H.OSID=x,this.H.OAID=E),this.F=this.X,this.J=Sm(this,null,this.W),Do(this)};function du(l){if(wm(l),l.I==3){var h=l.V++,x=bn(l.J);if(De(x,"SID",l.M),De(x,"RID",h),De(x,"TYPE","terminate"),Ki(l,x),h=new $e(l,l.j,h),h.M=2,h.A=Io(bn(x)),x=!1,o.navigator&&o.navigator.sendBeacon)try{x=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!x&&o.Image&&(new Image().src=h.A,x=!0),x||(h.g=km(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Ue(h)}Cm(l)}function Ro(l){l.g&&(fu(l),l.g.cancel(),l.g=null)}function wm(l){Ro(l),l.v&&(o.clearTimeout(l.v),l.v=null),Lo(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Do(l){if(!nm(l.h)&&!l.m){l.m=!0;var h=l.Ea;P||p(),R||(P(),R=!0),w.add(h,l),l.D=0}}function F1(l,h){return rm(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Kr(d(l.Ea,l,h),Tm(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const V=new $e(this,this.j,l);let O=this.o;if(this.U&&(O?(O=U(O),W(O,this.U)):O=this.U),this.u!==null||this.R||(V.J=O,O=null),this.S)e:{for(var h=0,x=0;x<this.i.length;x++){t:{var E=this.i[x];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,h>4096){h=x;break e}if(h===4096||x===this.i.length-1){h=x+1;break e}}h=1e3}else h=1e3;h=jm(this,V,h),x=bn(this.J),De(x,"RID",l),De(x,"CVER",22),this.G&&De(x,"X-HTTP-Session-Id",this.G),Ki(this,x),O&&(this.R?h="headers="+$(mm(O))+"&"+h:this.u&&uu(x,this.u,O)),ou(this.h,V),this.Ra&&De(x,"TYPE","init"),this.S?(De(x,"$req",h),De(x,"SID","null"),V.U=!0,Vn(V,x,null)):Vn(V,x,h),this.I=2}}else this.I==3&&(l?bm(this,l):this.i.length==0||nm(this.h)||bm(this))};function bm(l,h){var x;h?x=h.l:x=l.V++;const E=bn(l.J);De(E,"SID",l.M),De(E,"RID",x),De(E,"AID",l.K),Ki(l,E),l.u&&l.o&&uu(E,l.u,l.o),x=new $e(l,l.j,x,l.D+1),l.u===null&&(x.J=l.o),h&&(l.i=h.G.concat(l.i)),h=jm(l,x,1e3),x.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),ou(l.h,x),Vn(x,E,h)}function Ki(l,h){l.H&&te(l.H,function(x,E){De(h,E,x)}),l.l&&te({},function(x,E){De(h,E,x)})}function jm(l,h,x){x=Math.min(l.i.length,x);const E=l.l?d(l.l.Ka,l.l,l):null;e:{var V=l.i;let ge=-1;for(;;){const it=["count="+x];ge==-1?x>0?(ge=V[0].g,it.push("ofs="+ge)):ge=0:it.push("ofs="+ge);let Pe=!0;for(let ht=0;ht<x;ht++){var O=V[ht].g;const jn=V[ht].map;if(O-=ge,O<0)ge=Math.max(0,V[ht].g-100),Pe=!1;else try{O="req"+O+"_"||"";try{var Q=jn instanceof Map?jn:Object.entries(jn);for(const[ts,rr]of Q){let sr=rr;c(rr)&&(sr=Li(rr)),it.push(O+ts+"="+encodeURIComponent(sr))}}catch(ts){throw it.push(O+"type="+encodeURIComponent("_badmap")),ts}}catch{E&&E(jn)}}if(Pe){Q=it.join("&");break e}}Q=void 0}return l=l.i.splice(0,x),h.G=l,Q}function _m(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;P||p(),R||(P(),R=!0),w.add(h,l),l.A=0}}function hu(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Kr(d(l.Da,l),Tm(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,Nm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Kr(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Ro(this),Nm(this))};function fu(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Nm(l){l.g=new $e(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=bn(l.na);De(h,"RID","rpc"),De(h,"SID",l.M),De(h,"AID",l.K),De(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&De(h,"TO",l.ia),De(h,"TYPE","xmlhttp"),Ki(l,h),l.u&&l.o&&uu(h,l.u,l.o),l.O&&(l.g.H=l.O);var x=l.g;l=l.ba,x.M=1,x.A=Io(bn(h)),x.u=null,x.R=!0,Zn(x,l)}t.Va=function(){this.C!=null&&(this.C=null,Ro(this),hu(this),xt(19))};function Lo(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Em(l,h){var x=null;if(l.g==h){Lo(l),fu(l),l.g=null;var E=2}else if(au(l.h,h))x=h.G,sm(l.h,h),E=1;else return;if(l.I!=0){if(h.o)if(E==1){x=h.u?h.u.length:0,h=Date.now()-h.F;var V=l.D;E=Ss(),gt(E,new Co(E,x)),Do(l)}else _m(l);else if(V=h.m,V==3||V==0&&h.X>0||!(E==1&&F1(l,h)||E==2&&hu(l)))switch(x&&x.length>0&&(h=l.h,h.i=h.i.concat(x)),V){case 1:es(l,5);break;case 4:es(l,10);break;case 3:es(l,6);break;default:es(l,2)}}}function Tm(l,h){let x=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(x*=2),x*h}function es(l,h){if(l.j.info("Error code "+h),h==2){var x=d(l.bb,l),E=l.Ua;const V=!E;E=new er(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ui(E,"https"),Io(E),V?R1(E.toString(),x):D1(E.toString(),x)}else xt(2);l.I=0,l.l&&l.l.pa(h),Cm(l),wm(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Cm(l){if(l.I=0,l.ja=[],l.l){const h=im(l.h);(h.length!=0||l.i.length!=0)&&(T(l.ja,h),T(l.ja,l.i),l.h.i.length=0,v(l.i),l.i.length=0),l.l.oa()}}function Sm(l,h,x){var E=x instanceof er?bn(x):new er(x);if(E.g!="")h&&(E.g=h+"."+E.g),zi(E,E.u);else{var V=o.location;E=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;const O=new er(null);E&&Ui(O,E),h&&(O.g=h),V&&zi(O,V),x&&(O.h=x),E=O}return x=l.G,h=l.wa,x&&h&&De(E,x,h),De(E,"VER",l.ka),Ki(l,E),E}function km(l,h,x){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Ge(new cu({ab:x})):new Ge(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Im(){}t=Im.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Mo(){}Mo.prototype.g=function(l,h){return new qt(l,h)};function qt(l,h){dt.call(this),this.g=new vm(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!N(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!N(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ds(this)}m(qt,dt),qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){du(this.g)},qt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var x={};x.__data__=l,l=x}else this.v&&(x={},x.__data__=Li(l),l=x);h.i.push(new E1(h.Ya++,l)),h.I==3&&Do(h)},qt.prototype.N=function(){this.g.l=null,delete this.j,du(this.g),delete this.g,qt.Z.N.call(this)};function Am(l){Mi.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const x in h){l=x;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}m(Am,Mi);function Pm(){Vi.call(this),this.status=1}m(Pm,Vi);function Ds(l){this.g=l}m(Ds,Im),Ds.prototype.ra=function(){gt(this.g,"a")},Ds.prototype.qa=function(l){gt(this.g,new Am(l))},Ds.prototype.pa=function(l){gt(this.g,new Pm)},Ds.prototype.oa=function(){gt(this.g,"b")},Mo.prototype.createWebChannel=Mo.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,Qy=function(){return new Mo},qy=function(){return Ss()},Hy=Mn,sh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ks.NO_ERROR=0,ks.TIMEOUT=8,ks.HTTP_ERROR=6,bl=ks,ko.COMPLETE="complete",Wy=ko,_o.EventType=Qr,Qr.OPEN="a",Qr.CLOSE="b",Qr.ERROR="c",Qr.MESSAGE="d",dt.prototype.listen=dt.prototype.J,da=_o,Ge.prototype.listenOnce=Ge.prototype.K,Ge.prototype.getLastError=Ge.prototype.Ha,Ge.prototype.getLastErrorCode=Ge.prototype.ya,Ge.prototype.getStatus=Ge.prototype.ca,Ge.prototype.getResponseJson=Ge.prototype.La,Ge.prototype.getResponseText=Ge.prototype.la,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Fa,$y=Ge}).apply(typeof nl<"u"?nl:typeof self<"u"?self:typeof window<"u"?window:{});const cg="@firebase/firestore",ug="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ci="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new Vy("@firebase/firestore");function Ms(){return xs.logLevel}function X(t,...e){if(xs.logLevel<=_e.DEBUG){const n=e.map(Nf);xs.debug(`Firestore (${Ci}): ${t}`,...n)}}function Gn(t,...e){if(xs.logLevel<=_e.ERROR){const n=e.map(Nf);xs.error(`Firestore (${Ci}): ${t}`,...n)}}function pi(t,...e){if(xs.logLevel<=_e.WARN){const n=e.map(Nf);xs.warn(`Firestore (${Ci}): ${t}`,...n)}}function Nf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Gy(t,r,n)}function Gy(t,e,n){let r=`FIRESTORE (${Ci}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gn(r),new Error(r)}function Se(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Gy(e,s,r)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Ti{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(kt.UNAUTHENTICATED))}shutdown(){}}class oN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class lN{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Tr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string",31837,{l:r}),new Ky(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new kt(e)}}class cN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new cN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$_(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Se(this.o===void 0,3512);const r=a=>{a.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new dg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=hN(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function ih(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return qu(s)===qu(a)?we(s,a):qu(s)?1:-1}return we(t.length,e.length)}const fN=55296,mN=57343;function qu(t){const e=t.charCodeAt(0);return e>=fN&&e<=mN}function gi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="__name__";class En{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return En.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof En?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=En.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return we(e.length,n.length)}static compareSegments(e,n){const r=En.isNumericId(e),s=En.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?En.extractNumericId(e).compare(En.extractNumericId(n)):ih(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Er.fromString(e.substring(4,e.length-2))}}class Me extends En{construct(e,n,r){return new Me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Me(n)}static emptyPath(){return new Me([])}}const pN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends En{construct(e,n,r){return new bt(e,n,r)}static isValidIdentifier(e){return pN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hg}static keyField(){return new bt([hg])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new ee(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ee(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ee(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(a(),s++)}if(a(),o)throw new ee(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(n)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Me.fromString(e))}static fromName(e){return new ae(Me.fromString(e).popFirst(5))}static empty(){return new ae(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Me(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t,e,n){if(!n)throw new ee(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gN(t,e,n,r){if(e===!0&&r===!0)throw new ee(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fg(t){if(!ae.isDocumentKey(t))throw new ee(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mg(t){if(ae.isDocumentKey(t))throw new ee(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xy(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Tf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue(12329,{type:typeof t})}function cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tf(t);throw new ee(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t,e){const n={typeString:t};return e&&(n.value=e),n}function co(t,e){if(!Xy(t))throw new ee(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new ee(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg=-62135596800,gg=1e6;class Ve{static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*gg);return new Ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<pg)throw new ee(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gg}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(co(e,Ve._jsonSchema))return new Ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ve._jsonSchemaVersion="firestore/timestamp/1.0",Ve._jsonSchema={type:st("string",Ve._jsonSchemaVersion),seconds:st("number"),nanoseconds:st("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{static fromTimestamp(e){return new he(e)}static min(){return new he(new Ve(0,0))}static max(){return new he(new Ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=-1;function xN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=he.fromTimestamp(r===1e9?new Ve(n+1,0):new Ve(n,r));return new Ir(s,ae.empty(),e)}function yN(t){return new Ir(t.readTime,t.key,Ja)}class Ir{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ir(he.min(),ae.empty(),Ja)}static max(){return new Ir(he.max(),ae.empty(),Ja)}}function vN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Si(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==wN)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,a=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++a,o&&a===s&&n()},u=>r(u))}),o=!0,a===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===a&&r(o)},f=>s(f))}})}static doWhile(e,n){return new B((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function jN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ki(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf=-1;function Rc(t){return t==null}function nc(t){return t===0&&1/t==-1/0}function _N(t){return typeof t=="number"&&Number.isInteger(t)&&!nc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="";function NN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xg(e)),e=EN(t.get(n),e);return xg(e)}function EN(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case Jy:n+="";break;default:n+=a}}return n}function xg(t){return t+Jy+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rl(this.root,e,this.comparator,!1)}getReverseIterator(){return new rl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rl(this.root,e,this.comparator,!0)}}class rl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??wt.RED,this.left=s??wt.EMPTY,this.right=a??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new wt(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new vg(this.data.getIterator())}getIteratorFrom(e){return new vg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ut(this.comparator);return n.data=e,n}}class vg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new Xt([])}unionWith(e){let n=new ut(bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new ev("Invalid base64 string: "+a):a}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const TN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(t){if(Se(!!t,39018),typeof t=="string"){let e=0;const n=TN.exec(t);if(Se(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Pr(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="server_timestamp",nv="__type__",rv="__previous_value__",sv="__local_write_time__";function Sf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[nv])==null?void 0:r.stringValue)===tv}function Dc(t){const e=t.mapValue.fields[rv];return Sf(e)?Dc(e):e}function Za(t){const e=Ar(t.mapValue.fields[sv].timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n,r,s,a,o,c,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const rc="(default)";class eo{constructor(e,n){this.projectId=e,this.database=n||rc}static empty(){return new eo("","")}get isDefaultDatabase(){return this.database===rc}isEqual(e){return e instanceof eo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="__type__",SN="__max__",sl={mapValue:{}},av="__vector__",sc="value";function Rr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sf(t)?4:IN(t)?9007199254740991:kN(t)?10:11:ue(28295,{value:t})}function Rn(t,e){if(t===e)return!0;const n=Rr(t);if(n!==Rr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Za(t).isEqual(Za(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Ar(s.timestampValue),c=Ar(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Pr(s.bytesValue).isEqual(Pr(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return Ye(s.geoPointValue.latitude)===Ye(a.geoPointValue.latitude)&&Ye(s.geoPointValue.longitude)===Ye(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Ye(s.integerValue)===Ye(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=Ye(s.doubleValue),c=Ye(a.doubleValue);return o===c?nc(o)===nc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return gi(t.arrayValue.values||[],e.arrayValue.values||[],Rn);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},c=a.mapValue.fields||{};if(yg(o)!==yg(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Rn(o[u],c[u])))return!1;return!0}(t,e);default:return ue(52216,{left:t})}}function to(t,e){return(t.values||[]).find(n=>Rn(n,e))!==void 0}function xi(t,e){if(t===e)return 0;const n=Rr(t),r=Rr(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(a,o){const c=Ye(a.integerValue||a.doubleValue),u=Ye(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return wg(t.timestampValue,e.timestampValue);case 4:return wg(Za(t),Za(e));case 5:return ih(t.stringValue,e.stringValue);case 6:return function(a,o){const c=Pr(a),u=Pr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=we(c[d],u[d]);if(f!==0)return f}return we(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const c=we(Ye(a.latitude),Ye(o.latitude));return c!==0?c:we(Ye(a.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return bg(t.arrayValue,e.arrayValue);case 10:return function(a,o){var g,v,T,C;const c=a.fields||{},u=o.fields||{},d=(g=c[sc])==null?void 0:g.arrayValue,f=(v=u[sc])==null?void 0:v.arrayValue,m=we(((T=d==null?void 0:d.values)==null?void 0:T.length)||0,((C=f==null?void 0:f.values)==null?void 0:C.length)||0);return m!==0?m:bg(d,f)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===sl.mapValue&&o===sl.mapValue)return 0;if(a===sl.mapValue)return 1;if(o===sl.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=ih(u[m],f[m]);if(g!==0)return g;const v=xi(c[u[m]],d[f[m]]);if(v!==0)return v}return we(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ue(23264,{he:n})}}function wg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=Ar(t),r=Ar(e),s=we(n.seconds,r.seconds);return s!==0?s:we(n.nanos,r.nanos)}function bg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=xi(n[s],r[s]);if(a)return a}return we(n.length,r.length)}function yi(t){return ah(t)}function ah(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Pr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=ah(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${ah(n.fields[o])}`;return s+"}"}(t.mapValue):ue(61005,{value:t})}function jl(t){switch(Rr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dc(t);return e?16+jl(e):16;case 5:return 2*t.stringValue.length;case 6:return Pr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+jl(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return zr(r.fields,(a,o)=>{s+=a.length+jl(o)}),s}(t.mapValue);default:throw ue(13486,{value:t})}}function oh(t){return!!t&&"integerValue"in t}function kf(t){return!!t&&"arrayValue"in t}function jg(t){return!!t&&"nullValue"in t}function _g(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _l(t){return!!t&&"mapValue"in t}function kN(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[iv])==null?void 0:r.stringValue)===av}function Ea(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return zr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ea(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ea(t.arrayValue.values[n]);return e}return{...t}}function IN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===SN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_l(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ea(n)}setAll(e){let n=bt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=Ea(o):s.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());_l(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];_l(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){zr(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Bt(Ea(this.value))}}function ov(t){const e=[];return zr(t.fields,(n,r)=>{const s=new bt([n]);if(_l(r)){const a=ov(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Xt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n,r,s,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new At(e,0,he.min(),he.min(),he.min(),Bt.empty(),0)}static newFoundDocument(e,n,r,s){return new At(e,1,n,he.min(),r,s,0)}static newNoDocument(e,n){return new At(e,2,n,he.min(),he.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new At(e,3,n,he.min(),he.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n){this.position=e,this.inclusive=n}}function Ng(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=ae.comparator(ae.fromName(o.referenceValue),n.key):r=xi(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Eg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n="asc"){this.field=e,this.dir=n}}function AN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{}class ot extends lv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new RN(e,n,r):n==="array-contains"?new MN(e,r):n==="in"?new VN(e,r):n==="not-in"?new ON(e,r):n==="array-contains-any"?new FN(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new DN(e,r):new LN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(xi(n,this.value)):n!==null&&Rr(this.value)===Rr(n)&&this.matchesComparison(xi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends lv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Dn(e,n)}matches(e){return cv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cv(t){return t.op==="and"}function uv(t){return PN(t)&&cv(t)}function PN(t){for(const e of t.filters)if(e instanceof Dn)return!1;return!0}function lh(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+yi(t.value);if(uv(t))return t.filters.map(e=>lh(e)).join(",");{const e=t.filters.map(n=>lh(n)).join(",");return`${t.op}(${e})`}}function dv(t,e){return t instanceof ot?function(r,s){return s instanceof ot&&r.op===s.op&&r.field.isEqual(s.field)&&Rn(r.value,s.value)}(t,e):t instanceof Dn?function(r,s){return s instanceof Dn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,c)=>a&&dv(o,s.filters[c]),!0):!1}(t,e):void ue(19439)}function hv(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${yi(n.value)}`}(t):t instanceof Dn?function(n){return n.op.toString()+" {"+n.getFilters().map(hv).join(" ,")+"}"}(t):"Filter"}class RN extends ot{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class DN extends ot{constructor(e,n){super(e,"in",n),this.keys=fv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class LN extends ot{constructor(e,n){super(e,"not-in",n),this.keys=fv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function fv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class MN extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return kf(n)&&to(n.arrayValue,this.value)}}class VN extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&to(this.value.arrayValue,n)}}class ON extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(to(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!to(this.value.arrayValue,n)}}class FN extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!kf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>to(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n=null,r=[],s=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function Tg(t,e=null,n=[],r=[],s=null,a=null,o=null){return new BN(t,e,n,r,s,a,o)}function If(t){const e=fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>lh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Rc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>yi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>yi(r)).join(",")),e.Te=n}return e.Te}function Af(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!AN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Eg(t.startAt,e.startAt)&&Eg(t.endAt,e.endAt)}function ch(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n=null,r=[],s=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function UN(t,e,n,r,s,a,o,c){return new Lc(t,e,n,r,s,a,o,c)}function Mc(t){return new Lc(t)}function Cg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zN(t){return t.collectionGroup!==null}function Ta(t){const e=fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new ut(bt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new ac(a,r))}),n.has(bt.keyField().canonicalString())||e.Ie.push(new ac(bt.keyField(),r))}return e.Ie}function kn(t){const e=fe(t);return e.Ee||(e.Ee=$N(e,Ta(t))),e.Ee}function $N(t,e){if(t.limitType==="F")return Tg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new ac(s.field,a)});const n=t.endAt?new ic(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ic(t.startAt.position,t.startAt.inclusive):null;return Tg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function uh(t,e,n){return new Lc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vc(t,e){return Af(kn(t),kn(e))&&t.limitType===e.limitType}function mv(t){return`${If(kn(t))}|lt:${t.limitType}`}function Vs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>hv(s)).join(", ")}]`),Rc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>yi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>yi(s)).join(",")),`Target(${r})`}(kn(t))}; limitType=${t.limitType})`}function Oc(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ae.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of Ta(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=Ng(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,Ta(r),s)||r.endAt&&!function(o,c,u){const d=Ng(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,Ta(r),s))}(t,e)}function WN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pv(t){return(e,n)=>{let r=!1;for(const s of Ta(t)){const a=HN(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function HN(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?xi(u,d):ue(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){zr(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return Zy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=new Qe(ae.comparator);function Kn(){return qN}const gv=new Qe(ae.comparator);function ha(...t){let e=gv;for(const n of t)e=e.insert(n.key,n);return e}function xv(t){let e=gv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ls(){return Ca()}function yv(){return Ca()}function Ca(){return new Ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const QN=new Qe(ae.comparator),GN=new ut(ae.comparator);function be(...t){let e=GN;for(const n of t)e=e.add(n);return e}const KN=new ut(we);function YN(){return KN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nc(e)?"-0":e}}function vv(t){return{integerValue:""+t}}function XN(t,e){return _N(e)?vv(e):Pf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(){this._=void 0}}function JN(t,e,n){return t instanceof oc?function(s,a){const o={fields:{[nv]:{stringValue:tv},[sv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Sf(a)&&(a=Dc(a)),a&&(o.fields[rv]=a),{mapValue:o}}(n,e):t instanceof no?bv(t,e):t instanceof ro?jv(t,e):function(s,a){const o=wv(s,a),c=Sg(o)+Sg(s.Ae);return oh(o)&&oh(s.Ae)?vv(c):Pf(s.serializer,c)}(t,e)}function ZN(t,e,n){return t instanceof no?bv(t,e):t instanceof ro?jv(t,e):n}function wv(t,e){return t instanceof lc?function(r){return oh(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class oc extends Fc{}class no extends Fc{constructor(e){super(),this.elements=e}}function bv(t,e){const n=_v(e);for(const r of t.elements)n.some(s=>Rn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ro extends Fc{constructor(e){super(),this.elements=e}}function jv(t,e){let n=_v(e);for(const r of t.elements)n=n.filter(s=>!Rn(s,r));return{arrayValue:{values:n}}}class lc extends Fc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Sg(t){return Ye(t.integerValue||t.doubleValue)}function _v(t){return kf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function eE(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof no&&s instanceof no||r instanceof ro&&s instanceof ro?gi(r.elements,s.elements,Rn):r instanceof lc&&s instanceof lc?Rn(r.Ae,s.Ae):r instanceof oc&&s instanceof oc}(t.transform,e.transform)}class tE{constructor(e,n){this.version=e,this.transformResults=n}}class Ht{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ht}static exists(e){return new Ht(void 0,e)}static updateTime(e){return new Ht(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bc{}function Nv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Uc(t.key,Ht.none()):new uo(t.key,t.data,Ht.none());{const n=t.data,r=Bt.empty();let s=new ut(bt.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new $r(t.key,r,new Xt(s.toArray()),Ht.none())}}function nE(t,e,n){t instanceof uo?function(s,a,o){const c=s.value.clone(),u=Ig(s.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof $r?function(s,a,o){if(!Nl(s.precondition,a))return void a.convertToUnknownDocument(o.version);const c=Ig(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(Ev(s)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Sa(t,e,n,r){return t instanceof uo?function(a,o,c,u){if(!Nl(a.precondition,o))return c;const d=a.value.clone(),f=Ag(a.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof $r?function(a,o,c,u){if(!Nl(a.precondition,o))return c;const d=Ag(a.fieldTransforms,u,o),f=o.data;return f.setAll(Ev(a)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(a,o,c){return Nl(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function rE(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=wv(r.transform,s||null);a!=null&&(n===null&&(n=Bt.empty()),n.set(r.field,a))}return n||null}function kg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&gi(r,s,(a,o)=>eE(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class uo extends Bc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $r extends Bc{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Ev(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ig(t,e,n){const r=new Map;Se(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,c=e.data.field(a.field);r.set(a.field,ZN(o,c,n[s]))}return r}function Ag(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,JN(a,o,e))}return r}class Uc extends Bc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sE extends Bc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&nE(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Sa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Sa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yv();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(s.key)?null:c;const u=Nv(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&gi(this.mutations,e.mutations,(n,r)=>kg(n,r))&&gi(this.baseMutations,e.baseMutations,(n,r)=>kg(n,r))}}class Rf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Se(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return QN}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new Rf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,je;function lE(t){switch(t){case z.OK:return ue(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ue(15467,{code:t})}}function Tv(t){if(t===void 0)return Gn("GRPC error has no .code"),z.UNKNOWN;switch(t){case tt.OK:return z.OK;case tt.CANCELLED:return z.CANCELLED;case tt.UNKNOWN:return z.UNKNOWN;case tt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case tt.INTERNAL:return z.INTERNAL;case tt.UNAVAILABLE:return z.UNAVAILABLE;case tt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case tt.NOT_FOUND:return z.NOT_FOUND;case tt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case tt.ABORTED:return z.ABORTED;case tt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case tt.DATA_LOSS:return z.DATA_LOSS;default:return ue(39323,{code:t})}}(je=tt||(tt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Er([4294967295,4294967295],0);function Pg(t){const e=cE().encode(t),n=new zy;return n.update(e),new Uint8Array(n.digest())}function Rg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Er([n,r],0),new Er([s,a],0)]}class Df{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fa(`Invalid padding: ${n}`);if(r<0)throw new fa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Er.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Er.fromNumber(r)));return s.compare(uE)===1&&(s=new Er([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Pg(e),[r,s]=Rg(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Df(a,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=Pg(e),[r,s]=Rg(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ho.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zc(he.min(),s,new Qe(we),Kn(),be())}}class ho{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ho(r,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Cv{constructor(e,n){this.targetId=e,this.Ce=n}}class Sv{constructor(e,n,r=Nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Dg{constructor(){this.ve=0,this.Fe=Lg(),this.Me=Nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),n=be(),r=be();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue(38017,{changeType:a})}}),new ho(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Lg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class dE{constructor(e){this.Ge=e,this.ze=new Map,this.je=Kn(),this.Je=il(),this.He=il(),this.Ye=new Qe(we)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(ch(a))if(r===0){const o=new ae(a.path);this.et(n,o,At.newNoDocument(o,he.min()))}else Se(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,c;try{o=Pr(r).toUint8Array()}catch(u){if(u instanceof ev)return pi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Df(o,s,a)}catch(u){return pi(u instanceof fa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,o)=>{const c=this.ot(o);if(c){if(a.current&&ch(c.target)){const u=new ae(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,At.newNoDocument(u,e))}a.Be&&(n.set(o,a.ke()),a.qe())}});let r=be();this.He.forEach((a,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const s=new zc(e,n,this.Ye,this.je,r);return this.je=Kn(),this.Je=il(),this.He=il(),this.Ye=new Qe(we),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Dg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ut(we),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ut(we),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dg),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function il(){return new Qe(ae.comparator)}function Lg(){return new Qe(ae.comparator)}const hE={asc:"ASCENDING",desc:"DESCENDING"},fE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mE={and:"AND",or:"OR"};class pE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dh(t,e){return t.useProto3Json||Rc(e)?e:{value:e}}function cc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gE(t,e){return cc(t,e.toTimestamp())}function In(t){return Se(!!t,49232),he.fromTimestamp(function(n){const r=Ar(n);return new Ve(r.seconds,r.nanos)}(t))}function Lf(t,e){return hh(t,e).canonicalString()}function hh(t,e){const n=function(s){return new Me(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Iv(t){const e=Me.fromString(t);return Se(Lv(e),10190,{key:e.toString()}),e}function fh(t,e){return Lf(t.databaseId,e.path)}function Qu(t,e){const n=Iv(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(Pv(n))}function Av(t,e){return Lf(t.databaseId,e)}function xE(t){const e=Iv(t);return e.length===4?Me.emptyPath():Pv(e)}function mh(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Pv(t){return Se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Mg(t,e,n){return{name:fh(t,e),fields:n.value.mapValue.fields}}function yE(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ue(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(d,f){return d.useProto3Json?(Se(f===void 0||typeof f=="string",58123),Nt.fromBase64String(f||"")):(Se(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Nt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?z.UNKNOWN:Tv(d.code);return new ee(f,d.message||"")}(o);n=new Sv(r,s,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Qu(t,r.document.name),a=In(r.document.updateTime),o=r.document.createTime?In(r.document.createTime):he.min(),c=new Bt({mapValue:{fields:r.document.fields}}),u=At.newFoundDocument(s,a,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new El(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Qu(t,r.document),a=r.readTime?In(r.readTime):he.min(),o=At.newNoDocument(s,a),c=r.removedTargetIds||[];n=new El([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Qu(t,r.document),a=r.removedTargetIds||[];n=new El([],a,s,null)}else{if(!("filter"in e))return ue(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new oE(s,a),c=r.targetId;n=new Cv(c,o)}}return n}function vE(t,e){let n;if(e instanceof uo)n={update:Mg(t,e.key,e.value)};else if(e instanceof Uc)n={delete:fh(t,e.key)};else if(e instanceof $r)n={update:Mg(t,e.key,e.data),updateMask:SE(e.fieldMask)};else{if(!(e instanceof sE))return ue(16599,{Vt:e.type});n={verify:fh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const c=o.transform;if(c instanceof oc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof no)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ro)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof lc)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ue(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:gE(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ue(27497)}(t,e.precondition)),n}function wE(t,e){return t&&t.length>0?(Se(e!==void 0,14353),t.map(n=>function(s,a){let o=s.updateTime?In(s.updateTime):In(a);return o.isEqual(he.min())&&(o=In(a)),new tE(o,s.transformResults||[])}(n,e))):[]}function bE(t,e){return{documents:[Av(t,e.path)]}}function jE(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Av(t,s);const a=function(d){if(d.length!==0)return Dv(Dn.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Os(g.field),direction:EE(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=dh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function _E(t){let e=xE(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Se(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=function(m){const g=Rv(m);return g instanceof Dn&&uv(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(T){return new ac(Fs(T.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,Rc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,v=m.values||[];return new ic(v,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,v=m.values||[];return new ic(v,g)}(n.endAt)),UN(e,s,o,a,c,"F",u,d)}function NE(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Rv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fs(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Fs(n.unaryFilter.field);return ot.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Fs(n.unaryFilter.field);return ot.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Fs(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}}(t):t.fieldFilter!==void 0?function(n){return ot.create(Fs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dn.create(n.compositeFilter.filters.map(r=>Rv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue(1026)}}(n.compositeFilter.op))}(t):ue(30097,{filter:t})}function EE(t){return hE[t]}function TE(t){return fE[t]}function CE(t){return mE[t]}function Os(t){return{fieldPath:t.canonicalString()}}function Fs(t){return bt.fromServerFormat(t.fieldPath)}function Dv(t){return t instanceof ot?function(n){if(n.op==="=="){if(_g(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NAN"}};if(jg(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_g(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NAN"}};if(jg(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(n.field),op:TE(n.op),value:n.value}}}(t):t instanceof Dn?function(n){const r=n.getFilters().map(s=>Dv(s));return r.length===1?r[0]:{compositeFilter:{op:CE(n.op),filters:r}}}(t):ue(54877,{filter:t})}function SE(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Lv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,r,s,a=he.min(),o=he.min(),c=Nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.yt=e}}function IE(t){const e=_E({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(){this.Cn=new PE}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Ir.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Ir.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class PE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ut(Me.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ut(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mv=41943040;class Ot{static withCacheSize(e){return new Ot(e,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ot.DEFAULT_COLLECTION_PERCENTILE=10,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ot.DEFAULT=new Ot(Mv,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ot.DISABLED=new Ot(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new vi(0)}static cr(){return new vi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="LruGarbageCollector",RE=1048576;function Fg([t,e],[n,r]){const s=we(t,n);return s===0?we(e,r):s}class DE{constructor(e){this.Ir=e,this.buffer=new ut(Fg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Fg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LE{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){X(Og,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ki(n)?X(Og,"Ignoring IndexedDB error during garbage collection: ",n):await Si(n)}await this.Vr(3e5)})}}class ME{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Pc.ce);const r=new DE(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(Vg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vg):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,a,o,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(a=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Ms()<=_e.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:m})))}}function VE(t,e){return new ME(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(){this.changes=new Ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Sa(r.mutation,s,Xt.empty(),Ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=be()){const s=ls();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=ha();return a.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ls();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,be()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let a=Kn();const o=Ca(),c=function(){return Ca()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof $r)?a=a.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Sa(f.mutation,d,f.mutation.getFieldMask(),Ve.now())):o.set(d.key,Xt.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>c.set(d,new FE(f,o.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=Ca();let s=new Qe((o,c)=>o-c),a=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Xt.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(s.get(c.batchId)||be()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=yv();f.forEach(g=>{if(!a.has(g)){const v=Nv(n.get(g),r.get(g));v!==null&&m.set(g,v),a=a.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):B.resolve(ls());let c=Ja,u=a;return o.next(d=>B.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),a.get(f)?B.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,be())).next(f=>({batchId:c,changes:xv(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let s=ha();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=ha();return this.indexManager.getCollectionParents(e,a).next(c=>B.forEach(c,u=>{const d=function(m,g){return new Lc(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,At.newInvalidDocument(f)))});let c=ha();return o.forEach((u,d)=>{const f=a.get(u);f!==void 0&&Sa(f.mutation,d,Xt.empty(),Ve.now()),Oc(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:In(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:IE(s.bundledQuery),readTime:In(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(){this.overlays=new Qe(ae.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ls();return B.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.St(e,n,a)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=ls(),a=n.length+1,o=new ae(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&s.set(u.getKey(),u)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Qe((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=a.get(d.largestBatchId);f===null&&(f=ls(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=ls(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return B.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new aE(n,r));let a=this.qr.get(n);a===void 0&&(a=be(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this.Qr=new ut(ft.$r),this.Ur=new ut(ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ft(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new ft(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ae(new Me([])),r=new ft(n,e),s=new ft(n,e+1),a=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),a.push(o.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ae(new Me([])),r=new ft(n,e),s=new ft(n,e+1);let a=be();return this.Ur.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new ft(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ae.comparator(e.key,n.key)||we(e.Yr,n.Yr)}static Kr(e,n){return we(e.Yr,n.Yr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ut(ft.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new iE(a,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new ft(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),a=s<0?0:s;return B.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Cf:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),s=new ft(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],o=>{const c=this.Xr(o.Yr);a.push(c)}),B.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ut(we);return n.forEach(s=>{const a=new ft(s,0),o=new ft(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],c=>{r=r.add(c.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;ae.isDocumentKey(a)||(a=a.child(""));const o=new ft(new ae(a),0);let c=new ut(we);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},o),B.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Se(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,s=>{const a=new ft(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new ft(n,0),s=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this.ri=e,this.docs=function(){return new Qe(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():At.newInvalidDocument(n))}getEntries(e,n){let r=Kn();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():At.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Kn();const o=n.path,c=new ae(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||vN(yN(f),r)<=0||(s.has(f.key)||Oc(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return B.resolve(a)}getAllFromCollectionGroup(e,n,r,s){ue(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new qE(this)}getSize(e){return B.resolve(this.size)}}class qE extends OE{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e){this.persistence=e,this.si=new Ns(n=>If(n),Af),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.oi=0,this._i=new Mf,this.targetCount=0,this.ai=vi.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new vi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),B.waitFor(a).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n){this.ui={},this.overlays={},this.ci=new Pc(0),this.li=!1,this.li=!0,this.hi=new $E,this.referenceDelegate=e(this),this.Pi=new QE(this),this.indexManager=new AE,this.remoteDocumentCache=function(s){return new HE(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new kE(n),this.Ii=new UE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new WE(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new GE(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class GE extends bN{constructor(e){super(),this.currentSequenceNumber=e}}class Vf{constructor(e){this.persistence=e,this.Ri=new Mf,this.Vi=null}static mi(e){return new Vf(e)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const s=ae.fromPath(r);return this.gi(e,s).next(a=>{a||n.removeEntry(s,he.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class uc{constructor(e,n){this.persistence=e,this.pi=new Ns(r=>NN(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=VE(this,n)}static mi(e,n){return new uc(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,s)=>this.br(e,r,s).next(a=>a?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(c=>{c||(r++,a.removeEntry(o,he.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=jl(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=be(),s=be();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Of(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Bj()?8:jN(Oj())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ys(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ws(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new KE;return this.Ss(e,n,o).next(c=>{if(a.result=c,this.Vs)return this.bs(e,n,o,c.size)})}).next(()=>a.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ms()<=_e.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Vs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(Ms()<=_e.DEBUG&&X("QueryEngine","Query:",Vs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ms()<=_e.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Vs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):B.resolve())}ys(e,n){if(Cg(n))return B.resolve(null);let r=kn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=uh(n,null,"F"),r=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=be(...a);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,uh(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return Cg(n)||s.isEqual(he.min())?B.resolve(null):this.ps.getDocuments(e,r).next(a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,s)?B.resolve(null):(Ms()<=_e.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vs(n)),this.vs(e,o,n,xN(s,Ja)).next(c=>c))})}Ds(e,n){let r=new ut(pv(e));return n.forEach((s,a)=>{Oc(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return Ms()<=_e.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Vs(n)),this.ps.getDocumentsMatchingQuery(e,n,Ir.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="LocalStore",XE=3e8;class JE{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Qe(we),this.xs=new Ns(a=>If(a),Af),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BE(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function ZE(t,e,n,r){return new JE(t,e,n,r)}async function Ov(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],c=[];let u=be();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of a){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:c}))})})}function eT(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let v=B.resolve();return g.forEach(T=>{v=v.next(()=>f.getEntry(u,T)).next(C=>{const I=d.docVersions.get(T);Se(I!==null,48541),C.version.compareTo(I)<0&&(m.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),f.addEntry(C)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=be();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Fv(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function tT(t,e){const n=fe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;c.push(n.Pi.removeMatchingKeys(a,f.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(a,f.addedDocuments,m)));let v=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(Nt.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),s=s.insert(m,v),function(C,I,j){return C.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=XE?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(g,v,f)&&c.push(n.Pi.updateTargetData(a,v))});let u=Kn(),d=be();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))}),c.push(nT(a,o,e.documentUpdates).next(f=>{u=f.ks,d=f.qs})),!r.isEqual(he.min())){const f=n.Pi.getLastRemoteSnapshotVersion(a).next(m=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));c.push(f)}return B.waitFor(c).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.Ms=s,a))}function nT(t,e,n){let r=be(),s=be();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Kn();return n.forEach((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(he.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):X(Ff,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:s}})}function rT(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Cf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sT(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(a=>a?(s=a,B.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new fr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function ph(t,e,n){const r=fe(t),s=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ki(o))throw o;X(Ff,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Bg(t,e,n){const r=fe(t);let s=he.min(),a=be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=fe(u),g=m.xs.get(f);return g!==void 0?B.resolve(m.Ms.get(g)):m.Pi.getTargetData(d,f)}(r,o,kn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{a=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:he.min(),n?a:be())).next(c=>(iT(r,WN(e),c),{documents:c,Qs:a})))}function iT(t,e,n){let r=t.Os.get(e)||he.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class Ug{constructor(){this.activeTargetIds=YN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aT{constructor(){this.Mo=new Ug,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ug,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="ConnectivityMonitor";class $g{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(zg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){X(zg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al=null;function gh(){return al===null?al=function(){return 268435456+Math.round(2147483648*Math.random())}():al++,"0x"+al.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu="RestConnection",lT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cT{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===rc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,a){const o=gh(),c=this.zo(e,n.toUriEncodedString());X(Gu,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,a);const{host:d}=new URL(c),f=jf(d);return this.Jo(e,c,u,r,f).then(m=>(X(Gu,`Received RPC '${e}' ${o}: `,m),m),m=>{throw pi(Gu,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m})}Ho(e,n,r,s,a,o){return this.Go(e,n,r,s,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ci}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}zo(e,n){const r=lT[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection";class dT extends cT{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const o=gh();return new Promise((c,u)=>{const d=new $y;d.setWithCredentials(!0),d.listenOnce(Wy.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case bl.NO_ERROR:const m=d.getResponseJson();X(St,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case bl.TIMEOUT:X(St,`RPC '${e}' ${o} timed out`),u(new ee(z.DEADLINE_EXCEEDED,"Request time out"));break;case bl.HTTP_ERROR:const g=d.getStatus();if(X(St,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const T=v==null?void 0:v.error;if(T&&T.status&&T.message){const C=function(j){const y=j.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(y)>=0?y:z.UNKNOWN}(T.status);u(new ee(C,T.message))}else u(new ee(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new ee(z.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{X(St,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);X(St,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}T_(e,n,r){const s=gh(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Qy(),c=qy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=a.join("");X(St,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);this.I_(m);let g=!1,v=!1;const T=new uT({Yo:I=>{v?X(St,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(g||(X(St,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),X(St,`RPC '${e}' stream ${s} sending:`,I),m.send(I))},Zo:()=>m.close()}),C=(I,j,y)=>{I.listen(j,_=>{try{y(_)}catch(S){setTimeout(()=>{throw S},0)}})};return C(m,da.EventType.OPEN,()=>{v||(X(St,`RPC '${e}' stream ${s} transport opened.`),T.o_())}),C(m,da.EventType.CLOSE,()=>{v||(v=!0,X(St,`RPC '${e}' stream ${s} transport closed`),T.a_(),this.E_(m))}),C(m,da.EventType.ERROR,I=>{v||(v=!0,pi(St,`RPC '${e}' stream ${s} transport errored. Name:`,I.name,"Message:",I.message),T.a_(new ee(z.UNAVAILABLE,"The operation could not be completed")))}),C(m,da.EventType.MESSAGE,I=>{var j;if(!v){const y=I.data[0];Se(!!y,16349);const _=y,S=(_==null?void 0:_.error)||((j=_[0])==null?void 0:j.error);if(S){X(St,`RPC '${e}' stream ${s} received error:`,S);const P=S.status;let R=function(b){const k=tt[b];if(k!==void 0)return Tv(k)}(P),w=S.message;R===void 0&&(R=z.INTERNAL,w="Unknown error status: "+P+" with message "+S.message),v=!0,T.a_(new ee(R,w)),m.close()}else X(St,`RPC '${e}' stream ${s} received:`,y),T.u_(y)}}),C(c,Hy.STAT_EVENT,I=>{I.stat===sh.PROXY?X(St,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===sh.NOPROXY&&X(St,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Ku(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t){return new pE(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="PersistentStream";class Uv{constructor(e,n,r,s,a,o,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Bv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ee(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return X(Wg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(X(Wg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hT extends Uv{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=yE(this.serializer,e),r=function(a){if(!("targetChange"in a))return he.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?In(o.readTime):he.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=mh(this.serializer),n.addTarget=function(a,o){let c;const u=o.target;if(c=ch(u)?{documents:bE(a,u)}:{query:jE(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=kv(a,o.resumeToken);const d=dh(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(he.min())>0){c.readTime=cc(a,o.snapshotVersion.toTimestamp());const d=dh(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=NE(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=mh(this.serializer),n.removeTarget=e,this.q_(n)}}class fT extends Uv{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=wE(e.writeResults,e.commitTime),r=In(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=mh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>vE(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{}class pT extends mT{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ee(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Go(e,hh(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ee(z.UNKNOWN,a.toString())})}Ho(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,hh(n,r),s,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class gT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(n),this.aa=!1):X("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="RemoteStore";class xT{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Es(this)&&(X(ys,"Restarting streams for network reachability change."),await async function(u){const d=fe(u);d.Ea.add(4),await fo(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Wc(d)}(this))})}),this.Ra=new gT(r,s)}}async function Wc(t){if(Es(t))for(const e of t.da)await e(!0)}async function fo(t){for(const e of t.da)await e(!1)}function zv(t,e){const n=fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$f(n)?zf(n):Ii(n).O_()&&Uf(n,e))}function Bf(t,e){const n=fe(t),r=Ii(n);n.Ia.delete(e),r.O_()&&$v(n,e),n.Ia.size===0&&(r.O_()?r.L_():Es(n)&&n.Ra.set("Unknown"))}function Uf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ii(t).Y_(e)}function $v(t,e){t.Va.Ue(e),Ii(t).Z_(e)}function zf(t){t.Va=new dE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ii(t).start(),t.Ra.ua()}function $f(t){return Es(t)&&!Ii(t).x_()&&t.Ia.size>0}function Es(t){return fe(t).Ea.size===0}function Wv(t){t.Va=void 0}async function yT(t){t.Ra.set("Online")}async function vT(t){t.Ia.forEach((e,n)=>{Uf(t,e)})}async function wT(t,e){Wv(t),$f(t)?(t.Ra.ha(e),zf(t)):t.Ra.set("Unknown")}async function bT(t,e,n){if(t.Ra.set("Online"),e instanceof Sv&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const c of a.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){X(ys,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dc(t,r)}else if(e instanceof El?t.Va.Ze(e):e instanceof Cv?t.Va.st(e):t.Va.tt(e),!n.isEqual(he.min()))try{const r=await Fv(t.localStore);n.compareTo(r)>=0&&await function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=a.Ia.get(d);f&&a.Ia.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=a.Ia.get(u);if(!f)return;a.Ia.set(u,f.withResumeToken(Nt.EMPTY_BYTE_STRING,f.snapshotVersion)),$v(a,u);const m=new fr(f.target,u,d,f.sequenceNumber);Uf(a,m)}),a.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){X(ys,"Failed to raise snapshot:",r),await dc(t,r)}}async function dc(t,e,n){if(!ki(e))throw e;t.Ea.add(1),await fo(t),t.Ra.set("Offline"),n||(n=()=>Fv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X(ys,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Wc(t)})}function Hv(t,e){return e().catch(n=>dc(t,n,e))}async function Hc(t){const e=fe(t),n=Dr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Cf;for(;jT(e);)try{const s=await rT(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,_T(e,s)}catch(s){await dc(e,s)}qv(e)&&Qv(e)}function jT(t){return Es(t)&&t.Ta.length<10}function _T(t,e){t.Ta.push(e);const n=Dr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function qv(t){return Es(t)&&!Dr(t).x_()&&t.Ta.length>0}function Qv(t){Dr(t).start()}async function NT(t){Dr(t).ra()}async function ET(t){const e=Dr(t);for(const n of t.Ta)e.ea(n.mutations)}async function TT(t,e,n){const r=t.Ta.shift(),s=Rf.from(r,e,n);await Hv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Hc(t)}async function CT(t,e){e&&Dr(t).X_&&await async function(r,s){if(function(o){return lE(o)&&o!==z.ABORTED}(s.code)){const a=r.Ta.shift();Dr(r).B_(),await Hv(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Hc(r)}}(t,e),qv(t)&&Qv(t)}async function Hg(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),X(ys,"RemoteStore received new credentials");const r=Es(n);n.Ea.add(3),await fo(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Wc(n)}async function ST(t,e){const n=fe(t);e?(n.Ea.delete(2),await Wc(n)):e||(n.Ea.add(2),await fo(n),n.Ra.set("Unknown"))}function Ii(t){return t.ma||(t.ma=function(n,r,s){const a=fe(n);return a.sa(),new hT(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:yT.bind(null,t),t_:vT.bind(null,t),r_:wT.bind(null,t),H_:bT.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),$f(t)?zf(t):t.Ra.set("Unknown")):(await t.ma.stop(),Wv(t))})),t.ma}function Dr(t){return t.fa||(t.fa=function(n,r,s){const a=fe(n);return a.sa(),new fT(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:NT.bind(null,t),r_:CT.bind(null,t),ta:ET.bind(null,t),na:TT.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Hc(t)):(await t.fa.stop(),t.Ta.length>0&&(X(ys,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,c=new Wf(e,n,o,s,a);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hf(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),ki(t))return new ee(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{static emptySet(e){return new ii(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=ha(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ii)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ii;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(){this.ga=new Qe(ae.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ue(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class wi{constructor(e,n,r,s,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new wi(e,n,ii.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class IT{constructor(){this.queries=Qg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=fe(n),a=s.queries;s.queries=Qg(),a.forEach((o,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new ee(z.ABORTED,"Firestore shutting down"))}}function Qg(){return new Ns(t=>mv(t),Vc)}async function Gv(t,e){const n=fe(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new kT,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Hf(o,`Initialization of query '${Vs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&qf(n)}async function Kv(t,e){const n=fe(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function AT(t,e){const n=fe(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&qf(n)}function PT(t,e,n){const r=fe(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function qf(t){t.Ca.forEach(e=>{e.next()})}var xh,Gg;(Gg=xh||(xh={})).Ma="default",Gg.Cache="cache";class Yv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new wi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=wi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e){this.key=e}}class Jv{constructor(e){this.key=e}}class RT{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=be(),this.mutatedKeys=be(),this.eu=pv(e),this.tu=new ii(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new qg,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),v=Oc(this.query,m)?m:null,T=!!g&&this.mutatedKeys.has(g.key),C=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let I=!1;g&&v?g.data.isEqual(v.data)?T!==C&&(r.track({type:3,doc:v}),I=!0):this.su(g,v)||(r.track({type:2,doc:v}),I=!0,(u&&this.eu(v,u)>0||d&&this.eu(v,d)<0)&&(c=!0)):!g&&v?(r.track({type:0,doc:v}),I=!0):g&&!v&&(r.track({type:1,doc:g}),I=!0,(u||d)&&(c=!0)),I&&(v?(o=o.add(v),a=C?a.add(f):a.delete(f)):(o=o.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,m)=>function(v,T){const C=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:I})}};return C(v)-C(T)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new wi(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=be(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Jv(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Xv(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return wi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qf="SyncEngine";class DT{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class LT{constructor(e){this.key=e,this.hu=!1}}class MT{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ns(c=>mv(c),Vc),this.Iu=new Map,this.Eu=new Set,this.du=new Qe(ae.comparator),this.Au=new Map,this.Ru=new Mf,this.Vu={},this.mu=new Map,this.fu=vi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function VT(t,e,n=!0){const r=s1(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await Zv(r,e,n,!0),s}async function OT(t,e){const n=s1(t);await Zv(n,e,!0,!1)}async function Zv(t,e,n,r){const s=await sT(t.localStore,kn(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await FT(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&zv(t.remoteStore,s),c}async function FT(t,e,n,r,s){t.pu=(m,g,v)=>async function(C,I,j,y){let _=I.view.ru(j);_.Cs&&(_=await Bg(C.localStore,I.query,!1).then(({documents:w})=>I.view.ru(w,_)));const S=y&&y.targetChanges.get(I.targetId),P=y&&y.targetMismatches.get(I.targetId)!=null,R=I.view.applyChanges(_,C.isPrimaryClient,S,P);return Yg(C,I.targetId,R.au),R.snapshot}(t,m,g,v);const a=await Bg(t.localStore,e,!0),o=new RT(e,a.Qs),c=o.ru(a.documents),u=ho.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);Yg(t,n,d.au);const f=new DT(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function BT(t,e,n){const r=fe(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(o=>!Vc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ph(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Bf(r.remoteStore,s.targetId),yh(r,s.targetId)}).catch(Si)):(yh(r,s.targetId),await ph(r.localStore,s.targetId,!0))}async function UT(t,e){const n=fe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bf(n.remoteStore,r.targetId))}async function zT(t,e,n){const r=KT(t);try{const s=await function(o,c){const u=fe(o),d=Ve.now(),f=c.reduce((v,T)=>v.add(T.key),be());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=Kn(),C=be();return u.Ns.getEntries(v,f).next(I=>{T=I,T.forEach((j,y)=>{y.isValidDocument()||(C=C.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,T)).next(I=>{m=I;const j=[];for(const y of c){const _=rE(y,m.get(y.key).overlayedDocument);_!=null&&j.push(new $r(y.key,_,ov(_.value.mapValue),Ht.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,j,c)}).next(I=>{g=I;const j=I.applyToLocalDocumentSet(m,C);return u.documentOverlayCache.saveOverlays(v,I.batchId,j)})}).then(()=>({batchId:g.batchId,changes:xv(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new Qe(we)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await mo(r,s.changes),await Hc(r.remoteStore)}catch(s){const a=Hf(s,"Failed to persist write");n.reject(a)}}async function e1(t,e){const n=fe(t);try{const r=await tT(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Au.get(a);o&&(Se(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Se(o.hu,14607):s.removedDocuments.size>0&&(Se(o.hu,42227),o.hu=!1))}),await mo(n,r,e)}catch(r){await Si(r)}}function Kg(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((a,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=fe(o);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.Sa)g.va(c)&&(d=!0)}),d&&qf(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $T(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let o=new Qe(ae.comparator);o=o.insert(a,At.newNoDocument(a,he.min()));const c=be().add(a),u=new zc(he.min(),new Map,new Qe(we),o,c);await e1(r,u),r.du=r.du.remove(a),r.Au.delete(e),Gf(r)}else await ph(r.localStore,e,!1).then(()=>yh(r,e,n)).catch(Si)}async function WT(t,e){const n=fe(t),r=e.batch.batchId;try{const s=await eT(n.localStore,e);n1(n,r,null),t1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mo(n,s)}catch(s){await Si(s)}}async function HT(t,e,n){const r=fe(t);try{const s=await function(o,c){const u=fe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(Se(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);n1(r,e,n),t1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mo(r,s)}catch(s){await Si(s)}}function t1(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function n1(t,e,n){const r=fe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function yh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||r1(t,r)})}function r1(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Bf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Gf(t))}function Yg(t,e,n){for(const r of n)r instanceof Xv?(t.Ru.addReference(r.key,e),qT(t,r)):r instanceof Jv?(X(Qf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||r1(t,r.key)):ue(19791,{wu:r})}function qT(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(X(Qf,"New document in limbo: "+n),t.Eu.add(r),Gf(t))}function Gf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ae(Me.fromString(e)),r=t.fu.next();t.Au.set(r,new LT(n)),t.du=t.du.insert(n,r),zv(t.remoteStore,new fr(kn(Mc(n.path)),r,"TargetPurposeLimboResolution",Pc.ce))}}async function mo(t,e,n){const r=fe(t),s=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Of.As(u.targetId,d);a.push(m)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,d){const f=fe(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>B.forEach(d,g=>B.forEach(g.Es,v=>f.persistence.referenceDelegate.addReference(m,g.targetId,v)).next(()=>B.forEach(g.ds,v=>f.persistence.referenceDelegate.removeReference(m,g.targetId,v)))))}catch(m){if(!ki(m))throw m;X(Ff,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const v=f.Ms.get(g),T=v.snapshotVersion,C=v.withLastLimboFreeSnapshotVersion(T);f.Ms=f.Ms.insert(g,C)}}}(r.localStore,a))}async function QT(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){X(Qf,"User change. New user:",e.toKey());const r=await Ov(n.localStore,e);n.currentUser=e,function(a,o){a.mu.forEach(c=>{c.forEach(u=>{u.reject(new ee(z.CANCELLED,o))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mo(n,r.Ls)}}function GT(t,e){const n=fe(t),r=n.Au.get(e);if(r&&r.hu)return be().add(r.key);{let s=be();const a=n.Iu.get(e);if(!a)return s;for(const o of a){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function s1(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=e1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$T.bind(null,e),e.Pu.H_=AT.bind(null,e.eventManager),e.Pu.yu=PT.bind(null,e.eventManager),e}function KT(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HT.bind(null,e),e}class hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$c(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ZE(this.persistence,new YE,e.initialUser,this.serializer)}Cu(e){return new Vv(Vf.mi,this.serializer)}Du(e){return new aT}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hc.provider={build:()=>new hc};class YT extends hc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Se(this.persistence.referenceDelegate instanceof uc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new LE(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ot.withCacheSize(this.cacheSizeBytes):Ot.DEFAULT;return new Vv(r=>uc.mi(r,n),this.serializer)}}class vh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QT.bind(null,this.syncEngine),await ST(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IT}()}createDatastore(e){const n=$c(e.databaseInfo.databaseId),r=function(a){return new dT(a)}(e.databaseInfo);return function(a,o,c,u){return new pT(a,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,c){return new xT(r,s,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Kg(this.syncEngine,n,0),function(){return $g.v()?new $g:new oT}())}createSyncEngine(e,n){return function(s,a,o,c,u,d,f){const m=new MT(s,a,o,c,u,d);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=fe(s);X(ys,"RemoteStore shutting down."),a.Ea.add(5),await fo(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}vh.provider={build:()=>new vh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr="FirestoreClient";class XT{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=kt.UNAUTHENTICATED,this.clientId=Ef.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{X(Lr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X(Lr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Hf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yu(t,e){t.asyncQueue.verifyOperationInProgress(),X(Lr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Ov(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await JT(t);X(Lr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Hg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Hg(e.remoteStore,s)),t._onlineComponents=e}async function JT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(Lr,"Using user provided OfflineComponentProvider");try{await Yu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;pi("Error using user provided cache. Falling back to memory cache: "+n),await Yu(t,new hc)}}else X(Lr,"Using default OfflineComponentProvider"),await Yu(t,new YT(void 0));return t._offlineComponents}async function a1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(Lr,"Using user provided OnlineComponentProvider"),await Xg(t,t._uninitializedComponentsProvider._online)):(X(Lr,"Using default OnlineComponentProvider"),await Xg(t,new vh))),t._onlineComponents}function ZT(t){return a1(t).then(e=>e.syncEngine)}async function wh(t){const e=await a1(t),n=e.eventManager;return n.onListen=VT.bind(null,e.syncEngine),n.onUnlisten=BT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UT.bind(null,e.syncEngine),n}function e4(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const f=new i1({next:g=>{f.Nu(),o.enqueueAndForget(()=>Kv(a,m));const v=g.docs.has(c);!v&&g.fromCache?d.reject(new ee(z.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&u&&u.source==="server"?d.reject(new ee(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Yv(Mc(c.path),f,{includeMetadataChanges:!0,qa:!0});return Gv(a,m)}(await wh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="firestore.googleapis.com",Zg=!0;class e0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ee(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=l1,this.ssl=Zg}else this.host=e.host,this.ssl=e.ssl??Zg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Mv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RE)throw new ee(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=o1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ee(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ee(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ee(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new aN;switch(r.type){case"firstParty":return new uN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Jg.get(n);r&&(X("ComponentProvider","Removing Datastore"),Jg.delete(n),r.terminate())}(this),Promise.resolve()}}function t4(t,e,n,r={}){var d;t=cn(t,qc);const s=jf(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Rj(`https://${c}`),Vj("Firestore",!0)),a.host!==l1&&a.host!==c&&pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:s,emulatorOptions:r};if(!Zl(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=kt.MOCK_USER;else{f=Dj(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ee(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new kt(g)}t._authCredentials=new oN(new Ky(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qc(this.firestore,e,this._query)}}class Je{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Je(this.firestore,e,this._key)}toJSON(){return{type:Je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(co(n,Je._jsonSchema))return new Je(e,r||null,new ae(Me.fromString(n.referencePath)))}}Je._jsonSchemaVersion="firestore/documentReference/1.0",Je._jsonSchema={type:st("string",Je._jsonSchemaVersion),referencePath:st("string")};class Cr extends Qc{constructor(e,n,r){super(e,n,Mc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new ae(e))}withConverter(e){return new Cr(this.firestore,e,this._path)}}function n4(t,e,...n){if(t=vn(t),Yy("collection","path",e),t instanceof qc){const r=Me.fromString(e,...n);return mg(r),new Cr(t,null,r)}{if(!(t instanceof Je||t instanceof Cr))throw new ee(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return mg(r),new Cr(t.firestore,null,r)}}function sa(t,e,...n){if(t=vn(t),arguments.length===1&&(e=Ef.newId()),Yy("doc","path",e),t instanceof qc){const r=Me.fromString(e,...n);return fg(r),new Je(t,null,new ae(r))}{if(!(t instanceof Je||t instanceof Cr))throw new ee(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return fg(r),new Je(t.firestore,t instanceof Cr?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="AsyncQueue";class n0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Bv(this,"async_queue_retry"),this._c=()=>{const r=Ku();r&&X(t0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Ku();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ku();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Tr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ki(e))throw e;X(t0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",r0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Wf.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&ue(47125,{Pc:r0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function r0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Mr extends qc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new n0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new n0(e),this._firestoreClient=void 0,await e}}}function i0(t,e){const n=typeof t=="object"?t:Q_(),r=typeof t=="string"?t:rc,s=z_(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=Aj("firestore");a&&t4(s,...a)}return s}function Gc(t){if(t._terminated)throw new ee(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||r4(t),t._firestoreClient}function r4(t){var r,s,a;const e=t._freezeSettings(),n=function(c,u,d,f){return new CN(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,o1(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new XT(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this._byteString=e}static fromBase64String(e){try{return new an(Nt.fromBase64String(e))}catch(n){throw new ee(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new an(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:an._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(co(e,an._jsonSchema))return an.fromBase64String(e.bytes)}}an._jsonSchemaVersion="firestore/bytes/1.0",an._jsonSchema={type:st("string",an._jsonSchemaVersion),bytes:st("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:An._jsonSchemaVersion}}static fromJSON(e){if(co(e,An._jsonSchema))return new An(e.latitude,e.longitude)}}An._jsonSchemaVersion="firestore/geoPoint/1.0",An._jsonSchema={type:st("string",An._jsonSchemaVersion),latitude:st("number"),longitude:st("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Pn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(co(e,Pn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Pn(e.vectorValues);throw new ee(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pn._jsonSchemaVersion="firestore/vectorValue/1.0",Pn._jsonSchema={type:st("string",Pn._jsonSchemaVersion),vectorValues:st("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=/^__.*__$/;class i4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $r(e,this.data,this.fieldMask,n,this.fieldTransforms):new uo(e,this.data,n,this.fieldTransforms)}}class c1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $r(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function u1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:t})}}class Yf{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Yf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return fc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(u1(this.Ac)&&s4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class a4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$c(e)}Cc(e,n,r,s=!1){return new Yf({Ac:e,methodName:n,Dc:r,path:bt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xf(t){const e=t._freezeSettings(),n=$c(t._databaseId);return new a4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function d1(t,e,n,r,s,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);Jf("Data must be an object, but it was:",o,r);const c=m1(r,o);let u,d;if(a.merge)u=new Xt(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const f=[];for(const m of a.mergeFields){const g=bh(e,m,n);if(!o.contains(g))throw new ee(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);g1(f,g)||f.push(g)}u=new Xt(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new i4(new Bt(c),u,d)}class Kc extends Kf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kc}}function h1(t,e,n,r){const s=t.Cc(1,e,n);Jf("Data must be an object, but it was:",s,r);const a=[],o=Bt.empty();zr(r,(u,d)=>{const f=Zf(e,u,n);d=vn(d);const m=s.yc(f);if(d instanceof Kc)a.push(f);else{const g=Yc(d,m);g!=null&&(a.push(f),o.set(f,g))}});const c=new Xt(a);return new c1(o,c,s.fieldTransforms)}function f1(t,e,n,r,s,a){const o=t.Cc(1,e,n),c=[bh(e,r,n)],u=[s];if(a.length%2!=0)throw new ee(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)c.push(bh(e,a[g])),u.push(a[g+1]);const d=[],f=Bt.empty();for(let g=c.length-1;g>=0;--g)if(!g1(d,c[g])){const v=c[g];let T=u[g];T=vn(T);const C=o.yc(v);if(T instanceof Kc)d.push(v);else{const I=Yc(T,C);I!=null&&(d.push(v),f.set(v,I))}}const m=new Xt(d);return new c1(f,m,o.fieldTransforms)}function Yc(t,e){if(p1(t=vn(t)))return Jf("Unsupported field value:",e,t),m1(t,e);if(t instanceof Kf)return function(r,s){if(!u1(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const c of r){let u=Yc(c,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ve.fromDate(r);return{timestampValue:cc(s.serializer,a)}}if(r instanceof Ve){const a=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cc(s.serializer,a)}}if(r instanceof An)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof an)return{bytesValue:kv(s.serializer,r._byteString)};if(r instanceof Je){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Lf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Pn)return function(o,c){return{mapValue:{fields:{[iv]:{stringValue:av},[sc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return Pf(c.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Tf(r)}`)}(t,e)}function m1(t,e){const n={};return Zy(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zr(t,(r,s)=>{const a=Yc(s,e.mc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function p1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof An||t instanceof an||t instanceof Je||t instanceof Kf||t instanceof Pn)}function Jf(t,e,n){if(!p1(n)||!Xy(n)){const r=Tf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function bh(t,e,n){if((e=vn(e))instanceof po)return e._internalPath;if(typeof e=="string")return Zf(t,e);throw fc("Field path arguments must be of type string or ",t,!1,void 0,n)}const o4=new RegExp("[~\\*/\\[\\]]");function Zf(t,e,n){if(e.search(o4)>=0)throw fc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new po(...e.split("."))._internalPath}catch{throw fc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fc(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new ee(z.INVALID_ARGUMENT,c+t+u)}function g1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new l4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(y1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class l4 extends x1{data(){return super.data()}}function y1(t,e){return typeof e=="string"?Zf(t,e):e instanceof po?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u4{convertValue(e,n="none"){switch(Rr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return zr(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,s,a;const n=(a=(s=(r=e.fields)==null?void 0:r[sc].arrayValue)==null?void 0:s.values)==null?void 0:a.map(o=>Ye(o.doubleValue));return new Pn(n)}convertGeoPoint(e){return new An(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Dc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Za(e));default:return null}}convertTimestamp(e){const n=Ar(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Me.fromString(e);Se(Lv(r),9688,{name:e});const s=new eo(r.get(1),r.get(3)),a=new ae(r.popFirst(5));return s.isEqual(n)||Gn(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ma{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ds extends x1{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Tl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(y1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ds._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ds._jsonSchemaVersion="firestore/documentSnapshot/1.0",ds._jsonSchema={type:st("string",ds._jsonSchemaVersion),bundleSource:st("string","DocumentSnapshot"),bundleName:st("string"),bundle:st("string")};class Tl extends ds{data(e={}){return super.data(e)}}class ai{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ma(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Tl(this._firestore,this._userDataWriter,r.key,r,new ma(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new Tl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ma(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const u=new Tl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ma(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:d4(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ai._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ef.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function d4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(t){t=cn(t,Je);const e=cn(t.firestore,Mr);return e4(Gc(e),t._key).then(n=>b1(e,t,n))}ai._jsonSchemaVersion="firestore/querySnapshot/1.0",ai._jsonSchema={type:st("string",ai._jsonSchemaVersion),bundleSource:st("string","QuerySnapshot"),bundleName:st("string"),bundle:st("string")};class w1 extends u4{constructor(e){super(),this.firestore=e}convertBytes(e){return new an(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,n)}}function f4(t,e,n){t=cn(t,Je);const r=cn(t.firestore,Mr),s=v1(t.converter,e,n);return Xc(r,[d1(Xf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ht.none())])}function m4(t,e,n,...r){t=cn(t,Je);const s=cn(t.firestore,Mr),a=Xf(s);let o;return o=typeof(e=vn(e))=="string"||e instanceof po?f1(a,"updateDoc",t._key,e,n,r):h1(a,"updateDoc",t._key,e),Xc(s,[o.toMutation(t._key,Ht.exists(!0))])}function p4(t){return Xc(cn(t.firestore,Mr),[new Uc(t._key,Ht.none())])}function g4(t,...e){var u,d,f;t=vn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||s0(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(s0(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(d=m.error)==null?void 0:d.bind(m),e[r+2]=(f=m.complete)==null?void 0:f.bind(m)}let a,o,c;if(t instanceof Je)o=cn(t.firestore,Mr),c=Mc(t._key.path),a={next:m=>{e[r]&&e[r](b1(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=cn(t,Qc);o=cn(m.firestore,Mr),c=m._query;const g=new w1(o);a={next:v=>{e[r]&&e[r](new ai(o,g,m,v))},error:e[r+1],complete:e[r+2]},c4(t._query)}return function(g,v,T,C){const I=new i1(C),j=new Yv(v,I,T);return g.asyncQueue.enqueueAndForget(async()=>Gv(await wh(g),j)),()=>{I.Nu(),g.asyncQueue.enqueueAndForget(async()=>Kv(await wh(g),j))}}(Gc(o),c,s,a)}function Xc(t,e){return function(r,s){const a=new Tr;return r.asyncQueue.enqueueAndForget(async()=>zT(await ZT(r),s,a)),a.promise}(Gc(t),e)}function b1(t,e,n){const r=n.docs.get(e._key),s=new w1(t);return new ds(t,s,e._key,r,new ma(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Xf(e)}set(e,n,r){this._verifyNotCommitted();const s=Xu(e,this._firestore),a=v1(s.converter,n,r),o=d1(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Ht.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=Xu(e,this._firestore);let o;return o=typeof(n=vn(n))=="string"||n instanceof po?f1(this._dataReader,"WriteBatch.update",a._key,n,r,s):h1(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,Ht.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Xu(e,this._firestore);return this._mutations=this._mutations.concat(new Uc(n._key,Ht.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ee(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xu(t,e){if((t=vn(t)).firestore!==e)throw new ee(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t){return Gc(t=cn(t,Mr)),new x4(t,e=>Xc(t,e))}(function(e,n=!0){(function(s){Ci=s})(q_),tc(new Ya("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new Mr(new lN(r.getProvider("auth-internal")),new dN(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ee(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eo(d.options.projectId,f)}(o,s),o);return a={useFetchStreams:n,...a},c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),si(cg,ug,e),si(cg,ug,"esm2020")})();const ol="SPR_TECHFORGE_FIREBASE_CONFIG",a0={apiKey:"AIzaSyDWiI7gQ-sCLiMfoNPAmbqrT_XNAH2SxL8",authDomain:"sprtechforge.firebaseapp.com",projectId:"sprtechforge",storageBucket:"sprtechforge.firebasestorage.app",messagingSenderId:"576106145208",appId:"1:576106145208:web:fcd3c869f30544efca2bcd",measurementId:"G-JN6S6L5KH5"};class v4{constructor(){Oo(this,"app",null);Oo(this,"db",null);Oo(this,"isInitialized",!1);this.tryInit()}tryInit(){try{const e=localStorage.getItem(ol);let n=a0;if(e&&(n=JSON.parse(e)),n.projectId&&n.apiKey)try{this.app=rh(n),this.db=i0(this.app),this.isInitialized=!0,console.log("Firebase Firestore Initialized")}catch(r){console.error("Firebase initialization failed:",r),this.isInitialized=!1}}catch(e){console.error("Failed to initialize firebase",e)}}saveConfig(e){localStorage.setItem(ol,JSON.stringify(e)),window.location.reload()}clearConfig(){localStorage.removeItem(ol),window.location.reload()}isConfigured(){return this.isInitialized&&!!this.db}getConfig(){const e=localStorage.getItem(ol);return e?JSON.parse(e):a0}async testConfig(e){try{const n=JSON.parse(e);if(!n.projectId||!n.apiKey||!n.appId)return{success:!1,error:"Invalid Configuration object. Missing projectId, apiKey, or appId."};const r=rh(n,"testApp"),s=i0(r);try{const a=sa(s,"system_check","connection_test");await h4(a)}catch(a){if(a.code==="unavailable"||a.code==="failed-precondition")return{success:!1,error:"Could not reach Firebase. Check your internet connection."}}return{success:!0}}catch(n){return{success:!1,error:n.message||"Invalid JSON format."}}}sanitizeData(e){if(e==null)return e;if(Array.isArray(e))return e.map(n=>this.sanitizeData(n));if(typeof e=="object"){if(typeof e.toDate=="function")return e.toDate().toISOString();if("seconds"in e&&"nanoseconds"in e&&Object.keys(e).length<=2)return new Date(e.seconds*1e3).toISOString();if(e.firestore&&typeof e.path=="string")return e.path;const n={};return Object.keys(e).forEach(r=>{n[r]=this.sanitizeData(e[r])}),n}return e}cleanForSave(e){return JSON.parse(JSON.stringify(e))}subscribe(e,n,r){if(!this.db)return()=>{};const s=n4(this.db,e);return g4(s,o=>{const c=[];o.forEach(u=>{const d=u.data(),f=this.sanitizeData(d);c.push({...f,id:u.id})}),console.log(`Sync: Received ${c.length} items from ${e}`),n(c)},o=>{console.error(`Error subscribing to ${e}:`,o),r&&r(o)})}async saveItem(e,n){if(!this.db)throw new Error("DB not configured");if(!n.id)throw new Error("Item must have an ID");const r=this.cleanForSave(n);await f4(sa(this.db,e,n.id),r)}async updateItem(e,n,r){if(!this.db)throw new Error("DB not configured");if(!n)throw new Error("ID required for update");const s=this.cleanForSave(r),a=sa(this.db,e,n);await m4(a,s)}async deleteItem(e,n){if(!this.db)throw new Error("DB not configured");await p4(sa(this.db,e,n))}async uploadBatch(e,n){if(!this.db)throw new Error("DB not configured");if(n.length===0)return;const r=500;for(let s=0;s<n.length;s+=r){const a=n.slice(s,s+r),o=y4(this.db);a.forEach(c=>{const u=sa(this.db,e,c.id),d=this.cleanForSave(c);o.set(u,d)}),await o.commit(),console.log(`Uploaded batch of ${a.length} to ${e}`)}}getSchemaSQL(){return"Firestore is a NoSQL database. No Schema definition is required. Collections are created automatically when you add data."}}const ce=new v4,j1=L.createContext(void 0),Ce=()=>{const t=L.useContext(j1);if(!t)throw new Error("useApp must be used within an AppProvider");return t},Ju="SPR_TECHFORGE_FRESH_V10",ll="SPR_TECHFORGE_SESSION_V4",w4=60*60*1e3,Zu={id:"admin-01",name:"Thirumal Reddy",username:"thirumalreddy@sprtechforge.com",password:"ThiruPriya@13",role:"admin",modules:["candidates","finance","users","training"],authProvider:"local",isPasswordChanged:!0},ed=[{id:"cash-01",name:"Office Cash",type:pe.Cash,openingBalance:0,isSystem:!0}],o0=[ct.Training,ct.ReadyForInterview,ct.Placed,ct.Discontinued],b4=({children:t})=>{const[e,n]=L.useState(null),[r,s]=L.useState(!1),[a,o]=L.useState([Zu]),[c,u]=L.useState([]),[d,f]=L.useState([]),[m,g]=L.useState([]),[v,T]=L.useState(ed),[C,I]=L.useState([]),[j,y]=L.useState(o0),[_,S]=L.useState([]),[P,R]=L.useState([]),[w,p]=L.useState([]),[b,k]=L.useState([]),[A,M]=L.useState([]),[N,J]=L.useState([]),[ie,Ae]=L.useState([]),[Fe,q]=L.useState(null),[te,le]=L.useState(null),[U,oe]=L.useState(!1),W=ce.isConfigured(),de=(D,F="success")=>{const $=Date.now().toString();q({id:$,message:D,type:F}),setTimeout(()=>q(Ne=>(Ne==null?void 0:Ne.id)===$?null:Ne),3e3)},Y=(D,F,$,Ne)=>{if(!e)return;const $e={id:Lt(),timestamp:new Date().toISOString(),actorId:e.id,actorName:e.name,action:D,description:F,entityType:$,entityId:Ne};R(yt=>[$e,...yt]),W&&ce.saveItem("activityLogs",$e).catch(console.error)};L.useEffect(()=>{if(W){const D=Ue=>{le(Ue.message),oe(!0)},F=ce.subscribe("users",Ue=>{Ue.length>0?o(Ue):o([Zu]),oe(!0),s(!0)},D),$=ce.subscribe("candidates",u),Ne=ce.subscribe("candidateProfiles",f),$e=ce.subscribe("interviews",g),yt=ce.subscribe("accounts",Ue=>{Ue.length>0?T(Ue):T(ed)}),Is=ce.subscribe("transactions",I),As=ce.subscribe("trainingModules",p),Vn=ce.subscribe("trainingTopics",k),Zn=ce.subscribe("trainingLogs",M),Fi=ce.subscribe("interviewModules",J),K=ce.subscribe("interviewQuestions",Ae),ve=ce.subscribe("activityLogs",R);return()=>{F(),$(),Ne(),$e(),yt(),Is(),As(),Vn(),Zn(),Fi(),K(),ve()}}else{try{const D=localStorage.getItem(Ju);if(D){const F=JSON.parse(D);o(F.users||[Zu]),u(F.candidates||[]),f(F.candidateProfiles||[]),g(F.interviews||[]),T(F.accounts||ed),I(F.transactions||[]),p(F.trainingModules||[]),k(F.trainingTopics||[]),M(F.trainingLogs||[]),J(F.interviewModules||[]),Ae(F.interviewQuestions||[]),R(F.activityLogs||[]),y(F.candidateStatuses||o0)}}catch{}oe(!0),s(!0)}},[W]),L.useEffect(()=>{if(U&&!e){const D=localStorage.getItem(ll);if(D)try{const F=JSON.parse(D);if(Date.now()-F.timestamp<w4){const $=a.find(Ne=>Ne.id===F.userId);$&&n($)}}catch{}}},[U,a]),L.useEffect(()=>{!W&&U&&localStorage.setItem(Ju,JSON.stringify({users:a,candidates:c,candidateProfiles:d,interviews:m,accounts:v,transactions:C,trainingModules:w,trainingTopics:b,trainingLogs:A,interviewModules:N,interviewQuestions:ie,activityLogs:P,candidateStatuses:j}))},[a,c,d,m,v,C,w,b,A,N,ie,P,j,W,U]);const re=async(D,F)=>{if(!D||!F)return{success:!1,message:"Missing credentials"};const $=a.find(Ne=>Ne.username.toLowerCase()===D.toLowerCase());return $&&$.password===F?(n($),localStorage.setItem(ll,JSON.stringify({userId:$.id,timestamp:Date.now()})),Y("LOGIN","User logged in","User",$.id),{success:!0}):{success:!1,message:"Invalid credentials"}},Be=()=>{n(null),localStorage.removeItem(ll)},Wr=D=>{o(F=>[...F,D]),W&&ce.saveItem("users",D),Y("CREATE",`User added: ${D.name}`,"User",D.id)},wn=D=>{o(F=>F.map($=>$.id===D.id?D:$)),W&&ce.updateItem("users",D.id,D),(e==null?void 0:e.id)===D.id&&n(D),Y("UPDATE",`User updated: ${D.name}`,"User",D.id)},Ln=D=>{o(F=>F.filter($=>$.id!==D)),W&&ce.deleteItem("users",D),Y("DELETE","User deleted","User",D)},Jc=D=>{u(F=>[...F,D]),W&&ce.saveItem("candidates",D),Y("CREATE",`Candidate added: ${D.name}`,"Candidate",D.id)},Hr=D=>{u(F=>F.map($=>$.id===D.id?D:$)),W&&ce.updateItem("candidates",D.id,D)},Pi=D=>{u(F=>F.filter($=>$.id!==D)),W&&ce.deleteItem("candidates",D),Y("DELETE","Candidate deleted","Candidate",D)},go=D=>{f(F=>F.find(Ne=>Ne.candidateId===D.candidateId)?F.map(Ne=>Ne.candidateId===D.candidateId?D:Ne):[...F,D]),W&&ce.saveItem("candidateProfiles",{...D,id:D.candidateId})},Zc=D=>{g(F=>[...F,D]),W&&ce.saveItem("interviews",D)},Ri=D=>{g(F=>F.map($=>$.id===D.id?D:$)),W&&ce.updateItem("interviews",D.id,D)},Di=D=>{g(F=>F.filter($=>$.id!==D)),W&&ce.deleteItem("interviews",D)},xo=D=>{T(F=>[...F,D]),W&&ce.saveItem("accounts",D)},dt=D=>{T(F=>F.map($=>$.id===D.id?D:$)),W&&ce.updateItem("accounts",D.id,D)},gt=D=>{T(F=>F.filter($=>$.id!==D)),W&&ce.deleteItem("accounts",D)},Cs=D=>{I(F=>[...F,D]),W&&ce.saveItem("transactions",D),Y("CREATE",`${D.type} of ${D.amount}`,"Transaction",D.id)},yo=D=>{I(F=>F.map($=>$.id===D.id?D:$)),W&&ce.updateItem("transactions",D.id,D)},vo=D=>{I(F=>F.filter($=>$.id!==D)),W&&ce.deleteItem("transactions",D)},eu=D=>{const F=C.find($=>$.id===D);F&&yo({...F,isLocked:!0})},qr=D=>{p(F=>[...F,D]),W&&ce.saveItem("trainingModules",D)},wo=D=>{p(F=>F.map($=>$.id===D.id?D:$)),W&&ce.updateItem("trainingModules",D.id,D)},bo=D=>{p(F=>F.filter($=>$.id!==D)),W&&ce.deleteItem("trainingModules",D)},Li=D=>{k(F=>[...F,D]),W&&ce.saveItem("trainingTopics",D)},tu=D=>{k(F=>F.map($=>$.id===D.id?D:$)),W&&ce.updateItem("trainingTopics",D.id,D)},nu=D=>{k(F=>F.filter($=>$.id!==D)),W&&ce.deleteItem("trainingTopics",D)},jo=D=>{M(F=>[...F,D]),W&&ce.saveItem("trainingLogs",D)},_o=D=>{M(F=>{const $=[...F];return D.forEach(Ne=>{const $e=$.findIndex(yt=>yt.id===Ne.id);$e>=0?$[$e]=Ne:$.push(Ne)}),$}),W&&ce.uploadBatch("trainingLogs",D)},Qr=D=>{J(F=>[...F,D]),W&&ce.saveItem("interviewModules",D)},Mi=D=>{J(F=>F.map($=>$.id===D.id?D:$)),W&&ce.updateItem("interviewModules",D.id,D)},Vi=D=>{J(F=>F.filter($=>$.id!==D)),W&&ce.deleteItem("interviewModules",D)},Mn=D=>{Ae(F=>[...F,D]),W&&ce.saveItem("interviewQuestions",D)},No=D=>{Ae(F=>F.map($=>$.id===D.id?D:$)),W&&ce.updateItem("interviewQuestions",D.id,D)},Ss=D=>{Ae(F=>F.filter($=>$.id!==D)),W&&ce.deleteItem("interviewQuestions",D)},Eo=()=>{R([]),W&&de("Cloud logs must be cleared manually in console.","info")},Gr=D=>{j.includes(D)||y(F=>[...F,D])},To=D=>{const F=c.find($=>$.id===D);F&&Hr({...F,agreementSentDate:new Date().toISOString()})},xt=D=>{const F=c.find($=>$.id===D);F&&Hr({...F,agreementAcceptedDate:new Date().toISOString(),agreementRejectedDate:void 0,agreementRejectionReason:void 0})},Co=(D,F)=>{const $=c.find(Ne=>Ne.id===D);$&&Hr({...$,agreementRejectedDate:new Date().toISOString(),agreementRejectionReason:F,agreementAcceptedDate:void 0})},Kr=D=>S(F=>[...F,{id:Lt(),username:D,requestDate:new Date().toISOString(),status:"pending"}]),Yr=D=>S(F=>F.filter($=>$.id!==D)),Oi=(D,F)=>{var $,Ne,$e;return F==="Account"?(($=v.find(yt=>yt.id===D))==null?void 0:$.name)||"Unknown":F==="Candidate"?((Ne=c.find(yt=>yt.id===D))==null?void 0:Ne.name)||"Unknown":(($e=a.find(yt=>yt.id===D))==null?void 0:$e.name)||"Unknown"},Xr=(D,F)=>{const $=v.find(Ne=>Ne.id===D);return ua(D,F,C,($==null?void 0:$.openingBalance)||0,$==null?void 0:$.type)},Jn=()=>{vj({users:a,candidates:c,candidateProfiles:d,interviews:m,accounts:v,transactions:C,trainingModules:w,trainingTopics:b,trainingLogs:A,interviewModules:N,interviewQuestions:ie,activityLogs:P,candidateStatuses:j},`SPR_Backup_${new Date().toISOString().split("T")[0]}.json`)},ru=()=>{const D=c.map(K=>{const ve=C.filter(Ue=>Ue.fromEntityId===K.id&&Ue.type===xe.Income).reduce((Ue,Ps)=>Ue+Ps.amount,0)-C.filter(Ue=>Ue.toEntityId===K.id&&Ue.type===xe.Refund).reduce((Ue,Ps)=>Ue+Ps.amount,0);return{"Full Name":K.name,"Batch ID":K.batchId,Email:K.email,Phone:K.phone,"Agreed Amount":K.agreedAmount,"Paid Amount":ve,"Balance Due":K.agreedAmount-ve,Status:K.status,Active:K.isActive?"Yes":"No","Joined Date":new Date(K.joinedDate).toLocaleDateString()}}),F=[...C].sort((K,ve)=>new Date(ve.date).getTime()-new Date(K.date).getTime()).map(K=>({Date:new Date(K.date).toLocaleDateString(),Type:K.type,Description:K.description,"From (Source)":Oi(K.fromEntityId,K.fromEntityType),"To (Dest)":Oi(K.toEntityId,K.toEntityType),Amount:K.amount,Locked:K.isLocked?"Yes":"No"})),$=v.filter(K=>K.type===pe.Debtor).map(K=>{const ve=Xr(K.id,"Account");return{Entity:K.name,Type:"Sundry Debtor","Amount Owed":ve>0?ve:0}}).filter(K=>K["Amount Owed"]>0),Ne=v.filter(K=>K.type===pe.Creditor||K.type===pe.Salary||K.type===pe.Expense).map(K=>{const ve=Xr(K.id,"Account");return{Entity:K.name,Type:K.type,"Amount Payable (Debt)":ve<0?Math.abs(ve):0}}).filter(K=>K["Amount Payable (Debt)"]>0),$e=D.reduce((K,ve)=>K+(ve["Balance Due"]>0?ve["Balance Due"]:0),0)+v.filter(K=>[pe.Bank,pe.Cash,pe.Debtor].includes(K.type)).reduce((K,ve)=>K+Math.max(0,Xr(ve.id,"Account")),0),yt=Ne.reduce((K,ve)=>K+ve["Amount Payable (Debt)"],0),Is=[{Component:"Current Assets (Cash/Bank)",Value:v.filter(K=>[pe.Cash,pe.Bank].includes(K.type)).reduce((K,ve)=>K+Xr(ve.id,"Account"),0)},{Component:"Accounts Receivable (Candidates)",Value:D.reduce((K,ve)=>K+(ve["Balance Due"]>0?ve["Balance Due"]:0),0)},{Component:"Other Receivables (Sundry Debtors)",Value:$.reduce((K,ve)=>K+ve["Amount Owed"],0)},{Component:"--- TOTAL ASSETS ---",Value:$e},{Component:"",Value:""},{Component:"Current Liabilities (Debts/Creditors/Salary)",Value:yt},{Component:"Owner Equity (Calculated)",Value:$e-yt},{Component:"--- TOTAL LIABILITIES & EQUITY ---",Value:$e}],Vn=C.filter(K=>{if(K.type!==xe.Income)return!1;if(K.fromEntityType==="Candidate")return!0;if(K.fromEntityType==="Account"){const ve=v.find(Ue=>Ue.id===K.fromEntityId);return(ve==null?void 0:ve.type)===pe.Income}return!1}).reduce((K,ve)=>K+ve.amount,0),Zn=C.filter(K=>K.type===xe.Payment).reduce((K,ve)=>K+ve.amount,0),Fi=[{Particulars:"Operating Revenue (Training Fees)",Amount:Vn},{Particulars:"Total Revenue (A)",Amount:Vn},{Particulars:"",Amount:""},{Particulars:"Operating Expenses (Rent/Admin/Salaries)",Amount:Zn},{Particulars:"Total Expenses (B)",Amount:Zn},{Particulars:"",Amount:""},{Particulars:"NET OPERATING PROFIT (A - B)",Amount:Vn-Zn}];wj([{name:"Candidates",data:D},{name:"Transactions",data:F},{name:"Sundry Debtors",data:$},{name:"Debts and Creditors",data:Ne},{name:"Balance Sheet",data:Is},{name:"Profit and Loss",data:Fi}],`SPR_Techforge_Full_Report_${new Date().toISOString().split("T")[0]}.xls`),de("Multi-sheet report generated successfully")},So=async D=>{try{if(D.users&&o(D.users),D.candidates&&u(D.candidates),D.candidateProfiles&&f(D.candidateProfiles),D.interviews&&g(D.interviews),D.accounts&&T(D.accounts),D.transactions&&I(D.transactions),D.trainingModules&&p(D.trainingModules),D.trainingTopics&&k(D.trainingTopics),D.trainingLogs&&M(D.trainingLogs),D.interviewModules&&J(D.interviewModules),D.interviewQuestions&&Ae(D.interviewQuestions),D.activityLogs&&R(D.activityLogs),D.candidateStatuses&&y(D.candidateStatuses),W){de("Restoring to Cloud... please wait","info");const F=[{name:"users",data:D.users},{name:"candidates",data:D.candidates},{name:"candidateProfiles",data:D.candidateProfiles},{name:"interviews",data:D.interviews},{name:"accounts",data:D.accounts},{name:"transactions",data:D.transactions},{name:"trainingModules",data:D.trainingModules},{name:"trainingTopics",data:D.trainingTopics},{name:"trainingLogs",data:D.trainingLogs},{name:"interviewModules",data:D.interviewModules},{name:"interviewQuestions",data:D.interviewQuestions},{name:"activityLogs",data:D.activityLogs}];for(const $ of F)$.data&&$.data.length>0&&await ce.uploadBatch($.name,$.data)}de("Database restored successfully!","success"),Y("RESTORE","Database restored from backup file","System")}catch(F){console.error(F),de("Restore failed: Invalid data format","error")}},ks=()=>{window.confirm("CRITICAL: This will delete ALL local data and reset the app to factory defaults. Are you sure?")&&(localStorage.removeItem(Ju),localStorage.removeItem(ll),window.location.reload())},ko=async()=>{if(W)try{de("Syncing all local data to cloud...","info"),await So({users:a,candidates:c,candidateProfiles:d,interviews:m,accounts:v,transactions:C,trainingModules:w,trainingTopics:b,trainingLogs:A,interviewModules:N,interviewQuestions:ie,activityLogs:P,candidateStatuses:j})}catch{de("Sync failed","error")}};return i.jsx(j1.Provider,{value:{user:e,login:re,logout:Be,isInitialized:r,toast:Fe,showToast:de,users:a,addUser:Wr,updateUser:wn,deleteUser:Ln,candidates:c,addCandidate:Jc,updateCandidate:Hr,deleteCandidate:Pi,candidateProfiles:d,updateCandidateProfile:go,interviews:m,addInterview:Zc,updateInterview:Ri,deleteInterview:Di,accounts:v,addAccount:xo,updateAccount:dt,deleteAccount:gt,transactions:C,addTransaction:Cs,updateTransaction:yo,deleteTransaction:vo,lockTransaction:eu,trainingModules:w,addTrainingModule:qr,updateTrainingModule:wo,deleteTrainingModule:bo,trainingTopics:b,addTrainingTopic:Li,updateTrainingTopic:tu,deleteTrainingTopic:nu,trainingLogs:A,addTrainingLog:jo,batchUpdateTrainingLogs:_o,interviewModules:N,addInterviewModule:Qr,updateInterviewModule:Mi,deleteInterviewModule:Vi,interviewQuestions:ie,addInterviewQuestion:Mn,updateInterviewQuestion:No,deleteInterviewQuestion:Ss,candidateStatuses:j,addCandidateStatus:Gr,passwordResetRequests:_,addPasswordResetRequest:Kr,resolvePasswordResetRequest:Yr,activityLogs:P,clearActivityLogs:Eo,markAgreementSent:To,markAgreementAccepted:xt,markAgreementRejected:Co,getEntityName:Oi,getEntityBalance:Xr,exportData:Jn,exportFullExcel:ru,importDatabase:So,factoryReset:ks,isCloudEnabled:W,syncLocalToCloud:ko,cloudError:te},children:t})},ne=({children:t,className:e="",title:n,action:r})=>i.jsxs("div",{className:`bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden ${e}`,children:[(n||r)&&i.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[n&&i.jsx("h3",{className:"text-lg font-bold text-gray-800",children:n}),r&&i.jsx("div",{children:r})]}),i.jsx("div",{className:"p-6 text-gray-600",children:t})]}),G=({children:t,variant:e="primary",className:n="",...r})=>{const s="px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white shadow-sm",a={primary:"bg-spr-accent hover:bg-spr-accent_hover text-white focus:ring-blue-500",secondary:"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-gray-200",danger:"bg-spr-danger hover:bg-red-700 text-white focus:ring-red-500",success:"bg-spr-success hover:bg-emerald-700 text-white focus:ring-emerald-500",outline:"bg-transparent border border-white text-white hover:bg-white/10"};return i.jsx("button",{className:`${s} ${a[e]} ${n} disabled:opacity-50 disabled:cursor-not-allowed`,...r,children:t})},Vr=({className:t=""})=>{const e=Et();return i.jsxs("button",{onClick:()=>e(-1),className:`flex items-center text-gray-500 hover:text-gray-800 transition-colors ${t}`,title:"Go Back",children:[i.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),i.jsx("span",{className:"text-sm font-medium",children:"Back"})]})},me=({label:t,numericOnly:e,className:n="",onChange:r,...s})=>{const[a,o]=L.useState(!1),c=()=>s.type==="number"&&a&&Number(s.value)===0?"":s.value,u=d=>{if(e){const f=d.target.value.replace(/[^0-9]/g,"");d.target.value!==f&&(d.target.value=f)}r&&r(d)};return i.jsxs("div",{className:"mb-4",children:[t&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),i.jsx("input",{className:`w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 placeholder-gray-400 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors shadow-sm ${n}`,...s,onChange:u,value:c(),onFocus:d=>{o(!0),s.onFocus&&s.onFocus(d)},onBlur:d=>{o(!1),s.onBlur&&s.onBlur(d)}})]})},Ts=({onClear:t,value:e,className:n="",containerClassName:r="",...s})=>{const a=L.useRef(null),o=c=>{var u;c.preventDefault(),t(),(u=a.current)==null||u.focus()};return i.jsxs("div",{className:`relative ${r}`,children:[i.jsx("input",{...s,ref:a,value:e,className:`w-full bg-white border border-gray-300 rounded-lg pl-4 pr-10 py-2 text-gray-900 placeholder-gray-400 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors shadow-sm ${n}`}),e&&i.jsx("button",{type:"button",onClick:o,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100 transition-all",title:"Clear search",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},_1=({label:t,children:e,className:n="",...r})=>i.jsxs("div",{className:"mb-4",children:[t&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),i.jsx("select",{className:`w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors shadow-sm ${n}`,...r,children:e})]}),em=({currentPage:t,totalPages:e,onPageChange:n})=>e<=1?null:i.jsxs("div",{className:"flex justify-center items-center gap-2 mt-6",children:[i.jsx(G,{variant:"secondary",disabled:t===1,onClick:()=>n(t-1),className:"px-3 py-1 text-sm",children:"Prev"}),i.jsxs("span",{className:"text-gray-600 text-sm font-medium",children:["Page ",t," of ",e]}),i.jsx(G,{variant:"secondary",disabled:t===e,onClick:()=>n(t+1),className:"px-3 py-1 text-sm",children:"Next"})]}),en=({isOpen:t,onClose:e,title:n,children:r,size:s="md"})=>{if(L.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const a={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl","2xl":"max-w-6xl",full:"max-w-[95vw]"}[s];return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:i.jsxs("div",{className:`bg-white border border-gray-200 rounded-xl shadow-2xl w-full ${a} max-h-[90vh] overflow-y-auto transform transition-all scale-100 flex flex-col`,children:[i.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 sticky top-0 bg-white z-10 shrink-0",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n}),i.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors p-1 rounded hover:bg-gray-100",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"p-6 text-gray-600 flex-1 overflow-y-auto",children:r})]})})},Ai=({isOpen:t,onClose:e,onConfirm:n,title:r,message:s})=>i.jsx(en,{isOpen:t,onClose:e,title:r,children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:s}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(G,{variant:"secondary",onClick:e,children:"Cancel"}),i.jsx(G,{variant:"danger",onClick:()=>{n(),e()},children:"Delete"})]})]})}),j4=()=>{const{toast:t}=Ce();if(!t)return null;const e=t.type==="success"?"bg-emerald-600":t.type==="error"?"bg-red-600":"bg-blue-600",n=t.type==="success"?i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):t.type==="error"?i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});return i.jsx("div",{className:"fixed top-4 right-4 z-[100] animate-fade-in",children:i.jsxs("div",{className:`${e} text-white px-4 py-3 rounded-lg shadow-xl flex items-center gap-3 min-w-[300px]`,children:[i.jsx("div",{className:"shrink-0",children:n}),i.jsx("span",{className:"font-medium text-sm",children:t.message})]})})},bi=({size:t="sm",inverse:e=!1})=>{const n=t==="lg"?240:160,r=t==="lg"?100:70;return i.jsxs("div",{className:`flex items-center gap-2 ${t==="lg"?"flex-col":""}`,children:[i.jsxs("svg",{width:n,height:r,viewBox:"0 0 200 80",xmlns:"http://www.w3.org/2000/svg",children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"logoTextGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:e?"#FFFFFF":"#4fa8ff"}),i.jsx("stop",{offset:"100%",stopColor:e?"#e0e7ff":"#1e40af"})]}),i.jsxs("linearGradient",{id:"logoOrbitGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[i.jsx("stop",{offset:"0%",stopColor:"#fbbf24"}),i.jsx("stop",{offset:"50%",stopColor:"#f59e0b"}),i.jsx("stop",{offset:"100%",stopColor:"#ea580c"})]}),i.jsxs("linearGradient",{id:"logoBaseGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:e?"#93c5fd":"#1e40af"}),i.jsx("stop",{offset:"100%",stopColor:e?"#3b82f6":"#0f172a"})]}),i.jsxs("filter",{id:"logoShadow",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[i.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"1.5"}),i.jsx("feOffset",{dx:"1",dy:"1",result:"offsetblur"}),i.jsx("feComponentTransfer",{children:i.jsx("feFuncA",{type:"linear",slope:"0.4"})}),i.jsxs("feMerge",{children:[i.jsx("feMergeNode",{}),i.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),i.jsx("path",{d:"M30 55 C 50 72, 130 75, 175 50 C 150 70, 70 85, 30 55",fill:"url(#logoBaseGradient)",opacity:"1"}),i.jsx("ellipse",{cx:"102",cy:"42",rx:"88",ry:"24",stroke:"url(#logoOrbitGradient)",strokeWidth:"7",fill:"none",transform:"rotate(-5, 102, 42)",strokeLinecap:"round"}),i.jsx("text",{x:"100",y:"55",textAnchor:"middle",fontSize:"52",fontWeight:"900",fontStyle:"italic",fill:"url(#logoTextGradient)",fontFamily:"'Arial Black', sans-serif",style:{letterSpacing:"-3px",filter:"url(#logoShadow)"},children:"SPR"}),i.jsx("path",{d:"M14 42 C 14 30, 60 25, 100 25",stroke:"url(#logoOrbitGradient)",strokeWidth:"7",fill:"none",transform:"rotate(-5, 102, 42)",strokeLinecap:"round"})]}),t==="lg"&&i.jsx("div",{className:`font-black tracking-[0.25em] text-2xl uppercase -mt-4 drop-shadow-sm ${e?"text-white":"text-spr-900"}`,children:"Techforge"})]})},et=({to:t,icon:e,label:n,onClick:r,isSidebarCollapsed:s,setIsSidebarCollapsed:a})=>{const o=js();let c=o.pathname===t;!c&&o.pathname.startsWith(t)&&t!=="/"&&(t==="/candidates"&&o.pathname.startsWith("/candidates/info")?c=!1:c=!0);const u=d=>{s&&a&&a(!1),r&&r()};return i.jsxs(rt,{to:t,onClick:u,title:s?n:"",className:`flex items-center gap-3 px-4 py-2.5 rounded-lg transition-all duration-200 mb-1 font-medium text-sm overflow-hidden whitespace-nowrap ${c?"bg-spr-accent text-white shadow-md":"text-gray-600 hover:bg-spr-50 hover:text-spr-900"} ${s?"justify-center px-0":""}`,children:[e&&i.jsx("span",{className:`shrink-0 flex items-center justify-center transition-transform duration-200 ${s?"w-10 h-10 bg-gray-50/50 rounded-lg group-hover:scale-110":"w-5"}`,children:i.jsx("div",{className:c&&s?"text-white":"",children:e})}),!s&&i.jsx("span",{className:"transition-opacity duration-200",children:n})]})},ia=({id:t,title:e,icon:n,children:r,isSidebarCollapsed:s,setIsSidebarCollapsed:a,openGroupId:o,setOpenGroupId:c})=>{const u=js(),f=ka.Children.toArray(r).some(v=>{var T;return(T=v.props)!=null&&T.to?u.pathname===v.props.to||v.props.to!=="/"&&u.pathname.startsWith(v.props.to):!1}),m=o===t;L.useEffect(()=>{f&&!s&&o===null&&c(t)},[u.pathname,f,s]);const g=()=>{if(s){a(!1),c(t);return}c(m?null:t)};return i.jsxs("div",{className:"mb-1",children:[i.jsxs("button",{onClick:g,title:s?e:"",className:`w-full flex items-center justify-between px-4 py-3 text-gray-700 hover:bg-spr-50 rounded-lg transition-all duration-200 group ${m&&!s?"bg-spr-50":""} ${s?"justify-center px-0":""}`,children:[i.jsxs("div",{className:`flex items-center gap-3 overflow-hidden ${s?"w-full justify-center":""}`,children:[i.jsx("div",{className:`flex items-center justify-center transition-colors ${m&&!s?"text-spr-600":"text-gray-500"} group-hover:text-spr-600 ${s?"w-10 h-10 bg-gray-50 rounded-lg scale-110 shadow-sm border border-gray-100":"w-5"}`,children:n}),!s&&i.jsx("span",{className:`text-sm whitespace-nowrap ${m?"font-bold text-gray-900":"font-medium"}`,children:e})]}),!s&&i.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${m?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${m&&!s?"max-h-[500px] opacity-100 mt-1":"max-h-0 opacity-0"}`,children:!s&&i.jsx("div",{className:"pl-4 border-l-2 border-spr-100 ml-6 space-y-1",children:r})})]})},Ie=({children:t})=>{const{user:e,logout:n}=Ce(),[r,s]=L.useState(!1),[a,o]=L.useState(!1),[c,u]=L.useState(null),d=Et();if(!e)return i.jsx(i.Fragment,{children:t});const f=()=>s(!1),m=()=>{n(),d("/")},g=e.username==="thirumalreddy@sprtechforge.com";return i.jsxs("div",{className:"min-h-screen bg-white flex flex-col md:flex-row text-slate-900 overflow-hidden",children:[i.jsxs("div",{className:"md:hidden bg-white border-b border-gray-200 p-4 flex justify-between items-center sticky top-0 z-40",children:[i.jsx(bi,{size:"sm"}),i.jsx("button",{onClick:()=>s(!r),className:"text-gray-600",children:i.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:r?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]}),r&&i.jsx("div",{className:"md:hidden fixed inset-0 bg-black/50 z-30",onClick:f}),i.jsxs("aside",{className:`bg-white border-r border-gray-200 flex-shrink-0 fixed md:static inset-y-0 left-0 z-30 transition-all duration-300 ease-in-out ${a?"w-24":"w-64"} ${r?"translate-x-0 shadow-2xl w-64":"-translate-x-full md:translate-x-0"}`,children:[i.jsxs("div",{className:"p-5 border-b border-gray-100 hidden md:flex items-center justify-between overflow-hidden relative",children:[i.jsx("div",{className:`transition-all duration-300 ${a?"opacity-0 w-0":"opacity-100 w-auto"}`,children:i.jsx(bi,{size:"sm"})}),a&&i.jsx("div",{className:"mx-auto bg-spr-900 w-12 h-12 rounded-xl flex items-center justify-center text-white font-black text-xs shadow-lg shadow-blue-100",children:"SPR"}),i.jsx("button",{onClick:()=>o(!a),className:`p-1.5 rounded-lg bg-gray-50 text-gray-400 hover:text-spr-600 hover:bg-spr-50 transition-colors ${a?"hidden":"block"}`,children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),a&&i.jsx("button",{onClick:()=>o(!1),className:"absolute top-5 right-1 p-1 bg-white border border-gray-200 rounded-full shadow-md text-gray-400 hover:text-spr-600 z-10",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]}),i.jsxs("nav",{className:"p-3 overflow-y-auto h-[calc(100vh-80px)] scrollbar-hide",children:[e.role!=="candidate"?i.jsxs(i.Fragment,{children:[i.jsxs(ia,{id:"overview",isSidebarCollapsed:a,setIsSidebarCollapsed:o,openGroupId:c,setOpenGroupId:u,title:"Overview",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),children:[i.jsx(et,{to:"/dashboard",label:"Dashboard",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(et,{to:"/address-book",label:"Address Book",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o})]}),i.jsxs(ia,{id:"candidates",isSidebarCollapsed:a,setIsSidebarCollapsed:o,openGroupId:c,setOpenGroupId:u,title:"Candidates",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),children:[i.jsx(et,{to:"/candidates",label:"Candidate List",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(et,{to:"/candidates/info",label:"Candidate Info (Profile)",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o})]}),i.jsxs(ia,{id:"training",isSidebarCollapsed:a,setIsSidebarCollapsed:o,openGroupId:c,setOpenGroupId:u,title:"Training",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),children:[i.jsx(et,{to:"/training/interviews",label:"Interviews & Resumes",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(et,{to:"/training/monitor",label:"Progress Monitor",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(et,{to:"/training/attendance",label:"Class Attendance",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(et,{to:"/training/curriculum",label:"Curriculum",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(et,{to:"/training/interview-questions",label:"Interview Prep",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o})]}),g&&i.jsxs(ia,{id:"finance",isSidebarCollapsed:a,setIsSidebarCollapsed:o,openGroupId:c,setOpenGroupId:u,title:"Finance",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),children:[i.jsx(et,{to:"/finance/transactions",label:"Transactions",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(et,{to:"/finance/accounts",label:"Ledger Accounts",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(et,{to:"/finance/payroll",label:"Payroll",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),i.jsx(et,{to:"/finance/financial-statements",label:"Reports",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o})]}),i.jsxs(ia,{id:"admin",isSidebarCollapsed:a,setIsSidebarCollapsed:o,openGroupId:c,setOpenGroupId:u,title:"Admin",icon:i.jsxs("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),children:[i.jsx(et,{to:"/admin/users",label:"Users",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),g&&i.jsx(et,{to:"/admin/logs",label:"System Logs",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o}),g&&i.jsx(et,{to:"/admin/cloud",label:"Cloud Setup",onClick:f,isSidebarCollapsed:a,setIsSidebarCollapsed:o})]})]}):i.jsxs(i.Fragment,{children:[!a&&i.jsx("div",{className:"px-4 mb-2 text-xs font-bold text-gray-400 uppercase",children:"Student Portal"}),i.jsx(et,{isSidebarCollapsed:a,setIsSidebarCollapsed:o,to:"/candidates/info",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),label:"My Profile",onClick:f}),i.jsx(et,{isSidebarCollapsed:a,setIsSidebarCollapsed:o,to:"/training/dashboard",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),label:"Training Stats",onClick:f}),i.jsx(et,{isSidebarCollapsed:a,setIsSidebarCollapsed:o,to:"/training/interview-questions",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),label:"Interview Prep",onClick:f}),i.jsx(et,{isSidebarCollapsed:a,setIsSidebarCollapsed:o,to:"/training/curriculum",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),label:"Curriculum",onClick:f})]}),i.jsxs("div",{className:"mt-8 px-2 pb-4",children:[a?i.jsx("div",{className:"h-px bg-gray-200 mb-4 mx-2"}):i.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100 mb-3 overflow-hidden shadow-sm",children:[i.jsx("p",{className:"text-sm font-bold text-gray-800 truncate",children:e.name}),i.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:e.role})]}),i.jsxs("button",{onClick:m,title:"Sign Out",className:`flex items-center gap-3 w-full px-4 py-2.5 rounded-lg transition-colors font-bold text-sm text-red-600 hover:bg-red-50 overflow-hidden whitespace-nowrap ${a?"justify-center px-0":""}`,children:[i.jsx("div",{className:`shrink-0 flex items-center justify-center ${a?"w-10 h-10 bg-red-50 rounded-lg shadow-sm border border-red-100":"w-5"}`,children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),!a&&i.jsx("span",{children:"Sign Out"})]})]})]})]}),i.jsx("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto h-[calc(100vh-64px)] md:h-screen w-full transition-all duration-300",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:t})})]})},_4=()=>{const{login:t,updateUser:e,user:n,isCloudEnabled:r,cloudError:s,addPasswordResetRequest:a,showToast:o}=Ce(),c=Et(),[u,d]=L.useState(""),[f,m]=L.useState(""),[g,v]=L.useState(""),[T,C]=L.useState(!1),[I,j]=L.useState(!1),[y,_]=L.useState(""),[S,P]=L.useState(""),[R,w]=L.useState(!1),[p,b]=L.useState(""),[k,A]=L.useState("");L.useEffect(()=>{n&&n.isPasswordChanged!==!1?c("/dashboard"):n&&n.isPasswordChanged===!1&&j(!0)},[n,c]);const M=async ie=>{ie.preventDefault(),C(!0),v("");const Ae=await t(u,f);Ae.success?(o("Login successful"),C(!1)):(v(Ae.message||"Login failed"),C(!1))},N=ie=>{if(ie.preventDefault(),y!==S){v("Passwords do not match");return}if(y.length<4){v("Password is too short");return}if(y===(n==null?void 0:n.name)){v("New password cannot be the same as your name");return}n&&(e({...n,password:y,isPasswordChanged:!0}),o("Password updated successfully. You are now logged in."))},J=ie=>{ie.preventDefault(),p.trim()&&(a(p),A("Request sent to Admin. Please contact Thirumal Reddy for your new password."),setTimeout(()=>{w(!1),A(""),b("")},4e3))};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4 relative overflow-hidden",children:[i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 bg-slate-50",children:[i.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-96 h-96 bg-blue-200/50 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-96 h-96 bg-indigo-200/50 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute top-[40%] left-[40%] w-72 h-72 bg-sky-100/40 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"w-full max-w-md z-20",children:[i.jsx("div",{className:"mb-4",children:i.jsxs(rt,{to:"/",className:"inline-flex items-center text-gray-500 hover:text-spr-600 transition-colors text-sm font-medium",children:[i.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Website"]})}),s&&i.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-lg shadow-sm animate-fade-in",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("svg",{className:"w-6 h-6 text-red-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-red-800 font-bold text-sm",children:"Connectivity Issue"}),i.jsx("p",{className:"text-red-600 text-sm",children:s}),s.includes("Permission")&&i.jsx("button",{onClick:()=>c("/admin/cloud"),className:"text-xs text-red-700 underline mt-1",children:"Go to Cloud Setup for fix"})]})]})}),i.jsxs("div",{className:"bg-white/80 border border-white/50 p-8 rounded-2xl shadow-2xl relative backdrop-blur-md",children:[i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx(bi,{size:"lg"})}),I?i.jsxs("div",{className:"animate-fade-in",children:[i.jsx("h2",{className:"text-2xl font-bold text-center text-slate-800 mb-2",children:"Secure Your Account"}),i.jsx("p",{className:"text-center text-slate-500 mb-6 text-sm",children:"This is your first login. Please set a new, secure password to continue to the dashboard."}),i.jsxs("form",{onSubmit:N,children:[i.jsx(me,{label:"New Password",type:"password",value:y,onChange:ie=>_(ie.target.value),required:!0}),i.jsx(me,{label:"Confirm Password",type:"password",value:S,onChange:ie=>P(ie.target.value),required:!0}),g&&i.jsx("p",{className:"text-red-500 text-sm mb-4 text-center",children:g}),i.jsx(G,{type:"submit",className:"w-full py-3 text-lg shadow-lg shadow-blue-100",children:"Update Password & Login"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("h2",{className:"text-2xl font-bold text-center text-slate-800 mb-2",children:"Portal Login"}),i.jsx("p",{className:"text-center text-slate-500 mb-6",children:"Sign in to manage SPR Techforge"}),i.jsxs("form",{onSubmit:M,children:[i.jsx(me,{label:"Username / Login ID",value:u,onChange:ie=>d(ie.target.value),placeholder:"name@sprtechforge.com"}),i.jsx(me,{label:"Password",type:"password",value:f,onChange:ie=>m(ie.target.value),placeholder:"Enter password"}),g&&i.jsx("p",{className:"text-red-500 text-sm mb-4 text-center",children:g}),i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsx("button",{type:"button",onClick:()=>w(!0),className:"text-sm text-spr-accent hover:text-spr-accent_hover hover:underline font-medium",children:"Forgot Password?"})}),i.jsx(G,{type:"submit",className:"w-full py-3 text-lg shadow-lg shadow-blue-100 hover:shadow-blue-200",disabled:T,children:T?"Authenticating...":"Login"})]})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-xs text-slate-400",children:[" 2025 SPR Techforge Pvt Ltd. All rights reserved.",r&&i.jsxs("span",{className:"block mt-1 text-slate-500 font-bold flex items-center justify-center gap-1",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})," Cloud Connected"]})]})})]})]}),i.jsx(en,{isOpen:R,onClose:()=>w(!1),title:"Reset Password",children:k?i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"text-spr-accent font-bold text-lg mb-2",children:"Request Sent"}),i.jsx("p",{className:"text-gray-600",children:k})]}):i.jsxs("form",{onSubmit:J,children:[i.jsx("p",{className:"text-gray-600 mb-4",children:"Enter your Login ID below. The administrator will be notified to reset your password."}),i.jsx(me,{label:"Your Username / Login ID",value:p,onChange:ie=>b(ie.target.value),placeholder:"spr@sprtechforge.com",required:!0}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(G,{type:"button",variant:"secondary",onClick:()=>w(!1),children:"Cancel"}),i.jsx(G,{type:"submit",children:"Send Request"})]})]})})]})},N4=()=>{const t=Et(),[e,n]=L.useState(!1),[r,s]=L.useState(!1),[a,o]=L.useState(null);L.useEffect(()=>{const u=()=>{n(window.scrollY>30)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const c=()=>{var u;s(!1),(u=document.getElementById("contact"))==null||u.scrollIntoView({behavior:"smooth"})};return i.jsxs("div",{className:"min-h-screen bg-white font-sans text-gray-900 overflow-x-hidden",children:[i.jsxs("nav",{className:`fixed w-full z-50 transition-all duration-300 border-b ${e?"bg-white shadow-xl py-1 md:py-2 border-gray-100":"bg-spr-900/10 backdrop-blur-md py-4 md:py-6 border-transparent"}`,children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-16 md:h-20",children:[i.jsx("div",{className:"flex items-center",children:i.jsx(bi,{size:"sm",inverse:!e})}),i.jsxs("div",{className:"hidden md:flex items-center space-x-10",children:[i.jsx("a",{href:"#",className:`text-sm font-black uppercase tracking-widest transition-colors ${e?"text-gray-700 hover:text-spr-600":"text-white hover:text-blue-300"}`,children:"Services"}),i.jsx("a",{href:"#",className:`text-sm font-black uppercase tracking-widest transition-colors ${e?"text-gray-700 hover:text-spr-600":"text-white hover:text-blue-300"}`,children:"Industries"}),i.jsx("a",{href:"#",className:`text-sm font-black uppercase tracking-widest transition-colors ${e?"text-gray-700 hover:text-spr-600":"text-white hover:text-blue-300"}`,children:"Insights"}),i.jsx("button",{onClick:()=>o("careers"),className:`text-sm font-black uppercase tracking-widest transition-colors ${e?"text-gray-700 hover:text-spr-600":"text-white hover:text-blue-300"}`,children:"Careers"})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[i.jsx("button",{onClick:c,className:`text-sm font-black uppercase tracking-[0.2em] transition-colors ${e?"text-gray-900 hover:text-spr-600":"text-white hover:text-blue-400"}`,children:"Contact Us"}),i.jsx("div",{className:`h-8 w-px ${e?"bg-gray-300":"bg-white/30"}`}),i.jsx(G,{onClick:()=>t("/login"),className:`px-10 rounded-full font-black shadow-[0_10px_30px_rgba(0,0,0,0.1)] transition-all hover:scale-110 hover:shadow-[0_15px_35px_rgba(0,0,0,0.2)] active:scale-95 h-12 border-none ${e?"bg-spr-900 text-white":"bg-white !text-spr-900 ring-2 ring-white/20"}`,children:"LOGIN"})]}),i.jsx("div",{className:"md:hidden flex items-center gap-4",children:i.jsx("button",{onClick:()=>s(!r),className:`p-2 rounded-xl transition-all ${e?"bg-gray-100 text-gray-900":"bg-white/10 text-white backdrop-blur-md"}`,"aria-label":"Toggle Menu",children:i.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:r?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})})]})}),i.jsx("div",{className:`md:hidden absolute w-full bg-white shadow-[0_30px_60px_rgba(0,0,0,0.2)] transition-all duration-300 border-b border-gray-200 overflow-hidden ${r?"max-h-[600px] opacity-100 py-8":"max-h-0 opacity-0 py-0"}`,children:i.jsxs("div",{className:"px-8 space-y-6",children:[i.jsx("a",{href:"#",className:"block text-xl font-black text-gray-800 uppercase tracking-widest",children:"Services"}),i.jsx("a",{href:"#",className:"block text-xl font-black text-gray-800 uppercase tracking-widest",children:"Industries"}),i.jsx("a",{href:"#",className:"block text-xl font-black text-gray-800 uppercase tracking-widest",children:"Insights"}),i.jsx("button",{onClick:()=>{s(!1),o("careers")},className:"block text-xl font-black text-gray-800 uppercase tracking-widest",children:"Careers"}),i.jsx("button",{onClick:c,className:"block text-xl font-black text-spr-600 uppercase tracking-[0.2em]",children:"Contact Us"}),i.jsx("div",{className:"pt-6 border-t border-gray-100",children:i.jsx(G,{onClick:()=>t("/login"),className:"w-full bg-spr-900 py-5 text-xl rounded-2xl shadow-xl text-white font-black",children:"Login to Portal"})})]})})]}),i.jsxs("header",{className:"relative min-h-[850px] flex items-center pt-48 md:pt-64 bg-spr-900 overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-spr-900 via-[#0a1435] to-[#020617]"}),i.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(#ffffff0a_1px,transparent_1px)] [background-size:30px_30px] opacity-50"}),i.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[600px] h-[600px] bg-blue-600/20 blur-[120px] rounded-full"}),i.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-indigo-600/20 blur-[120px] rounded-full"})]}),i.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full",children:i.jsxs("div",{className:"max-w-5xl animate-fade-in py-12 md:py-20",children:[i.jsxs("div",{className:"inline-flex items-center gap-3 bg-blue-500/10 border border-blue-400/20 px-5 py-2.5 rounded-full mb-10 backdrop-blur-md",children:[i.jsx("span",{className:"w-2.5 h-2.5 bg-blue-400 rounded-full animate-pulse shadow-[0_0_10px_#60a5fa]"}),i.jsx("span",{className:"text-blue-300 font-black tracking-[0.3em] uppercase text-[10px] md:text-xs",children:"Engineering Digital Future"})]}),i.jsxs("h1",{className:"text-4xl sm:text-7xl md:text-[90px] font-black text-white leading-[1.05] mb-10 tracking-tight",children:["Accelerating Business Velocity with ",i.jsx("br",{className:"hidden lg:block"}),i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-indigo-300 to-sky-200",children:"Quality Engineering"})]}),i.jsx("p",{className:"text-lg md:text-2xl text-blue-100/70 mb-14 leading-relaxed max-w-4xl border-l-4 border-blue-500/40 pl-8 font-medium",children:"SPR Techforge empowers enterprises to deliver flawless digital experiences through advanced Software Testing, Cloud Transformation, and Strategic Consulting."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[i.jsx("button",{className:"bg-white text-spr-900 font-black px-14 py-6 rounded-[2rem] hover:bg-blue-50 hover:scale-110 transition-all shadow-[0_20px_50px_rgba(0,0,0,0.3)] text-center text-xl",children:"Explore Services"}),i.jsx("button",{onClick:c,className:"border-2 border-white/30 backdrop-blur-md text-white font-black px-14 py-6 rounded-[2rem] hover:bg-white/10 hover:scale-110 transition-all text-center text-xl",children:"Partner With Us"})]})]})})]}),i.jsx("section",{className:"bg-white py-14 relative z-10 -mt-24 md:-mt-32 mx-4 md:mx-8 lg:mx-auto max-w-6xl rounded-[3rem] shadow-[0_40px_80px_-15px_rgba(0,0,0,0.15)] border border-gray-100",children:i.jsx("div",{className:"px-6 sm:px-12",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-y-12 gap-x-8 text-center divide-gray-100 md:divide-x",children:[i.jsxs("div",{className:"px-4",children:[i.jsx("p",{className:"text-4xl md:text-6xl font-black text-spr-700 tracking-tighter",children:"50+"}),i.jsx("p",{className:"text-[10px] md:text-xs text-gray-400 font-black uppercase mt-3 tracking-[0.2em]",children:"Enterprise Clients"})]}),i.jsxs("div",{className:"px-4",children:[i.jsx("p",{className:"text-4xl md:text-6xl font-black text-spr-700 tracking-tighter",children:"100%"}),i.jsx("p",{className:"text-[10px] md:text-xs text-gray-400 font-black uppercase mt-3 tracking-[0.2em]",children:"Project Delivery"})]}),i.jsxs("div",{className:"px-4",children:[i.jsx("p",{className:"text-4xl md:text-6xl font-black text-spr-700 tracking-tighter",children:"24/7"}),i.jsx("p",{className:"text-[10px] md:text-xs text-gray-400 font-black uppercase mt-3 tracking-[0.2em]",children:"Global Support"})]}),i.jsxs("div",{className:"px-4",children:[i.jsx("p",{className:"text-4xl md:text-6xl font-black text-spr-700 tracking-tighter",children:"1M+"}),i.jsx("p",{className:"text-[10px] md:text-xs text-gray-400 font-black uppercase mt-3 tracking-[0.2em]",children:"Tests Executed"})]})]})})}),i.jsx("section",{className:"py-36 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-28",children:[i.jsx("h2",{className:"text-4xl md:text-6xl font-black text-gray-900 mb-10 tracking-tight",children:"Our Core Capabilities"}),i.jsx("div",{className:"w-40 h-2 bg-spr-600 mx-auto rounded-full"}),i.jsx("p",{className:"mt-10 text-lg md:text-2xl text-gray-500 max-w-3xl mx-auto leading-relaxed font-medium",children:"We combine deep domain expertise with cutting-edge technology to drive innovation and efficiency for modern enterprises."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-14",children:[i.jsxs("div",{className:"group bg-gray-50 p-14 rounded-[3.5rem] border border-gray-100 hover:bg-white hover:shadow-[0_60px_100px_-20px_rgba(0,0,0,0.1)] transition-all duration-700 hover:-translate-y-4",children:[i.jsx("div",{className:"w-24 h-24 bg-blue-600 rounded-[2rem] flex items-center justify-center mb-12 shadow-2xl shadow-blue-200 group-hover:scale-110 group-hover:rotate-6 transition-all duration-500",children:i.jsx("svg",{className:"w-14 h-14 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("h3",{className:"text-3xl font-black text-gray-900 mb-6",children:"Quality Engineering"}),i.jsx("p",{className:"text-gray-500 leading-relaxed text-lg mb-12",children:"Comprehensive testing solutions including Automation, Performance, and Cloud-native testing to ensure robust software delivery."}),i.jsxs("div",{className:"flex items-center gap-4 text-spr-600 font-black cursor-pointer group-hover:gap-8 transition-all text-xl",children:["Explore Solutions ",i.jsx("span",{className:"text-3xl",children:""})]})]}),i.jsxs("div",{className:"group bg-gray-50 p-14 rounded-[3.5rem] border border-gray-100 hover:bg-white hover:shadow-[0_60px_100px_-20px_rgba(0,0,0,0.1)] transition-all duration-700 hover:-translate-y-4",children:[i.jsx("div",{className:"w-24 h-24 bg-indigo-600 rounded-[2rem] flex items-center justify-center mb-12 shadow-2xl shadow-indigo-200 group-hover:scale-110 group-hover:rotate-6 transition-all duration-500",children:i.jsx("svg",{className:"w-14 h-14 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),i.jsx("h3",{className:"text-3xl font-black text-gray-900 mb-6",children:"Cloud Consulting"}),i.jsx("p",{className:"text-gray-500 leading-relaxed text-lg mb-12",children:"Architecting scalable cloud infrastructures and implementing DevOps pipelines to accelerate your speed-to-market."}),i.jsxs("div",{className:"flex items-center gap-4 text-spr-600 font-black cursor-pointer group-hover:gap-8 transition-all text-xl",children:["View Expertise ",i.jsx("span",{className:"text-3xl",children:""})]})]}),i.jsxs("div",{className:"group bg-gray-50 p-14 rounded-[3.5rem] border border-gray-100 hover:bg-white hover:shadow-[0_60px_100px_-20px_rgba(0,0,0,0.1)] transition-all duration-700 hover:-translate-y-4 md:col-span-2 lg:col-span-1",children:[i.jsx("div",{className:"w-24 h-24 bg-emerald-600 rounded-[2rem] flex items-center justify-center mb-12 shadow-2xl shadow-emerald-200 group-hover:scale-110 group-hover:rotate-6 transition-all duration-500",children:i.jsx("svg",{className:"w-14 h-14 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),i.jsx("h3",{className:"text-3xl font-black text-gray-900 mb-6",children:"Staffing & Training"}),i.jsx("p",{className:"text-gray-500 leading-relaxed text-lg mb-12",children:"Bridging the talent gap with specialized technical resources and tailored corporate training programs for your workforce."}),i.jsxs("div",{className:"flex items-center gap-4 text-spr-600 font-black cursor-pointer group-hover:gap-8 transition-all text-xl",children:["Join Network ",i.jsx("span",{className:"text-3xl",children:""})]})]})]})]})}),i.jsxs("section",{className:"bg-[#020617] py-40 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 w-[700px] h-[700px] bg-blue-600 rounded-full mix-blend-screen filter blur-[180px] opacity-10 animate-pulse"}),i.jsxs("div",{className:"max-w-6xl mx-auto px-8 text-center relative z-10",children:[i.jsxs("h2",{className:"text-5xl md:text-8xl font-black text-white mb-12 leading-[1] tracking-tight",children:["Ready to Engineer Your ",i.jsx("br",{})," Next Digital Success?"]}),i.jsx("p",{className:"text-xl md:text-3xl text-blue-100/60 mb-20 max-w-5xl mx-auto leading-relaxed",children:"Collaborate with SPR Techforge and harness the power of world-class technical consulting to drive your business forward."}),i.jsx("button",{onClick:c,className:"bg-white hover:bg-blue-50 text-spr-900 font-black px-20 py-8 rounded-[2.5rem] shadow-[0_30px_60px_rgba(0,0,0,0.4)] transition-all transform hover:scale-110 active:scale-95 text-2xl uppercase tracking-widest",children:"Get a Free Consultation"})]})]}),i.jsx("footer",{id:"contact",className:"bg-[#010208] text-white pt-40 pb-20",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-24 mb-32",children:[i.jsxs("div",{className:"col-span-1 sm:col-span-2 lg:col-span-1",children:[i.jsx("div",{className:"text-white mb-12 inline-block",children:i.jsx(bi,{size:"sm",inverse:!0})}),i.jsx("p",{className:"text-gray-500 leading-relaxed text-xl font-medium",children:"A premier technology firm dedicated to excellence in software quality engineering and cloud-native solutions."}),i.jsx("div",{className:"flex gap-8 mt-12",children:i.jsx("a",{href:"#",className:"w-14 h-14 rounded-2xl bg-white/5 flex items-center justify-center hover:bg-blue-600 transition-all hover:-translate-y-2 border border-white/10",children:i.jsx("svg",{className:"w-7 h-7",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})})})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-base font-black uppercase tracking-[0.4em] text-blue-400 mb-12",children:"Expertise"}),i.jsxs("ul",{className:"space-y-6 text-gray-500 font-bold text-lg",children:[i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Quality Assurance"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Automation Ops"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Performance Tuning"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Cybersecurity"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-base font-black uppercase tracking-[0.4em] text-blue-400 mb-12",children:"Company"}),i.jsxs("ul",{className:"space-y-6 text-gray-500 font-bold text-lg",children:[i.jsx("li",{children:i.jsx("button",{onClick:()=>o("about"),className:"hover:text-white transition-colors text-left",children:"Our Identity"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>o("careers"),className:"hover:text-white transition-colors text-left",children:"Career Portal"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>o("leadership"),className:"hover:text-white transition-colors text-left",children:"Leadership Team"})}),i.jsx("li",{children:i.jsx("button",{onClick:c,className:"hover:text-white transition-colors text-left",children:"Global Presence"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-base font-black uppercase tracking-[0.4em] text-blue-400 mb-12",children:"Contact"}),i.jsxs("ul",{className:"space-y-10 text-gray-500 font-bold text-lg",children:[i.jsxs("li",{className:"flex items-start gap-6",children:[i.jsxs("svg",{className:"w-8 h-8 text-blue-500 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),i.jsxs("span",{className:"text-lg leading-relaxed",children:["SPR Techforge Pvt Ltd",i.jsx("br",{}),"Sri Godha Nilayam, Kukatpally, Hyderabad 500085"]})]}),i.jsxs("li",{className:"flex items-center gap-6",children:[i.jsx("svg",{className:"w-8 h-8 text-blue-500 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("a",{href:"mailto:contact@sprtechforge.com",className:"hover:text-white transition-colors",children:"contact@sprtechforge.com"})]})]})]})]}),i.jsxs("div",{className:"border-t border-white/5 pt-20 flex flex-col md:flex-row justify-between items-center gap-10",children:[i.jsx("p",{className:"text-lg text-gray-600 font-medium",children:" 2025 SPR Techforge Pvt Ltd. All rights reserved."}),i.jsxs("div",{className:"flex gap-14 text-xs font-black uppercase tracking-[0.4em] text-gray-600",children:[i.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"}),i.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms"}),i.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Security"})]})]})]})}),i.jsx(en,{isOpen:a==="about",onClose:()=>o(null),title:"Our Identity",children:i.jsxs("div",{className:"space-y-10 p-4",children:[i.jsx("p",{className:"text-2xl text-gray-800 leading-relaxed font-bold",children:"We are a specialized technology firm focused on the science of Software Quality."}),i.jsx("p",{className:"text-gray-500 leading-relaxed text-xl",children:"With a track record of successfully training and placing over 30+ professionals in high-impact roles, SPR Techforge stands as a beacon of excellence for both career aspirants and enterprises seeking top-tier QA talent."}),i.jsxs("div",{className:"bg-blue-600 p-10 rounded-[3rem] text-white shadow-3xl relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 blur-[60px] rounded-full"}),i.jsx("h4",{className:"font-black uppercase tracking-[0.4em] text-xs mb-8 text-blue-200",children:"Our Mandate"}),i.jsx("p",{className:"text-3xl font-black italic leading-[1.2]",children:'"To bridge the skill gap through precision training and strategic placement, empowering the next generation of quality engineers."'})]})]})}),i.jsx(en,{isOpen:a==="careers",onClose:()=>o(null),title:"Career Portal",children:i.jsxs("div",{className:"space-y-10 p-4",children:[i.jsx("p",{className:"text-gray-500 text-xl font-medium",children:"Are you looking to join a high-growth technical environment? Explore our open mandates."}),i.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[i.jsxs("div",{className:"bg-gray-50 p-10 rounded-[3.5rem] border border-gray-100 hover:border-blue-300 hover:bg-white transition-all cursor-pointer shadow-sm hover:shadow-xl group",children:[i.jsx("h4",{className:"font-black text-gray-900 text-3xl mb-4",children:"Automation Test Engineer"}),i.jsx("p",{className:"text-xl text-gray-500 font-bold",children:"Java, Selenium, Cucumber Experts"}),i.jsxs("div",{className:"mt-8 text-spr-600 font-black flex items-center gap-2 group-hover:gap-4 transition-all",children:["Apply Now ",i.jsx("span",{children:""})]})]}),i.jsxs("div",{className:"bg-gray-50 p-10 rounded-[3.5rem] border border-gray-100 hover:border-blue-300 hover:bg-white transition-all cursor-pointer shadow-sm hover:shadow-xl group",children:[i.jsx("h4",{className:"font-black text-gray-900 text-3xl mb-4",children:"Performance Architect"}),i.jsx("p",{className:"text-xl text-gray-500 font-bold",children:"JMeter & LoadRunner Specialists"}),i.jsxs("div",{className:"mt-8 text-spr-600 font-black flex items-center gap-2 group-hover:gap-4 transition-all",children:["Apply Now ",i.jsx("span",{children:""})]})]})]}),i.jsxs("div",{className:"pt-10 text-center border-t border-gray-100",children:[i.jsx("p",{className:"text-gray-400 font-bold uppercase tracking-widest text-sm mb-4",children:"Apply directly via"}),i.jsx("a",{href:"mailto:careers@sprtechforge.com",className:"text-4xl font-black text-spr-600 hover:underline",children:"careers@sprtechforge.com"})]})]})})]})},E4=()=>{const{user:t,candidates:e,accounts:n,transactions:r,getEntityBalance:s,trainingTopics:a,trainingLogs:o,interviews:c}=Ce(),u=Et();if(!t)return null;const d=t.username==="thirumalreddy@sprtechforge.com";if(t.role==="candidate"){const P=e.find(A=>A.id===t.linkedCandidateId),R=o.filter(A=>A.candidateId===(P==null?void 0:P.id)),w=c.filter(A=>A.candidateId===(P==null?void 0:P.id)&&A.status==="Scheduled"),p=r.filter(A=>A.fromEntityId===(P==null?void 0:P.id)&&A.type===xe.Income).reduce((A,M)=>A+M.amount,0)-r.filter(A=>A.toEntityId===(P==null?void 0:P.id)&&A.type===xe.Refund).reduce((A,M)=>A+M.amount,0),b=((P==null?void 0:P.agreedAmount)||0)-p,k=a.length>0?Math.round(new Set(R.map(A=>A.topicId)).size/a.length*100):0;return i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Student Dashboard"}),i.jsxs("p",{className:"text-gray-600 mt-1",children:["Hello ",t.name,", tracked your progress and schedule below."]})]}),i.jsxs("div",{className:"bg-white border border-gray-200 px-4 py-2 rounded-xl shadow-sm",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase block tracking-widest",children:"Enrollment Status"}),i.jsx("span",{className:"text-spr-600 font-bold",children:(P==null?void 0:P.status)||"Active"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(ne,{title:"Training Progress",className:"border-l-4 border-l-blue-500",children:i.jsxs("div",{className:"text-center py-4",children:[i.jsxs("div",{className:"relative inline-flex items-center justify-center mb-4",children:[i.jsxs("svg",{className:"w-24 h-24 transform -rotate-90",children:[i.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-gray-100"}),i.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"transparent",strokeDasharray:251.2,strokeDashoffset:251.2-251.2*k/100,className:"text-blue-500 transition-all duration-1000"})]}),i.jsxs("span",{className:"absolute text-xl font-black text-gray-800",children:[k,"%"]})]}),i.jsx("p",{className:"text-sm text-gray-500",children:"Curriculum Coverage"}),i.jsx("div",{className:"mt-6",children:i.jsx(G,{variant:"secondary",className:"w-full text-xs",onClick:()=>u("/training/dashboard"),children:"View Syllabus"})})]})}),i.jsx(ne,{title:"Fee Standing",className:"border-l-4 border-l-emerald-500",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-50 pb-2",children:[i.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase",children:"Total Agreed"}),i.jsx("span",{className:"font-bold text-gray-900",children:se((P==null?void 0:P.agreedAmount)||0)})]}),i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-50 pb-2",children:[i.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase",children:"Total Paid"}),i.jsx("span",{className:"font-bold text-emerald-600",children:se(p)})]}),i.jsxs("div",{className:"pt-2",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase block mb-1",children:"Balance Due"}),i.jsx("span",{className:`text-2xl font-black ${b>0?"text-amber-600":"text-emerald-600"}`,children:b<=0?"Fully Cleared ":se(b)})]})]})}),i.jsx(ne,{title:"Upcoming Interviews",className:"border-l-4 border-l-purple-500",children:i.jsx("div",{className:"space-y-3",children:w.length>0?w.map(A=>i.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-100",children:[i.jsx("p",{className:"font-bold text-gray-900 text-sm",children:A.companyName}),i.jsxs("p",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:[A.round," Round"]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(A.date).toDateString()," at ",A.time]})]},A.id)):i.jsxs("div",{className:"text-center py-8 text-gray-400 italic",children:[i.jsx("svg",{className:"w-10 h-10 mx-auto mb-2 opacity-20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"No interviews scheduled."]})})})]}),i.jsx(ne,{title:"Quick Resources",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs(rt,{to:"/training/interview-questions",className:"p-4 bg-orange-50 rounded-xl border border-orange-100 hover:shadow-md transition-all group",children:[i.jsx("div",{className:"text-orange-600 font-bold text-sm mb-1 group-hover:underline",children:"Interview Prep"}),i.jsx("p",{className:"text-[10px] text-orange-400",children:"Master frequently asked Q&A"})]}),i.jsxs(rt,{to:"/candidates/info",className:"p-4 bg-blue-50 rounded-xl border border-blue-100 hover:shadow-md transition-all group",children:[i.jsx("div",{className:"text-blue-600 font-bold text-sm mb-1 group-hover:underline",children:"My Profile"}),i.jsx("p",{className:"text-[10px] text-blue-400",children:"Fill your professional details"})]}),i.jsxs(rt,{to:"/training/curriculum",className:"p-4 bg-purple-50 rounded-xl border border-purple-100 hover:shadow-md transition-all group",children:[i.jsx("div",{className:"text-purple-600 font-bold text-sm mb-1 group-hover:underline",children:"Curriculum"}),i.jsx("p",{className:"text-[10px] text-purple-400",children:"View what you will learn"})]}),i.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-100 opacity-50 grayscale cursor-not-allowed",children:[i.jsx("div",{className:"text-gray-600 font-bold text-sm mb-1",children:"Certificates"}),i.jsx("p",{className:"text-[10px] text-gray-400",children:"Available after placement"})]})]})})]})}if(!d){const P=e.filter(p=>p.isActive),R=e.filter(p=>p.status===ct.Placed).length,w=c.filter(p=>p.date===new Date().toISOString().split("T")[0]);return i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-2",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Management Dashboard"}),i.jsxs("p",{className:"text-gray-600 mt-1",children:["Hello ",t.name,", here's a summary of consultancy operations."]})]})}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(ne,{className:"bg-white border-blue-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-blue-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase",children:"Active Students"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P.length})]})]})}),i.jsx(ne,{className:"bg-white border-emerald-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-50 rounded-lg text-emerald-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase",children:"Total Placements"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R})]})]})}),i.jsx(ne,{className:"bg-white border-purple-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-purple-50 rounded-lg text-purple-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase",children:"Today's Interviews"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.length})]})]})}),i.jsx(ne,{className:"bg-white border-amber-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-50 rounded-lg text-amber-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase",children:"Upcoming Tasks"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"5"})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsx(ne,{title:"Today's Interview Pipeline",action:i.jsx(rt,{to:"/training/interviews",className:"text-xs text-spr-600 font-bold hover:underline",children:"View All"}),children:i.jsx("div",{className:"space-y-4",children:w.length>0?w.map(p=>{const b=e.find(k=>k.id===p.candidateId);return i.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-gray-100",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-gray-900 text-sm",children:(b==null?void 0:b.name)||"Unknown"}),i.jsxs("p",{className:"text-[10px] text-gray-500 uppercase",children:[p.companyName,"  ",p.time]})]}),i.jsx("span",{className:"px-2 py-0.5 rounded text-[9px] font-bold uppercase bg-blue-100 text-blue-700",children:p.status})]},p.id)}):i.jsx("div",{className:"text-center py-10 text-gray-400 italic text-sm",children:"No interviews scheduled for today."})})}),i.jsx(ne,{title:"Batch Performance",action:i.jsx(rt,{to:"/training/monitor",className:"text-xs text-spr-600 font-bold hover:underline",children:"Full Monitor"}),children:i.jsx("div",{className:"space-y-4",children:e.slice(0,5).map(p=>{const b=o.filter(A=>A.candidateId===p.id),k=a.length>0?Math.round(new Set(b.map(A=>A.topicId)).size/a.length*100):0;return i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-xs font-medium",children:[i.jsxs("span",{className:"text-gray-700",children:[p.name," (",p.batchId,")"]}),i.jsxs("span",{className:"text-gray-500",children:[k,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5",children:i.jsx("div",{className:"bg-emerald-500 h-1.5 rounded-full",style:{width:`${k}%`}})})]},p.id)})})})]})]})}const f=n.filter(P=>P.type===pe.Cash).reduce((P,R)=>P+s(R.id,"Account"),0),m=n.filter(P=>P.type===pe.Bank).reduce((P,R)=>P+s(R.id,"Account"),0),g=r.filter(P=>P.type===xe.Income).reduce((P,R)=>P+R.amount,0),v=r.filter(P=>P.type===xe.Payment).reduce((P,R)=>P+R.amount,0),T=P=>{const R=r.filter(p=>p.fromEntityId===P&&p.type===xe.Income).reduce((p,b)=>p+b.amount,0),w=r.filter(p=>p.toEntityId===P&&p.type===xe.Refund).reduce((p,b)=>p+b.amount,0);return R-w},C=e.filter(P=>P.status===ct.Placed),I=e.filter(P=>P.isActive),j=C.reduce((P,R)=>P+T(R.id),0),y=I.reduce((P,R)=>{const w=T(R.id),p=R.agreedAmount-w;return P+(p>0?p:0)},0),_=n.filter(P=>P.type===pe.Debtor).reduce((P,R)=>{const w=s(R.id,"Account");return P+(w>0?w:0)},0),S=n.filter(P=>P.type===pe.Creditor||P.type===pe.Salary).reduce((P,R)=>{const w=s(R.id,"Account");return P+(w<0?Math.abs(w):0)},0);return i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-2",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Director Dashboard"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Full transparency oversee of consultancy financials."})]}),i.jsxs("div",{className:"text-left md:text-right",children:[i.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Net Liquidity"}),i.jsx("p",{className:"text-2xl font-bold text-emerald-600 whitespace-nowrap tabular-nums",children:se(f+m)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(ne,{className:"bg-white border-emerald-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-50 rounded-lg text-emerald-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase truncate",children:"Cash in Hand"}),i.jsx("p",{className:"text-lg font-bold text-gray-900 whitespace-nowrap tabular-nums truncate",children:se(f)})]})]})}),i.jsx(ne,{className:"bg-white border-blue-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-blue-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase truncate",children:"Bank Balance"}),i.jsx("p",{className:"text-lg font-bold text-gray-900 whitespace-nowrap tabular-nums truncate",children:se(m)})]})]})}),i.jsx(ne,{className:"bg-white border-indigo-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-50 rounded-lg text-indigo-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase truncate",children:"Total Income"}),i.jsx("p",{className:"text-lg font-bold text-gray-900 whitespace-nowrap tabular-nums truncate",children:se(g)})]})]})}),i.jsx(ne,{className:"bg-white border-red-100 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-red-50 rounded-lg text-red-600 shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-[11px] text-gray-400 font-bold uppercase truncate",children:"Total Payments"}),i.jsx("p",{className:"text-lg font-bold text-gray-900 whitespace-nowrap tabular-nums truncate",children:se(v)})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx(ne,{title:"Candidate Financials",className:"lg:col-span-2",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 pt-2",children:[i.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100 flex flex-col justify-center",children:[i.jsx("p",{className:"text-gray-500 text-[10px] uppercase tracking-wider font-bold",children:"Total Candidates"}),i.jsx("p",{className:"text-2xl font-extrabold text-gray-900 mt-1",children:e.length}),i.jsxs("p",{className:"text-[10px] text-indigo-500 mt-1 font-bold",children:[I.length," Currently Active"]})]}),i.jsxs("div",{className:"bg-emerald-50/50 p-4 rounded-xl border border-emerald-100 flex flex-col justify-center",children:[i.jsx("p",{className:"text-emerald-700 text-[10px] uppercase tracking-wider font-bold",children:"From Placed"}),i.jsx("p",{className:"text-xl font-bold text-emerald-600 mt-1 whitespace-nowrap tabular-nums truncate",children:se(j)})]}),i.jsxs("div",{className:"bg-amber-50/50 p-4 rounded-xl border border-amber-100 flex flex-col justify-center",children:[i.jsx("p",{className:"text-amber-700 text-[10px] uppercase tracking-wider font-bold",children:"Pending Dues"}),i.jsx("p",{className:"text-xl font-bold text-amber-600 mt-1 whitespace-nowrap tabular-nums truncate",children:se(y)})]})]})}),i.jsx(ne,{title:"Ledger Summary",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-emerald-50/30 rounded-xl border border-emerald-100",children:[i.jsx("p",{className:"text-[10px] text-emerald-700 uppercase font-bold tracking-wider mb-1",children:"Debtors (Total Receivables)"}),i.jsx("p",{className:"text-2xl font-extrabold text-emerald-600 tabular-nums truncate",children:se(_+y)})]}),i.jsxs("div",{className:"p-4 bg-red-50/30 rounded-xl border border-red-100",children:[i.jsx("p",{className:"text-[10px] text-red-700 uppercase font-bold tracking-wider mb-1",children:"Creditors (Total Payables)"}),i.jsx("p",{className:"text-2xl font-extrabold text-red-600 tabular-nums truncate",children:se(S)})]})]})})]}),i.jsx(ne,{title:"Consolidated Profit & Loss (Realized)",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-100 pb-3",children:[i.jsx("span",{className:"text-gray-500 font-medium text-sm",children:"Total Realized Income"}),i.jsx("span",{className:"text-emerald-600 font-bold whitespace-nowrap tabular-nums",children:se(g)})]}),i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-100 pb-3",children:[i.jsx("span",{className:"text-gray-500 font-medium text-sm",children:"Total Realized Payments"}),i.jsxs("span",{className:"text-red-600 font-bold whitespace-nowrap tabular-nums",children:["- ",se(v)]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-1",children:[i.jsx("span",{className:"text-gray-900 text-lg font-extrabold",children:"Net Realized Result"}),i.jsx("span",{className:`text-2xl font-black whitespace-nowrap tabular-nums ${g-v>=0?"text-emerald-600":"text-red-600"}`,children:se(g-v)})]})]})})]})},T4=()=>{const{candidates:t,deleteCandidate:e,updateCandidate:n,transactions:r,candidateStatuses:s,users:a,addUser:o,showToast:c}=Ce(),[u,d]=L.useState(1),[f,m]=L.useState(""),[g,v]=L.useState("All"),[T,C]=L.useState(null),[I,j]=L.useState(null);Et();const y=10,_=t.filter(N=>{const J=f.toLowerCase(),ie=N.name.toLowerCase().includes(J)||N.batchId.toLowerCase().includes(J)||N.referredBy&&N.referredBy.toLowerCase().includes(J),Ae=g==="All"||N.status===g;return ie&&Ae}),S=Math.ceil(_.length/y),P=_.slice((u-1)*y,u*y),R=(N,J)=>{const ie=r.filter(Fe=>Fe.fromEntityId===N&&Fe.type===xe.Income).reduce((Fe,q)=>Fe+q.amount,0)-r.filter(Fe=>Fe.toEntityId===N&&Fe.type===xe.Refund).reduce((Fe,q)=>Fe+q.amount,0),Ae=J-ie;return{paid:ie,due:Ae}},w=()=>{const N=t.map(J=>{const{paid:ie,due:Ae}=R(J.id,J.agreedAmount);return{"Full Name":J.name,"Batch ID":J.batchId,Email:J.email,Phone:J.phone,Status:J.status,"Agreed Amount":J.agreedAmount,"Total Paid":ie,"Balance Due":Ae,"Referred By":J.referredBy||"N/A","Joined Date":new Date(J.joinedDate).toLocaleDateString(),"Is Active":J.isActive?"Yes":"No"}});mi(N,`SPR_Candidates_All_${new Date().toISOString().split("T")[0]}.csv`),c("Candidate list exported successfully")},p=N=>{if(r.some(ie=>ie.fromEntityId===N||ie.toEntityId===N)){alert("Unable to delete candidate due to existing financial entries. Mark as Inactive instead.");return}C(N)},b=()=>{T&&(e(T),C(null))},k=N=>n({...N,isActive:!N.isActive}),A=N=>{const J=a.find(ie=>ie.linkedCandidateId===N.id||ie.username===N.email);if(J){alert(`Account exists: ${J.username}`);return}if(!N.email){alert("Email required.");return}o({id:Lt(),name:N.name,username:N.email,password:N.phone||"pass123",role:"candidate",modules:[],linkedCandidateId:N.id,isPasswordChanged:!1,authProvider:"local"}),c("User account created","success")},M=N=>{switch(N){case ct.Placed:return"bg-emerald-100 text-emerald-800 border-emerald-200";case ct.Training:return"bg-blue-100 text-blue-800 border-blue-200";case ct.ReadyForInterview:return"bg-amber-100 text-amber-800 border-amber-200";case ct.Discontinued:return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Vr,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Candidates"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(G,{variant:"secondary",onClick:w,children:"Export CSV"}),i.jsx(rt,{to:"/candidates/new",children:i.jsx(G,{children:"+ Add Candidate"})})]})]}),i.jsxs(ne,{children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[i.jsx(Ts,{placeholder:"Search name, batch, or reference...",value:f,onChange:N=>m(N.target.value),onClear:()=>m("")}),i.jsxs("select",{className:"border border-gray-300 rounded-lg px-4 py-2 focus:ring-1 focus:ring-spr-accent outline-none",value:g,onChange:N=>v(N.target.value),children:[i.jsx("option",{value:"All",children:"All Statuses"}),s.map(N=>i.jsx("option",{value:N,children:N},N))]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm text-gray-600",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"py-3 px-4",children:"Batch"}),i.jsx("th",{className:"py-3 px-4",children:"Name"}),i.jsx("th",{className:"py-3 px-4",children:"Status"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Agreed"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Paid"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Due"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Active"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:P.map(N=>{const{paid:J,due:ie}=R(N.id,N.agreedAmount);return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"bg-blue-50 text-blue-800 px-2 py-1 rounded font-mono text-xs font-bold border border-blue-100",children:N.batchId})}),i.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900",children:[N.name,i.jsx("div",{className:"text-xs text-gray-400",children:N.phone})]}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] uppercase font-bold border ${M(N.status)}`,children:N.status})}),i.jsx("td",{className:"py-3 px-4 text-right font-medium tabular-nums",children:se(N.agreedAmount)}),i.jsx("td",{className:"py-3 px-4 text-right text-emerald-600 font-bold tabular-nums whitespace-nowrap",children:se(J)}),i.jsx("td",{className:`py-3 px-4 text-right font-bold tabular-nums whitespace-nowrap ${ie>0?"text-amber-600":"text-emerald-600"}`,children:ie<=0?" Cleared":se(ie)}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsx("button",{onClick:()=>k(N),className:`w-10 h-5 rounded-full relative transition-colors ${N.isActive?"bg-emerald-500":"bg-gray-300"}`,children:i.jsx("span",{className:`absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform ${N.isActive?"translate-x-5":""}`})})}),i.jsxs("td",{className:"py-3 px-4 text-center flex justify-center gap-2",children:[i.jsx("button",{onClick:()=>j(N),className:"text-gray-400 hover:text-gray-900 p-1 rounded hover:bg-gray-100",title:"View Details",children:i.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),i.jsx(rt,{to:`/candidates/edit/${N.id}`,className:"text-blue-500 hover:text-blue-700 p-1 rounded hover:bg-blue-50",title:"Edit",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),i.jsx(rt,{to:`/candidates/agreement/${N.id}`,className:"text-amber-600 hover:text-amber-800 p-1 rounded hover:bg-amber-50",title:"Agreement",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx(rt,{to:`/finance/statement/Candidate/${N.id}`,className:"text-indigo-500 hover:text-indigo-700 p-1 rounded hover:bg-indigo-50",title:"Financial Statement",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx("button",{onClick:()=>A(N),className:"text-amber-500 hover:text-amber-700 p-1 rounded hover:bg-amber-50",title:"Create Login",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),i.jsx("button",{onClick:()=>p(N.id),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-100",title:"Delete",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},N.id)})})]})}),i.jsx(em,{currentPage:u,totalPages:S,onPageChange:d})]}),i.jsx(en,{isOpen:!!I,onClose:()=>j(null),title:"Candidate Detailed Profile",size:"lg",children:I&&(()=>{const{paid:N,due:J}=R(I.id,I.agreedAmount);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-start border-b border-gray-100 pb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:I.name}),i.jsxs("p",{className:"text-gray-500 font-mono text-sm mt-1",children:["Batch ID: ",i.jsx("span",{className:"text-indigo-600 font-bold",children:I.batchId})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${M(I.status)}`,children:I.status}),i.jsx("p",{className:"text-[10px] text-gray-400 mt-2 uppercase tracking-widest font-bold",children:"Current Status"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Contact Details"]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100 space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Email Address"}),i.jsx("p",{className:"text-gray-900 font-medium break-all",children:I.email})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Primary Phone"}),i.jsx("p",{className:"text-gray-900 font-medium",children:I.phone})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Alt Phone"}),i.jsx("p",{className:"text-gray-900 font-medium",children:I.alternatePhone||"-"})]})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[i.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Permanent Address"]}),i.jsx("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100 min-h-[100px]",children:i.jsx("p",{className:"text-gray-700 whitespace-pre-wrap italic",children:I.address||"No address provided."})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Financial Standing"]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[i.jsx("label",{className:"text-[10px] text-slate-500 font-bold uppercase block mb-1",children:"Agreed Total"}),i.jsx("p",{className:"text-xl font-bold text-slate-900 tabular-nums whitespace-nowrap",children:se(I.agreedAmount)})]}),i.jsxs("div",{className:"bg-emerald-50 p-4 rounded-xl border border-emerald-200",children:[i.jsx("label",{className:"text-[10px] text-emerald-600 font-bold uppercase block mb-1",children:"Total Paid"}),i.jsx("p",{className:"text-xl font-bold text-emerald-700 tabular-nums whitespace-nowrap",children:se(N)})]}),i.jsxs("div",{className:`p-4 rounded-xl border tabular-nums whitespace-nowrap ${J>0?"bg-amber-50 border-amber-200 text-amber-700":"bg-green-50 border-green-200 text-green-700"}`,children:[i.jsx("label",{className:"text-[10px] font-bold uppercase block mb-1",children:"Balance Due"}),i.jsx("p",{className:"text-xl font-bold",children:J<=0?"CLEARED":se(J)})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t border-gray-100",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Joined Date"}),i.jsx("p",{className:"text-gray-900 font-medium",children:new Date(I.joinedDate).toLocaleDateString(void 0,{dateStyle:"full"})})]}),I.notes&&i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Admin Notes"}),i.jsx("p",{className:"text-gray-600 text-sm italic",children:I.notes})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-6",children:[i.jsx(G,{variant:"secondary",onClick:()=>j(null),children:"Close Profile"}),i.jsx(rt,{to:`/candidates/edit/${I.id}`,children:i.jsx(G,{children:"Edit Candidate"})})]})]})})()}),i.jsx(Ai,{isOpen:!!T,onClose:()=>C(null),onConfirm:b,title:"Delete Candidate",message:"Are you sure you want to delete this candidate? This cannot be undone if they have no financial history."})]})},C4=()=>{const{user:t,candidates:e,candidateProfiles:n,updateCandidateProfile:r,trainingModules:s,trainingTopics:a,trainingLogs:o,interviews:c,showToast:u}=Ce(),[d,f]=L.useState("Personal"),[m,g]=L.useState(null),[v,T]=L.useState(""),C=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="staff",I=C?m:t==null?void 0:t.linkedCandidateId,j=e.find(p=>p.id===I),[y,_]=L.useState({candidateId:I||""});L.useEffect(()=>{if(I){const p=n.find(b=>b.candidateId===I);_(p||{candidateId:I})}},[I,n]);const S=p=>{p.preventDefault(),I&&(r(y),u("Profile updated successfully"))},P=e.filter(p=>p.name.toLowerCase().includes(v.toLowerCase())||p.batchId.toLowerCase().includes(v.toLowerCase()));if(C&&!m)return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Vr,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Candidate Information"})]})}),i.jsxs(ne,{title:"Select a Candidate to View Self-Filled Info",children:[i.jsx("div",{className:"mb-6",children:i.jsx(Ts,{placeholder:"Search candidates by name or batch...",value:v,onChange:p=>T(p.target.value),onClear:()=>T("")})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[P.map(p=>i.jsxs("div",{className:"p-4 border border-gray-200 rounded-xl hover:shadow-md transition-shadow flex items-center justify-between bg-white group",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-gray-900",children:p.name}),i.jsx("p",{className:"text-xs text-gray-500 font-mono",children:p.batchId})]}),i.jsx(G,{variant:"secondary",onClick:()=>g(p.id),className:"text-xs",children:"View Info"})]},p.id)),P.length===0&&i.jsx("div",{className:"col-span-full py-10 text-center text-gray-400 italic",children:"No candidates found."})]})]})]});if(!j)return i.jsx("div",{className:"p-8 text-center text-gray-500",children:"No candidate profile linked to this account or selected."});const R=o.filter(p=>p.candidateId===I),w=c.filter(p=>p.candidateId===I).sort((p,b)=>new Date(b.date).getTime()-new Date(p.date).getTime());return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[C?i.jsxs("button",{onClick:()=>g(null),className:"text-gray-500 hover:text-gray-800 flex items-center gap-1",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),i.jsx("span",{className:"font-medium",children:"Back to List"})]}):i.jsx(Vr,{}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Details"}),i.jsxs("p",{className:"text-gray-500",children:[j.name," (",j.batchId,")"]})]})]}),C&&i.jsx("div",{className:"px-3 py-1 bg-amber-50 text-amber-700 text-xs font-bold rounded-full border border-amber-200 uppercase tracking-widest",children:"Admin View Mode"})]}),i.jsx("div",{className:"flex gap-2 border-b border-gray-200 overflow-x-auto scrollbar-hide",children:["Personal","Education","Experience","Training","Interviews"].map(p=>i.jsx("button",{onClick:()=>f(p),className:`px-4 py-2 font-medium transition-colors whitespace-nowrap ${d===p?"border-b-2 border-spr-600 text-spr-600":"text-gray-500 hover:text-gray-800"}`,children:p==="Interviews"?"Interview History":p==="Training"?"Training Progress":`${p} Details`},p))}),i.jsx(ne,{children:["Personal","Education","Experience"].includes(d)?i.jsxs("form",{onSubmit:S,children:[d==="Personal"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[i.jsx(me,{label:"Date of Birth",type:"date",value:y.dob||"",onChange:p=>_({...y,dob:p.target.value}),disabled:C}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),i.jsxs("select",{className:"w-full border rounded-lg px-4 py-2",value:y.gender||"",onChange:p=>_({...y,gender:p.target.value}),disabled:C,children:[i.jsx("option",{value:"",children:"Select"}),i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsx(me,{label:"Nationality",value:y.nationality||"",onChange:p=>_({...y,nationality:p.target.value}),disabled:C}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Permanent Address"}),i.jsx("textarea",{className:"w-full border rounded-lg p-2 focus:ring-1 focus:ring-spr-accent outline-none",rows:2,value:y.permanentAddress||"",onChange:p=>_({...y,permanentAddress:p.target.value}),disabled:C})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Address"}),i.jsx("textarea",{className:"w-full border rounded-lg p-2 focus:ring-1 focus:ring-spr-accent outline-none",rows:2,value:y.currentAddress||"",onChange:p=>_({...y,currentAddress:p.target.value}),disabled:C})]})]}),d==="Education"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[i.jsx(me,{label:"Highest Degree",value:y.degree||"",onChange:p=>_({...y,degree:p.target.value}),placeholder:"e.g. B.Tech CSE",disabled:C}),i.jsx(me,{label:"University / College",value:y.university||"",onChange:p=>_({...y,university:p.target.value}),disabled:C}),i.jsx(me,{label:"Passing Year",value:y.passingYear||"",onChange:p=>_({...y,passingYear:p.target.value}),disabled:C}),i.jsx(me,{label:"Percentage / CGPA",value:y.percentage||"",onChange:p=>_({...y,percentage:p.target.value}),disabled:C})]}),d==="Experience"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[i.jsxs("div",{className:"col-span-2 flex items-center gap-2 mb-4",children:[i.jsx("input",{type:"checkbox",checked:y.hasExperience||!1,onChange:p=>_({...y,hasExperience:p.target.checked}),id:"exp",disabled:C}),i.jsx("label",{htmlFor:"exp",className:"text-sm font-medium",children:"Candidate has previous work experience"})]}),y.hasExperience&&i.jsxs(i.Fragment,{children:[i.jsx(me,{label:"Last Company",value:y.lastCompany||"",onChange:p=>_({...y,lastCompany:p.target.value}),disabled:C}),i.jsx(me,{label:"Designation",value:y.designation||"",onChange:p=>_({...y,designation:p.target.value}),disabled:C}),i.jsx(me,{label:"Years of Experience",type:"number",value:y.yearsOfExperience||0,onChange:p=>_({...y,yearsOfExperience:parseFloat(p.target.value)}),disabled:C})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Technical Skills"}),i.jsx("textarea",{className:"w-full border rounded-lg p-2 focus:ring-1 focus:ring-spr-accent outline-none",rows:3,value:y.skills||"",onChange:p=>_({...y,skills:p.target.value}),placeholder:"Java, Selenium, SQL...",disabled:C})]})]}),!C&&i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx(G,{type:"submit",children:"Update My Profile"})})]}):d==="Training"?i.jsxs("div",{className:"space-y-4 animate-fade-in",children:[s.sort((p,b)=>p.order-b.order).map(p=>i.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 px-4 py-2 font-bold text-gray-800 border-b border-gray-200",children:p.title}),i.jsx("div",{className:"divide-y divide-gray-100",children:a.filter(b=>b.moduleId===p.id).map(b=>{const k=R.find(A=>A.topicId===b.id);return i.jsxs("div",{className:"flex justify-between items-center p-3 hover:bg-gray-50",children:[i.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[i.jsx("span",{className:k?"text-emerald-500 font-bold":"text-gray-300",children:k?"":""}),i.jsx("span",{className:k?"text-gray-900 font-medium":"text-gray-500",children:b.title})]}),k&&i.jsx("span",{className:"text-[10px] uppercase font-bold bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded border border-emerald-200",children:k.attendanceStatus})]},b.id)})})]},p.id)),s.length===0&&i.jsx("p",{className:"text-gray-500 text-center py-4 italic",children:"No curriculum modules defined."})]}):i.jsx("div",{className:"space-y-4 animate-fade-in",children:w.length>0?w.map(p=>i.jsxs("div",{className:"flex justify-between items-center p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-gray-900",children:p.companyName}),i.jsxs("p",{className:"text-sm text-gray-600",children:[p.round,"  ",p.interviewType]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(p.date).toDateString()," at ",p.time]})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded border uppercase tracking-wider ${p.status==="Completed"?"bg-emerald-50 text-emerald-700 border-emerald-100":p.status==="Scheduled"?"bg-blue-50 text-blue-700 border-blue-100":"bg-gray-100 text-gray-700 border-gray-200"}`,children:p.status})})]},p.id)):i.jsx("p",{className:"text-gray-500 text-center py-8 italic border border-dashed border-gray-200 rounded-xl",children:"No interview history recorded."})})})]})},l0=()=>{const{addCandidate:t,updateCandidate:e,candidates:n,candidateStatuses:r,addCandidateStatus:s,showToast:a,transactions:o}=Ce(),c=Et(),{id:u}=_s(),[d,f]=L.useState(null),m=`CANDIDATURE AGREEMENT

1. I, [CANDIDATE NAME], agree to join SPR Techforge for the training program.
2. I agree to pay the total sum of [AMOUNT] as discussed.
3. I understand that the advance payment is non-refundable unless specified otherwise.
4. I will maintain professional conduct during the training period.
5. Upon placement, I agree to fulfill the financial obligations as per the agreement.

Date: _________________
Signature: _________________`,[g,v]=L.useState({name:"",batchId:"",email:"",phone:"",alternatePhone:"",referredBy:"",address:"",agreedAmount:0,paidAmount:0,status:ct.Training,placedCompany:"",packageDetails:"",isActive:!0,notes:"",agreementText:m}),[T,C]=L.useState(0);L.useEffect(()=>{if(u){const S=n.find(P=>P.id===u);if(S){const P=o.filter(R=>R.fromEntityId===u&&R.type===xe.Income).reduce((R,w)=>R+w.amount,0)-o.filter(R=>R.toEntityId===u&&R.type===xe.Refund).reduce((R,w)=>R+w.amount,0);C(P),v({...S,paidAmount:P,agreementText:S.agreementText||m.replace("[CANDIDATE NAME]",S.name).replace("[AMOUNT]",S.agreedAmount.toString())})}}},[u,n,o]);const I=(g.agreedAmount||0)-T,j=()=>!g.agreedAmount||g.agreedAmount<=0?i.jsx("span",{className:"text-gray-400",children:"Awaiting agreement amount"}):I>0?i.jsxs("span",{className:"text-amber-600",children:["Current Due: ",se(I)]}):i.jsx("span",{className:"text-emerald-600",children:"Fees Fully Cleared "}),y=S=>{if(S.preventDefault(),f(null),!g.name||!g.name.trim()){f("Full Name is required");return}if(!g.batchId||!g.batchId.trim()){f("Batch ID is required");return}if(!g.email||!g.email.trim()){f("Email Address is required");return}if(!g.phone||!g.phone.trim()){f("Phone Number is required");return}if(g.agreedAmount===void 0||g.agreedAmount<0){f("Agreed Amount is required");return}if(n.some(w=>{var p,b;return w.id!==(u||"")&&(w.email&&w.email.trim().toLowerCase()===((p=g.email)==null?void 0:p.trim().toLowerCase())||w.phone&&w.phone.trim()===((b=g.phone)==null?void 0:b.trim()))})){f("A candidate with this Email or Phone Number already exists.");return}const R={...g,id:u||Lt(),joinedDate:g.joinedDate||new Date().toISOString(),paidAmount:T};u?(e(R),a("Candidate updated successfully")):(t(R),a("Candidate added successfully")),c("/candidates")},_=()=>{const S=window.prompt("Enter new status name:");S&&S.trim()&&(s(S.trim()),v({...g,status:S.trim()}))};return i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:u?"Edit Candidate":"Add New Candidate"}),d&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded shadow-sm animate-fade-in",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm text-red-700 font-bold",children:d})})})}),i.jsxs("form",{onSubmit:y,children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsx("div",{className:"space-y-6",children:i.jsxs(ne,{title:"Personal & Contact Details",children:[i.jsx("div",{className:"flex justify-end mb-4",children:i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer bg-gray-50 px-4 py-2 rounded-lg border border-spr-700 hover:bg-gray-100",children:[i.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Active Status"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"checkbox",className:"sr-only peer",checked:g.isActive,onChange:S=>v({...g,isActive:S.target.checked})}),i.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-spr-accent"})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Full Name"}),i.jsx(me,{value:g.name,onChange:S=>v({...g,name:S.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Batch ID"}),i.jsx(me,{value:g.batchId,onChange:S=>v({...g,batchId:S.target.value}),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Phone Number"}),i.jsx(me,{value:g.phone,onChange:S=>v({...g,phone:S.target.value}),required:!0,numericOnly:!0,maxLength:15,placeholder:"Digits only"})]}),i.jsx(me,{label:"Alternate Phone",value:g.alternatePhone||"",onChange:S=>v({...g,alternatePhone:S.target.value}),numericOnly:!0,maxLength:15,placeholder:"Digits only"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Email Address"}),i.jsx(me,{type:"email",value:g.email,onChange:S=>v({...g,email:S.target.value}),required:!0})]}),i.jsx(me,{label:"Referred By",value:g.referredBy||"",onChange:S=>v({...g,referredBy:S.target.value}),placeholder:"Name of referrer (Optional)"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Complete Address"}),i.jsx("textarea",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",rows:3,value:g.address,onChange:S=>v({...g,address:S.target.value}),placeholder:"Enter full address"})]})]})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ne,{title:"Financial Overview",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Agreed Total Amount ()"}),i.jsx(me,{type:"number",value:g.agreedAmount,onChange:S=>v({...g,agreedAmount:parseFloat(S.target.value)||0}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Paid as per Ledger ()"}),i.jsx("div",{className:"px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg font-bold text-emerald-700 tabular-nums",children:se(T)}),i.jsx("div",{className:"text-xs mt-1 font-bold",children:j()})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 required-label",children:"Current Status"}),i.jsx("button",{type:"button",onClick:_,className:"text-xs text-spr-accent hover:underline font-medium",children:"+ Add Status"})]}),i.jsx("select",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors",value:g.status,onChange:S=>v({...g,status:S.target.value}),required:!0,children:r.map(S=>i.jsx("option",{value:S,children:S},S))})]}),g.status===ct.Placed&&i.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200 mb-4 space-y-3 animate-fade-in",children:[i.jsx("h4",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wide",children:"Placement Details"}),i.jsx(me,{label:"Company Name",value:g.placedCompany||"",onChange:S=>v({...g,placedCompany:S.target.value}),placeholder:"e.g. Google, Microsoft"}),i.jsx(me,{label:"Package / Salary Details",value:g.packageDetails||"",onChange:S=>v({...g,packageDetails:S.target.value}),placeholder:"e.g. 12 LPA"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),i.jsx("textarea",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",rows:2,value:g.notes,onChange:S=>v({...g,notes:S.target.value})})]})]}),i.jsx(ne,{title:"Candidature Agreement",children:i.jsx("textarea",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-800 font-mono text-sm focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",rows:8,value:g.agreementText,onChange:S=>v({...g,agreementText:S.target.value})})})]})]}),i.jsxs("div",{className:"mt-6 flex gap-4 justify-end pb-10",children:[i.jsx(G,{type:"button",variant:"secondary",onClick:()=>c("/candidates"),children:"Cancel"}),i.jsx(G,{type:"submit",children:u?"Update Candidate":"Save Candidate"})]})]})]})},S4=()=>{const{candidates:t,markAgreementSent:e,markAgreementAccepted:n,isCloudEnabled:r}=Ce(),{id:s}=_s(),a=Et(),o=t.find(d=>d.id===s);if(!o)return i.jsx("div",{className:"p-8 text-center text-gray-500",children:"Candidate not found"});const c=()=>{if(!o.email){alert("No email address found for this candidate.");return}const f=`${window.location.href.split("#")[0]}#/portal/agreement/${o.id}`,m=encodeURIComponent(`Training Agreement - ${o.name} (${o.batchId})`),g=`Dear ${o.name},

Please review and accept your training agreement with SPR Techforge using the link below:

CLICK HERE TO ACCEPT AGREEMENT:
${f}

--------------------------------------------------
Alternatively, the text is provided below for your reference:

${o.agreementText}

Regards,
SPR Techforge Pvt Ltd`,v=encodeURIComponent(g);e(o.id),window.open(`mailto:${o.email}?subject=${m}&body=${v}`)},u=()=>{window.confirm("Confirm that the candidate has physically signed or accepted the agreement?")&&n(o.id)};return i.jsxs("div",{className:"bg-white min-h-screen text-black p-8",children:[i.jsxs("div",{className:"print:hidden mb-8 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center bg-gray-100 p-4 rounded-lg border border-gray-300",children:[i.jsx(G,{variant:"secondary",onClick:()=>a(-1),className:"text-gray-800",children:"Back"}),i.jsxs("div",{className:"flex gap-2",children:[o.agreementAcceptedDate?i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-100 text-emerald-800 rounded-lg font-bold border border-emerald-200",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Accepted on ",new Date(o.agreementAcceptedDate).toLocaleDateString()]}):i.jsxs(i.Fragment,{children:[i.jsx(G,{variant:"secondary",onClick:c,className:"border-blue-300 text-blue-700 bg-blue-50 hover:bg-blue-100",children:"Email Agreement & Link"}),i.jsx(G,{variant:"success",onClick:u,children:"Mark as Accepted"})]}),i.jsx(G,{onClick:()=>window.print(),children:"Print / Save PDF"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:`p-3 rounded border ${o.agreementSentDate?"bg-blue-50 border-blue-200 text-blue-800":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[i.jsx("span",{className:"font-bold text-xs uppercase block",children:"Status: Sent"}),o.agreementSentDate?new Date(o.agreementSentDate).toLocaleString():"Not Sent yet"]}),i.jsxs("div",{className:`p-3 rounded border ${o.agreementAcceptedDate?"bg-emerald-50 border-emerald-200 text-emerald-800":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[i.jsx("span",{className:"font-bold text-xs uppercase block",children:"Status: Accepted"}),o.agreementAcceptedDate?new Date(o.agreementAcceptedDate).toLocaleString():"Pending"]}),i.jsxs("div",{className:`p-3 rounded border ${o.agreementRejectedDate?"bg-red-50 border-red-200 text-red-800":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[i.jsx("span",{className:"font-bold text-xs uppercase block",children:"Status: Rejected"}),o.agreementRejectedDate?i.jsxs("div",{children:[i.jsx("p",{className:"text-xs",children:new Date(o.agreementRejectedDate).toLocaleString()}),i.jsxs("p",{className:"text-[10px] italic mt-1",children:["Reason: ",o.agreementRejectionReason]})]}):"No Rejections"]})]}),!r&&i.jsxs("div",{className:"bg-amber-50 text-amber-800 text-xs p-2 rounded border border-amber-200",children:[i.jsx("strong",{children:"Note:"}),' Online Acceptance Link only works when Cloud Sync is enabled. If offline, please use "Mark as Accepted" manually.']})]}),i.jsxs("div",{className:"max-w-3xl mx-auto print:w-full",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8 border-b-2 border-indigo-600 pb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-indigo-600 rounded-lg",children:i.jsx("svg",{className:"text-white w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-indigo-900",children:"SPR Techforge Pvt Ltd"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Excellence in Training & Placement"})]})]}),i.jsxs("div",{className:"text-right text-sm text-gray-600",children:[i.jsxs("p",{children:["Date: ",new Date().toLocaleDateString()]}),i.jsxs("p",{children:["Ref: ",o.batchId]})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-center uppercase underline mb-6",children:"Candidature Training Agreement"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 bg-gray-50 p-4 rounded border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Candidate Name"}),i.jsx("p",{className:"font-bold text-lg",children:o.name})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Batch ID"}),i.jsx("p",{className:"font-bold text-lg",children:o.batchId})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Contact"}),i.jsx("p",{children:o.phone}),i.jsx("p",{children:o.email})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Address"}),i.jsx("p",{className:"whitespace-pre-wrap",children:o.address||"N/A"})]})]}),i.jsx("div",{className:"prose max-w-none",children:i.jsx("div",{className:"whitespace-pre-wrap font-serif text-justify leading-relaxed text-gray-800",children:o.agreementText||"No agreement text provided."})})]}),i.jsxs("div",{className:"mt-20 grid grid-cols-2 gap-10",children:[i.jsxs("div",{className:"border-t border-black pt-2 text-center",children:[i.jsx("p",{className:"font-bold",children:"SPR Techforge Representative"}),i.jsx("p",{className:"text-xs text-gray-500",children:"(Authorized Signatory)"})]}),i.jsxs("div",{className:"border-t border-black pt-2 text-center relative",children:[i.jsx("p",{className:"font-bold",children:o.name}),i.jsx("p",{className:"text-xs text-gray-500",children:"(Candidate Signature)"}),o.agreementAcceptedDate&&i.jsxs("div",{className:"absolute top-[-40px] left-1/2 transform -translate-x-1/2 border-2 border-emerald-600 text-emerald-600 px-4 py-1 font-bold rounded opacity-80 rotate-[-10deg]",children:["DIGITALLY ACCEPTED",i.jsx("div",{className:"text-[8px] text-center",children:new Date(o.agreementAcceptedDate).toLocaleDateString()})]}),o.agreementRejectedDate&&i.jsxs("div",{className:"absolute top-[-40px] left-1/2 transform -translate-x-1/2 border-2 border-red-600 text-red-600 px-4 py-1 font-bold rounded opacity-80 rotate-[-10deg]",children:["REJECTED",i.jsx("div",{className:"text-[8px] text-center",children:new Date(o.agreementRejectedDate).toLocaleDateString()})]})]})]}),i.jsx("div",{className:"mt-12 text-center text-xs text-gray-400 print:fixed print:bottom-4 print:w-full",children:i.jsx("p",{children:"SPR Techforge Pvt Ltd | Sri Godha Nilayam, 9th Phase Rd, KPHB phase 6, Kukatpally, Hyderabad | contact@sprtechforge.com"})})]})]})},k4=()=>{const{transactions:t,getEntityName:e,deleteTransaction:n,user:r,accounts:s,candidates:a}=Ce(),[o,c]=L.useState(1),[u,d]=L.useState(""),[f,m]=L.useState("All"),[g,v]=L.useState("All"),[T,C]=L.useState(""),[I,j]=L.useState(""),[y,_]=L.useState(""),[S,P]=L.useState(""),[R,w]=L.useState(null),[p,b]=L.useState(null),k=Et(),A=10,N=[...t].sort((U,oe)=>new Date(oe.date).getTime()-new Date(U.date).getTime()).filter(U=>{const oe=f==="All"||U.type===f,W=g==="All"||g==="Locked"&&U.isLocked||g==="Unlocked"&&!U.isLocked,de=T===""||U.fromEntityId===T,Y=I===""||U.toEntityId===I,re=e(U.fromEntityId,U.fromEntityType).toLowerCase(),Be=e(U.toEntityId,U.toEntityType).toLowerCase(),Wr=U.description.toLowerCase().includes(u.toLowerCase())||re.includes(u.toLowerCase())||Be.includes(u.toLowerCase());let wn=!0;if(y){const Ln=new Date(y);Ln.setHours(0,0,0,0),wn=wn&&new Date(U.date)>=Ln}if(S){const Ln=new Date(S);Ln.setHours(23,59,59,999),wn=wn&&new Date(U.date)<=Ln}return oe&&Wr&&wn&&W&&de&&Y}),J=Math.ceil(N.length/A),ie=N.slice((o-1)*A,o*A),Ae=U=>{if(U.isLocked&&(r==null?void 0:r.role)!=="admin"){alert("This transaction is locked.");return}b(U.id)},Fe=()=>{p&&(n(p),b(null))},q=()=>{const U=N.map(oe=>({Date:new Date(oe.date).toLocaleDateString(),Type:oe.type,Description:oe.description,From:e(oe.fromEntityId,oe.fromEntityType),To:e(oe.toEntityId,oe.toEntityType),Amount:oe.amount,Locked:oe.isLocked?"Yes":"No"}));mi(U,"transactions.csv")},te=[...s].sort((U,oe)=>U.name.localeCompare(oe.name)),le=[...a].sort((U,oe)=>U.name.localeCompare(oe.name));return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Transactions"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(G,{variant:"secondary",onClick:q,children:"Export CSV"}),i.jsx(rt,{to:"/finance/transactions/new",children:i.jsx(G,{children:"+ New Entry"})})]})]}),i.jsxs(ne,{children:[i.jsxs("div",{className:"mb-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(Ts,{placeholder:"Search description...",value:u,onChange:U=>d(U.target.value),onClear:()=>d("")}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:f,onChange:U=>m(U.target.value),children:[i.jsx("option",{value:"All",children:"All Types"}),Object.values(xe).map(U=>i.jsx("option",{value:U,children:U},U))]}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:g,onChange:U=>v(U.target.value),children:[i.jsx("option",{value:"All",children:"All Statuses"}),i.jsx("option",{value:"Locked",children:"Locked"}),i.jsx("option",{value:"Unlocked",children:"Unlocked"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-gray-100 pt-4",children:[i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:T,onChange:U=>C(U.target.value),children:[i.jsx("option",{value:"",children:"All Sources (From)"}),i.jsx("optgroup",{label:"Accounts",children:te.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))}),i.jsx("optgroup",{label:"Candidates",children:le.map(U=>i.jsxs("option",{value:U.id,children:[U.name," (",U.batchId,")"]},U.id))})]}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:I,onChange:U=>j(U.target.value),children:[i.jsx("option",{value:"",children:"All Destinations (To)"}),i.jsx("optgroup",{label:"Accounts",children:te.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))}),i.jsx("optgroup",{label:"Candidates",children:le.map(U=>i.jsxs("option",{value:U.id,children:[U.name," (",U.batchId,")"]},U.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-gray-100 pt-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold w-12",children:"From"}),i.jsx("input",{type:"date",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none placeholder-gray-400",value:y,onChange:U=>_(U.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold w-12",children:"To"}),i.jsx("input",{type:"date",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none placeholder-gray-400",value:S,onChange:U=>P(U.target.value)})]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase tracking-wider text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-3 px-4 w-28",children:"Date"}),i.jsx("th",{className:"py-3 px-4",children:"Description"}),i.jsx("th",{className:"py-3 px-4",children:"From (Source)"}),i.jsx("th",{className:"py-3 px-4",children:"To (Dest)"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Amount"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:ie.length>0?ie.map(U=>{const oe=U.isLocked,W=!oe||(r==null?void 0:r.role)==="admin";return i.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${oe?"bg-gray-50/50":""}`,children:[i.jsx("td",{className:"py-3 px-4 text-sm text-gray-500",children:new Date(U.date).toLocaleDateString()}),i.jsxs("td",{className:"py-3 px-4 cursor-pointer group",onClick:()=>w(U),children:[i.jsxs("div",{className:`font-medium flex items-center gap-2 transition-colors ${oe?"text-gray-500":"text-gray-900 hover:text-indigo-600"}`,children:[U.description,oe?i.jsxs("svg",{className:"w-4 h-4 text-amber-600/70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("title",{children:"Locked Transaction"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]}):i.jsxs("svg",{className:"w-3 h-3 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("title",{children:"Editable"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})]})]}),i.jsx("div",{className:"text-xs text-gray-500 inline-block px-1 rounded bg-gray-100 border border-gray-200",children:U.type})]}),i.jsx("td",{className:"py-3 px-4 text-sm",children:e(U.fromEntityId,U.fromEntityType)}),i.jsx("td",{className:"py-3 px-4 text-sm",children:e(U.toEntityId,U.toEntityType)}),i.jsx("td",{className:`py-3 px-4 text-right font-mono font-bold whitespace-nowrap tabular-nums ${U.type===xe.Income?"text-emerald-600":U.type===xe.Payment?"text-red-600":"text-gray-700"}`,children:se(U.amount)}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsx("button",{onClick:()=>w(U),className:"text-gray-400 hover:text-gray-900 p-1 rounded hover:bg-gray-100",title:"View Details",children:i.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),W?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>k(`/finance/transactions/edit/${U.id}`),className:"text-blue-500 hover:text-blue-700 p-1 rounded hover:bg-blue-50",title:"Edit",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),i.jsx("button",{onClick:()=>Ae(U),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50",title:"Delete",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}):i.jsx("div",{className:"p-1 px-2",title:"Locked",children:i.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]})})]},U.id)}):i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"py-8 text-center text-gray-500",children:"No transactions found matching your criteria."})})})]})}),i.jsx(em,{currentPage:o,totalPages:J,onPageChange:c})]}),i.jsx(en,{isOpen:!!R,onClose:()=>w(null),title:"Transaction Details",children:R&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center pb-4 border-b border-spr-700",children:[i.jsx("p",{className:"text-gray-500 text-sm uppercase tracking-wider font-bold",children:"Amount"}),i.jsx("p",{className:`text-4xl font-bold mt-2 whitespace-nowrap tabular-nums ${R.type===xe.Income?"text-emerald-600":R.type===xe.Payment?"text-red-600":"text-gray-900"}`,children:se(R.amount)}),i.jsx("div",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-gray-200 text-gray-700",children:R.type})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1 font-bold",children:"Date"}),i.jsx("p",{className:"text-gray-900 font-medium",children:new Date(R.date).toDateString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1 font-bold",children:"Transaction ID"}),i.jsx("p",{className:"text-gray-600 font-mono text-sm truncate",title:R.id,children:R.id})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1 font-bold",children:"Description"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"text-gray-900 text-lg leading-relaxed",children:R.description}),R.isLocked&&i.jsxs("svg",{className:"w-5 h-5 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("title",{children:"Locked"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-spr-700 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"From (Source)"}),i.jsx("p",{className:"text-indigo-600 font-bold",children:e(R.fromEntityId,R.fromEntityType)})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-white text-gray-500 border border-spr-700 font-medium",children:R.fromEntityType})})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"To (Destination)"}),i.jsx("p",{className:"text-indigo-600 font-bold",children:e(R.toEntityId,R.toEntityType)})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-white text-gray-500 border border-spr-700 font-medium",children:R.toEntityType})})]})]}),R.isLocked&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded text-amber-800 text-sm",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"This transaction is locked and cannot be modified by staff."]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(G,{variant:"secondary",onClick:()=>w(null),children:"Close"})})]})}),i.jsx(Ai,{isOpen:!!p,onClose:()=>b(null),onConfirm:Fe,title:"Delete Transaction",message:"Are you sure you want to delete this transaction? This will affect account balances."})]})},c0=()=>{const{addTransaction:t,updateTransaction:e,transactions:n,accounts:r,candidates:s,showToast:a}=Ce(),o=Et(),{id:c}=_s(),[u,d]=L.useState(xe.Income),[f,m]=L.useState(new Date().toISOString().split("T")[0]),[g,v]=L.useState(""),[T,C]=L.useState(""),[I,j]=L.useState(""),[y,_]=L.useState("");L.useEffect(()=>{if(c){const b=n.find(k=>k.id===c);b&&(d(b.type),m(b.date.split("T")[0]),v(b.amount.toString()),C(b.description),j(b.fromEntityId),_(b.toEntityId))}},[c,n]);const S=r.filter(b=>b.type===pe.Bank||b.type===pe.Cash),P=r.filter(b=>b.type===pe.Creditor||b.type===pe.Salary),R=r.filter(b=>![pe.Bank,pe.Cash,pe.Creditor,pe.Salary].includes(b.type)),w=b=>i.jsxs(i.Fragment,{children:[i.jsxs("option",{value:"",children:["-- Select ",b," --"]}),i.jsx("optgroup",{label:"Bank & Cash",children:S.map(k=>i.jsxs("option",{value:k.id,children:[k.subType?`${k.subType} > `:"",k.name]},k.id))}),i.jsx("optgroup",{label:"Candidates",children:s.map(k=>i.jsxs("option",{value:k.id,children:[k.name," (",k.batchId,")"]},k.id))}),i.jsx("optgroup",{label:"Creditors / Staff",children:P.map(k=>i.jsxs("option",{value:k.id,children:[k.subType?`${k.subType} > `:"",k.name]},k.id))}),i.jsx("optgroup",{label:"Other Ledgers",children:R.map(k=>i.jsxs("option",{value:k.id,children:[k.subType?`${k.subType} > `:"",k.name]},k.id))})]}),p=b=>{if(b.preventDefault(),!I||!y||!g){alert("Please fill all mandatory fields.");return}const k=s.some(N=>N.id===I),A=s.some(N=>N.id===y),M={id:c||Lt(),date:new Date(f).toISOString(),type:u,amount:parseFloat(g),description:T||`${u} Entry`,fromEntityId:I,fromEntityType:k?"Candidate":"Account",toEntityId:y,toEntityType:A?"Candidate":"Account",isLocked:!1};c?e(M):t(M),a(c?"Transaction updated":"Transaction recorded"),o("/finance/transactions")};return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("button",{onClick:()=>o(-1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),i.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[c?"Edit":"Record"," Transaction"]})]}),i.jsx(ne,{children:i.jsxs("form",{onSubmit:p,className:"space-y-6",children:[i.jsx("div",{className:"flex bg-gray-100 p-1.5 rounded-xl border border-gray-200",children:Object.values(xe).map(b=>i.jsx("button",{type:"button",onClick:()=>d(b),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${u===b?"bg-white text-spr-900 shadow-sm border border-gray-100":"text-gray-500 hover:text-gray-700"}`,children:b},b))}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Transaction Date"}),i.jsx("input",{type:"date",className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:f,onChange:b=>m(b.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Amount ()"}),i.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 font-bold focus:ring-1 focus:ring-spr-accent outline-none",placeholder:"0.00",value:g,onChange:b=>v(b.target.value),required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"From (Source of Funds)"}),i.jsx("select",{className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:I,onChange:b=>j(b.target.value),required:!0,children:w("Payer")}),i.jsx("p",{className:"text-[10px] text-gray-400 mt-1 uppercase font-medium",children:"Select who is paying or where money is coming from"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"To (Destination Ledger)"}),i.jsx("select",{className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:y,onChange:b=>_(b.target.value),required:!0,children:w("Receiver")}),i.jsx("p",{className:"text-[10px] text-gray-400 mt-1 uppercase font-medium",children:"Select where the money is being deposited"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Description / Memo"}),i.jsx("textarea",{className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",rows:2,value:T,onChange:b=>C(b.target.value),placeholder:"e.g. Monthly Rent, Registration Fee, Staff Salary..."})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[i.jsx(G,{type:"button",variant:"secondary",onClick:()=>o("/finance/transactions"),children:"Cancel"}),i.jsx(G,{type:"submit",className:"px-10",children:c?"Update Entry":"Save Transaction"})]})]})})]})},I4=()=>{const{accounts:t,getEntityBalance:e,deleteAccount:n}=Ce(),r=Et(),[s,a]=L.useState(""),[o,c]=L.useState(null),u=(v,T)=>{if(T){alert("Cannot delete system accounts");return}c(v)},d=()=>{o&&(n(o),c(null))},f=v=>v>0?"text-emerald-600":v<0?"text-red-600":"text-gray-400",g=t.filter(v=>v.name.toLowerCase().includes(s.toLowerCase())||v.subType&&v.subType.toLowerCase().includes(s.toLowerCase())).reduce((v,T)=>{const C=T.subType||`General ${T.type}`;return v[C]||(v[C]=[]),v[C].push(T),v},{});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ledger Accounts"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Manage your Chart of Accounts organized by Sub Ledgers."})]}),i.jsx(rt,{to:"/finance/accounts/new",children:i.jsx(G,{children:"+ Add Account"})})]}),i.jsx(ne,{className:"p-0",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-gray-500 ml-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),i.jsx(Ts,{placeholder:"Search accounts or sub-ledgers...",className:"w-full border-none rounded-lg py-4 shadow-none focus:ring-0",value:s,onChange:v=>a(v.target.value),onClear:()=>a("")})]})}),Object.keys(g).length>0?Object.entries(g).sort().map(([v,T])=>i.jsx(ne,{title:v,action:i.jsx("span",{className:"text-[10px] font-bold bg-gray-100 text-gray-500 px-2 py-1 rounded uppercase tracking-widest",children:T[0].type}),className:"mb-6 border-l-4 border-l-indigo-500",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-100 text-[10px] uppercase font-bold text-gray-400",children:[i.jsx("th",{className:"py-2 px-4",children:"Ledger Name"}),i.jsx("th",{className:"py-2 px-4 text-right",children:"Current Balance"}),i.jsx("th",{className:"py-2 px-4 text-center w-32",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-50",children:T.map(C=>{const I=e(C.id,"Account");return i.jsxs("tr",{className:"hover:bg-indigo-50/30 transition-colors",children:[i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("div",{className:"font-bold text-gray-800",children:C.name}),C.description&&i.jsx("div",{className:"text-[10px] text-gray-400 italic",children:C.description})]}),i.jsx("td",{className:`py-3 px-4 text-right font-mono font-bold whitespace-nowrap tabular-nums ${f(I)}`,children:se(I)}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsxs("div",{className:"flex justify-center gap-1",children:[i.jsx("button",{onClick:()=>r(`/finance/statement/Account/${C.id}`),className:"p-1.5 text-indigo-600 hover:bg-indigo-100 rounded",title:"Statement",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx("button",{onClick:()=>r(`/finance/accounts/edit/${C.id}`),className:"p-1.5 text-blue-600 hover:bg-blue-100 rounded",title:"Edit",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),!C.isSystem&&i.jsx("button",{onClick:()=>u(C.id,C.isSystem),className:"p-1.5 text-red-500 hover:bg-red-100 rounded",title:"Delete",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},C.id)})})]})})},v)):i.jsx("div",{className:"text-center text-gray-500 py-12 bg-white rounded-xl border border-gray-300 border-dashed",children:i.jsxs("p",{children:['No ledger accounts found matching "',s,'".']})}),i.jsx(Ai,{isOpen:!!o,onClose:()=>c(null),onConfirm:d,title:"Delete Account",message:"Are you sure you want to delete this account? History will be preserved but the account name will be lost in filters."})]})},u0=()=>{const{addAccount:t,updateAccount:e,accounts:n,showToast:r}=Ce(),s=Et(),{id:a}=_s(),[o,c]=L.useState({name:"",type:pe.Expense,subType:"",openingBalance:0,description:"",recurringAmount:0,recurringStartDate:"",recurringDueDay:1});L.useEffect(()=>{if(a){const f=n.find(m=>m.id===a);f&&c(f)}},[a,n]);const u=f=>{if(f.preventDefault(),!o.name)return alert("Account Name is required");const m={...o,id:a||Lt()};a?(e(m),r("Ledger Account updated successfully")):(t(m),r("Ledger Account created successfully")),s("/finance/accounts")},d=o.type===pe.Salary||o.type===pe.Expense;return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:a?"Edit Account":"Add New Account"}),i.jsx(ne,{children:i.jsxs("form",{onSubmit:u,children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx("div",{className:"col-span-2",children:i.jsx(me,{label:"Account / Ledger Name",value:o.name,onChange:f=>c({...o,name:f.target.value}),placeholder:o.type==="Salary"?"e.g. John Doe Salary A/c":"e.g. Axis Bank, Office Rent",required:!0})}),i.jsx(_1,{label:"Account Type",value:o.type,onChange:f=>c({...o,type:f.target.value}),children:Object.values(pe).map(f=>i.jsx("option",{value:f,children:f},f))}),i.jsx(me,{label:"Sub Ledger / Grouping",value:o.subType,onChange:f=>c({...o,subType:f.target.value}),placeholder:"e.g. Utilities, Employee, HDFC"}),i.jsx(me,{label:"Opening Balance ()",type:"number",value:o.openingBalance,onChange:f=>c({...o,openingBalance:parseFloat(f.target.value)||0})})]}),d&&i.jsxs("div",{className:"mt-6 bg-blue-50 p-4 rounded-lg border border-blue-200 animate-fade-in",children:[i.jsx("h3",{className:"text-sm font-bold text-blue-900 uppercase mb-3",children:"Fixed Monthly Obligations"}),i.jsx("p",{className:"text-xs text-blue-800 mb-3",children:"Configure this if you have a fixed monthly payment for this account (e.g., Employee Salary, Office Rent)."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fixed Monthly Amount ()"}),i.jsx(me,{type:"number",value:o.recurringAmount||0,onChange:f=>c({...o,recurringAmount:parseFloat(f.target.value)||0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Month/Date"}),i.jsx(me,{type:"date",value:o.recurringStartDate||"",onChange:f=>c({...o,recurringStartDate:f.target.value})})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Day of Month"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"number",min:"1",max:"31",className:"w-24 bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors shadow-sm",value:o.recurringDueDay||1,onChange:f=>c({...o,recurringDueDay:parseInt(f.target.value)||1})}),i.jsx("p",{className:"text-xs text-gray-500 italic",children:'The payment will show as "Pending" after this day passes each month. Use 31 for end of month.'})]})]})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx(me,{label:"Description",value:o.description||"",onChange:f=>c({...o,description:f.target.value})})}),i.jsxs("div",{className:"mt-6 flex gap-4 justify-end",children:[i.jsx(G,{type:"button",variant:"secondary",onClick:()=>s("/finance/accounts"),children:"Cancel"}),i.jsx(G,{type:"submit",children:"Save Account"})]})]})})]})},A4=()=>{const{transactions:t,getEntityName:e,accounts:n,candidates:r}=Ce(),{type:s,id:a}=_s(),o=Et();if(!s||!a)return i.jsx("div",{children:"Invalid Parameters"});const c=s==="Account"?n.find(T=>T.id===a):null,u=s==="Candidate"?r.find(T=>T.id===a):null,d=(u==null?void 0:u.name)||(c==null?void 0:c.name);if(!d)return i.jsx("div",{className:"text-gray-900 p-4",children:"Entity not found."});const m=[...t.filter(T=>T.fromEntityId===a&&T.fromEntityType===s||T.toEntityId===a&&T.toEntityType===s).sort((T,C)=>new Date(C.date).getTime()-new Date(T.date).getTime())].reverse();let g=0;s==="Account"&&c&&(g=c.openingBalance);const v=m.map(T=>{let C=0;return T.toEntityId===a&&T.toEntityType===s?C=T.amount:C=-T.amount,g+=C,{...T,impact:C,runningBalance:g}}).reverse();return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx(G,{variant:"secondary",onClick:()=>o(-1),className:"mb-2 text-xs",children:"Back"}),i.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Statement: ",d]}),i.jsxs("p",{className:"text-gray-500 text-sm font-medium",children:[s," ",c!=null&&c.subType?` Group: ${c.subType}`:""]})]}),i.jsx(G,{onClick:()=>mi(v,`${d}_Statement.csv`),children:"Download CSV"})]}),i.jsx(ne,{children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-3 px-4",children:"Date"}),i.jsx("th",{className:"py-3 px-4",children:"Description"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Credit (+)"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Debit (-)"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Balance"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:v.length>0?v.map(T=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4 text-sm font-medium",children:new Date(T.date).toLocaleDateString()}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("div",{className:"text-gray-900",children:T.description}),i.jsx("div",{className:"text-xs text-gray-500",children:T.impact>0?`From: ${e(T.fromEntityId,T.fromEntityType)}`:`To: ${e(T.toEntityId,T.toEntityType)}`})]}),i.jsx("td",{className:"py-3 px-4 text-right text-emerald-600 font-medium whitespace-nowrap tabular-nums",children:T.impact>0?se(T.amount):"-"}),i.jsx("td",{className:"py-3 px-4 text-right text-red-600 font-medium whitespace-nowrap tabular-nums",children:T.impact<0?se(T.amount):"-"}),i.jsx("td",{className:"py-3 px-4 text-right font-mono font-bold text-gray-900 whitespace-nowrap tabular-nums",children:se(T.runningBalance)})]},T.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"text-center py-8 text-gray-500",children:"No transactions recorded for this entity."})})})]})})]})},P4=()=>{const{transactions:t,accounts:e,candidates:n,getEntityBalance:r}=Ce(),[s,a]=L.useState("BS"),o=t.filter(w=>{if(w.type!==xe.Income)return!1;if(w.fromEntityType==="Candidate")return!0;if(w.fromEntityType==="Account"){const p=e.find(b=>b.id===w.fromEntityId);return(p==null?void 0:p.type)===pe.Income}return!1}),c=t.filter(w=>w.type===xe.Payment),u=o.reduce((w,p)=>w+p.amount,0),d=c.reduce((w,p)=>w+p.amount,0),f=u-d,m=c.reduce((w,p)=>{let b="General Payment";if(p.toEntityType==="Account"){const k=e.find(A=>A.id===p.toEntityId);k&&(b=k.subType||k.name)}return w[b]=(w[b]||0)+p.amount,w},{}),g=e.filter(w=>w.type===pe.Cash),v=e.filter(w=>w.type===pe.Bank),T=e.filter(w=>w.type===pe.Debtor),C=g.reduce((w,p)=>w+r(p.id,"Account"),0),I=v.reduce((w,p)=>w+r(p.id,"Account"),0),j=T.reduce((w,p)=>w+r(p.id,"Account"),0),y=n.reduce((w,p)=>{if(!p.isActive&&p.status==="Discontinued")return w;const b=t.filter(N=>N.fromEntityId===p.id&&N.type===xe.Income).reduce((N,J)=>N+J.amount,0),k=t.filter(N=>N.toEntityId===p.id&&N.type===xe.Refund).reduce((N,J)=>N+J.amount,0),A=b-k,M=p.agreedAmount-A;return w+(M>0?M:0)},0),_=C+I+j+y,P=e.filter(w=>w.type===pe.Creditor).reduce((w,p)=>{const b=r(p.id,"Account");return w+(b<0?Math.abs(b):0)},0),R=_-P;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center print:hidden",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Financial Statements"}),i.jsx(G,{onClick:()=>window.print(),children:"Print / Save PDF"})]}),i.jsxs("div",{className:"print:hidden flex space-x-4 border-b border-gray-200",children:[i.jsx("button",{className:`py-2 px-4 font-medium border-b-2 transition-colors ${s==="BS"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>a("BS"),children:"Balance Sheet"}),i.jsx("button",{className:`py-2 px-4 font-medium border-b-2 transition-colors ${s==="PL"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>a("PL"),children:"Profit & Loss"})]}),i.jsxs("div",{className:"bg-white p-8 min-h-screen shadow-sm border border-gray-200 print:shadow-none print:border-none print:p-0",children:[i.jsxs("div",{className:"text-center border-b-2 border-gray-800 pb-6 mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 uppercase tracking-widest",children:"SPR Techforge Pvt Ltd"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Consultancy & Training Services"}),i.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Generated on: ",new Date().toLocaleDateString()]})]}),(s==="BS"||typeof window<"u")&&i.jsxs("div",{className:s==="BS"?"block":"hidden print:block print:break-after-page",children:[i.jsx("h3",{className:"text-xl font-bold text-center underline mb-6",children:"BALANCE SHEET"}),i.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 mb-2",children:[i.jsx("span",{className:"font-bold text-emerald-800",children:"ASSETS"}),i.jsx("span",{className:"font-bold text-emerald-800",children:"Amount ()"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsx("div",{className:"flex justify-between font-semibold text-gray-700",children:i.jsx("span",{children:"Current Assets"})}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Cash on Hand"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:se(C)})]}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Bank Accounts"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:se(I)})]}),i.jsx("div",{className:"flex justify-between font-semibold text-gray-700 mt-4",children:i.jsx("span",{children:"Receivables"})}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Candidate Fees Pending"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:se(y)})]}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Sundry Debtors"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:se(j)})]})]}),i.jsxs("div",{className:"flex justify-between border-t border-gray-800 pt-2 mt-8 font-bold text-gray-900 text-lg",children:[i.jsx("span",{children:"TOTAL ASSETS"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:se(_)})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 mb-2",children:[i.jsx("span",{className:"font-bold text-red-800",children:"LIABILITIES"}),i.jsx("span",{className:"font-bold text-red-800",children:"Amount ()"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsx("div",{className:"flex justify-between font-semibold text-gray-700",children:i.jsx("span",{children:"Current Liabilities"})}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Sundry Creditors (Loans/Payables)"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:se(P)})]})]}),i.jsxs("div",{className:"flex justify-between border-t border-gray-300 pt-2 mt-8 font-bold text-gray-700",children:[i.jsx("span",{children:"Total Liabilities"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:se(P)})]}),i.jsxs("div",{className:"mt-8",children:[i.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 mb-2",children:[i.jsx("span",{className:"font-bold text-indigo-800",children:"EQUITY"}),i.jsx("span",{className:"font-bold text-indigo-800",children:"Amount ()"})]}),i.jsx("div",{className:"space-y-2 text-sm",children:i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Owners Capital / Net Value"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:se(R)})]})})]}),i.jsxs("div",{className:"flex justify-between border-t border-gray-800 pt-2 mt-8 font-bold text-gray-900 text-lg",children:[i.jsx("span",{children:"TOTAL LIABILITIES & EQUITY"}),i.jsx("span",{className:"whitespace-nowrap tabular-nums",children:se(P+R)})]})]})]})]}),(s==="PL"||typeof window<"u")&&i.jsxs("div",{className:`${s==="PL"?"block":"hidden print:block"} print:mt-8`,children:[i.jsx("h3",{className:"text-xl font-bold text-center underline mb-6",children:"PROFIT & LOSS ACCOUNT (Operating)"}),i.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-gray-100 text-gray-900 font-bold",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 border-r border-gray-300 w-2/3",children:"Particulars"}),i.jsx("th",{className:"p-3 text-right",children:"Amount ()"})]})}),i.jsxs("tbody",{className:"divide-y divide-gray-200",children:[i.jsxs("tr",{className:"bg-emerald-50/50 font-bold text-emerald-800",children:[i.jsx("td",{className:"p-3 border-r border-gray-200",children:"OPERATING INCOME"}),i.jsx("td",{className:"p-3 text-right"})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"p-3 pl-8 border-r border-gray-200 text-gray-700",children:"Fees & Consultancy Revenue"}),i.jsx("td",{className:"p-3 text-right text-gray-900 whitespace-nowrap tabular-nums",children:se(u)})]}),i.jsxs("tr",{className:"font-bold bg-gray-50",children:[i.jsx("td",{className:"p-3 border-r border-gray-200 text-right",children:"Total Operating Revenue (A)"}),i.jsx("td",{className:"p-3 text-right text-emerald-700 whitespace-nowrap tabular-nums",children:se(u)})]}),i.jsxs("tr",{className:"bg-red-50/50 font-bold text-red-800",children:[i.jsx("td",{className:"p-3 border-r border-gray-200",children:"OPERATING EXPENSES"}),i.jsx("td",{className:"p-3 text-right"})]}),Object.entries(m).map(([w,p])=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-3 pl-8 border-r border-gray-200 text-gray-700",children:w}),i.jsx("td",{className:"p-3 text-right text-gray-900 whitespace-nowrap tabular-nums",children:se(p)})]},w)),i.jsxs("tr",{className:"font-bold bg-gray-50",children:[i.jsx("td",{className:"p-3 border-r border-gray-200 text-right",children:"Total Operating Expenses (B)"}),i.jsx("td",{className:"p-3 text-right text-red-700 whitespace-nowrap tabular-nums",children:se(d)})]}),i.jsxs("tr",{className:`text-lg font-bold ${f>=0?"bg-emerald-100 text-emerald-900":"bg-red-100 text-red-900"}`,children:[i.jsx("td",{className:"p-4 border-r border-gray-300 text-right uppercase",children:f>=0?"Net Operating Profit (A - B)":"Net Operating Loss (A - B)"}),i.jsx("td",{className:"p-4 text-right whitespace-nowrap tabular-nums",children:se(f)})]})]})]})}),i.jsx("p",{className:"mt-4 text-[10px] text-gray-400 italic",children:"* Loans and liability receipts are excluded from Operating Profit."})]}),i.jsx("div",{className:"mt-12 text-center text-xs text-gray-400",children:i.jsx("p",{children:"This is a computer-generated statement."})})]})]})},R4=()=>{const{accounts:t,transactions:e}=Ce(),n=t.filter(a=>(a.type===pe.Salary||a.recurringAmount!==void 0&&a.recurringAmount>0)&&a.recurringStartDate),r=(a,o=1,c)=>{const u=new Date(a),d=c?new Date(c):new Date;let f=0,m=new Date(u.getFullYear(),u.getMonth(),1),g=0;const v=600;for(;m<=d&&g<v;){g++;let T=m.getFullYear(),C=m.getMonth(),I=o;const j=new Date(T,C+1,0).getDate();I>j&&(I=j);const y=new Date(T,C,I);d>=y&&f++,m.setMonth(m.getMonth()+1)}return f},s=a=>{const o=["th","st","nd","rd"],c=a%100;return a+(o[(c-20)%10]||o[c]||o[0])};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Payroll & Fixed Expenses"}),i.jsx("p",{className:"text-gray-500",children:"Track monthly salaries, office rent, and other recurring fixed obligations."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(rt,{to:"/finance/accounts/new",children:i.jsx(G,{variant:"secondary",children:"+ New Ledger"})}),i.jsx(rt,{to:"/finance/transactions/new",children:i.jsx(G,{children:"+ Make Payment"})})]})]}),i.jsx(ne,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-3 px-4",children:"Ledger / Employee"}),i.jsx("th",{className:"py-3 px-4",children:"Cycle"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Months Due"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Fixed Monthly ()"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Total Payable"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Total Paid"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Balance Pending"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:n.length>0?n.map(a=>{const o=r(a.recurringStartDate,a.recurringDueDay,a.recurringEndDate),c=o*(a.recurringAmount||0),u=e.filter(f=>f.toEntityId===a.id&&f.toEntityType==="Account"&&f.type===xe.Payment).reduce((f,m)=>f+m.amount,0),d=c-u;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900",children:[a.name,a.subType&&i.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase",children:a.subType})]}),i.jsx("td",{className:"py-3 px-4 text-sm",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-medium text-indigo-600",children:a.recurringDueDay===31?"End of month":`${s(a.recurringDueDay||1)} of month`}),i.jsxs("span",{className:"text-[10px] text-gray-400",children:["Since ",new Date(a.recurringStartDate).toLocaleDateString(void 0,{month:"short",year:"numeric"})]})]})}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsxs("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs font-bold ${o>0?"bg-indigo-50 text-indigo-700 border border-indigo-100":"bg-gray-100 text-gray-400"}`,children:[o," Mo."]})}),i.jsx("td",{className:"py-3 px-4 text-right text-gray-900 whitespace-nowrap tabular-nums",children:se(a.recurringAmount||0)}),i.jsx("td",{className:"py-3 px-4 text-right font-medium whitespace-nowrap tabular-nums text-gray-400",children:se(c)}),i.jsx("td",{className:"py-3 px-4 text-right text-emerald-600 font-medium whitespace-nowrap tabular-nums",children:se(u)}),i.jsx("td",{className:`py-3 px-4 text-right font-bold whitespace-nowrap tabular-nums ${d>0?"text-red-600":"text-emerald-600"}`,children:d>0?i.jsxs("div",{className:"flex flex-col items-end",children:[i.jsx("span",{children:se(d)}),i.jsx("span",{className:"text-[9px] uppercase tracking-tighter text-red-400",children:"Arrears"})]}):"CLEARED "}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsx(rt,{to:`/finance/statement/Account/${a.id}`,className:"text-gray-400 hover:text-indigo-600 transition-colors",title:"Statement",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx(rt,{to:`/finance/accounts/edit/${a.id}`,className:"text-gray-400 hover:text-blue-600 transition-colors",title:"Edit Schedule",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})})]})})]},a.id)}):i.jsx("tr",{children:i.jsxs("td",{colSpan:8,className:"py-12 text-center text-gray-500",children:[i.jsxs("div",{className:"flex flex-col items-center opacity-40",children:[i.jsx("svg",{className:"w-12 h-12 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),i.jsx("p",{className:"font-medium",children:"No fixed recurring payments found."})]}),i.jsx("p",{className:"text-xs mt-2 text-gray-400",children:'Create a Ledger Account (Type: Salary or Expense) and set a "Fixed Monthly Amount" to see it here.'})]})})})]})})}),i.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-100 flex items-start gap-3",children:[i.jsx("svg",{className:"w-5 h-5 text-amber-600 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsxs("div",{className:"text-xs text-amber-800 leading-relaxed",children:[i.jsx("strong",{children:"How calculations work:"}),` The system checks the "Due Day" for every month since your configured start date. If today's date has reached or passed that day in the current month, it is added to your total obligations. "Balance Pending" is the difference between total obligations and payments recorded in your ledger.`]})]})]})},D4=()=>{const{exportData:t,exportFullExcel:e,importDatabase:n,factoryReset:r,isCloudEnabled:s,transactions:a,accounts:o,candidates:c,getEntityBalance:u}=Ce(),[d,f]=ka.useState("Data"),m=ka.useRef(null),g=S=>{var w;const P=(w=S.target.files)==null?void 0:w[0];if(!P)return;const R=new FileReader;R.onload=async p=>{var b;try{const k=JSON.parse((b=p.target)==null?void 0:b.result);let A="You are about to restore the database from a backup file. This will OVERWRITE current local data.";s&&(A+=" Since Cloud is enabled, this will also upload the backup data to Firebase, potentially overwriting or adding to existing records."),window.confirm(A+`

Are you sure you want to proceed?`)&&await n(k)}catch{alert("Invalid JSON File. Please upload a valid backup file.")}m.current&&(m.current.value="")},R.readAsText(P)},v=a.filter(S=>S.type===xe.Income).reduce((S,P)=>S+P.amount,0),T=a.filter(S=>S.type===xe.Payment).reduce((S,P)=>S+P.amount,0),C=o.filter(S=>S.type===pe.Creditor||S.type===pe.Salary).reduce((S,P)=>{const R=u(P.id,"Account");return S+(R<0?Math.abs(R):0)},0),I=o.filter(S=>S.type===pe.Debtor).reduce((S,P)=>{const R=u(P.id,"Account");return S+(R>0?R:0)},0)+c.reduce((S,P)=>{if(!P.isActive&&P.status===ct.Discontinued)return S;const R=a.filter(p=>p.fromEntityId===P.id&&p.type===xe.Income).reduce((p,b)=>p+b.amount,0)-a.filter(p=>p.toEntityId===P.id&&p.type===xe.Refund).reduce((p,b)=>p+b.amount,0),w=P.agreedAmount-R;return S+(w>0?w:0)},0),y=Array.from({length:6},(S,P)=>{const R=new Date;return R.setMonth(R.getMonth()-(5-P)),R}).map(S=>{const P=S.toLocaleString("default",{month:"short",year:"2-digit"}),R=a.filter(p=>p.type===xe.Income&&new Date(p.date).getMonth()===S.getMonth()&&new Date(p.date).getFullYear()===S.getFullYear()).reduce((p,b)=>p+b.amount,0),w=a.filter(p=>p.type===xe.Payment&&new Date(p.date).getMonth()===S.getMonth()&&new Date(p.date).getFullYear()===S.getFullYear()).reduce((p,b)=>p+b.amount,0);return{label:P,income:R,payment:w}}),_=Math.max(...y.map(S=>Math.max(S.income,S.payment)),5e3);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Management & Reports"}),i.jsx("p",{className:"text-gray-500",children:"Comprehensive financial analysis and system health."})]}),i.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>f("Data"),className:`px-4 py-2 rounded-md font-medium transition-all ${d==="Data"?"bg-white text-spr-accent shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Data & Metrics"}),i.jsx("button",{onClick:()=>f("Info"),className:`px-4 py-2 rounded-md font-medium transition-all ${d==="Info"?"bg-white text-spr-accent shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"System Status"})]})]}),d==="Data"&&i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsx(ne,{title:"Advanced Data Export",className:"border-l-4 border-l-indigo-600",children:i.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Comprehensive Excel Report"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Download a single Excel file containing multiple sheets: Candidates, Transactions, Debtors, Creditors, Balance Sheet, and P&L."})]}),i.jsxs(G,{onClick:e,className:"shrink-0 bg-indigo-700 hover:bg-indigo-800 py-3 px-8",children:[i.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Full Excel Report"]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(ne,{title:"Pending Obligations Summary",action:i.jsx("span",{className:"text-[10px] font-bold text-amber-600 bg-amber-50 px-2 py-1 rounded border border-amber-100 uppercase",children:"Snapshot"}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50/50 rounded-xl border border-red-100",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-red-700 font-bold uppercase tracking-wider",children:"Pending Payments (Payables)"}),i.jsx("p",{className:"text-xs text-red-500",children:"Money you owe to Creditors/Staff"})]}),i.jsx("p",{className:"text-xl font-black text-red-600 tabular-nums",children:se(C)})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 bg-emerald-50/50 rounded-xl border border-emerald-100",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-emerald-700 font-bold uppercase tracking-wider",children:"Pending Receivables"}),i.jsx("p",{className:"text-xs text-emerald-500",children:"Money owed to you by Students/Debtors"})]}),i.jsx("p",{className:"text-xl font-black text-emerald-600 tabular-nums",children:se(I)})]}),i.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Projected Net Liquidity Increase"}),i.jsx("span",{className:`text-lg font-black tabular-nums ${I-C>=0?"text-spr-600":"text-red-600"}`,children:se(I-C)})]}),i.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:"Total Receivables minus Total Payables"})]})]})}),i.jsx(ne,{title:"Cash Flow Integrity",action:i.jsx("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded border border-indigo-100 uppercase",children:"Realized"}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-50 pb-2",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Total Income (Cash In)"}),i.jsx("span",{className:"font-bold text-emerald-600 tabular-nums",children:se(v)})]}),i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-50 pb-2",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Total Payments (Cash Out)"}),i.jsx("span",{className:"font-bold text-red-600 tabular-nums",children:se(T)})]}),i.jsxs("div",{className:"flex justify-between items-center pt-2",children:[i.jsx("span",{className:"text-base font-bold text-gray-900",children:"Net Realized Profit"}),i.jsx("span",{className:"text-xl font-black text-gray-900 tabular-nums",children:se(v-T)})]})]})})]}),i.jsxs(ne,{title:"Financial Performance Overview (Realized Cash Flow)",children:[i.jsx("div",{className:"h-64 flex items-end justify-between gap-4 px-2 pb-2 pt-6",children:y.map((S,P)=>i.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center gap-2 group",children:[i.jsxs("div",{className:"w-full flex justify-center gap-1 h-full items-end relative",children:[i.jsxs("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-gray-900 text-white text-[10px] p-2 rounded shadow-xl z-10 whitespace-nowrap",children:[i.jsxs("span",{className:"text-emerald-400",children:["In: ",se(S.income)]}),i.jsx("br",{}),i.jsxs("span",{className:"text-red-400",children:["Out: ",se(S.payment)]})]}),i.jsx("div",{className:"w-4 bg-emerald-500/80 hover:bg-emerald-500 rounded-t-sm transition-all duration-300",style:{height:`${S.income/_*100}%`}}),i.jsx("div",{className:"w-4 bg-red-500/80 hover:bg-red-500 rounded-t-sm transition-all duration-300",style:{height:`${S.payment/_*100}%`}})]}),i.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-tighter",children:S.label})]},P))}),i.jsxs("div",{className:"flex justify-center gap-6 mt-6 border-t border-gray-100 pt-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-2.5 h-2.5 bg-emerald-500 rounded-full"}),i.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Income"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-2.5 h-2.5 bg-red-500 rounded-full"}),i.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Payments"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(ne,{className:"flex flex-col justify-between hover:border-blue-200 transition-colors",children:[i.jsxs("div",{children:[i.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-lg flex items-center justify-center mb-4",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),i.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"System Backup (JSON)"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Generate a full technical snapshot of all modules, transactions, and settings for migration or recovery."})]}),i.jsx(G,{onClick:t,className:"w-full",children:"Export Database"})]}),i.jsxs(ne,{className:"flex flex-col justify-between hover:border-emerald-200 transition-colors",children:[i.jsxs("div",{children:[i.jsx("div",{className:"w-10 h-10 bg-emerald-50 text-emerald-600 rounded-lg flex items-center justify-center mb-4",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13l-3-3m0 0l-3 3m3-3v12"})})}),i.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Restore System"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Upload a backup file to restore the application to a previous state."})]}),i.jsxs("div",{children:[i.jsx("input",{type:"file",accept:".json",ref:m,style:{display:"none"},onChange:g}),i.jsx(G,{variant:"secondary",onClick:()=>{var S;return(S=m.current)==null?void 0:S.click()},className:"w-full",children:"Import JSON File"})]})]}),i.jsxs(ne,{className:"flex flex-col justify-between border-red-100 bg-red-50/20 hover:bg-red-50/40 transition-colors",children:[i.jsxs("div",{children:[i.jsx("div",{className:"w-10 h-10 bg-red-50 text-red-600 rounded-lg flex items-center justify-center mb-4",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),i.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Factory Reset"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Wipe all local data and start fresh. Make sure you have a backup first."})]}),i.jsx(G,{variant:"danger",onClick:r,className:"w-full",children:"Reset to Fresh"})]})]})]}),d==="Info"&&i.jsx("div",{className:"animate-fade-in",children:i.jsx(ne,{title:"System Environment",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:`p-4 rounded-xl ${s?"bg-emerald-50 text-emerald-600":"bg-gray-100 text-gray-600"}`,children:i.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-gray-900",children:"Database Engine"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Mode: ",s?"Google Firebase Cloud":"Browser IndexedDB / LocalStorage"]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:s?"Your data is secured in real-time across devices.":"Your data is stored privately on this device."})]})]}),i.jsxs("div",{className:"border-t border-gray-100 pt-6",children:[i.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:"Storage Statistics"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Total Entries"}),i.jsxs("span",{className:"text-xl font-bold text-gray-800",children:[a.length," Transactions"]})]}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Total Accounts"}),i.jsxs("span",{className:"text-xl font-bold text-gray-800",children:[o.length," Ledgers"]})]}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Total Students"}),i.jsxs("span",{className:"text-xl font-bold text-gray-800",children:[c.length," Candidates"]})]}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase block",children:"Last Sync"}),i.jsx("span",{className:"text-sm font-medium text-gray-600",children:new Date().toLocaleTimeString()})]})]})]})]})})})]})},L4=()=>{const{users:t,candidates:e}=Ce(),[n,r]=L.useState(""),[s,a]=L.useState("All"),o=t.filter(f=>!f.linkedCandidateId).map(f=>({id:f.id,name:f.name||f.username,role:f.role==="admin"?"Administrator":"Staff",email:f.email||f.username,phone:"",type:"Staff"})),c=e.filter(f=>f.isActive).map(f=>({id:f.id,name:f.name,role:`Candidate (${f.batchId})`,email:f.email,phone:f.phone,type:"Candidate"})),d=[...o,...c].filter(f=>{const m=f.name.toLowerCase().includes(n.toLowerCase())||f.email.toLowerCase().includes(n.toLowerCase())||f.role.toLowerCase().includes(n.toLowerCase()),g=s==="All"||f.type===s;return m&&g});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Address Book"}),i.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[i.jsx(Ts,{placeholder:"Search contacts...",value:n,onChange:f=>r(f.target.value),onClear:()=>r("")}),i.jsxs("select",{className:"bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:s,onChange:f=>a(f.target.value),children:[i.jsx("option",{value:"All",children:"All Contacts"}),i.jsx("option",{value:"Candidate",children:"Candidates"}),i.jsx("option",{value:"Staff",children:"Staff"})]})]})]}),d.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(f=>i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold text-white ${f.type==="Staff"?"bg-indigo-600":"bg-emerald-500"}`,children:f.name.charAt(0).toUpperCase()}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-gray-900",children:f.name}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${f.type==="Staff"?"bg-indigo-50 text-indigo-700 border-indigo-100":"bg-emerald-50 text-emerald-700 border-emerald-100"}`,children:f.role})]})]}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-600 flex-1",children:[f.phone&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),i.jsx("span",{children:f.phone})]}),f.email&&i.jsxs("div",{className:"flex items-center gap-2 break-all",children:[i.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("span",{children:f.email})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-100",children:[f.phone&&i.jsx("a",{href:`tel:${f.phone}`,className:"flex-1 py-2 text-center rounded-lg bg-green-50 text-green-700 font-medium hover:bg-green-100 transition-colors text-sm",children:"Call"}),f.email&&i.jsx("a",{href:`mailto:${f.email}`,className:"flex-1 py-2 text-center rounded-lg bg-blue-50 text-blue-700 font-medium hover:bg-blue-100 transition-colors text-sm",children:"Mail"})]})]},f.id))}):i.jsx("div",{className:"text-center py-20 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:i.jsx("p",{className:"text-gray-500 font-medium",children:"No contacts found matching your criteria."})})]})},M4=()=>{const{users:t,deleteUser:e,user:n,passwordResetRequests:r,resolvePasswordResetRequest:s}=Ce(),[a,o]=L.useState(null),[c,u]=L.useState({}),d=Et(),f=(n==null?void 0:n.id)==="admin-01"||(n==null?void 0:n.username)==="thirumalreddy@sprtechforge.com",m=(n==null?void 0:n.role)==="admin",g=I=>{if(I===(n==null?void 0:n.id)){alert("You cannot delete yourself.");return}o(I)},v=()=>{a&&(e(a),o(null))},T=I=>{u(j=>({...j,[I]:!j[I]}))},C=(I,j)=>{s(I),j?d(`/admin/users/edit/${j}`):alert("User not found.")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Vr,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"})]}),m&&i.jsx(rt,{to:"/admin/users/new",children:i.jsx(G,{children:"+ Add User"})})]}),m&&r.length>0&&i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-amber-800 mb-3",children:"Pending Password Reset Requests"}),i.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map(I=>{const j=t.find(y=>y.username===I.username);return i.jsxs("div",{className:"flex justify-between bg-white p-4 rounded border border-amber-200 shadow-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:I.username}),i.jsx("p",{className:"text-xs text-gray-500",children:new Date(I.requestDate).toLocaleString()})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(G,{variant:"secondary",onClick:()=>s(I.id),className:"text-xs",children:"Dismiss"}),i.jsx(G,{onClick:()=>C(I.id,(j==null?void 0:j.id)||""),className:"text-xs",disabled:!j,children:"Reset"})]})]},I.id)})})]}),i.jsx(ne,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"py-3 px-4",children:"Full Name"}),i.jsx("th",{className:"py-3 px-4",children:"Login ID"}),m&&i.jsx("th",{className:"py-3 px-4",children:"Password"}),i.jsx("th",{className:"py-3 px-4",children:"Role"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map(I=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:I.name}),i.jsx("td",{className:"py-3 px-4 font-mono text-sm",children:I.username}),m&&i.jsxs("td",{className:"py-3 px-4 text-sm font-mono flex items-center gap-2",children:[c[I.id]?I.password:"",i.jsx("button",{onClick:()=>T(I.id),className:"text-gray-400 hover:text-indigo-600 focus:outline-none",children:c[I.id]?i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):i.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),i.jsx("td",{className:"py-3 px-4 capitalize",children:I.role}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsx(rt,{to:`/admin/users/edit/${I.id}`,className:"text-blue-600 hover:underline text-sm",children:"Edit"}),f&&I.id!==(n==null?void 0:n.id)&&i.jsx("button",{onClick:()=>g(I.id),className:"text-red-500 hover:underline text-sm",children:"Delete"})]})})]},I.id))})]})})}),i.jsx(Ai,{isOpen:!!a,onClose:()=>o(null),onConfirm:v,title:"Delete User",message:"Are you sure? This cannot be undone."})]})},d0=()=>{const{users:t,addUser:e,updateUser:n,showToast:r,user:s}=Ce(),a=Et(),{id:o}=_s(),[c,u]=L.useState(null),[d,f]=L.useState({name:"",username:"",password:"",role:"staff",modules:["candidates"]});L.useEffect(()=>{if(o){const C=t.find(I=>I.id===o);C&&f(C)}},[o,t]);const m=d.username==="thirumalreddy@sprtechforge.com",g=(s==null?void 0:s.username)==="thirumalreddy@sprtechforge.com",v=!m||g,T=C=>{if(C.preventDefault(),!d.name||!d.username){u("Name and Login ID required");return}const I={id:o||Lt(),name:d.name,username:d.username,password:d.password||d.name,role:d.role,modules:d.role==="admin"?["candidates","users","training"]:d.modules||[],isPasswordChanged:o?d.isPasswordChanged:!1};o?(n(I),r("User updated")):(e(I),r("User added")),a("/admin/users")};return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:o?"Edit User":"Add New User"}),c&&i.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded mb-4",children:c}),i.jsx(ne,{children:i.jsxs("form",{onSubmit:T,children:[i.jsx(me,{label:"Full Name",value:d.name,onChange:C=>f({...d,name:C.target.value}),required:!0,disabled:m&&!g}),i.jsx(me,{label:"Login ID",value:d.username,onChange:C=>f({...d,username:C.target.value}),required:!0,disabled:m}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",m&&!g&&i.jsx("span",{className:"text-red-500 text-xs ml-2",children:"(Protected Account)"})]}),v?i.jsx("input",{type:"password",className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:d.password||"",onChange:C=>f({...d,password:C.target.value}),placeholder:o?"Enter new password":"Leave blank for name as default"}):i.jsx("div",{className:"px-4 py-2 bg-gray-100 border border-gray-200 rounded-lg text-gray-500 italic text-sm",children:"Only the Master Admin can change this password."})]}),i.jsxs(_1,{label:"Role",value:d.role,onChange:C=>f({...d,role:C.target.value}),disabled:m&&!g,children:[i.jsx("option",{value:"staff",children:"Staff"}),i.jsx("option",{value:"admin",children:"Admin"}),i.jsx("option",{value:"candidate",children:"Candidate"})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[i.jsx(G,{type:"button",variant:"secondary",onClick:()=>a("/admin/users"),children:"Cancel"}),i.jsx(G,{type:"submit",children:"Save Changes"})]})]})})]})},V4=()=>{const{activityLogs:t,user:e,clearActivityLogs:n}=Ce(),[r,s]=L.useState(1),[a,o]=L.useState(""),c=15,u=(e==null?void 0:e.username)==="thirumalreddy@sprtechforge.com",d=t.filter(T=>T.description.toLowerCase().includes(a.toLowerCase())||T.actorName.toLowerCase().includes(a.toLowerCase())),f=d.slice((r-1)*c,r*c),m=Math.ceil(d.length/c),g=()=>{mi(t,"system_logs.csv")},v=()=>{window.confirm("Clear all logs? This cannot be undone.")&&n()};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Audit Logs"}),i.jsxs("div",{className:"flex gap-2",children:[u&&i.jsx(G,{variant:"danger",onClick:v,children:"Clear Logs"}),i.jsx(G,{variant:"secondary",onClick:g,children:"Export CSV"})]})]}),i.jsxs(ne,{children:[i.jsx("div",{className:"mb-4",children:i.jsx(Ts,{placeholder:"Search logs...",value:a,onChange:T=>o(T.target.value),onClear:()=>o("")})}),i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Time"}),i.jsx("th",{className:"p-3",children:"User"}),i.jsx("th",{className:"p-3",children:"Action"}),i.jsx("th",{className:"p-3",children:"Entity"}),i.jsx("th",{className:"p-3",children:"Description"})]})}),i.jsx("tbody",{children:f.map(T=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"p-3",children:new Date(T.timestamp).toLocaleString()}),i.jsx("td",{className:"p-3 font-bold",children:T.actorName}),i.jsx("td",{className:"p-3",children:i.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-bold",children:T.action})}),i.jsx("td",{className:"p-3",children:T.entityType}),i.jsx("td",{className:"p-3 text-gray-600",children:T.description})]},T.id))})]}),i.jsx(em,{currentPage:r,totalPages:m,onPageChange:s})]})]})},O4=()=>{const t=Ce(),[e,n]=L.useState([]),[r,s]=L.useState(!1),[a,o]=L.useState({total:0,passed:0,failed:0,time:0}),c=(d,f,m,g=0)=>{n(v=>[...v,{id:Date.now()+Math.random(),name:d,status:f,message:m,duration:g}])},u=async()=>{s(!0),n([]),o({total:0,passed:0,failed:0,time:0});const d=performance.now();let f=0,m=0,g=0;const v=async(S,P)=>{g++;const R=performance.now();try{await P();const w=performance.now()-R;c(S,"PASS","Test execution successful",w),f++}catch(w){const p=performance.now()-R;c(S,"FAIL",w.message||"Unknown error",p),m++}};await v("Unit: Currency Formatting",()=>{const S=se(1500.5);if(!S.includes("1,500.50")&&!S.includes("1,500.5"))throw new Error(`Formatting failed: ${S}`)}),await v("Unit: ID Generation",()=>{const S=Lt(),P=Lt();if(S===P)throw new Error("ID collision detected");if(S.length<5)throw new Error("ID too short")}),await v("Unit: Balance Calculation Logic",()=>{const S=[{id:"t1",amount:1e3,type:xe.Income,fromEntityId:"C1",fromEntityType:"Candidate",toEntityId:"A1",toEntityType:"Account",date:"",description:"",isLocked:!1},{id:"t2",amount:200,type:xe.Payment,fromEntityId:"A1",fromEntityType:"Account",toEntityId:"V1",toEntityType:"Account",date:"",description:"",isLocked:!1}],P=ua("A1","Account",S,0);if(P!==800)throw new Error(`Account Balance calc failed. Expected 800, got ${P}`);const R=ua("C1","Candidate",S,0);if(R!==-1e3)throw new Error(`Candidate Balance calc failed. Expected -1000, got ${R}`)});const T=Date.now(),C=`test-user-${T}`,I=`test-cand-${T}`,j=`test-acc-${T}`;await v("API: User Creation",()=>{t.addUser({id:C,name:`User ${T}`,username:`u${T}`,password:"123",role:"staff",modules:[]})}),await v("API: User Update",()=>{t.updateUser({id:C,name:`User ${T} Updated`,username:`u${T}_updated`,password:"123",role:"staff",modules:["finance"]})}),await v("API: Candidate Creation",()=>{t.addCandidate({id:I,name:"API Tester",batchId:"API-01",email:"test@api.com",phone:"9999999999",agreedAmount:1e4,status:ct.Training,isActive:!0,joinedDate:new Date().toISOString()})}),await v("API: Candidate Update",()=>{t.updateCandidate({id:I,name:"API Tester (Updated)",batchId:"API-01",email:"test@api.com",phone:"9999999999",agreedAmount:15e3,status:ct.ReadyForInterview,isActive:!0,joinedDate:new Date().toISOString()})}),await v("API: Account Creation",()=>{t.addAccount({id:j,name:"API Test Bank",type:pe.Bank,openingBalance:5e3})});const y=`test-tx-${T}`;await v("API: Transaction Record",()=>{t.addTransaction({id:y,date:new Date().toISOString(),type:xe.Income,amount:2e3,fromEntityId:I,fromEntityType:"Candidate",toEntityId:j,toEntityType:"Account",description:"API Test Fee",isLocked:!1})}),await v("E2E: Payment Logic Verification",()=>{const S=[{id:"x",date:"",type:xe.Income,amount:2e3,fromEntityId:I,fromEntityType:"Candidate",toEntityId:j,toEntityType:"Account",description:"",isLocked:!1}],P=ua(j,"Account",S,5e3);if(P!==7e3)throw new Error(`E2E Balance Check Failed: Expected 7000, Got ${P}`);const p=15e3-Math.abs(ua(I,"Candidate",S,0));if(p!==13e3)throw new Error(`E2E Due Check Failed: Expected 13000, Got ${p}`)}),await v("Negative: Delete System Account",()=>{try{throw t.deleteAccount("cash-01"),new Error("Failed to block system account deletion")}catch(S){if(!S.message.includes("Cannot delete a System Account"))throw S}}),await v("Negative: Delete Last User",()=>{if(t.users.length===1)try{throw t.deleteUser(t.users[0].id),new Error("Failed to block last user deletion")}catch(S){if(!S.message.includes("Cannot delete the last user"))throw S}}),await v("Cleanup: Remove Test Data",()=>{t.deleteTransaction(y),t.deleteCandidate(I),t.deleteAccount(j),t.deleteUser(C)});const _=performance.now()-d;o({total:g,passed:f,failed:m,time:_}),s(!1)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Diagnostics & API Testing"}),i.jsx("p",{className:"text-gray-600",children:"Automated testing suite for internal logic, integration flows, and negative scenarios."})]}),i.jsx(G,{onClick:u,disabled:r,children:r?"Running Tests...":"Run Full Test Suite"})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs(ne,{className:"text-center py-4",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Tests"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.total})]}),i.jsxs(ne,{className:"text-center py-4 border-emerald-200 bg-emerald-50",children:[i.jsx("p",{className:"text-xs text-emerald-700 uppercase font-bold",children:"Passed"}),i.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:a.passed})]}),i.jsxs(ne,{className:"text-center py-4 border-red-200 bg-red-50",children:[i.jsx("p",{className:"text-xs text-red-700 uppercase font-bold",children:"Failed"}),i.jsx("p",{className:"text-2xl font-bold text-red-700",children:a.failed})]}),i.jsxs(ne,{className:"text-center py-4",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Duration"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[a.time.toFixed(2)," ms"]})]})]}),i.jsx(ne,{title:"Execution Log",children:i.jsxs("div",{className:"h-96 overflow-y-auto space-y-2 font-mono text-sm bg-gray-50 p-4 rounded border border-spr-700",children:[e.length===0&&i.jsx("p",{className:"text-gray-400 text-center italic",children:"Ready to start diagnostics..."}),e.map(d=>i.jsxs("div",{className:`flex items-start gap-3 p-2 rounded border ${d.status==="PASS"?"bg-white border-emerald-200":d.status==="FAIL"?"bg-red-50 border-red-200":"bg-gray-100 border-gray-200"}`,children:[i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold w-16 text-center shrink-0 ${d.status==="PASS"?"bg-emerald-100 text-emerald-700":d.status==="FAIL"?"bg-red-100 text-red-700":"bg-gray-200 text-gray-600"}`,children:d.status}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-bold text-gray-900",children:d.name}),i.jsx("p",{className:"text-gray-600",children:d.message})]}),i.jsxs("span",{className:"text-gray-400 text-xs shrink-0",children:[d.duration.toFixed(2),"ms"]})]},d.id))]})}),i.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200 text-sm text-blue-800",children:[i.jsx("strong",{children:"Note on Testing:"})," This runner executes commands against the live Application Context. Integration tests create temporary entities prefixed with ",i.jsx("code",{children:"TEST_"})," and attempt to clean them up immediately. Negative testing purposefully attempts invalid operations to ensure the API blocks them correctly."]})]})},F4=()=>{const{isCloudEnabled:t,syncLocalToCloud:e,cloudError:n}=Ce(),[r,s]=L.useState(""),[a,o]=L.useState("unknown"),[c,u]=L.useState(""),[d,f]=L.useState(!1),[m,g]=L.useState(!1);L.useEffect(()=>{const C=ce.getConfig();C&&(s(JSON.stringify(C,null,2)),o("connected")),n&&(o("error"),u(n),n.includes("Permission")&&g(!0))},[n]);const v=async()=>{var I;if(u(""),o("unknown"),!r.trim()){u("Please paste the Firebase Configuration JSON."),o("error");return}f(!0);const C=await ce.testConfig(r);if(f(!1),C.success)try{const j=JSON.parse(r);ce.saveConfig(j),o("connected"),u("Configuration Saved. App will reload.")}catch{o("error"),u("Invalid JSON syntax.")}else o("error"),u(C.error||"Connection verification failed."),(I=C.error)!=null&&I.includes("permission")&&g(!0)},T=()=>{window.confirm("Are you sure? This will disconnect the app from Firebase and revert to Local Storage.")&&ce.clearConfig()};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Cloud Setup"}),i.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M3.89 15.67L6.47 4.08C6.56 3.66 7.11 3.55 7.36 3.89L10.94 8.89L3.89 15.67Z",fill:"#FFC107"}),i.jsx("path",{d:"M15.56 8.89L19.14 3.89C19.39 3.55 19.94 3.66 20.03 4.08L22.61 15.67H3.89L15.56 8.89Z",fill:"#FFC107"}),i.jsx("path",{d:"M13.25 2.3L11.81 0.32C11.56 -0.02 11.09 -0.02 10.84 0.32L9.4 2.3C9.23 2.54 9.29 2.86 9.53 3.02L10.94 3.96L12.35 3.02C12.59 2.86 12.65 2.54 12.48 2.3H13.25Z",fill:"#FFC107"}),i.jsx("path",{d:"M3.89 15.67H22.61L14.62 20.23C13.98 20.59 13.2 20.67 12.5 20.45L11.73 20.21L3.89 15.67Z",fill:"#FFA000"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[a==="connected"&&i.jsxs("span",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-bold border border-orange-200 flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 bg-orange-600 rounded-full animate-pulse"})," Firebase Connected"]}),a==="error"&&i.jsx("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-bold border border-red-200",children:"Connection Failed"})]})]}),m&&i.jsxs("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded shadow-sm animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-amber-900 font-bold text-lg mb-2",children:"Missing Permissions?"}),i.jsxs("p",{className:"text-amber-800 text-sm mb-2",children:["It looks like your Firestore Security Rules are blocking the application. Since this app manages users internally, you need to enable ",i.jsx("strong",{children:"Test Mode"})," or allow public read/write in the Firebase Console."]}),i.jsx("p",{className:"text-amber-800 text-sm font-bold mb-2",children:"Go to Firebase Console > Firestore Database > Rules and paste this:"})]}),i.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),i.jsxs("div",{className:"bg-gray-900 p-3 rounded text-gray-100 font-mono text-xs overflow-x-auto relative group",children:[i.jsx("pre",{children:`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}`}),i.jsx("button",{onClick:()=>navigator.clipboard.writeText(`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}`),className:"absolute top-2 right-2 bg-white text-gray-900 px-2 py-1 rounded text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity",children:"Copy"})]})]}),i.jsx(ne,{title:"Firebase Configuration",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-gray-600",children:["Connect this application to ",i.jsx("strong",{children:"Google Firebase (Firestore)"})," for real-time data synchronization and cloud backup."]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded text-sm text-blue-900",children:[i.jsx("strong",{children:"How to get configuration:"}),i.jsxs("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:[i.jsxs("li",{children:["Go to ",i.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",className:"underline font-bold",children:"Firebase Console"}),"."]}),i.jsx("li",{children:"Open your Project Settings (Gear Icon)."}),i.jsx("li",{children:'Scroll down to "Your apps" and select the Web App.'}),i.jsxs("li",{children:["Copy the ",i.jsx("code",{children:"firebaseConfig"})," object (the part inside the curly braces)."]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Config Object (JSON)"}),i.jsx("textarea",{className:"w-full bg-gray-900 text-green-400 font-mono text-xs border border-spr-700 rounded-lg px-4 py-4 focus:ring-1 focus:ring-spr-accent outline-none h-64",value:r,onChange:C=>s(C.target.value),placeholder:`{
  "apiKey": "AIza...",
  "authDomain": "project-id.firebaseapp.com",
  "projectId": "project-id",
  "storageBucket": "project-id.appspot.com",
  "messagingSenderId": "...",
  "appId": "..."
}`})]}),a==="error"&&i.jsxs("div",{className:"bg-red-50 border border-red-200 p-3 rounded mt-2 text-red-700 text-sm",children:[i.jsx("strong",{children:"Error:"})," ",c]}),i.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[i.jsx(G,{variant:"secondary",onClick:()=>g(!m),children:m?"Hide Rules Help":"Troubleshoot Permissions"}),t&&i.jsx(G,{variant:"danger",onClick:T,children:"Disconnect"}),i.jsx(G,{onClick:v,disabled:d,children:d?"Verifying...":t?"Update & Reconnect":"Connect & Save"})]})]})}),t&&a==="connected"&&!n&&i.jsx(ne,{title:"Data Synchronization",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-gray-900",children:"Upload Local Data"}),i.jsxs("p",{className:"text-sm text-gray-500",children:["Push your current local browser data to Firestore.",i.jsx("br",{}),i.jsx("span",{className:"text-xs text-orange-600 font-bold",children:"Note: Firestore creates collections automatically. No SQL setup required."})]})]}),i.jsx(G,{variant:"secondary",onClick:e,children:"Sync Local -> Cloud"})]})})]})},B4=()=>{const{candidates:t,markAgreementAccepted:e,markAgreementRejected:n,isCloudEnabled:r}=Ce(),{id:s}=_s(),[a,o]=L.useState(!1),[c,u]=L.useState(!1),[d,f]=L.useState(null),[m,g]=L.useState(!1),[v,T]=L.useState(""),C=t.find(y=>y.id===s);L.useEffect(()=>{C!=null&&C.agreementAcceptedDate&&o(!0),C!=null&&C.agreementRejectedDate&&u(!0)},[C]);const I=()=>{if(s&&C){if(!r){f("The system is currently in Offline Mode. Acceptance cannot be recorded. Please contact admin.");return}try{e(s),o(!0),u(!1)}catch{f("Failed to record acceptance. Please try again.")}}},j=y=>{if(y.preventDefault(),s&&C&&v.trim())try{n(s,v),u(!0),o(!1),g(!1)}catch{f("Failed to record rejection.")}};return C?i.jsxs("div",{className:"min-h-screen bg-gray-100 py-10 px-4",children:[i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx(bi,{size:"lg"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Training Candidature Agreement"}),i.jsx("p",{className:"text-gray-600",children:"SPR Techforge Pvt Ltd"})]}),d&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded text-red-700",children:d}),i.jsxs(ne,{className:"mb-6",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mb-6",children:[i.jsx("h3",{className:"text-sm font-bold text-blue-800 uppercase mb-2",children:"Candidate Details"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Name:"})," ",i.jsx("span",{className:"font-bold text-gray-900",children:C.name})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Batch ID:"})," ",i.jsx("span",{className:"font-bold text-gray-900",children:C.batchId})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Email:"})," ",i.jsx("span",{className:"text-gray-900",children:C.email})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Phone:"})," ",i.jsx("span",{className:"text-gray-900",children:C.phone})]})]})]}),i.jsx("div",{className:"prose max-w-none border-t border-b border-gray-100 py-6 my-6",children:i.jsx("div",{className:"whitespace-pre-wrap font-serif text-justify leading-relaxed text-gray-800",children:C.agreementText||"Agreement text not available."})}),i.jsx("div",{className:"flex flex-col items-center gap-4 mt-8",children:a?i.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-6 text-center w-full animate-fade-in",children:[i.jsx("svg",{className:"w-16 h-16 text-emerald-500 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:"Agreement Accepted"}),i.jsxs("p",{className:"text-emerald-600 text-sm mt-1",children:["Recorded on ",new Date(C.agreementAcceptedDate).toLocaleString()]}),i.jsx("p",{className:"text-gray-500 text-xs mt-4",children:"You may close this window. We have recorded your acceptance as digital proof."})]}):c?i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center w-full animate-fade-in",children:[i.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),i.jsx("h2",{className:"text-xl font-bold text-red-800",children:"Agreement Rejected"}),i.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["Recorded on ",new Date(C.agreementRejectedDate).toLocaleString()]}),i.jsxs("p",{className:"text-gray-700 text-sm mt-2 italic",children:['"',C.agreementRejectionReason,'"']}),i.jsx("p",{className:"text-gray-500 text-xs mt-4",children:"Our team will contact you to discuss your concerns. You can still accept later if terms are clarified."}),i.jsx(G,{variant:"secondary",className:"mt-4",onClick:()=>u(!1),children:"View Agreement Again"})]}):i.jsxs("div",{className:"w-full space-y-6",children:[i.jsxs("div",{className:"flex items-start gap-3 bg-amber-50 p-4 rounded text-sm text-amber-800 border border-amber-100",children:[i.jsx("input",{type:"checkbox",className:"mt-1 w-5 h-5 accent-amber-600 cursor-pointer",id:"consent"}),i.jsxs("label",{htmlFor:"consent",className:"cursor-pointer",children:["I, ",i.jsx("strong",{children:C.name}),', have read and understood the terms and conditions mentioned above. By clicking "Accept & Sign", I agree to abide by the rules and regulations of SPR Techforge Pvt Ltd.']})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-center",children:[i.jsx(G,{variant:"secondary",className:"w-full md:w-auto px-8",onClick:()=>g(!0),children:"I Disagree / Reject"}),i.jsx(G,{className:"w-full md:w-auto px-12 py-3 text-lg font-bold",onClick:()=>{const y=document.getElementById("consent");y&&y.checked?I():alert("Please check the box to confirm you have read the agreement.")},children:"Accept & Sign"})]})]})})]}),i.jsx("div",{className:"text-center text-xs text-gray-400 mt-8 pb-8",children:" 2025 SPR Techforge Pvt Ltd. All rights reserved."})]}),i.jsx(en,{isOpen:m,onClose:()=>g(!1),title:"Reject Agreement",children:i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Please provide a reason for rejecting the agreement. This will help us understand your concerns."}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Reason for Rejection"}),i.jsx("textarea",{className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-1 focus:ring-spr-accent outline-none text-gray-900",rows:4,value:v,onChange:y=>T(y.target.value),placeholder:"e.g. Disagree with payment terms, Correction needed in details...",required:!0})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[i.jsx(G,{variant:"secondary",type:"button",onClick:()=>g(!1),children:"Cancel"}),i.jsx(G,{variant:"danger",type:"submit",children:"Confirm Rejection"})]})]})})]}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-xl font-bold text-gray-400",children:"Loading Agreement..."}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"If this takes too long, the link may be invalid or the system is offline."})]})})},U4=()=>{const{user:t,trainingModules:e,addTrainingModule:n,updateTrainingModule:r,deleteTrainingModule:s,trainingTopics:a,addTrainingTopic:o,updateTrainingTopic:c,deleteTrainingTopic:u,showToast:d}=Ce(),[f,m]=L.useState(!1),[g,v]=L.useState(null),[T,C]=L.useState(""),[I,j]=L.useState(""),[y,_]=L.useState(!1),[S,P]=L.useState(null),[R,w]=L.useState(null),[p,b]=L.useState(""),[k,A]=L.useState(1),[M,N]=L.useState(null),J=(t==null?void 0:t.role)==="admin",ie=[...e].sort((Y,re)=>Y.order-re.order),Ae=Y=>{if(Y.preventDefault(),!!T.trim()){if(g){const re=e.find(Be=>Be.id===g);re&&r({...re,title:T,description:I}),d("Module updated")}else n({id:Lt(),title:T,description:I,order:e.length+1}),d("Module created");te()}},Fe=()=>{v(null),C(""),j(""),m(!0)},q=Y=>{v(Y.id),C(Y.title),j(Y.description||""),m(!0)},te=()=>{m(!1)},le=Y=>{if(Y.preventDefault(),!!p.trim()){if(S){const re=a.find(Be=>Be.id===S);re&&c({...re,title:p,estimatedHours:k}),d("Topic updated")}else{if(!R)return;o({id:Lt(),moduleId:R,title:p,estimatedHours:k}),d("Topic added")}W()}},U=Y=>{P(null),w(Y),b(""),A(1),_(!0)},oe=Y=>{P(Y.id),w(Y.moduleId),b(Y.title),A(Y.estimatedHours),_(!0)},W=()=>{_(!1)},de=()=>{M&&(M.type==="module"?(s(M.id),d("Module deleted")):(u(M.id),d("Topic deleted")),N(null))};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Vr,{}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Curriculum Manager"}),i.jsx("p",{className:"text-gray-500",children:"Define training modules, topics, and syllabus structure."})]})]}),J&&i.jsx(G,{onClick:Fe,children:"+ New Module"})]}),i.jsx("div",{className:"grid grid-cols-1 gap-6",children:ie.map(Y=>i.jsxs(ne,{className:"border-l-4 border-l-spr-600",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-gray-100 pb-2",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[i.jsxs("span",{className:"bg-spr-100 text-spr-800 text-xs px-2 py-1 rounded-full",children:["Module ",Y.order]}),Y.title]}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:Y.description})]}),J&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>q(Y),className:"text-blue-600 hover:bg-blue-50 p-1 rounded",title:"Edit Module",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),i.jsx("button",{onClick:()=>N({id:Y.id,type:"module"}),className:"text-red-600 hover:bg-red-50 p-1 rounded",title:"Delete Module",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),i.jsx(G,{variant:"secondary",className:"text-xs ml-2",onClick:()=>U(Y.id),children:"+ Add Topic"})]})]}),i.jsxs("div",{className:"space-y-2",children:[a.filter(re=>re.moduleId===Y.id).map((re,Be)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border border-gray-200 hover:bg-white hover:shadow-sm transition-all group",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-gray-400 font-mono text-xs",children:[Be+1,"."]}),i.jsx("span",{className:"text-gray-800 font-medium",children:re.title})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-xs text-gray-500 bg-white px-2 py-1 rounded border border-gray-200",children:[re.estimatedHours," hrs"]}),J&&i.jsxs("div",{className:"hidden group-hover:flex gap-1",children:[i.jsx("button",{onClick:()=>oe(re),className:"text-blue-500 hover:text-blue-700 p-1",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),i.jsx("button",{onClick:()=>N({id:re.id,type:"topic"}),className:"text-red-500 hover:text-red-700 p-1",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},re.id)),a.filter(re=>re.moduleId===Y.id).length===0&&i.jsx("p",{className:"text-sm text-gray-400 italic p-2",children:"No topics defined yet."})]})]},Y.id))}),i.jsx(en,{isOpen:f,onClose:te,title:g?"Edit Training Module":"Add Training Module",children:i.jsxs("form",{onSubmit:Ae,children:[i.jsx(me,{label:"Module Title",value:T,onChange:Y=>C(Y.target.value),required:!0,placeholder:"e.g. Automation Testing"}),i.jsx(me,{label:"Description",value:I,onChange:Y=>j(Y.target.value),placeholder:"Short summary..."}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(G,{type:"button",variant:"secondary",onClick:te,children:"Cancel"}),i.jsx(G,{type:"submit",children:g?"Update Module":"Create Module"})]})]})}),i.jsx(en,{isOpen:y,onClose:W,title:S?"Edit Topic":"Add Topic",children:i.jsxs("form",{onSubmit:le,children:[i.jsx(me,{label:"Topic Title",value:p,onChange:Y=>b(Y.target.value),required:!0,placeholder:"e.g. Writing Test Scripts"}),i.jsx(me,{type:"number",label:"Estimated Hours",value:k,onChange:Y=>A(parseInt(Y.target.value)),required:!0}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(G,{type:"button",variant:"secondary",onClick:W,children:"Cancel"}),i.jsx(G,{type:"submit",children:S?"Update Topic":"Add Topic"})]})]})}),i.jsx(Ai,{isOpen:!!M,onClose:()=>N(null),onConfirm:de,title:"Confirm Deletion",message:`Are you sure you want to delete this ${M==null?void 0:M.type}?`})]})},z4=()=>{const{user:t,candidates:e,trainingModules:n,trainingTopics:r,trainingLogs:s}=Ce(),a=e.find(m=>m.id===(t==null?void 0:t.linkedCandidateId)),o=s.filter(m=>m.candidateId===(a==null?void 0:a.id)),c=o.reduce((m,g)=>m+g.timeSpentMinutes/60,0),u=new Set(o.map(m=>m.topicId)).size,d=r.length,f=d>0?Math.round(u/d*100):0;return a?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome, ",a.name]}),i.jsxs("p",{className:"text-gray-500",children:["Batch: ",a.batchId]})]}),i.jsxs("div",{className:"bg-white px-4 py-2 rounded-lg shadow-sm border border-gray-200 flex gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Hours"}),i.jsxs("p",{className:"text-xl font-bold text-indigo-600",children:[c.toFixed(1),"h"]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Progress"}),i.jsxs("p",{className:"text-xl font-bold text-emerald-600",children:[f,"%"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:i.jsx(ne,{title:"My Attendance & Progress History",children:i.jsxs("div",{className:"space-y-3",children:[o.sort((m,g)=>new Date(g.date).getTime()-new Date(m.date).getTime()).map(m=>{var v;const g=((v=r.find(T=>T.id===m.topicId))==null?void 0:v.title)||"Unknown Topic";return i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-gray-900 text-sm",children:g}),i.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(m.date).toDateString(),"  ",m.timeSpentMinutes," min"]})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded border ${m.attendanceStatus==="Present"?"bg-emerald-100 text-emerald-700 border-emerald-200":m.attendanceStatus==="Absent"?"bg-red-100 text-red-700 border-red-200":"bg-amber-100 text-amber-800 border-amber-200"}`,children:m.attendanceStatus})})]},m.id)}),o.length===0&&i.jsx("p",{className:"text-gray-400 text-center italic py-8",children:"No attendance records found."})]})})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsx(ne,{title:"Your Syllabus",className:"h-full max-h-[80vh] overflow-y-auto",children:i.jsxs("div",{className:"space-y-4",children:[n.sort((m,g)=>m.order-g.order).map(m=>i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-2",children:m.title}),i.jsx("div",{className:"space-y-1 ml-2 border-l-2 border-gray-200 pl-3",children:r.filter(g=>g.moduleId===m.id).map(g=>{const v=o.some(T=>T.topicId===g.id);return i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[v?i.jsx("span",{className:"text-emerald-500 font-bold",children:""}):i.jsx("span",{className:"text-gray-300",children:""}),i.jsx("span",{className:v?"text-gray-500 line-through":"text-gray-700",children:g.title})]},g.id)})})]},m.id)),n.length===0&&i.jsx("p",{className:"text-xs text-gray-400 italic",children:"Syllabus not yet defined by admin."})]})})})]})]}):i.jsx("div",{className:"p-8 text-center text-red-600",children:"No candidate profile linked to this user account. Please contact admin."})},$4=()=>{const{candidates:t,trainingLogs:e,trainingTopics:n}=Ce(),[r,s]=L.useState(""),a=t.filter(c=>c.isActive&&c.name.toLowerCase().includes(r.toLowerCase())),o=n.length;return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Vr,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Progress Monitor"})]})}),i.jsxs(ne,{children:[i.jsx("div",{className:"mb-4",children:i.jsx(Ts,{placeholder:"Search candidate...",value:r,onChange:c=>s(c.target.value),onClear:()=>s(""),containerClassName:"max-w-md"})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm text-gray-600",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Candidate"}),i.jsx("th",{className:"p-3",children:"Status"}),i.jsx("th",{className:"p-3 text-center",children:"Topics %"}),i.jsx("th",{className:"p-3 text-center",children:"Attendance (Present/Total)"}),i.jsx("th",{className:"p-3 text-center",children:"Last Active"})]})}),i.jsx("tbody",{className:"divide-y",children:a.map(c=>{const u=e.filter(T=>T.candidateId===c.id),d=u.filter(T=>T.attendanceStatus==="Present").length,f=u.length,m=new Set(u.map(T=>T.topicId)).size,g=o>0?Math.round(m/o*100):0,v=u.sort((T,C)=>new Date(C.date).getTime()-new Date(T.date).getTime())[0];return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsxs("td",{className:"p-3 font-medium text-gray-900",children:[c.name," ",i.jsxs("span",{className:"text-gray-400 text-xs",children:["(",c.batchId,")"]})]}),i.jsx("td",{className:"p-3",children:c.status}),i.jsxs("td",{className:"p-3 text-center",children:[i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 max-w-[100px] mx-auto",children:i.jsx("div",{className:"bg-spr-600 h-2 rounded-full",style:{width:`${g}%`}})}),i.jsxs("span",{className:"text-xs",children:[g,"% (",m,"/",o,")"]})]}),i.jsxs("td",{className:"p-3 text-center",children:[i.jsx("span",{className:"text-emerald-600 font-bold",children:d})," / ",f]}),i.jsx("td",{className:"p-3 text-center text-xs",children:v?new Date(v.date).toLocaleDateString():"-"})]},c.id)})})]})})]})]})},W4=()=>{const{candidates:t,trainingModules:e,trainingTopics:n,trainingLogs:r,batchUpdateTrainingLogs:s,showToast:a}=Ce(),[o,c]=L.useState(new Date().toISOString().split("T")[0]),[u,d]=L.useState(""),[f,m]=L.useState({}),g=t.filter(j=>j.isActive&&j.status!==ct.Placed&&j.status!==ct.Discontinued);L.useEffect(()=>{const j={};g.forEach(y=>{const _=r.find(S=>S.date===o&&S.candidateId===y.id);_?(j[y.id]=_.attendanceStatus==="No Class"?"Excused":_.attendanceStatus,!u&&_.topicId&&d(_.topicId)):j[y.id]="Present"}),m(j)},[o,g.length,r.length]);const v=(j,y)=>{m(_=>({..._,[j]:y}))},T=()=>{if(!u){a("Please select the Topic covered today before saving.","error");return}const j=n.find(S=>S.id===u),y=j?j.estimatedHours*60:60,_=[];g.forEach(S=>{const P=f[S.id],R=r.find(p=>p.date===o&&p.candidateId===S.id),w={id:R?R.id:Lt(),candidateId:S.id,date:o,topicId:u,timeSpentMinutes:P==="Present"?y:0,assignmentStatus:R?R.assignmentStatus:"N/A",attendanceStatus:P==="Excused"?"No Class":P,notes:R?R.notes:""};_.push(w)}),s(_),a("Attendance saved successfully for "+_.length+" candidates.")},C=()=>{const j=g.map(y=>{const _=r.filter(R=>R.candidateId===y.id).sort((R,w)=>new Date(R.date).getTime()-new Date(w.date).getTime()),S=_.filter(R=>R.attendanceStatus==="Present").length,P=_.filter(R=>R.attendanceStatus==="Absent").length;return{"Candidate Name":y.name,Batch:y.batchId,Status:y.status,"Total Present":S,"Total Absent":P,[`Status on ${o}`]:f[y.id]||"N/A"}});mi(j,`Attendance_Summary_${o}.csv`),a("Attendance Summary Exported")},I=()=>{const j=[];if(g.forEach(y=>{r.filter(S=>S.candidateId===y.id).forEach(S=>{var R;const P=((R=n.find(w=>w.id===S.topicId))==null?void 0:R.title)||"Unknown";j.push({Date:S.date,"Candidate Name":y.name,Batch:y.batchId,Topic:P,Attendance:S.attendanceStatus,"Time Spent (Mins)":S.timeSpentMinutes})})}),j.length===0){a("No attendance records found to export.","info");return}j.sort((y,_)=>new Date(_.Date).getTime()-new Date(y.Date).getTime()),mi(j,"Detailed_Attendance_Logs.csv"),a("Full History Exported")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Class Attendance"}),i.jsx("p",{className:"text-gray-500",children:"Mark daily attendance and topics for active candidates."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(G,{variant:"secondary",onClick:I,children:"Export Full History"}),i.jsx(G,{variant:"secondary",onClick:C,children:"Export Today's Summary"})]})]}),i.jsxs(ne,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Date"}),i.jsx(me,{type:"date",value:o,onChange:j=>c(j.target.value)})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Topic Covered Today"}),i.jsxs("select",{className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:u,onChange:j=>d(j.target.value),children:[i.jsx("option",{value:"",children:"-- Select Topic from Curriculum --"}),e.sort((j,y)=>j.order-y.order).map(j=>i.jsx("optgroup",{label:j.title,children:n.filter(y=>y.moduleId===j.id).map(y=>i.jsxs("option",{value:y.id,children:[y.title," (",y.estimatedHours,"h)"]},y.id))},j.id))]}),e.length===0&&i.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No curriculum found. Please add Modules & Topics in Curriculum Manager first."})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 text-xs uppercase text-gray-500 bg-gray-100",children:[i.jsx("th",{className:"py-3 px-4",children:"Candidate Name"}),i.jsx("th",{className:"py-3 px-4",children:"Batch"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Attendance Status"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:g.length>0?g.map(j=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:j.name}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs border border-blue-100",children:j.batchId})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsxs("label",{className:`cursor-pointer px-3 py-1.5 rounded border text-sm font-medium transition-colors ${f[j.id]==="Present"?"bg-emerald-500 text-white border-emerald-600":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[i.jsx("input",{type:"radio",className:"sr-only",checked:f[j.id]==="Present",onChange:()=>v(j.id,"Present")}),"Present"]}),i.jsxs("label",{className:`cursor-pointer px-3 py-1.5 rounded border text-sm font-medium transition-colors ${f[j.id]==="Absent"?"bg-red-500 text-white border-red-600":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[i.jsx("input",{type:"radio",className:"sr-only",checked:f[j.id]==="Absent",onChange:()=>v(j.id,"Absent")}),"Absent"]}),i.jsxs("label",{className:`cursor-pointer px-3 py-1.5 rounded border text-sm font-medium transition-colors ${f[j.id]==="Excused"?"bg-amber-400 text-white border-amber-500":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[i.jsx("input",{type:"radio",className:"sr-only",checked:f[j.id]==="Excused",onChange:()=>v(j.id,"Excused")}),"Excused"]})]})})]},j.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"py-8 text-center text-gray-500",children:"No active candidates found for training."})})})]})}),i.jsx("div",{className:"mt-6 flex justify-end border-t border-gray-100 pt-4",children:i.jsx(G,{onClick:T,className:"w-full md:w-auto px-8",children:"Save Attendance"})})]})]})},H4=[{label:"Orange",value:"border-l-orange-500"},{label:"Green",value:"border-l-green-500"},{label:"Blue",value:"border-l-blue-500"},{label:"Purple",value:"border-l-purple-500"},{label:"Red",value:"border-l-red-500"},{label:"Indigo",value:"border-l-indigo-500"}],q4=()=>{const{user:t,showToast:e,interviewModules:n,addInterviewModule:r,updateInterviewModule:s,deleteInterviewModule:a,interviewQuestions:o,addInterviewQuestion:c,deleteInterviewQuestion:u}=Ce(),[d,f]=L.useState(!1),[m,g]=L.useState(null),[v,T]=L.useState(""),[C,I]=L.useState("border-l-blue-500"),[j,y]=L.useState(!1),[_,S]=L.useState(null),[P,R]=L.useState(""),[w,p]=L.useState(null),[b,k]=L.useState([]),A=(t==null?void 0:t.role)==="admin",M=async W=>{const de=`${W} Explain this interview question in detail with examples.`;try{await navigator.clipboard.writeText(de),e("Copied! Please paste (Ctrl+V) in ChatGPT if it does not auto-fill.","info")}catch(re){console.error("Copy failed",re)}const Y=encodeURIComponent(de);window.open(`https://chatgpt.com/?q=${Y}&hints=search`,"_blank")},N=W=>{if(W.preventDefault(),!!v.trim()){if(m){const de=n.find(Y=>Y.id===m);de&&(s({...de,title:v,color:C}),e("Module updated successfully"))}else r({id:Lt(),title:v,color:C,order:n.length+1}),e("Module created successfully");f(!1),Fe()}},J=()=>{w&&(a(w),p(null),e("Module deleted"))},ie=()=>{Fe(),f(!0)},Ae=W=>{g(W.id),T(W.title),I(W.color),f(!0)},Fe=()=>{g(null),T(""),I("border-l-blue-500")},q=W=>{S(W),R(""),y(!0)},te=W=>{if(W.preventDefault(),!P.trim()||!_)return;const de=o.filter(re=>re.moduleId===_),Y=de.length>0?Math.max(...de.map(re=>re.order)):0;c({id:Lt(),moduleId:_,question:P,order:Y+1}),e("Question added"),y(!1),R("")},le=W=>{k(de=>de.includes(W)?de.filter(Y=>Y!==W):[...de,W])},U=W=>{if(!window.confirm("Delete selected questions?"))return;const de=b.filter(Y=>{const re=o.find(Be=>Be.id===Y);return re&&re.moduleId===W});de.forEach(Y=>u(Y)),k(Y=>Y.filter(re=>!de.includes(re))),e(`${de.length} questions deleted`)},oe=[...n].sort((W,de)=>W.order-de.order);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Vr,{}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Interview Preparation"}),i.jsx("p",{className:"text-gray-500",children:"Click on any question to ask ChatGPT AI for a detailed answer."})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[A&&i.jsx(G,{onClick:ie,children:"+ Add Module"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-emerald-600 bg-emerald-50 px-3 py-1 rounded-full border border-emerald-100",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),i.jsx("span",{children:"Powered by ChatGPT 5.1"})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:oe.map(W=>{const de=o.filter(re=>re.moduleId===W.id).sort((re,Be)=>re.order-Be.order),Y=de.some(re=>b.includes(re.id));return i.jsxs(ne,{className:`border-l-4 ${W.color} relative group-card h-full flex flex-col`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-4 pb-2 border-b border-gray-100",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800",children:W.title}),A&&i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{type:"button",onClick:()=>Ae(W),className:"text-blue-500 hover:text-blue-700 p-1 rounded hover:bg-blue-50",title:"Edit Module",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),i.jsx("button",{type:"button",onClick:()=>p(W.id),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50",title:"Delete Module",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),i.jsxs("div",{className:"space-y-3 flex-1",children:[de.map(re=>i.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden bg-white hover:shadow-md transition-all duration-200",children:[A&&i.jsx("div",{className:"pl-3 pr-1 py-3 bg-gray-50 border-r border-gray-100 flex items-center",children:i.jsx("input",{type:"checkbox",className:"w-4 h-4 text-spr-600 rounded border-gray-300 focus:ring-spr-500 cursor-pointer",checked:b.includes(re.id),onChange:()=>le(re.id),onClick:Be=>Be.stopPropagation()})}),i.jsxs("button",{onClick:()=>M(re.question),className:"flex-1 text-left p-3 flex justify-between items-center group hover:bg-gray-50 transition-colors focus:outline-none",title:"Click to ask ChatGPT",children:[i.jsx("span",{className:"font-medium text-gray-800 text-sm pr-2 group-hover:text-emerald-700 transition-colors",children:re.question}),i.jsx("span",{className:"text-gray-300 group-hover:text-emerald-500 transition-colors shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})})]})]},re.id)),de.length===0&&i.jsx("p",{className:"text-gray-400 italic text-sm text-center py-4",children:"No questions added yet."})]}),A&&i.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-3 border-t border-gray-100",children:[Y&&i.jsx("button",{onClick:()=>U(W.id),className:"w-8 h-8 flex items-center justify-center rounded-full bg-red-100 text-red-600 hover:bg-red-600 hover:text-white transition-all shadow-sm border border-red-200 animate-fade-in",title:"Delete Selected Questions",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),i.jsx("button",{onClick:()=>q(W.id),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 text-gray-600 hover:bg-spr-600 hover:text-white transition-all shadow-sm border border-gray-300",title:"Add Question",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]},W.id)})}),i.jsx(en,{isOpen:d,onClose:()=>f(!1),title:m?"Edit Module":"Add New Module",children:i.jsxs("form",{onSubmit:N,children:[i.jsx(me,{label:"Module Title",value:v,onChange:W=>T(W.target.value),required:!0,placeholder:"e.g. Advanced Python"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Theme"}),i.jsx("div",{className:"flex gap-3 flex-wrap",children:H4.map(W=>i.jsx("button",{type:"button",onClick:()=>I(W.value),className:`w-8 h-8 rounded-full border-2 ${W.value.replace("border-l-","bg-")} ${C===W.value?"border-gray-800 scale-110 ring-2 ring-offset-2 ring-gray-400":"border-transparent opacity-70 hover:opacity-100"}`,title:W.label},W.value))})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx(G,{type:"button",variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),i.jsx(G,{type:"submit",children:"Save Module"})]})]})}),i.jsx(en,{isOpen:j,onClose:()=>y(!1),title:"Add Question",children:i.jsxs("form",{onSubmit:te,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),i.jsx("textarea",{className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none h-32",value:P,onChange:W=>R(W.target.value),placeholder:"Type your interview question here...",required:!0})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(G,{type:"button",variant:"secondary",onClick:()=>y(!1),children:"Cancel"}),i.jsx(G,{type:"submit",children:"Add Question"})]})]})}),i.jsx(Ai,{isOpen:!!w,onClose:()=>p(null),onConfirm:J,title:"Delete Module",message:"Are you sure you want to delete this module? All contained questions will be lost."})]})},Q4=()=>{const{candidates:t,updateCandidate:e,interviews:n,addInterview:r,updateInterview:s,deleteInterview:a,showToast:o}=Ce(),[c,u]=L.useState("ReadyCandidates"),[d,f]=L.useState(null),m=(_,S)=>{var w;const P=(w=_.target.files)==null?void 0:w[0];if(!P)return;if(P.size>5*1024*1024){o("Max 5MB","error");return}const R=new FileReader;R.onload=p=>{var k;const b=t.find(A=>A.id===S);b&&e({...b,resume:(k=p.target)==null?void 0:k.result,resumeName:P.name}),o("Resume uploaded")},R.readAsDataURL(P)},g=_=>{var P;if(!_.resume)return;const S=(P=_.resumeName)==null?void 0:P.endsWith(".pdf");f({type:S?"pdf":"docx",data:_.resume,name:_.resumeName||"Resume"})},[v,T]=L.useState({}),[C,I]=L.useState(!1),j=_=>{if(_.preventDefault(),!v.candidateId||!v.date||!v.companyName)return;const S={id:v.id||Lt(),candidateId:v.candidateId,date:v.date,time:v.time||"10:00",companyName:v.companyName,interviewType:v.interviewType||"Zoom",round:v.round||"L1",supportPerson:v.supportPerson,status:"Scheduled",notes:v.notes};v.id?s(S):r(S),o("Interview scheduled"),I(!1),T({})},y=t.filter(_=>_.status===ct.ReadyForInterview&&_.isActive);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Vr,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Interviews & Placements"})]}),i.jsx(G,{onClick:()=>{T({}),I(!0)},children:"+ Schedule Interview"})]}),i.jsxs("div",{className:"flex gap-4 border-b border-gray-200",children:[i.jsx("button",{onClick:()=>u("ReadyCandidates"),className:`pb-2 px-4 font-medium ${c==="ReadyCandidates"?"border-b-2 border-spr-600 text-spr-600":"text-gray-500"}`,children:"Ready Candidates"}),i.jsx("button",{onClick:()=>u("DailyView"),className:`pb-2 px-4 font-medium ${c==="DailyView"?"border-b-2 border-spr-600 text-spr-600":"text-gray-500"}`,children:"Interview Schedule"})]}),c==="ReadyCandidates"&&i.jsx(ne,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm text-gray-600",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Candidate"}),i.jsx("th",{className:"p-3",children:"Batch"}),i.jsx("th",{className:"p-3",children:"Resume"}),i.jsx("th",{className:"p-3 text-center",children:"Action"})]})}),i.jsxs("tbody",{className:"divide-y",children:[y.map(_=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-3 font-medium text-gray-900",children:_.name}),i.jsx("td",{className:"p-3",children:_.batchId}),i.jsx("td",{className:"p-3",children:_.resume?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded truncate max-w-[150px]",children:_.resumeName}),i.jsx("button",{onClick:()=>g(_),className:"text-blue-600 hover:underline text-xs",children:"View"})]}):i.jsx("span",{className:"text-gray-400 italic",children:"Missing"})}),i.jsxs("td",{className:"p-3 text-center flex justify-center gap-2",children:[i.jsxs("label",{className:"cursor-pointer text-xs bg-gray-100 px-2 py-1 rounded hover:bg-gray-200",children:["Upload",i.jsx("input",{type:"file",className:"hidden",accept:".pdf,.docx",onChange:S=>m(S,_.id)})]}),i.jsx("button",{onClick:()=>{T({candidateId:_.id}),I(!0)},className:"text-xs bg-spr-600 text-white px-2 py-1 rounded hover:bg-spr-700",children:"Book Interview"})]})]},_.id)),y.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"No candidates currently marked as 'Ready for Interview'."})})]})]})})}),c==="DailyView"&&i.jsxs("div",{className:"space-y-4",children:[Object.entries(n.reduce((_,S)=>{const P=_[S.date]||[];return P.push(S),_[S.date]=P,_},{})).sort().map(([_,S])=>i.jsx(ne,{title:new Date(_).toDateString(),children:i.jsx("div",{className:"space-y-2",children:S.map(P=>{const R=t.find(w=>w.id===P.candidateId);return i.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded border border-gray-100",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-gray-900",children:[P.time," - ",R==null?void 0:R.name," ",i.jsxs("span",{className:"text-gray-400 font-normal",children:["(",R==null?void 0:R.batchId,")"]})]}),i.jsxs("p",{className:"text-sm text-indigo-700 font-medium",children:[P.companyName," (",P.round,") - ",P.interviewType]}),P.supportPerson&&i.jsxs("p",{className:"text-xs text-amber-700 mt-1",children:["Support: ",P.supportPerson]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-white border border-gray-200 block mb-1",children:P.status}),i.jsx("button",{onClick:()=>{T(P),I(!0)},className:"text-blue-600 text-xs hover:underline",children:"Edit"})]})]},P.id)})})},_)),n.length===0&&i.jsx("p",{className:"text-center text-gray-500",children:"No interviews scheduled."})]}),i.jsx(en,{isOpen:C,onClose:()=>I(!1),title:"Schedule Interview",children:i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Candidate"}),i.jsxs("select",{className:"w-full border rounded px-3 py-2",value:v.candidateId||"",onChange:_=>T({...v,candidateId:_.target.value}),required:!0,children:[i.jsx("option",{value:"",children:"Select Candidate"}),y.map(_=>i.jsx("option",{value:_.id,children:_.name},_.id))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(me,{type:"date",label:"Date",value:v.date||"",onChange:_=>T({...v,date:_.target.value}),required:!0}),i.jsx(me,{type:"time",label:"Time",value:v.time||"",onChange:_=>T({...v,time:_.target.value}),required:!0})]}),i.jsx(me,{label:"Company Name",value:v.companyName||"",onChange:_=>T({...v,companyName:_.target.value}),required:!0}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),i.jsxs("select",{className:"w-full border rounded px-3 py-2",value:v.interviewType||"Zoom",onChange:_=>T({...v,interviewType:_.target.value}),children:[i.jsx("option",{children:"Zoom"}),i.jsx("option",{children:"Teams"}),i.jsx("option",{children:"F2F"}),i.jsx("option",{children:"Telephonic"})]})]}),i.jsx(me,{label:"Round",value:v.round||"",onChange:_=>T({...v,round:_.target.value}),placeholder:"e.g. L1, Managerial"})]}),i.jsx(me,{label:"Support Person (if any)",value:v.supportPerson||"",onChange:_=>T({...v,supportPerson:_.target.value})}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx(G,{type:"submit",children:"Save Schedule"})})]})}),i.jsx(en,{isOpen:!!d,onClose:()=>f(null),title:`View Resume: ${d==null?void 0:d.name}`,children:i.jsxs("div",{className:"h-[80vh] flex flex-col",children:[i.jsx("div",{className:"flex justify-end mb-2",children:i.jsx("a",{href:d==null?void 0:d.data,download:d==null?void 0:d.name,className:"text-blue-600 font-bold hover:underline",children:"Download"})}),i.jsx("div",{className:"flex-1 bg-gray-100 rounded",children:(d==null?void 0:d.type)==="pdf"?i.jsx("object",{data:d.data,type:"application/pdf",className:"w-full h-full",children:i.jsx("p",{children:"Preview not supported."})}):i.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Preview only available for PDF. Please download."})})]})})]})},Qt=({children:t})=>{const{user:e,isInitialized:n}=Ce();return n?e?i.jsx(i.Fragment,{children:t}):i.jsx(Ka,{to:"/login",replace:!0}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:"Loading..."})},td=({children:t})=>{const{user:e,isInitialized:n}=Ce();return n?e?e.role==="admin"||e.modules.includes("users")?i.jsx(i.Fragment,{children:t}):i.jsx(Ka,{to:"/dashboard",replace:!0}):i.jsx(Ka,{to:"/login",replace:!0}):null},Gt=({children:t})=>{const{user:e,isInitialized:n}=Ce();return n?e?e.username!=="thirumalreddy@sprtechforge.com"?i.jsx(Ka,{to:"/dashboard",replace:!0}):i.jsx(i.Fragment,{children:t}):i.jsx(Ka,{to:"/login",replace:!0}):null},G4=()=>i.jsxs(lj,{children:[i.jsx(Ee,{path:"/",element:i.jsx(N4,{})}),i.jsx(Ee,{path:"/login",element:i.jsx(_4,{})}),i.jsx(Ee,{path:"/portal/agreement/:id",element:i.jsx(B4,{})}),i.jsx(Ee,{path:"/dashboard",element:i.jsx(Qt,{children:i.jsx(Ie,{children:i.jsx(E4,{})})})}),i.jsx(Ee,{path:"/candidates",element:i.jsx(Qt,{children:i.jsx(Ie,{children:i.jsx(T4,{})})})}),i.jsx(Ee,{path:"/candidates/info",element:i.jsx(Qt,{children:i.jsx(Ie,{children:i.jsx(C4,{})})})}),i.jsx(Ee,{path:"/candidates/new",element:i.jsx(Qt,{children:i.jsx(Ie,{children:i.jsx(l0,{})})})}),i.jsx(Ee,{path:"/candidates/edit/:id",element:i.jsx(Qt,{children:i.jsx(Ie,{children:i.jsx(l0,{})})})}),i.jsx(Ee,{path:"/candidates/agreement/:id",element:i.jsx(Qt,{children:i.jsx(S4,{})})}),i.jsx(Ee,{path:"/address-book",element:i.jsx(Qt,{children:i.jsx(Ie,{children:i.jsx(L4,{})})})}),i.jsx(Ee,{path:"/finance/transactions",element:i.jsx(Gt,{children:i.jsx(Ie,{children:i.jsx(k4,{})})})}),i.jsx(Ee,{path:"/finance/transactions/new",element:i.jsx(Gt,{children:i.jsx(Ie,{children:i.jsx(c0,{})})})}),i.jsx(Ee,{path:"/finance/transactions/edit/:id",element:i.jsx(Gt,{children:i.jsx(Ie,{children:i.jsx(c0,{})})})}),i.jsx(Ee,{path:"/finance/accounts",element:i.jsx(Gt,{children:i.jsx(Ie,{children:i.jsx(I4,{})})})}),i.jsx(Ee,{path:"/finance/accounts/new",element:i.jsx(Gt,{children:i.jsx(Ie,{children:i.jsx(u0,{})})})}),i.jsx(Ee,{path:"/finance/accounts/edit/:id",element:i.jsx(Gt,{children:i.jsx(Ie,{children:i.jsx(u0,{})})})}),i.jsx(Ee,{path:"/finance/statement/:type/:id",element:i.jsx(Gt,{children:i.jsx(Ie,{children:i.jsx(A4,{})})})}),i.jsx(Ee,{path:"/finance/financial-statements",element:i.jsx(Gt,{children:i.jsx(Ie,{children:i.jsx(P4,{})})})}),i.jsx(Ee,{path:"/finance/payroll",element:i.jsx(Gt,{children:i.jsx(Ie,{children:i.jsx(R4,{})})})}),i.jsx(Ee,{path:"/finance/reports",element:i.jsx(Gt,{children:i.jsx(Ie,{children:i.jsx(D4,{})})})}),i.jsx(Ee,{path:"/admin/users",element:i.jsx(td,{children:i.jsx(Ie,{children:i.jsx(M4,{})})})}),i.jsx(Ee,{path:"/admin/users/new",element:i.jsx(td,{children:i.jsx(Ie,{children:i.jsx(d0,{})})})}),i.jsx(Ee,{path:"/admin/users/edit/:id",element:i.jsx(td,{children:i.jsx(Ie,{children:i.jsx(d0,{})})})}),i.jsx(Ee,{path:"/training/curriculum",element:i.jsx(Qt,{children:i.jsx(Ie,{children:i.jsx(U4,{})})})}),i.jsx(Ee,{path:"/training/monitor",element:i.jsx(Qt,{children:i.jsx(Ie,{children:i.jsx($4,{})})})}),i.jsx(Ee,{path:"/training/dashboard",element:i.jsx(Qt,{children:i.jsx(Ie,{children:i.jsx(z4,{})})})}),i.jsx(Ee,{path:"/training/attendance",element:i.jsx(Qt,{children:i.jsx(Ie,{children:i.jsx(W4,{})})})}),i.jsx(Ee,{path:"/training/interview-questions",element:i.jsx(Qt,{children:i.jsx(Ie,{children:i.jsx(q4,{})})})}),i.jsx(Ee,{path:"/training/interviews",element:i.jsx(Qt,{children:i.jsx(Ie,{children:i.jsx(Q4,{})})})}),i.jsx(Ee,{path:"/admin/logs",element:i.jsx(Gt,{children:i.jsx(Ie,{children:i.jsx(V4,{})})})}),i.jsx(Ee,{path:"/admin/test-runner",element:i.jsx(Gt,{children:i.jsx(Ie,{children:i.jsx(O4,{})})})}),i.jsx(Ee,{path:"/admin/cloud",element:i.jsx(Gt,{children:i.jsx(Ie,{children:i.jsx(F4,{})})})})]});function K4(){return i.jsx(b4,{children:i.jsxs(pj,{children:[i.jsx(j4,{}),i.jsx(G4,{})]})})}const N1=document.getElementById("root");if(!N1)throw new Error("Could not find root element to mount to");const Y4=nd.createRoot(N1);Y4.render(i.jsx(ka.StrictMode,{children:i.jsx(K4,{})}));
