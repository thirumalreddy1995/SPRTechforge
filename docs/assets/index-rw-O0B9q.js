var O1=Object.defineProperty;var F1=(t,e,n)=>e in t?O1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Sa=(t,e,n)=>F1(t,typeof e!="symbol"?e+"":e,n);function U1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function B1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var l0={exports:{}},oc={},c0={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qo=Symbol.for("react.element"),z1=Symbol.for("react.portal"),$1=Symbol.for("react.fragment"),q1=Symbol.for("react.strict_mode"),H1=Symbol.for("react.profiler"),W1=Symbol.for("react.provider"),Q1=Symbol.for("react.context"),G1=Symbol.for("react.forward_ref"),K1=Symbol.for("react.suspense"),Y1=Symbol.for("react.memo"),X1=Symbol.for("react.lazy"),Im=Symbol.iterator;function J1(t){return t===null||typeof t!="object"?null:(t=Im&&t[Im]||t["@@iterator"],typeof t=="function"?t:null)}var u0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d0=Object.assign,h0={};function ui(t,e,n){this.props=t,this.context=e,this.refs=h0,this.updater=n||u0}ui.prototype.isReactComponent={};ui.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ui.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function f0(){}f0.prototype=ui.prototype;function ph(t,e,n){this.props=t,this.context=e,this.refs=h0,this.updater=n||u0}var gh=ph.prototype=new f0;gh.constructor=ph;d0(gh,ui.prototype);gh.isPureReactComponent=!0;var Am=Array.isArray,m0=Object.prototype.hasOwnProperty,xh={current:null},p0={key:!0,ref:!0,__self:!0,__source:!0};function g0(t,e,n){var r,s={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)m0.call(e,r)&&!p0.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:qo,type:t,key:o,ref:a,props:s,_owner:xh.current}}function Z1(t,e){return{$$typeof:qo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yh(t){return typeof t=="object"&&t!==null&&t.$$typeof===qo}function ew(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var km=/\/+/g;function cu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ew(""+t.key):e.toString(36)}function Za(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case qo:case z1:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+cu(a,0):r,Am(s)?(n="",t!=null&&(n=t.replace(km,"$&/")+"/"),Za(s,e,n,"",function(d){return d})):s!=null&&(yh(s)&&(s=Z1(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(km,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Am(t))for(var c=0;c<t.length;c++){o=t[c];var u=r+cu(o,c);a+=Za(o,e,n,u,s)}else if(u=J1(t),typeof u=="function")for(t=u.call(t),c=0;!(o=t.next()).done;)o=o.value,u=r+cu(o,c++),a+=Za(o,e,n,u,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ca(t,e,n){if(t==null)return t;var r=[],s=0;return Za(t,r,"","",function(o){return e.call(n,o,s++)}),r}function tw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},el={transition:null},nw={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:el,ReactCurrentOwner:xh};function x0(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:Ca,forEach:function(t,e,n){Ca(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ca(t,function(){e++}),e},toArray:function(t){return Ca(t,function(e){return e})||[]},only:function(t){if(!yh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=ui;fe.Fragment=$1;fe.Profiler=H1;fe.PureComponent=ph;fe.StrictMode=q1;fe.Suspense=K1;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nw;fe.act=x0;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=d0({},t.props),s=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=xh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)m0.call(e,u)&&!p0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:qo,type:t.type,key:s,ref:o,props:r,_owner:a}};fe.createContext=function(t){return t={$$typeof:Q1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:W1,_context:t},t.Consumer=t};fe.createElement=g0;fe.createFactory=function(t){var e=g0.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:G1,render:t}};fe.isValidElement=yh;fe.lazy=function(t){return{$$typeof:X1,_payload:{_status:-1,_result:t},_init:tw}};fe.memo=function(t,e){return{$$typeof:Y1,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=el.transition;el.transition={};try{t()}finally{el.transition=e}};fe.unstable_act=x0;fe.useCallback=function(t,e){return At.current.useCallback(t,e)};fe.useContext=function(t){return At.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return At.current.useDeferredValue(t)};fe.useEffect=function(t,e){return At.current.useEffect(t,e)};fe.useId=function(){return At.current.useId()};fe.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return At.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};fe.useRef=function(t){return At.current.useRef(t)};fe.useState=function(t){return At.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return At.current.useTransition()};fe.version="18.3.1";c0.exports=fe;var R=c0.exports;const y0=B1(R),rw=U1({__proto__:null,default:y0},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw=R,iw=Symbol.for("react.element"),ow=Symbol.for("react.fragment"),aw=Object.prototype.hasOwnProperty,lw=sw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cw={key:!0,ref:!0,__self:!0,__source:!0};function v0(t,e,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)aw.call(e,r)&&!cw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:iw,type:t,key:o,ref:a,props:s,_owner:lw.current}}oc.Fragment=ow;oc.jsx=v0;oc.jsxs=v0;l0.exports=oc;var i=l0.exports,Ku={},w0={exports:{}},Gt={},_0={exports:{}},j0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,K){var re=q.length;q.push(K);e:for(;0<re;){var U=re-1>>>1,ee=q[U];if(0<s(ee,K))q[U]=K,q[re]=ee,re=U;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var K=q[0],re=q.pop();if(re!==K){q[0]=re;e:for(var U=0,ee=q.length,X=ee>>>1;U<X;){var he=2*(U+1)-1,me=q[he],oe=he+1,Me=q[oe];if(0>s(me,re))oe<ee&&0>s(Me,me)?(q[U]=Me,q[oe]=re,U=oe):(q[U]=me,q[he]=re,U=he);else if(oe<ee&&0>s(Me,re))q[U]=Me,q[oe]=re,U=oe;else break e}}return K}function s(q,K){var re=q.sortIndex-K.sortIndex;return re!==0?re:q.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],m=1,p=null,f=3,v=!1,j=!1,I=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(q){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=q)r(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(d)}}function k(q){if(I=!1,E(q),!j)if(n(u)!==null)j=!0,ke(L);else{var K=n(d);K!==null&&ve(k,K.startTime-q)}}function L(q,K){j=!1,I&&(I=!1,x(w),w=-1),v=!0;var re=f;try{for(E(K),p=n(u);p!==null&&(!(p.expirationTime>K)||q&&!S());){var U=p.callback;if(typeof U=="function"){p.callback=null,f=p.priorityLevel;var ee=U(p.expirationTime<=K);K=t.unstable_now(),typeof ee=="function"?p.callback=ee:p===n(u)&&r(u),E(K)}else r(u);p=n(u)}if(p!==null)var X=!0;else{var he=n(d);he!==null&&ve(k,he.startTime-K),X=!1}return X}finally{p=null,f=re,v=!1}}var P=!1,y=null,w=-1,T=5,A=-1;function S(){return!(t.unstable_now()-A<T)}function D(){if(y!==null){var q=t.unstable_now();A=q;var K=!0;try{K=y(!0,q)}finally{K?N():(P=!1,y=null)}}else P=!1}var N;if(typeof _=="function")N=function(){_(D)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ie=le.port2;le.port1.onmessage=D,N=function(){ie.postMessage(null)}}else N=function(){C(D,0)};function ke(q){y=q,P||(P=!0,N())}function ve(q,K){w=C(function(){q(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){j||v||(j=!0,ke(L))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var re=f;f=K;try{return q()}finally{f=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var re=f;f=q;try{return K()}finally{f=re}},t.unstable_scheduleCallback=function(q,K,re){var U=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?U+re:U):re=U,q){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=re+ee,q={id:m++,callback:K,priorityLevel:q,startTime:re,expirationTime:ee,sortIndex:-1},re>U?(q.sortIndex=re,e(d,q),n(u)===null&&q===n(d)&&(I?(x(w),w=-1):I=!0,ve(k,re-U))):(q.sortIndex=ee,e(u,q),j||v||(j=!0,ke(L))),q},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(q){var K=f;return function(){var re=f;f=K;try{return q.apply(this,arguments)}finally{f=re}}}})(j0);_0.exports=j0;var uw=_0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw=R,Wt=uw;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E0=new Set,go={};function hs(t,e){Ys(t,e),Ys(t+"Capture",e)}function Ys(t,e){for(go[t]=e,t=0;t<e.length;t++)E0.add(e[t])}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yu=Object.prototype.hasOwnProperty,hw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pm={},Rm={};function fw(t){return Yu.call(Rm,t)?!0:Yu.call(Pm,t)?!1:hw.test(t)?Rm[t]=!0:(Pm[t]=!0,!1)}function mw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pw(t,e,n,r){if(e===null||typeof e>"u"||mw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,n,r,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yt[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yt[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yt[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yt[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yt[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yt[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yt[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yt[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yt[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vh=/[\-:]([a-z])/g;function wh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vh,wh);yt[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vh,wh);yt[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vh,wh);yt[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yt[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});yt.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yt[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function _h(t,e,n,r){var s=yt.hasOwnProperty(e)?yt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pw(e,n,s,r)&&(n=null),r||s===null?fw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qn=dw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ia=Symbol.for("react.element"),Is=Symbol.for("react.portal"),As=Symbol.for("react.fragment"),jh=Symbol.for("react.strict_mode"),Xu=Symbol.for("react.profiler"),b0=Symbol.for("react.provider"),N0=Symbol.for("react.context"),Eh=Symbol.for("react.forward_ref"),Ju=Symbol.for("react.suspense"),Zu=Symbol.for("react.suspense_list"),bh=Symbol.for("react.memo"),tr=Symbol.for("react.lazy"),T0=Symbol.for("react.offscreen"),Dm=Symbol.iterator;function Vi(t){return t===null||typeof t!="object"?null:(t=Dm&&t[Dm]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,uu;function Wi(t){if(uu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uu=e&&e[1]||""}return`
`+uu+t}var du=!1;function hu(t,e){if(!t||du)return"";du=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,c=o.length-1;1<=a&&0<=c&&s[a]!==o[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==o[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==o[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{du=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wi(t):""}function gw(t){switch(t.tag){case 5:return Wi(t.type);case 16:return Wi("Lazy");case 13:return Wi("Suspense");case 19:return Wi("SuspenseList");case 0:case 2:case 15:return t=hu(t.type,!1),t;case 11:return t=hu(t.type.render,!1),t;case 1:return t=hu(t.type,!0),t;default:return""}}function ed(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case As:return"Fragment";case Is:return"Portal";case Xu:return"Profiler";case jh:return"StrictMode";case Ju:return"Suspense";case Zu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case N0:return(t.displayName||"Context")+".Consumer";case b0:return(t._context.displayName||"Context")+".Provider";case Eh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bh:return e=t.displayName||null,e!==null?e:ed(t.type)||"Memo";case tr:e=t._payload,t=t._init;try{return ed(t(e))}catch{}}return null}function xw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ed(e);case 8:return e===jh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Er(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function S0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yw(t){var e=S0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Aa(t){t._valueTracker||(t._valueTracker=yw(t))}function C0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=S0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function td(t,e){var n=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Lm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Er(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function I0(t,e){e=e.checked,e!=null&&_h(t,"checked",e,!1)}function nd(t,e){I0(t,e);var n=Er(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rd(t,e.type,n):e.hasOwnProperty("defaultValue")&&rd(t,e.type,Er(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rd(t,e,n){(e!=="number"||xl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qi=Array.isArray;function Bs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Er(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Qi(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Er(n)}}function A0(t,e){var n=Er(e.value),r=Er(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Om(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function k0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function id(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?k0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ka,P0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ka=ka||document.createElement("div"),ka.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ka.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var to={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vw=["Webkit","ms","Moz","O"];Object.keys(to).forEach(function(t){vw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),to[e]=to[t]})});function R0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||to.hasOwnProperty(t)&&to[t]?(""+e).trim():e+"px"}function D0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=R0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ww=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(t,e){if(e){if(ww[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function ad(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ld=null;function Nh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cd=null,zs=null,$s=null;function Fm(t){if(t=Qo(t)){if(typeof cd!="function")throw Error($(280));var e=t.stateNode;e&&(e=dc(e),cd(t.stateNode,t.type,e))}}function L0(t){zs?$s?$s.push(t):$s=[t]:zs=t}function V0(){if(zs){var t=zs,e=$s;if($s=zs=null,Fm(t),e)for(t=0;t<e.length;t++)Fm(e[t])}}function M0(t,e){return t(e)}function O0(){}var fu=!1;function F0(t,e,n){if(fu)return t(e,n);fu=!0;try{return M0(t,e,n)}finally{fu=!1,(zs!==null||$s!==null)&&(O0(),V0())}}function yo(t,e){var n=t.stateNode;if(n===null)return null;var r=dc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ud=!1;if(Un)try{var Mi={};Object.defineProperty(Mi,"passive",{get:function(){ud=!0}}),window.addEventListener("test",Mi,Mi),window.removeEventListener("test",Mi,Mi)}catch{ud=!1}function _w(t,e,n,r,s,o,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var no=!1,yl=null,vl=!1,dd=null,jw={onError:function(t){no=!0,yl=t}};function Ew(t,e,n,r,s,o,a,c,u){no=!1,yl=null,_w.apply(jw,arguments)}function bw(t,e,n,r,s,o,a,c,u){if(Ew.apply(this,arguments),no){if(no){var d=yl;no=!1,yl=null}else throw Error($(198));vl||(vl=!0,dd=d)}}function fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function U0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Um(t){if(fs(t)!==t)throw Error($(188))}function Nw(t){var e=t.alternate;if(!e){if(e=fs(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Um(s),t;if(o===r)return Um(s),e;o=o.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=o;break}if(c===r){a=!0,r=s,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=s;break}if(c===r){a=!0,r=o,n=s;break}c=c.sibling}if(!a)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function B0(t){return t=Nw(t),t!==null?z0(t):null}function z0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=z0(t);if(e!==null)return e;t=t.sibling}return null}var $0=Wt.unstable_scheduleCallback,Bm=Wt.unstable_cancelCallback,Tw=Wt.unstable_shouldYield,Sw=Wt.unstable_requestPaint,Ge=Wt.unstable_now,Cw=Wt.unstable_getCurrentPriorityLevel,Th=Wt.unstable_ImmediatePriority,q0=Wt.unstable_UserBlockingPriority,wl=Wt.unstable_NormalPriority,Iw=Wt.unstable_LowPriority,H0=Wt.unstable_IdlePriority,ac=null,Nn=null;function Aw(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(ac,t,void 0,(t.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:Rw,kw=Math.log,Pw=Math.LN2;function Rw(t){return t>>>=0,t===0?32:31-(kw(t)/Pw|0)|0}var Pa=64,Ra=4194304;function Gi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _l(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=Gi(c):(o&=a,o!==0&&(r=Gi(o)))}else a=n&~s,a!==0?r=Gi(a):o!==0&&(r=Gi(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fn(e),s=1<<n,r|=t[n],e&=~s;return r}function Dw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-fn(o),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=Dw(c,e)):u<=e&&(t.expiredLanes|=c),o&=~c}}function hd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function W0(){var t=Pa;return Pa<<=1,!(Pa&4194240)&&(Pa=64),t}function mu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ho(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fn(e),t[e]=n}function Vw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-fn(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function Sh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ne=0;function Q0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var G0,Ch,K0,Y0,X0,fd=!1,Da=[],cr=null,ur=null,dr=null,vo=new Map,wo=new Map,rr=[],Mw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zm(t,e){switch(t){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":vo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wo.delete(e.pointerId)}}function Oi(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Qo(e),e!==null&&Ch(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ow(t,e,n,r,s){switch(e){case"focusin":return cr=Oi(cr,t,e,n,r,s),!0;case"dragenter":return ur=Oi(ur,t,e,n,r,s),!0;case"mouseover":return dr=Oi(dr,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return vo.set(o,Oi(vo.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,wo.set(o,Oi(wo.get(o)||null,t,e,n,r,s)),!0}return!1}function J0(t){var e=Jr(t.target);if(e!==null){var n=fs(e);if(n!==null){if(e=n.tag,e===13){if(e=U0(n),e!==null){t.blockedOn=e,X0(t.priority,function(){K0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=md(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ld=r,n.target.dispatchEvent(r),ld=null}else return e=Qo(n),e!==null&&Ch(e),t.blockedOn=n,!1;e.shift()}return!0}function $m(t,e,n){tl(t)&&n.delete(e)}function Fw(){fd=!1,cr!==null&&tl(cr)&&(cr=null),ur!==null&&tl(ur)&&(ur=null),dr!==null&&tl(dr)&&(dr=null),vo.forEach($m),wo.forEach($m)}function Fi(t,e){t.blockedOn===e&&(t.blockedOn=null,fd||(fd=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,Fw)))}function _o(t){function e(s){return Fi(s,t)}if(0<Da.length){Fi(Da[0],t);for(var n=1;n<Da.length;n++){var r=Da[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cr!==null&&Fi(cr,t),ur!==null&&Fi(ur,t),dr!==null&&Fi(dr,t),vo.forEach(e),wo.forEach(e),n=0;n<rr.length;n++)r=rr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rr.length&&(n=rr[0],n.blockedOn===null);)J0(n),n.blockedOn===null&&rr.shift()}var qs=Qn.ReactCurrentBatchConfig,jl=!0;function Uw(t,e,n,r){var s=Ne,o=qs.transition;qs.transition=null;try{Ne=1,Ih(t,e,n,r)}finally{Ne=s,qs.transition=o}}function Bw(t,e,n,r){var s=Ne,o=qs.transition;qs.transition=null;try{Ne=4,Ih(t,e,n,r)}finally{Ne=s,qs.transition=o}}function Ih(t,e,n,r){if(jl){var s=md(t,e,n,r);if(s===null)bu(t,e,r,El,n),zm(t,r);else if(Ow(s,t,e,n,r))r.stopPropagation();else if(zm(t,r),e&4&&-1<Mw.indexOf(t)){for(;s!==null;){var o=Qo(s);if(o!==null&&G0(o),o=md(t,e,n,r),o===null&&bu(t,e,r,El,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else bu(t,e,r,null,n)}}var El=null;function md(t,e,n,r){if(El=null,t=Nh(r),t=Jr(t),t!==null)if(e=fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=U0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return El=t,null}function Z0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cw()){case Th:return 1;case q0:return 4;case wl:case Iw:return 16;case H0:return 536870912;default:return 16}default:return 16}}var ir=null,Ah=null,nl=null;function ex(){if(nl)return nl;var t,e=Ah,n=e.length,r,s="value"in ir?ir.value:ir.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[o-r];r++);return nl=s.slice(t,1<r?1-r:void 0)}function rl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function La(){return!0}function qm(){return!1}function Kt(t){function e(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?La:qm,this.isPropagationStopped=qm,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=La)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=La)},persist:function(){},isPersistent:La}),e}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kh=Kt(di),Wo=$e({},di,{view:0,detail:0}),zw=Kt(Wo),pu,gu,Ui,lc=$e({},Wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ph,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ui&&(Ui&&t.type==="mousemove"?(pu=t.screenX-Ui.screenX,gu=t.screenY-Ui.screenY):gu=pu=0,Ui=t),pu)},movementY:function(t){return"movementY"in t?t.movementY:gu}}),Hm=Kt(lc),$w=$e({},lc,{dataTransfer:0}),qw=Kt($w),Hw=$e({},Wo,{relatedTarget:0}),xu=Kt(Hw),Ww=$e({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),Qw=Kt(Ww),Gw=$e({},di,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kw=Kt(Gw),Yw=$e({},di,{data:0}),Wm=Kt(Yw),Xw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Zw[t])?!!e[t]:!1}function Ph(){return e_}var t_=$e({},Wo,{key:function(t){if(t.key){var e=Xw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Jw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ph,charCode:function(t){return t.type==="keypress"?rl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),n_=Kt(t_),r_=$e({},lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qm=Kt(r_),s_=$e({},Wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ph}),i_=Kt(s_),o_=$e({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),a_=Kt(o_),l_=$e({},lc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),c_=Kt(l_),u_=[9,13,27,32],Rh=Un&&"CompositionEvent"in window,ro=null;Un&&"documentMode"in document&&(ro=document.documentMode);var d_=Un&&"TextEvent"in window&&!ro,tx=Un&&(!Rh||ro&&8<ro&&11>=ro),Gm=" ",Km=!1;function nx(t,e){switch(t){case"keyup":return u_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ks=!1;function h_(t,e){switch(t){case"compositionend":return rx(e);case"keypress":return e.which!==32?null:(Km=!0,Gm);case"textInput":return t=e.data,t===Gm&&Km?null:t;default:return null}}function f_(t,e){if(ks)return t==="compositionend"||!Rh&&nx(t,e)?(t=ex(),nl=Ah=ir=null,ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tx&&e.locale!=="ko"?null:e.data;default:return null}}var m_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ym(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!m_[t.type]:e==="textarea"}function sx(t,e,n,r){L0(r),e=bl(e,"onChange"),0<e.length&&(n=new kh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var so=null,jo=null;function p_(t){px(t,0)}function cc(t){var e=Ds(t);if(C0(e))return t}function g_(t,e){if(t==="change")return e}var ix=!1;if(Un){var yu;if(Un){var vu="oninput"in document;if(!vu){var Xm=document.createElement("div");Xm.setAttribute("oninput","return;"),vu=typeof Xm.oninput=="function"}yu=vu}else yu=!1;ix=yu&&(!document.documentMode||9<document.documentMode)}function Jm(){so&&(so.detachEvent("onpropertychange",ox),jo=so=null)}function ox(t){if(t.propertyName==="value"&&cc(jo)){var e=[];sx(e,jo,t,Nh(t)),F0(p_,e)}}function x_(t,e,n){t==="focusin"?(Jm(),so=e,jo=n,so.attachEvent("onpropertychange",ox)):t==="focusout"&&Jm()}function y_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cc(jo)}function v_(t,e){if(t==="click")return cc(e)}function w_(t,e){if(t==="input"||t==="change")return cc(e)}function __(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:__;function Eo(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Yu.call(e,s)||!pn(t[s],e[s]))return!1}return!0}function Zm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ep(t,e){var n=Zm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zm(n)}}function ax(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ax(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lx(){for(var t=window,e=xl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xl(t.document)}return e}function Dh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function j_(t){var e=lx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ax(n.ownerDocument.documentElement,n)){if(r!==null&&Dh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=ep(n,o);var a=ep(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var E_=Un&&"documentMode"in document&&11>=document.documentMode,Ps=null,pd=null,io=null,gd=!1;function tp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gd||Ps==null||Ps!==xl(r)||(r=Ps,"selectionStart"in r&&Dh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),io&&Eo(io,r)||(io=r,r=bl(pd,"onSelect"),0<r.length&&(e=new kh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ps)))}function Va(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Rs={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionend:Va("Transition","TransitionEnd")},wu={},cx={};Un&&(cx=document.createElement("div").style,"AnimationEvent"in window||(delete Rs.animationend.animation,delete Rs.animationiteration.animation,delete Rs.animationstart.animation),"TransitionEvent"in window||delete Rs.transitionend.transition);function uc(t){if(wu[t])return wu[t];if(!Rs[t])return t;var e=Rs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cx)return wu[t]=e[n];return t}var ux=uc("animationend"),dx=uc("animationiteration"),hx=uc("animationstart"),fx=uc("transitionend"),mx=new Map,np="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(t,e){mx.set(t,e),hs(e,[t])}for(var _u=0;_u<np.length;_u++){var ju=np[_u],b_=ju.toLowerCase(),N_=ju[0].toUpperCase()+ju.slice(1);Pr(b_,"on"+N_)}Pr(ux,"onAnimationEnd");Pr(dx,"onAnimationIteration");Pr(hx,"onAnimationStart");Pr("dblclick","onDoubleClick");Pr("focusin","onFocus");Pr("focusout","onBlur");Pr(fx,"onTransitionEnd");Ys("onMouseEnter",["mouseout","mouseover"]);Ys("onMouseLeave",["mouseout","mouseover"]);Ys("onPointerEnter",["pointerout","pointerover"]);Ys("onPointerLeave",["pointerout","pointerover"]);hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ki));function rp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bw(r,e,void 0,t),t.currentTarget=null}function px(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==o&&s.isPropagationStopped())break e;rp(s,c,d),o=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==o&&s.isPropagationStopped())break e;rp(s,c,d),o=u}}}if(vl)throw t=dd,vl=!1,dd=null,t}function Re(t,e){var n=e[_d];n===void 0&&(n=e[_d]=new Set);var r=t+"__bubble";n.has(r)||(gx(e,t,2,!1),n.add(r))}function Eu(t,e,n){var r=0;e&&(r|=4),gx(n,t,r,e)}var Ma="_reactListening"+Math.random().toString(36).slice(2);function bo(t){if(!t[Ma]){t[Ma]=!0,E0.forEach(function(n){n!=="selectionchange"&&(T_.has(n)||Eu(n,!1,t),Eu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ma]||(e[Ma]=!0,Eu("selectionchange",!1,e))}}function gx(t,e,n,r){switch(Z0(e)){case 1:var s=Uw;break;case 4:s=Bw;break;default:s=Ih}n=s.bind(null,e,n,t),s=void 0,!ud||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function bu(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=Jr(c),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}c=c.parentNode}}r=r.return}F0(function(){var d=o,m=Nh(n),p=[];e:{var f=mx.get(t);if(f!==void 0){var v=kh,j=t;switch(t){case"keypress":if(rl(n)===0)break e;case"keydown":case"keyup":v=n_;break;case"focusin":j="focus",v=xu;break;case"focusout":j="blur",v=xu;break;case"beforeblur":case"afterblur":v=xu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Hm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=qw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=i_;break;case ux:case dx:case hx:v=Qw;break;case fx:v=a_;break;case"scroll":v=zw;break;case"wheel":v=c_;break;case"copy":case"cut":case"paste":v=Kw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Qm}var I=(e&4)!==0,C=!I&&t==="scroll",x=I?f!==null?f+"Capture":null:f;I=[];for(var _=d,E;_!==null;){E=_;var k=E.stateNode;if(E.tag===5&&k!==null&&(E=k,x!==null&&(k=yo(_,x),k!=null&&I.push(No(_,k,E)))),C)break;_=_.return}0<I.length&&(f=new v(f,j,null,n,m),p.push({event:f,listeners:I}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",f&&n!==ld&&(j=n.relatedTarget||n.fromElement)&&(Jr(j)||j[Bn]))break e;if((v||f)&&(f=m.window===m?m:(f=m.ownerDocument)?f.defaultView||f.parentWindow:window,v?(j=n.relatedTarget||n.toElement,v=d,j=j?Jr(j):null,j!==null&&(C=fs(j),j!==C||j.tag!==5&&j.tag!==6)&&(j=null)):(v=null,j=d),v!==j)){if(I=Hm,k="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(I=Qm,k="onPointerLeave",x="onPointerEnter",_="pointer"),C=v==null?f:Ds(v),E=j==null?f:Ds(j),f=new I(k,_+"leave",v,n,m),f.target=C,f.relatedTarget=E,k=null,Jr(m)===d&&(I=new I(x,_+"enter",j,n,m),I.target=E,I.relatedTarget=C,k=I),C=k,v&&j)t:{for(I=v,x=j,_=0,E=I;E;E=bs(E))_++;for(E=0,k=x;k;k=bs(k))E++;for(;0<_-E;)I=bs(I),_--;for(;0<E-_;)x=bs(x),E--;for(;_--;){if(I===x||x!==null&&I===x.alternate)break t;I=bs(I),x=bs(x)}I=null}else I=null;v!==null&&sp(p,f,v,I,!1),j!==null&&C!==null&&sp(p,C,j,I,!0)}}e:{if(f=d?Ds(d):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var L=g_;else if(Ym(f))if(ix)L=w_;else{L=y_;var P=x_}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(L=v_);if(L&&(L=L(t,d))){sx(p,L,n,m);break e}P&&P(t,f,d),t==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&rd(f,"number",f.value)}switch(P=d?Ds(d):window,t){case"focusin":(Ym(P)||P.contentEditable==="true")&&(Ps=P,pd=d,io=null);break;case"focusout":io=pd=Ps=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,tp(p,n,m);break;case"selectionchange":if(E_)break;case"keydown":case"keyup":tp(p,n,m)}var y;if(Rh)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else ks?nx(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(tx&&n.locale!=="ko"&&(ks||w!=="onCompositionStart"?w==="onCompositionEnd"&&ks&&(y=ex()):(ir=m,Ah="value"in ir?ir.value:ir.textContent,ks=!0)),P=bl(d,w),0<P.length&&(w=new Wm(w,t,null,n,m),p.push({event:w,listeners:P}),y?w.data=y:(y=rx(n),y!==null&&(w.data=y)))),(y=d_?h_(t,n):f_(t,n))&&(d=bl(d,"onBeforeInput"),0<d.length&&(m=new Wm("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=y))}px(p,e)})}function No(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=yo(t,n),o!=null&&r.unshift(No(t,o,s)),o=yo(t,e),o!=null&&r.push(No(t,o,s))),t=t.return}return r}function bs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sp(t,e,n,r,s){for(var o=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=yo(n,o),u!=null&&a.unshift(No(n,u,c))):s||(u=yo(n,o),u!=null&&a.push(No(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var S_=/\r\n?/g,C_=/\u0000|\uFFFD/g;function ip(t){return(typeof t=="string"?t:""+t).replace(S_,`
`).replace(C_,"")}function Oa(t,e,n){if(e=ip(e),ip(t)!==e&&n)throw Error($(425))}function Nl(){}var xd=null,yd=null;function vd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wd=typeof setTimeout=="function"?setTimeout:void 0,I_=typeof clearTimeout=="function"?clearTimeout:void 0,op=typeof Promise=="function"?Promise:void 0,A_=typeof queueMicrotask=="function"?queueMicrotask:typeof op<"u"?function(t){return op.resolve(null).then(t).catch(k_)}:wd;function k_(t){setTimeout(function(){throw t})}function Nu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),_o(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);_o(e)}function hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ap(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),bn="__reactFiber$"+hi,To="__reactProps$"+hi,Bn="__reactContainer$"+hi,_d="__reactEvents$"+hi,P_="__reactListeners$"+hi,R_="__reactHandles$"+hi;function Jr(t){var e=t[bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Bn]||n[bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ap(t);t!==null;){if(n=t[bn])return n;t=ap(t)}return e}t=n,n=t.parentNode}return null}function Qo(t){return t=t[bn]||t[Bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ds(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function dc(t){return t[To]||null}var jd=[],Ls=-1;function Rr(t){return{current:t}}function Ve(t){0>Ls||(t.current=jd[Ls],jd[Ls]=null,Ls--)}function Ae(t,e){Ls++,jd[Ls]=t.current,t.current=e}var br={},Tt=Rr(br),Vt=Rr(!1),is=br;function Xs(t,e){var n=t.type.contextTypes;if(!n)return br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Mt(t){return t=t.childContextTypes,t!=null}function Tl(){Ve(Vt),Ve(Tt)}function lp(t,e,n){if(Tt.current!==br)throw Error($(168));Ae(Tt,e),Ae(Vt,n)}function xx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,xw(t)||"Unknown",s));return $e({},n,r)}function Sl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||br,is=Tt.current,Ae(Tt,t),Ae(Vt,Vt.current),!0}function cp(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=xx(t,e,is),r.__reactInternalMemoizedMergedChildContext=t,Ve(Vt),Ve(Tt),Ae(Tt,t)):Ve(Vt),Ae(Vt,n)}var Vn=null,hc=!1,Tu=!1;function yx(t){Vn===null?Vn=[t]:Vn.push(t)}function D_(t){hc=!0,yx(t)}function Dr(){if(!Tu&&Vn!==null){Tu=!0;var t=0,e=Ne;try{var n=Vn;for(Ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vn=null,hc=!1}catch(s){throw Vn!==null&&(Vn=Vn.slice(t+1)),$0(Th,Dr),s}finally{Ne=e,Tu=!1}}return null}var Vs=[],Ms=0,Cl=null,Il=0,Jt=[],Zt=0,os=null,Mn=1,On="";function Kr(t,e){Vs[Ms++]=Il,Vs[Ms++]=Cl,Cl=t,Il=e}function vx(t,e,n){Jt[Zt++]=Mn,Jt[Zt++]=On,Jt[Zt++]=os,os=t;var r=Mn;t=On;var s=32-fn(r)-1;r&=~(1<<s),n+=1;var o=32-fn(e)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Mn=1<<32-fn(e)+s|n<<s|r,On=o+t}else Mn=1<<o|n<<s|r,On=t}function Lh(t){t.return!==null&&(Kr(t,1),vx(t,1,0))}function Vh(t){for(;t===Cl;)Cl=Vs[--Ms],Vs[Ms]=null,Il=Vs[--Ms],Vs[Ms]=null;for(;t===os;)os=Jt[--Zt],Jt[Zt]=null,On=Jt[--Zt],Jt[Zt]=null,Mn=Jt[--Zt],Jt[Zt]=null}var qt=null,zt=null,Oe=!1,hn=null;function wx(t,e){var n=tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function up(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,zt=hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=os!==null?{id:Mn,overflow:On}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,zt=null,!0):!1;default:return!1}}function Ed(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bd(t){if(Oe){var e=zt;if(e){var n=e;if(!up(t,e)){if(Ed(t))throw Error($(418));e=hr(n.nextSibling);var r=qt;e&&up(t,e)?wx(r,n):(t.flags=t.flags&-4097|2,Oe=!1,qt=t)}}else{if(Ed(t))throw Error($(418));t.flags=t.flags&-4097|2,Oe=!1,qt=t}}}function dp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function Fa(t){if(t!==qt)return!1;if(!Oe)return dp(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vd(t.type,t.memoizedProps)),e&&(e=zt)){if(Ed(t))throw _x(),Error($(418));for(;e;)wx(t,e),e=hr(e.nextSibling)}if(dp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zt=hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zt=null}}else zt=qt?hr(t.stateNode.nextSibling):null;return!0}function _x(){for(var t=zt;t;)t=hr(t.nextSibling)}function Js(){zt=qt=null,Oe=!1}function Mh(t){hn===null?hn=[t]:hn.push(t)}var L_=Qn.ReactCurrentBatchConfig;function Bi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var c=s.refs;a===null?delete c[o]:c[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Ua(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hp(t){var e=t._init;return e(t._payload)}function jx(t){function e(x,_){if(t){var E=x.deletions;E===null?(x.deletions=[_],x.flags|=16):E.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function s(x,_){return x=gr(x,_),x.index=0,x.sibling=null,x}function o(x,_,E){return x.index=E,t?(E=x.alternate,E!==null?(E=E.index,E<_?(x.flags|=2,_):E):(x.flags|=2,_)):(x.flags|=1048576,_)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function c(x,_,E,k){return _===null||_.tag!==6?(_=Ru(E,x.mode,k),_.return=x,_):(_=s(_,E),_.return=x,_)}function u(x,_,E,k){var L=E.type;return L===As?m(x,_,E.props.children,k,E.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===tr&&hp(L)===_.type)?(k=s(_,E.props),k.ref=Bi(x,_,E),k.return=x,k):(k=ul(E.type,E.key,E.props,null,x.mode,k),k.ref=Bi(x,_,E),k.return=x,k)}function d(x,_,E,k){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=Du(E,x.mode,k),_.return=x,_):(_=s(_,E.children||[]),_.return=x,_)}function m(x,_,E,k,L){return _===null||_.tag!==7?(_=rs(E,x.mode,k,L),_.return=x,_):(_=s(_,E),_.return=x,_)}function p(x,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Ru(""+_,x.mode,E),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ia:return E=ul(_.type,_.key,_.props,null,x.mode,E),E.ref=Bi(x,null,_),E.return=x,E;case Is:return _=Du(_,x.mode,E),_.return=x,_;case tr:var k=_._init;return p(x,k(_._payload),E)}if(Qi(_)||Vi(_))return _=rs(_,x.mode,E,null),_.return=x,_;Ua(x,_)}return null}function f(x,_,E,k){var L=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return L!==null?null:c(x,_,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ia:return E.key===L?u(x,_,E,k):null;case Is:return E.key===L?d(x,_,E,k):null;case tr:return L=E._init,f(x,_,L(E._payload),k)}if(Qi(E)||Vi(E))return L!==null?null:m(x,_,E,k,null);Ua(x,E)}return null}function v(x,_,E,k,L){if(typeof k=="string"&&k!==""||typeof k=="number")return x=x.get(E)||null,c(_,x,""+k,L);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ia:return x=x.get(k.key===null?E:k.key)||null,u(_,x,k,L);case Is:return x=x.get(k.key===null?E:k.key)||null,d(_,x,k,L);case tr:var P=k._init;return v(x,_,E,P(k._payload),L)}if(Qi(k)||Vi(k))return x=x.get(E)||null,m(_,x,k,L,null);Ua(_,k)}return null}function j(x,_,E,k){for(var L=null,P=null,y=_,w=_=0,T=null;y!==null&&w<E.length;w++){y.index>w?(T=y,y=null):T=y.sibling;var A=f(x,y,E[w],k);if(A===null){y===null&&(y=T);break}t&&y&&A.alternate===null&&e(x,y),_=o(A,_,w),P===null?L=A:P.sibling=A,P=A,y=T}if(w===E.length)return n(x,y),Oe&&Kr(x,w),L;if(y===null){for(;w<E.length;w++)y=p(x,E[w],k),y!==null&&(_=o(y,_,w),P===null?L=y:P.sibling=y,P=y);return Oe&&Kr(x,w),L}for(y=r(x,y);w<E.length;w++)T=v(y,x,w,E[w],k),T!==null&&(t&&T.alternate!==null&&y.delete(T.key===null?w:T.key),_=o(T,_,w),P===null?L=T:P.sibling=T,P=T);return t&&y.forEach(function(S){return e(x,S)}),Oe&&Kr(x,w),L}function I(x,_,E,k){var L=Vi(E);if(typeof L!="function")throw Error($(150));if(E=L.call(E),E==null)throw Error($(151));for(var P=L=null,y=_,w=_=0,T=null,A=E.next();y!==null&&!A.done;w++,A=E.next()){y.index>w?(T=y,y=null):T=y.sibling;var S=f(x,y,A.value,k);if(S===null){y===null&&(y=T);break}t&&y&&S.alternate===null&&e(x,y),_=o(S,_,w),P===null?L=S:P.sibling=S,P=S,y=T}if(A.done)return n(x,y),Oe&&Kr(x,w),L;if(y===null){for(;!A.done;w++,A=E.next())A=p(x,A.value,k),A!==null&&(_=o(A,_,w),P===null?L=A:P.sibling=A,P=A);return Oe&&Kr(x,w),L}for(y=r(x,y);!A.done;w++,A=E.next())A=v(y,x,w,A.value,k),A!==null&&(t&&A.alternate!==null&&y.delete(A.key===null?w:A.key),_=o(A,_,w),P===null?L=A:P.sibling=A,P=A);return t&&y.forEach(function(D){return e(x,D)}),Oe&&Kr(x,w),L}function C(x,_,E,k){if(typeof E=="object"&&E!==null&&E.type===As&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ia:e:{for(var L=E.key,P=_;P!==null;){if(P.key===L){if(L=E.type,L===As){if(P.tag===7){n(x,P.sibling),_=s(P,E.props.children),_.return=x,x=_;break e}}else if(P.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===tr&&hp(L)===P.type){n(x,P.sibling),_=s(P,E.props),_.ref=Bi(x,P,E),_.return=x,x=_;break e}n(x,P);break}else e(x,P);P=P.sibling}E.type===As?(_=rs(E.props.children,x.mode,k,E.key),_.return=x,x=_):(k=ul(E.type,E.key,E.props,null,x.mode,k),k.ref=Bi(x,_,E),k.return=x,x=k)}return a(x);case Is:e:{for(P=E.key;_!==null;){if(_.key===P)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(x,_.sibling),_=s(_,E.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=Du(E,x.mode,k),_.return=x,x=_}return a(x);case tr:return P=E._init,C(x,_,P(E._payload),k)}if(Qi(E))return j(x,_,E,k);if(Vi(E))return I(x,_,E,k);Ua(x,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(x,_.sibling),_=s(_,E),_.return=x,x=_):(n(x,_),_=Ru(E,x.mode,k),_.return=x,x=_),a(x)):n(x,_)}return C}var Zs=jx(!0),Ex=jx(!1),Al=Rr(null),kl=null,Os=null,Oh=null;function Fh(){Oh=Os=kl=null}function Uh(t){var e=Al.current;Ve(Al),t._currentValue=e}function Nd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hs(t,e){kl=t,Oh=Os=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lt=!0),t.firstContext=null)}function on(t){var e=t._currentValue;if(Oh!==t)if(t={context:t,memoizedValue:e,next:null},Os===null){if(kl===null)throw Error($(308));Os=t,kl.dependencies={lanes:0,firstContext:t}}else Os=Os.next=t;return e}var Zr=null;function Bh(t){Zr===null?Zr=[t]:Zr.push(t)}function bx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Bh(e)):(n.next=s.next,s.next=n),e.interleaved=n,zn(t,r)}function zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var nr=!1;function zh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zn(t,n)}return s=r.interleaved,s===null?(e.next=e,Bh(r)):(e.next=s.next,s.next=e),r.interleaved=e,zn(t,n)}function sl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sh(t,n)}}function fp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pl(t,e,n,r){var s=t.updateQueue;nr=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?o=d:a.next=d,a=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==a&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=u))}if(o!==null){var p=s.baseState;a=0,m=d=u=null,c=o;do{var f=c.lane,v=c.eventTime;if((r&f)===f){m!==null&&(m=m.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var j=t,I=c;switch(f=e,v=n,I.tag){case 1:if(j=I.payload,typeof j=="function"){p=j.call(v,p,f);break e}p=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=I.payload,f=typeof j=="function"?j.call(v,p,f):j,f==null)break e;p=$e({},p,f);break e;case 2:nr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[c]:f.push(c))}else v={eventTime:v,lane:f,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=v,u=p):m=m.next=v,a|=f;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;f=c,c=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);ls|=a,t.lanes=a,t.memoizedState=p}}function mp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Go={},Tn=Rr(Go),So=Rr(Go),Co=Rr(Go);function es(t){if(t===Go)throw Error($(174));return t}function $h(t,e){switch(Ae(Co,e),Ae(So,t),Ae(Tn,Go),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:id(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=id(e,t)}Ve(Tn),Ae(Tn,e)}function ei(){Ve(Tn),Ve(So),Ve(Co)}function Tx(t){es(Co.current);var e=es(Tn.current),n=id(e,t.type);e!==n&&(Ae(So,t),Ae(Tn,n))}function qh(t){So.current===t&&(Ve(Tn),Ve(So))}var Be=Rr(0);function Rl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Su=[];function Hh(){for(var t=0;t<Su.length;t++)Su[t]._workInProgressVersionPrimary=null;Su.length=0}var il=Qn.ReactCurrentDispatcher,Cu=Qn.ReactCurrentBatchConfig,as=0,ze=null,nt=null,ct=null,Dl=!1,oo=!1,Io=0,V_=0;function wt(){throw Error($(321))}function Wh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function Qh(t,e,n,r,s,o){if(as=o,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,il.current=t===null||t.memoizedState===null?U_:B_,t=n(r,s),oo){o=0;do{if(oo=!1,Io=0,25<=o)throw Error($(301));o+=1,ct=nt=null,e.updateQueue=null,il.current=z_,t=n(r,s)}while(oo)}if(il.current=Ll,e=nt!==null&&nt.next!==null,as=0,ct=nt=ze=null,Dl=!1,e)throw Error($(300));return t}function Gh(){var t=Io!==0;return Io=0,t}function jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?ze.memoizedState=ct=t:ct=ct.next=t,ct}function an(){if(nt===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=ct===null?ze.memoizedState:ct.next;if(e!==null)ct=e,nt=t;else{if(t===null)throw Error($(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ct===null?ze.memoizedState=ct=t:ct=ct.next=t}return ct}function Ao(t,e){return typeof e=="function"?e(t):e}function Iu(t){var e=an(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=nt,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var c=a=null,u=null,d=o;do{var m=d.lane;if((as&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,a=r):u=u.next=p,ze.lanes|=m,ls|=m}d=d.next}while(d!==null&&d!==o);u===null?a=r:u.next=c,pn(r,e.memoizedState)||(Lt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,ze.lanes|=o,ls|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Au(t){var e=an(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=t(o,a.action),a=a.next;while(a!==s);pn(o,e.memoizedState)||(Lt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Sx(){}function Cx(t,e){var n=ze,r=an(),s=e(),o=!pn(r.memoizedState,s);if(o&&(r.memoizedState=s,Lt=!0),r=r.queue,Kh(kx.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,ko(9,Ax.bind(null,n,r,s,e),void 0,null),dt===null)throw Error($(349));as&30||Ix(n,e,s)}return s}function Ix(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ax(t,e,n,r){e.value=n,e.getSnapshot=r,Px(e)&&Rx(t)}function kx(t,e,n){return n(function(){Px(e)&&Rx(t)})}function Px(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function Rx(t){var e=zn(t,1);e!==null&&mn(e,t,1,-1)}function pp(t){var e=jn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:t},e.queue=t,t=t.dispatch=F_.bind(null,ze,t),[e.memoizedState,t]}function ko(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Dx(){return an().memoizedState}function ol(t,e,n,r){var s=jn();ze.flags|=t,s.memoizedState=ko(1|e,n,void 0,r===void 0?null:r)}function fc(t,e,n,r){var s=an();r=r===void 0?null:r;var o=void 0;if(nt!==null){var a=nt.memoizedState;if(o=a.destroy,r!==null&&Wh(r,a.deps)){s.memoizedState=ko(e,n,o,r);return}}ze.flags|=t,s.memoizedState=ko(1|e,n,o,r)}function gp(t,e){return ol(8390656,8,t,e)}function Kh(t,e){return fc(2048,8,t,e)}function Lx(t,e){return fc(4,2,t,e)}function Vx(t,e){return fc(4,4,t,e)}function Mx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ox(t,e,n){return n=n!=null?n.concat([t]):null,fc(4,4,Mx.bind(null,e,t),n)}function Yh(){}function Fx(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ux(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Bx(t,e,n){return as&21?(pn(n,e)||(n=W0(),ze.lanes|=n,ls|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lt=!0),t.memoizedState=n)}function M_(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var r=Cu.transition;Cu.transition={};try{t(!1),e()}finally{Ne=n,Cu.transition=r}}function zx(){return an().memoizedState}function O_(t,e,n){var r=pr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$x(t))qx(e,n);else if(n=bx(t,e,n,r),n!==null){var s=It();mn(n,t,r,s),Hx(n,e,r)}}function F_(t,e,n){var r=pr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($x(t))qx(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,c=o(a,n);if(s.hasEagerState=!0,s.eagerState=c,pn(c,a)){var u=e.interleaved;u===null?(s.next=s,Bh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=bx(t,e,s,r),n!==null&&(s=It(),mn(n,t,r,s),Hx(n,e,r))}}function $x(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function qx(t,e){oo=Dl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Hx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sh(t,n)}}var Ll={readContext:on,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},U_={readContext:on,useCallback:function(t,e){return jn().memoizedState=[t,e===void 0?null:e],t},useContext:on,useEffect:gp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ol(4194308,4,Mx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ol(4194308,4,t,e)},useInsertionEffect:function(t,e){return ol(4,2,t,e)},useMemo:function(t,e){var n=jn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=jn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=O_.bind(null,ze,t),[r.memoizedState,t]},useRef:function(t){var e=jn();return t={current:t},e.memoizedState=t},useState:pp,useDebugValue:Yh,useDeferredValue:function(t){return jn().memoizedState=t},useTransition:function(){var t=pp(!1),e=t[0];return t=M_.bind(null,t[1]),jn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ze,s=jn();if(Oe){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),dt===null)throw Error($(349));as&30||Ix(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,gp(kx.bind(null,r,o,t),[t]),r.flags|=2048,ko(9,Ax.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=jn(),e=dt.identifierPrefix;if(Oe){var n=On,r=Mn;n=(r&~(1<<32-fn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Io++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=V_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},B_={readContext:on,useCallback:Fx,useContext:on,useEffect:Kh,useImperativeHandle:Ox,useInsertionEffect:Lx,useLayoutEffect:Vx,useMemo:Ux,useReducer:Iu,useRef:Dx,useState:function(){return Iu(Ao)},useDebugValue:Yh,useDeferredValue:function(t){var e=an();return Bx(e,nt.memoizedState,t)},useTransition:function(){var t=Iu(Ao)[0],e=an().memoizedState;return[t,e]},useMutableSource:Sx,useSyncExternalStore:Cx,useId:zx,unstable_isNewReconciler:!1},z_={readContext:on,useCallback:Fx,useContext:on,useEffect:Kh,useImperativeHandle:Ox,useInsertionEffect:Lx,useLayoutEffect:Vx,useMemo:Ux,useReducer:Au,useRef:Dx,useState:function(){return Au(Ao)},useDebugValue:Yh,useDeferredValue:function(t){var e=an();return nt===null?e.memoizedState=t:Bx(e,nt.memoizedState,t)},useTransition:function(){var t=Au(Ao)[0],e=an().memoizedState;return[t,e]},useMutableSource:Sx,useSyncExternalStore:Cx,useId:zx,unstable_isNewReconciler:!1};function un(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Td(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var mc={isMounted:function(t){return(t=t._reactInternals)?fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=It(),s=pr(t),o=Fn(r,s);o.payload=e,n!=null&&(o.callback=n),e=fr(t,o,s),e!==null&&(mn(e,t,s,r),sl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=It(),s=pr(t),o=Fn(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=fr(t,o,s),e!==null&&(mn(e,t,s,r),sl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),r=pr(t),s=Fn(n,r);s.tag=2,e!=null&&(s.callback=e),e=fr(t,s,r),e!==null&&(mn(e,t,r,n),sl(e,t,r))}};function xp(t,e,n,r,s,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!Eo(n,r)||!Eo(s,o):!0}function Wx(t,e,n){var r=!1,s=br,o=e.contextType;return typeof o=="object"&&o!==null?o=on(o):(s=Mt(e)?is:Tt.current,r=e.contextTypes,o=(r=r!=null)?Xs(t,s):br),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function yp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&mc.enqueueReplaceState(e,e.state,null)}function Sd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},zh(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=on(o):(o=Mt(e)?is:Tt.current,s.context=Xs(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Td(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&mc.enqueueReplaceState(s,s.state,null),Pl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ti(t,e){try{var n="",r=e;do n+=gw(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function ku(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $_=typeof WeakMap=="function"?WeakMap:Map;function Qx(t,e,n){n=Fn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ml||(Ml=!0,Od=r),Cd(t,e)},n}function Gx(t,e,n){n=Fn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Cd(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Cd(t,e),typeof r!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function vp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new $_;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=r2.bind(null,t,e,n),e.then(t,t))}function wp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _p(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fn(-1,1),e.tag=2,fr(n,e,1))),n.lanes|=1),t)}var q_=Qn.ReactCurrentOwner,Lt=!1;function Ct(t,e,n,r){e.child=t===null?Ex(e,null,n,r):Zs(e,t.child,n,r)}function jp(t,e,n,r,s){n=n.render;var o=e.ref;return Hs(e,s),r=Qh(t,e,n,r,o,s),n=Gh(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$n(t,e,s)):(Oe&&n&&Lh(e),e.flags|=1,Ct(t,e,r,s),e.child)}function Ep(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!sf(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Kx(t,e,o,r,s)):(t=ul(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Eo,n(a,r)&&t.ref===e.ref)return $n(t,e,s)}return e.flags|=1,t=gr(o,r),t.ref=e.ref,t.return=e,e.child=t}function Kx(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(Eo(o,r)&&t.ref===e.ref)if(Lt=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(Lt=!0);else return e.lanes=t.lanes,$n(t,e,s)}return Id(t,e,n,r,s)}function Yx(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Us,Bt),Bt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Us,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ae(Us,Bt),Bt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ae(Us,Bt),Bt|=r;return Ct(t,e,s,n),e.child}function Xx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Id(t,e,n,r,s){var o=Mt(n)?is:Tt.current;return o=Xs(e,o),Hs(e,s),n=Qh(t,e,n,r,o,s),r=Gh(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$n(t,e,s)):(Oe&&r&&Lh(e),e.flags|=1,Ct(t,e,n,s),e.child)}function bp(t,e,n,r,s){if(Mt(n)){var o=!0;Sl(e)}else o=!1;if(Hs(e,s),e.stateNode===null)al(t,e),Wx(e,n,r),Sd(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=on(d):(d=Mt(n)?is:Tt.current,d=Xs(e,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&yp(e,a,r,d),nr=!1;var f=e.memoizedState;a.state=f,Pl(e,r,a,s),u=e.memoizedState,c!==r||f!==u||Vt.current||nr?(typeof m=="function"&&(Td(e,n,m,r),u=e.memoizedState),(c=nr||xp(e,n,c,r,f,u,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Nx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:un(e.type,c),a.props=d,p=e.pendingProps,f=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=on(u):(u=Mt(n)?is:Tt.current,u=Xs(e,u));var v=n.getDerivedStateFromProps;(m=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==p||f!==u)&&yp(e,a,r,u),nr=!1,f=e.memoizedState,a.state=f,Pl(e,r,a,s);var j=e.memoizedState;c!==p||f!==j||Vt.current||nr?(typeof v=="function"&&(Td(e,n,v,r),j=e.memoizedState),(d=nr||xp(e,n,d,r,f,j,u)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,j,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,j,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=j),a.props=r,a.state=j,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ad(t,e,n,r,o,s)}function Ad(t,e,n,r,s,o){Xx(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&cp(e,n,!1),$n(t,e,o);r=e.stateNode,q_.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Zs(e,t.child,null,o),e.child=Zs(e,null,c,o)):Ct(t,e,c,o),e.memoizedState=r.state,s&&cp(e,n,!0),e.child}function Jx(t){var e=t.stateNode;e.pendingContext?lp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lp(t,e.context,!1),$h(t,e.containerInfo)}function Np(t,e,n,r,s){return Js(),Mh(s),e.flags|=256,Ct(t,e,n,r),e.child}var kd={dehydrated:null,treeContext:null,retryLane:0};function Pd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zx(t,e,n){var r=e.pendingProps,s=Be.current,o=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ae(Be,s&1),t===null)return bd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=xc(a,r,0,null),t=rs(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Pd(n),e.memoizedState=kd,t):Xh(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return H_(t,e,a,r,c,s,n);if(o){o=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=gr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?o=gr(c,o):(o=rs(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?Pd(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=kd,r}return o=t.child,t=o.sibling,r=gr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Xh(t,e){return e=xc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ba(t,e,n,r){return r!==null&&Mh(r),Zs(e,t.child,null,n),t=Xh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function H_(t,e,n,r,s,o,a){if(n)return e.flags&256?(e.flags&=-257,r=ku(Error($(422))),Ba(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=xc({mode:"visible",children:r.children},s,0,null),o=rs(o,s,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Zs(e,t.child,null,a),e.child.memoizedState=Pd(a),e.memoizedState=kd,o);if(!(e.mode&1))return Ba(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,o=Error($(419)),r=ku(o,r,void 0),Ba(t,e,a,r)}if(c=(a&t.childLanes)!==0,Lt||c){if(r=dt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,zn(t,s),mn(r,t,s,-1))}return rf(),r=ku(Error($(421))),Ba(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=s2.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,zt=hr(s.nextSibling),qt=e,Oe=!0,hn=null,t!==null&&(Jt[Zt++]=Mn,Jt[Zt++]=On,Jt[Zt++]=os,Mn=t.id,On=t.overflow,os=e),e=Xh(e,r.children),e.flags|=4096,e)}function Tp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nd(t.return,e,n)}function Pu(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function ey(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(Ct(t,e,r.children,n),r=Be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tp(t,n,e);else if(t.tag===19)Tp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Be,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Rl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Pu(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Rl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Pu(e,!0,n,null,o);break;case"together":Pu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function al(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $n(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ls|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function W_(t,e,n){switch(e.tag){case 3:Jx(e),Js();break;case 5:Tx(e);break;case 1:Mt(e.type)&&Sl(e);break;case 4:$h(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ae(Al,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Be,Be.current&1),e.flags|=128,null):n&e.child.childLanes?Zx(t,e,n):(Ae(Be,Be.current&1),t=$n(t,e,n),t!==null?t.sibling:null);Ae(Be,Be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ey(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae(Be,Be.current),r)break;return null;case 22:case 23:return e.lanes=0,Yx(t,e,n)}return $n(t,e,n)}var ty,Rd,ny,ry;ty=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rd=function(){};ny=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,es(Tn.current);var o=null;switch(n){case"input":s=td(t,s),r=td(t,r),o=[];break;case"select":s=$e({},s,{value:void 0}),r=$e({},r,{value:void 0}),o=[];break;case"textarea":s=sd(t,s),r=sd(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Nl)}od(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(go.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(go.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Re("scroll",t),o||c===u||(o=[])):(o=o||[]).push(d,u))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};ry=function(t,e,n,r){n!==r&&(e.flags|=4)};function zi(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Q_(t,e,n){var r=e.pendingProps;switch(Vh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return Mt(e.type)&&Tl(),_t(e),null;case 3:return r=e.stateNode,ei(),Ve(Vt),Ve(Tt),Hh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&(Bd(hn),hn=null))),Rd(t,e),_t(e),null;case 5:qh(e);var s=es(Co.current);if(n=e.type,t!==null&&e.stateNode!=null)ny(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return _t(e),null}if(t=es(Tn.current),Fa(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[bn]=e,r[To]=o,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<Ki.length;s++)Re(Ki[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Lm(r,o),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Re("invalid",r);break;case"textarea":Mm(r,o),Re("invalid",r)}od(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="children"?typeof c=="string"?r.textContent!==c&&(o.suppressHydrationWarning!==!0&&Oa(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&Oa(r.textContent,c,t),s=["children",""+c]):go.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Re("scroll",r)}switch(n){case"input":Aa(r),Vm(r,o,!0);break;case"textarea":Aa(r),Om(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Nl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=k0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[bn]=e,t[To]=r,ty(t,e,!1,!1),e.stateNode=t;e:{switch(a=ad(n,r),n){case"dialog":Re("cancel",t),Re("close",t),s=r;break;case"iframe":case"object":case"embed":Re("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ki.length;s++)Re(Ki[s],t);s=r;break;case"source":Re("error",t),s=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),s=r;break;case"details":Re("toggle",t),s=r;break;case"input":Lm(t,r),s=td(t,r),Re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=$e({},r,{value:void 0}),Re("invalid",t);break;case"textarea":Mm(t,r),s=sd(t,r),Re("invalid",t);break;default:s=r}od(n,s),c=s;for(o in c)if(c.hasOwnProperty(o)){var u=c[o];o==="style"?D0(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&P0(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&xo(t,u):typeof u=="number"&&xo(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(go.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Re("scroll",t):u!=null&&_h(t,o,u,a))}switch(n){case"input":Aa(t),Vm(t,r,!1);break;case"textarea":Aa(t),Om(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Er(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Bs(t,!!r.multiple,o,!1):r.defaultValue!=null&&Bs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Nl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)ry(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=es(Co.current),es(Tn.current),Fa(e)){if(r=e.stateNode,n=e.memoizedProps,r[bn]=e,(o=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:Oa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Oa(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bn]=e,e.stateNode=r}return _t(e),null;case 13:if(Ve(Be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&zt!==null&&e.mode&1&&!(e.flags&128))_x(),Js(),e.flags|=98560,o=!1;else if(o=Fa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error($(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error($(317));o[bn]=e}else Js(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),o=!1}else hn!==null&&(Bd(hn),hn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Be.current&1?st===0&&(st=3):rf())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return ei(),Rd(t,e),t===null&&bo(e.stateNode.containerInfo),_t(e),null;case 10:return Uh(e.type._context),_t(e),null;case 17:return Mt(e.type)&&Tl(),_t(e),null;case 19:if(Ve(Be),o=e.memoizedState,o===null)return _t(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)zi(o,!1);else{if(st!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Rl(t),a!==null){for(e.flags|=128,zi(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Be,Be.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ge()>ni&&(e.flags|=128,r=!0,zi(o,!1),e.lanes=4194304)}else{if(!r)if(t=Rl(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Oe)return _t(e),null}else 2*Ge()-o.renderingStartTime>ni&&n!==1073741824&&(e.flags|=128,r=!0,zi(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ge(),e.sibling=null,n=Be.current,Ae(Be,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return nf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bt&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function G_(t,e){switch(Vh(e),e.tag){case 1:return Mt(e.type)&&Tl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ei(),Ve(Vt),Ve(Tt),Hh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qh(e),null;case 13:if(Ve(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Js()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(Be),null;case 4:return ei(),null;case 10:return Uh(e.type._context),null;case 22:case 23:return nf(),null;case 24:return null;default:return null}}var za=!1,bt=!1,K_=typeof WeakSet=="function"?WeakSet:Set,G=null;function Fs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(t,e,r)}else n.current=null}function Dd(t,e,n){try{n()}catch(r){We(t,e,r)}}var Sp=!1;function Y_(t,e){if(xd=jl,t=lx(),Dh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,m=0,p=t,f=null;t:for(;;){for(var v;p!==n||s!==0&&p.nodeType!==3||(c=a+s),p!==o||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(v=p.firstChild)!==null;)f=p,p=v;for(;;){if(p===t)break t;if(f===n&&++d===s&&(c=a),f===o&&++m===r&&(u=a),(v=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=v}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(yd={focusedElem:t,selectionRange:n},jl=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var I=j.memoizedProps,C=j.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?I:un(e.type,I),C);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(k){We(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return j=Sp,Sp=!1,j}function ao(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Dd(e,n,o)}s=s.next}while(s!==r)}}function pc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ld(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function sy(t){var e=t.alternate;e!==null&&(t.alternate=null,sy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bn],delete e[To],delete e[_d],delete e[P_],delete e[R_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iy(t){return t.tag===5||t.tag===3||t.tag===4}function Cp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nl));else if(r!==4&&(t=t.child,t!==null))for(Vd(t,e,n),t=t.sibling;t!==null;)Vd(t,e,n),t=t.sibling}function Md(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Md(t,e,n),t=t.sibling;t!==null;)Md(t,e,n),t=t.sibling}var mt=null,dn=!1;function er(t,e,n){for(n=n.child;n!==null;)oy(t,e,n),n=n.sibling}function oy(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(ac,n)}catch{}switch(n.tag){case 5:bt||Fs(n,e);case 6:var r=mt,s=dn;mt=null,er(t,e,n),mt=r,dn=s,mt!==null&&(dn?(t=mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(dn?(t=mt,n=n.stateNode,t.nodeType===8?Nu(t.parentNode,n):t.nodeType===1&&Nu(t,n),_o(t)):Nu(mt,n.stateNode));break;case 4:r=mt,s=dn,mt=n.stateNode.containerInfo,dn=!0,er(t,e,n),mt=r,dn=s;break;case 0:case 11:case 14:case 15:if(!bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Dd(n,e,a),s=s.next}while(s!==r)}er(t,e,n);break;case 1:if(!bt&&(Fs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){We(n,e,c)}er(t,e,n);break;case 21:er(t,e,n);break;case 22:n.mode&1?(bt=(r=bt)||n.memoizedState!==null,er(t,e,n),bt=r):er(t,e,n);break;default:er(t,e,n)}}function Ip(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new K_),e.forEach(function(r){var s=i2.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:mt=c.stateNode,dn=!1;break e;case 3:mt=c.stateNode.containerInfo,dn=!0;break e;case 4:mt=c.stateNode.containerInfo,dn=!0;break e}c=c.return}if(mt===null)throw Error($(160));oy(o,a,s),mt=null,dn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){We(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ay(e,t),e=e.sibling}function ay(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cn(e,t),_n(t),r&4){try{ao(3,t,t.return),pc(3,t)}catch(I){We(t,t.return,I)}try{ao(5,t,t.return)}catch(I){We(t,t.return,I)}}break;case 1:cn(e,t),_n(t),r&512&&n!==null&&Fs(n,n.return);break;case 5:if(cn(e,t),_n(t),r&512&&n!==null&&Fs(n,n.return),t.flags&32){var s=t.stateNode;try{xo(s,"")}catch(I){We(t,t.return,I)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&I0(s,o),ad(c,a);var d=ad(c,o);for(a=0;a<u.length;a+=2){var m=u[a],p=u[a+1];m==="style"?D0(s,p):m==="dangerouslySetInnerHTML"?P0(s,p):m==="children"?xo(s,p):_h(s,m,p,d)}switch(c){case"input":nd(s,o);break;case"textarea":A0(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?Bs(s,!!o.multiple,v,!1):f!==!!o.multiple&&(o.defaultValue!=null?Bs(s,!!o.multiple,o.defaultValue,!0):Bs(s,!!o.multiple,o.multiple?[]:"",!1))}s[To]=o}catch(I){We(t,t.return,I)}}break;case 6:if(cn(e,t),_n(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(I){We(t,t.return,I)}}break;case 3:if(cn(e,t),_n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_o(e.containerInfo)}catch(I){We(t,t.return,I)}break;case 4:cn(e,t),_n(t);break;case 13:cn(e,t),_n(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(ef=Ge())),r&4&&Ip(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(bt=(d=bt)||m,cn(e,t),bt=d):cn(e,t),_n(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(G=t,m=t.child;m!==null;){for(p=G=m;G!==null;){switch(f=G,v=f.child,f.tag){case 0:case 11:case 14:case 15:ao(4,f,f.return);break;case 1:Fs(f,f.return);var j=f.stateNode;if(typeof j.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(I){We(r,n,I)}}break;case 5:Fs(f,f.return);break;case 22:if(f.memoizedState!==null){kp(p);continue}}v!==null?(v.return=f,G=v):kp(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=R0("display",a))}catch(I){We(t,t.return,I)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(I){We(t,t.return,I)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:cn(e,t),_n(t),r&4&&Ip(t);break;case 21:break;default:cn(e,t),_n(t)}}function _n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(iy(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(xo(s,""),r.flags&=-33);var o=Cp(t);Md(t,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=Cp(t);Vd(t,c,a);break;default:throw Error($(161))}}catch(u){We(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function X_(t,e,n){G=t,ly(t)}function ly(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||za;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||bt;c=za;var d=bt;if(za=a,(bt=u)&&!d)for(G=s;G!==null;)a=G,u=a.child,a.tag===22&&a.memoizedState!==null?Pp(s):u!==null?(u.return=a,G=u):Pp(s);for(;o!==null;)G=o,ly(o),o=o.sibling;G=s,za=c,bt=d}Ap(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,G=o):Ap(t)}}function Ap(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bt||pc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!bt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:un(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&mp(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mp(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&_o(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}bt||e.flags&512&&Ld(e)}catch(f){We(e,e.return,f)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function kp(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function Pp(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pc(4,e)}catch(u){We(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){We(e,s,u)}}var o=e.return;try{Ld(e)}catch(u){We(e,o,u)}break;case 5:var a=e.return;try{Ld(e)}catch(u){We(e,a,u)}}}catch(u){We(e,e.return,u)}if(e===t){G=null;break}var c=e.sibling;if(c!==null){c.return=e.return,G=c;break}G=e.return}}var J_=Math.ceil,Vl=Qn.ReactCurrentDispatcher,Jh=Qn.ReactCurrentOwner,nn=Qn.ReactCurrentBatchConfig,_e=0,dt=null,Ze=null,xt=0,Bt=0,Us=Rr(0),st=0,Po=null,ls=0,gc=0,Zh=0,lo=null,Rt=null,ef=0,ni=1/0,Ln=null,Ml=!1,Od=null,mr=null,$a=!1,or=null,Ol=0,co=0,Fd=null,ll=-1,cl=0;function It(){return _e&6?Ge():ll!==-1?ll:ll=Ge()}function pr(t){return t.mode&1?_e&2&&xt!==0?xt&-xt:L_.transition!==null?(cl===0&&(cl=W0()),cl):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:Z0(t.type)),t):1}function mn(t,e,n,r){if(50<co)throw co=0,Fd=null,Error($(185));Ho(t,n,r),(!(_e&2)||t!==dt)&&(t===dt&&(!(_e&2)&&(gc|=n),st===4&&sr(t,xt)),Ot(t,r),n===1&&_e===0&&!(e.mode&1)&&(ni=Ge()+500,hc&&Dr()))}function Ot(t,e){var n=t.callbackNode;Lw(t,e);var r=_l(t,t===dt?xt:0);if(r===0)n!==null&&Bm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Bm(n),e===1)t.tag===0?D_(Rp.bind(null,t)):yx(Rp.bind(null,t)),A_(function(){!(_e&6)&&Dr()}),n=null;else{switch(Q0(r)){case 1:n=Th;break;case 4:n=q0;break;case 16:n=wl;break;case 536870912:n=H0;break;default:n=wl}n=gy(n,cy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function cy(t,e){if(ll=-1,cl=0,_e&6)throw Error($(327));var n=t.callbackNode;if(Ws()&&t.callbackNode!==n)return null;var r=_l(t,t===dt?xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fl(t,r);else{e=r;var s=_e;_e|=2;var o=dy();(dt!==t||xt!==e)&&(Ln=null,ni=Ge()+500,ns(t,e));do try{t2();break}catch(c){uy(t,c)}while(!0);Fh(),Vl.current=o,_e=s,Ze!==null?e=0:(dt=null,xt=0,e=st)}if(e!==0){if(e===2&&(s=hd(t),s!==0&&(r=s,e=Ud(t,s))),e===1)throw n=Po,ns(t,0),sr(t,r),Ot(t,Ge()),n;if(e===6)sr(t,r);else{if(s=t.current.alternate,!(r&30)&&!Z_(s)&&(e=Fl(t,r),e===2&&(o=hd(t),o!==0&&(r=o,e=Ud(t,o))),e===1))throw n=Po,ns(t,0),sr(t,r),Ot(t,Ge()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Yr(t,Rt,Ln);break;case 3:if(sr(t,r),(r&130023424)===r&&(e=ef+500-Ge(),10<e)){if(_l(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){It(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=wd(Yr.bind(null,t,Rt,Ln),e);break}Yr(t,Rt,Ln);break;case 4:if(sr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-fn(r);o=1<<a,a=e[a],a>s&&(s=a),r&=~o}if(r=s,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*J_(r/1960))-r,10<r){t.timeoutHandle=wd(Yr.bind(null,t,Rt,Ln),r);break}Yr(t,Rt,Ln);break;case 5:Yr(t,Rt,Ln);break;default:throw Error($(329))}}}return Ot(t,Ge()),t.callbackNode===n?cy.bind(null,t):null}function Ud(t,e){var n=lo;return t.current.memoizedState.isDehydrated&&(ns(t,e).flags|=256),t=Fl(t,e),t!==2&&(e=Rt,Rt=n,e!==null&&Bd(e)),t}function Bd(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function Z_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!pn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sr(t,e){for(e&=~Zh,e&=~gc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fn(e),r=1<<n;t[n]=-1,e&=~r}}function Rp(t){if(_e&6)throw Error($(327));Ws();var e=_l(t,0);if(!(e&1))return Ot(t,Ge()),null;var n=Fl(t,e);if(t.tag!==0&&n===2){var r=hd(t);r!==0&&(e=r,n=Ud(t,r))}if(n===1)throw n=Po,ns(t,0),sr(t,e),Ot(t,Ge()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yr(t,Rt,Ln),Ot(t,Ge()),null}function tf(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(ni=Ge()+500,hc&&Dr())}}function cs(t){or!==null&&or.tag===0&&!(_e&6)&&Ws();var e=_e;_e|=1;var n=nn.transition,r=Ne;try{if(nn.transition=null,Ne=1,t)return t()}finally{Ne=r,nn.transition=n,_e=e,!(_e&6)&&Dr()}}function nf(){Bt=Us.current,Ve(Us)}function ns(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,I_(n)),Ze!==null)for(n=Ze.return;n!==null;){var r=n;switch(Vh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Tl();break;case 3:ei(),Ve(Vt),Ve(Tt),Hh();break;case 5:qh(r);break;case 4:ei();break;case 13:Ve(Be);break;case 19:Ve(Be);break;case 10:Uh(r.type._context);break;case 22:case 23:nf()}n=n.return}if(dt=t,Ze=t=gr(t.current,null),xt=Bt=e,st=0,Po=null,Zh=gc=ls=0,Rt=lo=null,Zr!==null){for(e=0;e<Zr.length;e++)if(n=Zr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}Zr=null}return t}function uy(t,e){do{var n=Ze;try{if(Fh(),il.current=Ll,Dl){for(var r=ze.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dl=!1}if(as=0,ct=nt=ze=null,oo=!1,Io=0,Jh.current=null,n===null||n.return===null){st=1,Po=e,Ze=null;break}e:{var o=t,a=n.return,c=n,u=e;if(e=xt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=c,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var f=m.alternate;f?(m.updateQueue=f.updateQueue,m.memoizedState=f.memoizedState,m.lanes=f.lanes):(m.updateQueue=null,m.memoizedState=null)}var v=wp(a);if(v!==null){v.flags&=-257,_p(v,a,c,o,e),v.mode&1&&vp(o,d,e),e=v,u=d;var j=e.updateQueue;if(j===null){var I=new Set;I.add(u),e.updateQueue=I}else j.add(u);break e}else{if(!(e&1)){vp(o,d,e),rf();break e}u=Error($(426))}}else if(Oe&&c.mode&1){var C=wp(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),_p(C,a,c,o,e),Mh(ti(u,c));break e}}o=u=ti(u,c),st!==4&&(st=2),lo===null?lo=[o]:lo.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=Qx(o,u,e);fp(o,x);break e;case 1:c=u;var _=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(mr===null||!mr.has(E)))){o.flags|=65536,e&=-e,o.lanes|=e;var k=Gx(o,c,e);fp(o,k);break e}}o=o.return}while(o!==null)}fy(n)}catch(L){e=L,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(!0)}function dy(){var t=Vl.current;return Vl.current=Ll,t===null?Ll:t}function rf(){(st===0||st===3||st===2)&&(st=4),dt===null||!(ls&268435455)&&!(gc&268435455)||sr(dt,xt)}function Fl(t,e){var n=_e;_e|=2;var r=dy();(dt!==t||xt!==e)&&(Ln=null,ns(t,e));do try{e2();break}catch(s){uy(t,s)}while(!0);if(Fh(),_e=n,Vl.current=r,Ze!==null)throw Error($(261));return dt=null,xt=0,st}function e2(){for(;Ze!==null;)hy(Ze)}function t2(){for(;Ze!==null&&!Tw();)hy(Ze)}function hy(t){var e=py(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?fy(t):Ze=e,Jh.current=null}function fy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=G_(n,e),n!==null){n.flags&=32767,Ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{st=6,Ze=null;return}}else if(n=Q_(n,e,Bt),n!==null){Ze=n;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=t}while(e!==null);st===0&&(st=5)}function Yr(t,e,n){var r=Ne,s=nn.transition;try{nn.transition=null,Ne=1,n2(t,e,n,r)}finally{nn.transition=s,Ne=r}return null}function n2(t,e,n,r){do Ws();while(or!==null);if(_e&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Vw(t,o),t===dt&&(Ze=dt=null,xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$a||($a=!0,gy(wl,function(){return Ws(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=nn.transition,nn.transition=null;var a=Ne;Ne=1;var c=_e;_e|=4,Jh.current=null,Y_(t,n),ay(n,t),j_(yd),jl=!!xd,yd=xd=null,t.current=n,X_(n),Sw(),_e=c,Ne=a,nn.transition=o}else t.current=n;if($a&&($a=!1,or=t,Ol=s),o=t.pendingLanes,o===0&&(mr=null),Aw(n.stateNode),Ot(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ml)throw Ml=!1,t=Od,Od=null,t;return Ol&1&&t.tag!==0&&Ws(),o=t.pendingLanes,o&1?t===Fd?co++:(co=0,Fd=t):co=0,Dr(),null}function Ws(){if(or!==null){var t=Q0(Ol),e=nn.transition,n=Ne;try{if(nn.transition=null,Ne=16>t?16:t,or===null)var r=!1;else{if(t=or,or=null,Ol=0,_e&6)throw Error($(331));var s=_e;for(_e|=4,G=t.current;G!==null;){var o=G,a=o.child;if(G.flags&16){var c=o.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(G=d;G!==null;){var m=G;switch(m.tag){case 0:case 11:case 15:ao(8,m,o)}var p=m.child;if(p!==null)p.return=m,G=p;else for(;G!==null;){m=G;var f=m.sibling,v=m.return;if(sy(m),m===d){G=null;break}if(f!==null){f.return=v,G=f;break}G=v}}}var j=o.alternate;if(j!==null){var I=j.child;if(I!==null){j.child=null;do{var C=I.sibling;I.sibling=null,I=C}while(I!==null)}}G=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,G=a;else e:for(;G!==null;){if(o=G,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ao(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,G=x;break e}G=o.return}}var _=t.current;for(G=_;G!==null;){a=G;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,G=E;else e:for(a=_;G!==null;){if(c=G,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:pc(9,c)}}catch(L){We(c,c.return,L)}if(c===a){G=null;break e}var k=c.sibling;if(k!==null){k.return=c.return,G=k;break e}G=c.return}}if(_e=s,Dr(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(ac,t)}catch{}r=!0}return r}finally{Ne=n,nn.transition=e}}return!1}function Dp(t,e,n){e=ti(n,e),e=Qx(t,e,1),t=fr(t,e,1),e=It(),t!==null&&(Ho(t,1,e),Ot(t,e))}function We(t,e,n){if(t.tag===3)Dp(t,t,n);else for(;e!==null;){if(e.tag===3){Dp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mr===null||!mr.has(r))){t=ti(n,t),t=Gx(e,t,1),e=fr(e,t,1),t=It(),e!==null&&(Ho(e,1,t),Ot(e,t));break}}e=e.return}}function r2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,dt===t&&(xt&n)===n&&(st===4||st===3&&(xt&130023424)===xt&&500>Ge()-ef?ns(t,0):Zh|=n),Ot(t,e)}function my(t,e){e===0&&(t.mode&1?(e=Ra,Ra<<=1,!(Ra&130023424)&&(Ra=4194304)):e=1);var n=It();t=zn(t,e),t!==null&&(Ho(t,e,n),Ot(t,n))}function s2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),my(t,n)}function i2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),my(t,n)}var py;py=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vt.current)Lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Lt=!1,W_(t,e,n);Lt=!!(t.flags&131072)}else Lt=!1,Oe&&e.flags&1048576&&vx(e,Il,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;al(t,e),t=e.pendingProps;var s=Xs(e,Tt.current);Hs(e,n),s=Qh(null,e,r,t,s,n);var o=Gh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mt(r)?(o=!0,Sl(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zh(e),s.updater=mc,e.stateNode=s,s._reactInternals=e,Sd(e,r,t,n),e=Ad(null,e,r,!0,o,n)):(e.tag=0,Oe&&o&&Lh(e),Ct(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(al(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=a2(r),t=un(r,t),s){case 0:e=Id(null,e,r,t,n);break e;case 1:e=bp(null,e,r,t,n);break e;case 11:e=jp(null,e,r,t,n);break e;case 14:e=Ep(null,e,r,un(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),Id(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),bp(t,e,r,s,n);case 3:e:{if(Jx(e),t===null)throw Error($(387));r=e.pendingProps,o=e.memoizedState,s=o.element,Nx(t,e),Pl(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=ti(Error($(423)),e),e=Np(t,e,r,n,s);break e}else if(r!==s){s=ti(Error($(424)),e),e=Np(t,e,r,n,s);break e}else for(zt=hr(e.stateNode.containerInfo.firstChild),qt=e,Oe=!0,hn=null,n=Ex(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Js(),r===s){e=$n(t,e,n);break e}Ct(t,e,r,n)}e=e.child}return e;case 5:return Tx(e),t===null&&bd(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,a=s.children,vd(r,s)?a=null:o!==null&&vd(r,o)&&(e.flags|=32),Xx(t,e),Ct(t,e,a,n),e.child;case 6:return t===null&&bd(e),null;case 13:return Zx(t,e,n);case 4:return $h(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zs(e,null,r,n):Ct(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),jp(t,e,r,s,n);case 7:return Ct(t,e,e.pendingProps,n),e.child;case 8:return Ct(t,e,e.pendingProps.children,n),e.child;case 12:return Ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,Ae(Al,r._currentValue),r._currentValue=a,o!==null)if(pn(o.value,a)){if(o.children===s.children&&!Vt.current){e=$n(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){a=o.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Fn(-1,n&-n),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Nd(o.return,n,e),c.lanes|=n;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error($(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Nd(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ct(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Hs(e,n),s=on(s),r=r(s),e.flags|=1,Ct(t,e,r,n),e.child;case 14:return r=e.type,s=un(r,e.pendingProps),s=un(r.type,s),Ep(t,e,r,s,n);case 15:return Kx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),al(t,e),e.tag=1,Mt(r)?(t=!0,Sl(e)):t=!1,Hs(e,n),Wx(e,r,s),Sd(e,r,s,n),Ad(null,e,r,!0,t,n);case 19:return ey(t,e,n);case 22:return Yx(t,e,n)}throw Error($(156,e.tag))};function gy(t,e){return $0(t,e)}function o2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,e,n,r){return new o2(t,e,n,r)}function sf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function a2(t){if(typeof t=="function")return sf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Eh)return 11;if(t===bh)return 14}return 2}function gr(t,e){var n=t.alternate;return n===null?(n=tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ul(t,e,n,r,s,o){var a=2;if(r=t,typeof t=="function")sf(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case As:return rs(n.children,s,o,e);case jh:a=8,s|=8;break;case Xu:return t=tn(12,n,e,s|2),t.elementType=Xu,t.lanes=o,t;case Ju:return t=tn(13,n,e,s),t.elementType=Ju,t.lanes=o,t;case Zu:return t=tn(19,n,e,s),t.elementType=Zu,t.lanes=o,t;case T0:return xc(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case b0:a=10;break e;case N0:a=9;break e;case Eh:a=11;break e;case bh:a=14;break e;case tr:a=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=tn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function rs(t,e,n,r){return t=tn(7,t,r,e),t.lanes=n,t}function xc(t,e,n,r){return t=tn(22,t,r,e),t.elementType=T0,t.lanes=n,t.stateNode={isHidden:!1},t}function Ru(t,e,n){return t=tn(6,t,null,e),t.lanes=n,t}function Du(t,e,n){return e=tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function l2(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mu(0),this.expirationTimes=mu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function of(t,e,n,r,s,o,a,c,u){return t=new l2(t,e,n,c,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=tn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zh(o),t}function c2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Is,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xy(t){if(!t)return br;t=t._reactInternals;e:{if(fs(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Mt(n))return xx(t,n,e)}return e}function yy(t,e,n,r,s,o,a,c,u){return t=of(n,r,!0,t,s,o,a,c,u),t.context=xy(null),n=t.current,r=It(),s=pr(n),o=Fn(r,s),o.callback=e??null,fr(n,o,s),t.current.lanes=s,Ho(t,s,r),Ot(t,r),t}function yc(t,e,n,r){var s=e.current,o=It(),a=pr(s);return n=xy(n),e.context===null?e.context=n:e.pendingContext=n,e=Fn(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fr(s,e,a),t!==null&&(mn(t,s,a,o),sl(t,s,a)),a}function Ul(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function af(t,e){Lp(t,e),(t=t.alternate)&&Lp(t,e)}function u2(){return null}var vy=typeof reportError=="function"?reportError:function(t){console.error(t)};function lf(t){this._internalRoot=t}vc.prototype.render=lf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));yc(t,e,null,null)};vc.prototype.unmount=lf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cs(function(){yc(null,t,null,null)}),e[Bn]=null}};function vc(t){this._internalRoot=t}vc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Y0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rr.length&&e!==0&&e<rr[n].priority;n++);rr.splice(n,0,t),n===0&&J0(t)}};function cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vp(){}function d2(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=Ul(a);o.call(d)}}var a=yy(e,r,t,0,null,!1,!1,"",Vp);return t._reactRootContainer=a,t[Bn]=a.current,bo(t.nodeType===8?t.parentNode:t),cs(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Ul(u);c.call(d)}}var u=of(t,0,!1,null,null,!1,!1,"",Vp);return t._reactRootContainer=u,t[Bn]=u.current,bo(t.nodeType===8?t.parentNode:t),cs(function(){yc(e,u,n,r)}),u}function _c(t,e,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var c=s;s=function(){var u=Ul(a);c.call(u)}}yc(e,a,t,s)}else a=d2(n,e,t,s,r);return Ul(a)}G0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Gi(e.pendingLanes);n!==0&&(Sh(e,n|1),Ot(e,Ge()),!(_e&6)&&(ni=Ge()+500,Dr()))}break;case 13:cs(function(){var r=zn(t,1);if(r!==null){var s=It();mn(r,t,1,s)}}),af(t,1)}};Ch=function(t){if(t.tag===13){var e=zn(t,134217728);if(e!==null){var n=It();mn(e,t,134217728,n)}af(t,134217728)}};K0=function(t){if(t.tag===13){var e=pr(t),n=zn(t,e);if(n!==null){var r=It();mn(n,t,e,r)}af(t,e)}};Y0=function(){return Ne};X0=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};cd=function(t,e,n){switch(e){case"input":if(nd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=dc(r);if(!s)throw Error($(90));C0(r),nd(r,s)}}}break;case"textarea":A0(t,n);break;case"select":e=n.value,e!=null&&Bs(t,!!n.multiple,e,!1)}};M0=tf;O0=cs;var h2={usingClientEntryPoint:!1,Events:[Qo,Ds,dc,L0,V0,tf]},$i={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},f2={bundleType:$i.bundleType,version:$i.version,rendererPackageName:$i.rendererPackageName,rendererConfig:$i.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=B0(t),t===null?null:t.stateNode},findFiberByHostInstance:$i.findFiberByHostInstance||u2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qa.isDisabled&&qa.supportsFiber)try{ac=qa.inject(f2),Nn=qa}catch{}}Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h2;Gt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cf(e))throw Error($(200));return c2(t,e,null,n)};Gt.createRoot=function(t,e){if(!cf(t))throw Error($(299));var n=!1,r="",s=vy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=of(t,1,!1,null,null,n,!1,r,s),t[Bn]=e.current,bo(t.nodeType===8?t.parentNode:t),new lf(e)};Gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=B0(e),t=t===null?null:t.stateNode,t};Gt.flushSync=function(t){return cs(t)};Gt.hydrate=function(t,e,n){if(!wc(e))throw Error($(200));return _c(null,t,e,!0,n)};Gt.hydrateRoot=function(t,e,n){if(!cf(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=vy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=yy(e,null,t,1,n??null,s,!1,o,a),t[Bn]=e.current,bo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new vc(e)};Gt.render=function(t,e,n){if(!wc(e))throw Error($(200));return _c(null,t,e,!1,n)};Gt.unmountComponentAtNode=function(t){if(!wc(t))throw Error($(40));return t._reactRootContainer?(cs(function(){_c(null,null,t,!1,function(){t._reactRootContainer=null,t[Bn]=null})}),!0):!1};Gt.unstable_batchedUpdates=tf;Gt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wc(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return _c(t,e,n,!1,r)};Gt.version="18.3.1-next-f1338f8080-20240426";function wy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wy)}catch(t){console.error(t)}}wy(),w0.exports=Gt;var m2=w0.exports,Mp=m2;Ku.createRoot=Mp.createRoot,Ku.hydrateRoot=Mp.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ro(){return Ro=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ro.apply(this,arguments)}var ar;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ar||(ar={}));const Op="popstate";function p2(t){t===void 0&&(t={});function e(s,o){let{pathname:a="/",search:c="",hash:u=""}=ms(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),zd("",{pathname:a,search:c,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let a=s.document.querySelector("base"),c="";if(a&&a.getAttribute("href")){let u=s.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof o=="string"?o:Bl(o))}function r(s,o){jc(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return x2(e,n,r,t)}function Ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function g2(){return Math.random().toString(36).substr(2,8)}function Fp(t,e){return{usr:t.state,key:t.key,idx:e}}function zd(t,e,n,r){return n===void 0&&(n=null),Ro({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ms(e):e,{state:n,key:e&&e.key||r||g2()})}function Bl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ms(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function x2(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,c=ar.Pop,u=null,d=m();d==null&&(d=0,a.replaceState(Ro({},a.state,{idx:d}),""));function m(){return(a.state||{idx:null}).idx}function p(){c=ar.Pop;let C=m(),x=C==null?null:C-d;d=C,u&&u({action:c,location:I.location,delta:x})}function f(C,x){c=ar.Push;let _=zd(I.location,C,x);n&&n(_,C),d=m()+1;let E=Fp(_,d),k=I.createHref(_);try{a.pushState(E,"",k)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(k)}o&&u&&u({action:c,location:I.location,delta:1})}function v(C,x){c=ar.Replace;let _=zd(I.location,C,x);n&&n(_,C),d=m();let E=Fp(_,d),k=I.createHref(_);a.replaceState(E,"",k),o&&u&&u({action:c,location:I.location,delta:0})}function j(C){let x=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof C=="string"?C:Bl(C);return _=_.replace(/ $/,"%20"),Ye(x,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,x)}let I={get action(){return c},get location(){return t(s,a)},listen(C){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Op,p),u=C,()=>{s.removeEventListener(Op,p),u=null}},createHref(C){return e(s,C)},createURL:j,encodeLocation(C){let x=j(C);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:v,go(C){return a.go(C)}};return I}var Up;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Up||(Up={}));function y2(t,e,n){return n===void 0&&(n="/"),v2(t,e,n)}function v2(t,e,n,r){let s=typeof e=="string"?ms(e):e,o=uf(s.pathname||"/",n);if(o==null)return null;let a=_y(t);w2(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=P2(o);c=I2(a[u],d)}return c}function _y(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(Ye(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=xr([r,u.relativePath]),m=n.concat(u);o.children&&o.children.length>0&&(Ye(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),_y(o.children,e,m,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:S2(d,o.index),routesMeta:m})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,a);else for(let u of jy(o.path))s(o,a,u)}),e}function jy(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=jy(r.join("/")),c=[];return c.push(...a.map(u=>u===""?o:[o,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function w2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:C2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _2=/^:[\w-]+$/,j2=3,E2=2,b2=1,N2=10,T2=-2,Bp=t=>t==="*";function S2(t,e){let n=t.split("/"),r=n.length;return n.some(Bp)&&(r+=T2),e&&(r+=E2),n.filter(s=>!Bp(s)).reduce((s,o)=>s+(_2.test(o)?j2:o===""?b2:N2),r)}function C2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function I2(t,e,n){let{routesMeta:r}=t,s={},o="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",p=A2({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},m),f=u.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:xr([o,p.pathname]),pathnameBase:M2(xr([o,p.pathnameBase])),route:f}),p.pathnameBase!=="/"&&(o=xr([o,p.pathnameBase]))}return a}function A2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=k2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,m,p)=>{let{paramName:f,isOptional:v}=m;if(f==="*"){let I=c[p]||"";a=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const j=c[p];return v&&!j?d[f]=void 0:d[f]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:t}}function k2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),jc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function P2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function uf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const R2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,D2=t=>R2.test(t);function L2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ms(t):t,o;if(n)if(D2(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),jc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=zp(n.substring(1),"/"):o=zp(n,e)}else o=e;return{pathname:o,search:O2(r),hash:F2(s)}}function zp(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Lu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function V2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function df(t,e){let n=V2(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function hf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ms(t):(s=Ro({},t),Ye(!s.pathname||!s.pathname.includes("?"),Lu("?","pathname","search",s)),Ye(!s.pathname||!s.pathname.includes("#"),Lu("#","pathname","hash",s)),Ye(!s.search||!s.search.includes("#"),Lu("#","search","hash",s)));let o=t===""||s.pathname==="",a=o?"/":s.pathname,c;if(a==null)c=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),p-=1;s.pathname=f.join("/")}c=p>=0?e[p]:"/"}let u=L2(s,c),d=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||m)&&(u.pathname+="/"),u}const xr=t=>t.join("/").replace(/\/\/+/g,"/"),M2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),O2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,F2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function U2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ey=["post","put","patch","delete"];new Set(Ey);const B2=["get",...Ey];new Set(B2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Do(){return Do=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Do.apply(this,arguments)}const ff=R.createContext(null),z2=R.createContext(null),Lr=R.createContext(null),Ec=R.createContext(null),Gn=R.createContext({outlet:null,matches:[],isDataRoute:!1}),by=R.createContext(null);function $2(t,e){let{relative:n}=e===void 0?{}:e;fi()||Ye(!1);let{basename:r,navigator:s}=R.useContext(Lr),{hash:o,pathname:a,search:c}=Ty(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:xr([r,a])),s.createHref({pathname:u,search:c,hash:o})}function fi(){return R.useContext(Ec)!=null}function ps(){return fi()||Ye(!1),R.useContext(Ec).location}function Ny(t){R.useContext(Lr).static||R.useLayoutEffect(t)}function St(){let{isDataRoute:t}=R.useContext(Gn);return t?nj():q2()}function q2(){fi()||Ye(!1);let t=R.useContext(ff),{basename:e,future:n,navigator:r}=R.useContext(Lr),{matches:s}=R.useContext(Gn),{pathname:o}=ps(),a=JSON.stringify(df(s,n.v7_relativeSplatPath)),c=R.useRef(!1);return Ny(()=>{c.current=!0}),R.useCallback(function(d,m){if(m===void 0&&(m={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let p=hf(d,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:xr([e,p.pathname])),(m.replace?r.replace:r.push)(p,m.state,m)},[e,r,a,o,t])}function gs(){let{matches:t}=R.useContext(Gn),e=t[t.length-1];return e?e.params:{}}function Ty(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(Lr),{matches:s}=R.useContext(Gn),{pathname:o}=ps(),a=JSON.stringify(df(s,r.v7_relativeSplatPath));return R.useMemo(()=>hf(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function H2(t,e){return W2(t,e)}function W2(t,e,n,r){fi()||Ye(!1);let{navigator:s}=R.useContext(Lr),{matches:o}=R.useContext(Gn),a=o[o.length-1],c=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=ps(),m;if(e){var p;let C=typeof e=="string"?ms(e):e;u==="/"||(p=C.pathname)!=null&&p.startsWith(u)||Ye(!1),m=C}else m=d;let f=m.pathname||"/",v=f;if(u!=="/"){let C=u.replace(/^\//,"").split("/");v="/"+f.replace(/^\//,"").split("/").slice(C.length).join("/")}let j=y2(t,{pathname:v}),I=X2(j&&j.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:xr([u,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:xr([u,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,r);return e&&I?R.createElement(Ec.Provider,{value:{location:Do({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:ar.Pop}},I):I}function Q2(){let t=tj(),e=U2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:s},n):null,null)}const G2=R.createElement(Q2,null);class K2 extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(Gn.Provider,{value:this.props.routeContext},R.createElement(by.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Y2(t){let{routeContext:e,match:n,children:r}=t,s=R.useContext(ff);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Gn.Provider,{value:e},r)}function X2(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let m=a.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);m>=0||Ye(!1),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:f,errors:v}=n,j=p.route.loader&&f[p.route.id]===void 0&&(!v||v[p.route.id]===void 0);if(p.route.lazy||j){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,p,f)=>{let v,j=!1,I=null,C=null;n&&(v=c&&p.route.id?c[p.route.id]:void 0,I=p.route.errorElement||G2,u&&(d<0&&f===0?(rj("route-fallback"),j=!0,C=null):d===f&&(j=!0,C=p.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,f+1)),_=()=>{let E;return v?E=I:j?E=C:p.route.Component?E=R.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=m,R.createElement(Y2,{match:p,routeContext:{outlet:m,matches:x,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||f===0)?R.createElement(K2,{location:n.location,revalidation:n.revalidation,component:I,error:v,children:_(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):_()},null)}var Sy=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Sy||{}),Cy=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Cy||{});function J2(t){let e=R.useContext(ff);return e||Ye(!1),e}function Z2(t){let e=R.useContext(z2);return e||Ye(!1),e}function ej(t){let e=R.useContext(Gn);return e||Ye(!1),e}function Iy(t){let e=ej(),n=e.matches[e.matches.length-1];return n.route.id||Ye(!1),n.route.id}function tj(){var t;let e=R.useContext(by),n=Z2(),r=Iy();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function nj(){let{router:t}=J2(Sy.UseNavigateStable),e=Iy(Cy.UseNavigateStable),n=R.useRef(!1);return Ny(()=>{n.current=!0}),R.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Do({fromRouteId:e},o)))},[t,e])}const $p={};function rj(t,e,n){$p[t]||($p[t]=!0)}function sj(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Lo(t){let{to:e,replace:n,state:r,relative:s}=t;fi()||Ye(!1);let{future:o,static:a}=R.useContext(Lr),{matches:c}=R.useContext(Gn),{pathname:u}=ps(),d=St(),m=hf(e,df(c,o.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(m);return R.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function we(t){Ye(!1)}function ij(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ar.Pop,navigator:o,static:a=!1,future:c}=t;fi()&&Ye(!1);let u=e.replace(/^\/*/,"/"),d=R.useMemo(()=>({basename:u,navigator:o,static:a,future:Do({v7_relativeSplatPath:!1},c)}),[u,c,o,a]);typeof r=="string"&&(r=ms(r));let{pathname:m="/",search:p="",hash:f="",state:v=null,key:j="default"}=r,I=R.useMemo(()=>{let C=uf(m,u);return C==null?null:{location:{pathname:C,search:p,hash:f,state:v,key:j},navigationType:s}},[u,m,p,f,v,j,s]);return I==null?null:R.createElement(Lr.Provider,{value:d},R.createElement(Ec.Provider,{children:n,value:I}))}function oj(t){let{children:e,location:n}=t;return H2($d(e),n)}new Promise(()=>{});function $d(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,s)=>{if(!R.isValidElement(r))return;let o=[...e,s];if(r.type===R.Fragment){n.push.apply(n,$d(r.props.children,o));return}r.type!==we&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=$d(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qd(){return qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qd.apply(this,arguments)}function aj(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function lj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function cj(t,e){return t.button===0&&(!e||e==="_self")&&!lj(t)}const uj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dj="6";try{window.__reactRouterVersion=dj}catch{}const hj="startTransition",qp=rw[hj];function fj(t){let{basename:e,children:n,future:r,window:s}=t,o=R.useRef();o.current==null&&(o.current=p2({window:s,v5Compat:!0}));let a=o.current,[c,u]=R.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},m=R.useCallback(p=>{d&&qp?qp(()=>u(p)):u(p)},[u,d]);return R.useLayoutEffect(()=>a.listen(m),[a,m]),R.useEffect(()=>sj(r),[r]),R.createElement(ij,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}const mj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rn=R.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:o,replace:a,state:c,target:u,to:d,preventScrollReset:m,viewTransition:p}=e,f=aj(e,uj),{basename:v}=R.useContext(Lr),j,I=!1;if(typeof d=="string"&&pj.test(d)&&(j=d,mj))try{let E=new URL(window.location.href),k=d.startsWith("//")?new URL(E.protocol+d):new URL(d),L=uf(k.pathname,v);k.origin===E.origin&&L!=null?d=L+k.search+k.hash:I=!0}catch{}let C=$2(d,{relative:s}),x=gj(d,{replace:a,state:c,target:u,preventScrollReset:m,relative:s,viewTransition:p});function _(E){r&&r(E),E.defaultPrevented||x(E)}return R.createElement("a",qd({},f,{href:j||C,onClick:I||o?r:_,ref:n,target:u}))});var Hp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Hp||(Hp={}));var Wp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Wp||(Wp={}));function gj(t,e){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:c}=e===void 0?{}:e,u=St(),d=ps(),m=Ty(t,{relative:a});return R.useCallback(p=>{if(cj(p,n)){p.preventDefault();let f=r!==void 0?r:Bl(d)===Bl(m);u(t,{replace:f,state:s,preventScrollReset:o,relative:a,viewTransition:c})}},[d,u,m,r,s,n,t,o,a,c])}var ut=(t=>(t.Training="Training",t.ReadyForInterview="Ready for Interview",t.Placed="Placed",t.Discontinued="Discontinued",t))(ut||{}),Ie=(t=>(t.Bank="Bank",t.Cash="Cash",t.Debtor="Debtor",t.Creditor="Creditor",t.Expense="Expense",t.Salary="Salary",t.Income="Income",t.Equity="Equity",t))(Ie||{}),be=(t=>(t.Income="Income",t.Expense="Expense",t.Transfer="Transfer",t.Refund="Refund",t))(be||{});const ue=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(t),Qt=()=>Math.random().toString(36).substr(2,9),xj=(t,e)=>{const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)},zl=(t,e)=>{if(t.length===0)return;const n=Object.keys(t[0]).join(","),r=t.map(u=>Object.values(u).map(d=>`"${d}"`).join(",")).join(`
`),s=`${n}
${r}`,o=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(o),c=document.createElement("a");c.href=a,c.download=e,document.body.appendChild(c),c.click(),document.body.removeChild(c)},Yi=(t,e,n,r=0)=>{let s=0;return e==="Account"&&(s+=r),n.forEach(o=>{o.toEntityId===t&&o.toEntityType===e&&(s+=o.amount),o.fromEntityId===t&&o.fromEntityType===e&&(s-=o.amount)}),s},yj=()=>{};var Qp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vj=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},ky={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=o>>2,p=(o&3)<<4|c>>4;let f=(c&15)<<2|d>>6,v=d&63;u||(v=64,a||(f=64)),r.push(n[m],n[p],n[f],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ay(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||c==null||d==null||p==null)throw new wj;const f=o<<2|c>>4;if(r.push(f),d!==64){const v=c<<4&240|d>>2;if(r.push(v),p!==64){const j=d<<6&192|p;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _j=function(t){const e=Ay(t);return ky.encodeByteArray(e,!0)},$l=function(t){return _j(t).replace(/\./g,"")},jj=function(t){try{return ky.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=()=>Ej().__FIREBASE_DEFAULTS__,Nj=()=>{if(typeof process>"u"||typeof Qp>"u")return;const t=Qp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Tj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jj(t[1]);return e&&JSON.parse(e)},mf=()=>{try{return yj()||bj()||Nj()||Tj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Sj=t=>{var e,n;return(n=(e=mf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Cj=t=>{const e=Sj(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Py=()=>{var t;return(t=mf())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Aj(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[$l(JSON.stringify(n)),$l(JSON.stringify(a)),""].join(".")}const uo={};function Pj(){const t={prod:[],emulator:[]};for(const e of Object.keys(uo))uo[e]?t.emulator.push(e):t.prod.push(e);return t}function Rj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Gp=!1;function Dj(t,e){if(typeof window>"u"||typeof document>"u"||!pf(window.location.host)||uo[t]===e||uo[t]||Gp)return;uo[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",o=Pj().prod.length>0;function a(){const f=document.getElementById(r);f&&f.remove()}function c(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function u(f,v){f.setAttribute("width","24"),f.setAttribute("id",v),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function d(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Gp=!0,a()},f}function m(f,v){f.setAttribute("id",v),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function p(){const f=Rj(r),v=n("text"),j=document.getElementById(v)||document.createElement("span"),I=n("learnmore"),C=document.getElementById(I)||document.createElement("a"),x=n("preprendIcon"),_=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const E=f.element;c(E),m(C,I);const k=d();u(_,x),E.append(_,j,C,k),document.body.appendChild(E)}o?(j.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vj(){var e;const t=(e=mf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mj(){return!Vj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oj(){try{return typeof indexedDB=="object"}catch{return!1}}function Fj(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj="FirebaseError";class mi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Uj,Object.setPrototypeOf(this,mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ry.prototype.create)}}class Ry{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?Bj(o,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new mi(s,c,r)}}function Bj(t,e){return t.replace(zj,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const zj=/\{\$([^}]+)}/g;function ql(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],a=e[s];if(Kp(o)&&Kp(a)){if(!ql(o,a))return!1}else if(o!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Kp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(t){return t&&t._delegate?t._delegate:t}class Vo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ij;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hj(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qj(t){return t===Xr?void 0:t}function Hj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $j(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const Qj={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},Gj=ye.INFO,Kj={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},Yj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Kj[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dy{constructor(e){this.name=e,this._logLevel=Gj,this._logHandler=Yj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Qj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const Xj=(t,e)=>e.some(n=>t instanceof n);let Yp,Xp;function Jj(){return Yp||(Yp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zj(){return Xp||(Xp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ly=new WeakMap,Hd=new WeakMap,Vy=new WeakMap,Vu=new WeakMap,gf=new WeakMap;function eE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(yr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Ly.set(n,t)}).catch(()=>{}),gf.set(e,t),e}function tE(t){if(Hd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Hd.set(t,e)}let Wd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Vy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nE(t){Wd=t(Wd)}function rE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mu(this),e,...n);return Vy.set(r,e.sort?e.sort():[e]),yr(r)}:Zj().includes(t)?function(...e){return t.apply(Mu(this),e),yr(Ly.get(this))}:function(...e){return yr(t.apply(Mu(this),e))}}function sE(t){return typeof t=="function"?rE(t):(t instanceof IDBTransaction&&tE(t),Xj(t,Jj())?new Proxy(t,Wd):t)}function yr(t){if(t instanceof IDBRequest)return eE(t);if(Vu.has(t))return Vu.get(t);const e=sE(t);return e!==t&&(Vu.set(t,e),gf.set(e,t)),e}const Mu=t=>gf.get(t);function iE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const a=indexedDB.open(t,e),c=yr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(yr(a.result),u.oldVersion,u.newVersion,yr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const oE=["get","getKey","getAll","getAllKeys","count"],aE=["put","add","delete","clear"],Ou=new Map;function Jp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ou.get(e))return Ou.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=aE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||oE.includes(n)))return;const o=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Ou.set(e,o),o}nE(t=>({...t,get:(e,n,r)=>Jp(e,n)||t.get(e,n,r),has:(e,n)=>!!Jp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qd="@firebase/app",Zp="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn=new Dy("@firebase/app"),uE="@firebase/app-compat",dE="@firebase/analytics-compat",hE="@firebase/analytics",fE="@firebase/app-check-compat",mE="@firebase/app-check",pE="@firebase/auth",gE="@firebase/auth-compat",xE="@firebase/database",yE="@firebase/data-connect",vE="@firebase/database-compat",wE="@firebase/functions",_E="@firebase/functions-compat",jE="@firebase/installations",EE="@firebase/installations-compat",bE="@firebase/messaging",NE="@firebase/messaging-compat",TE="@firebase/performance",SE="@firebase/performance-compat",CE="@firebase/remote-config",IE="@firebase/remote-config-compat",AE="@firebase/storage",kE="@firebase/storage-compat",PE="@firebase/firestore",RE="@firebase/ai",DE="@firebase/firestore-compat",LE="firebase",VE="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="[DEFAULT]",ME={[Qd]:"fire-core",[uE]:"fire-core-compat",[hE]:"fire-analytics",[dE]:"fire-analytics-compat",[mE]:"fire-app-check",[fE]:"fire-app-check-compat",[pE]:"fire-auth",[gE]:"fire-auth-compat",[xE]:"fire-rtdb",[yE]:"fire-data-connect",[vE]:"fire-rtdb-compat",[wE]:"fire-fn",[_E]:"fire-fn-compat",[jE]:"fire-iid",[EE]:"fire-iid-compat",[bE]:"fire-fcm",[NE]:"fire-fcm-compat",[TE]:"fire-perf",[SE]:"fire-perf-compat",[CE]:"fire-rc",[IE]:"fire-rc-compat",[AE]:"fire-gcs",[kE]:"fire-gcs-compat",[PE]:"fire-fst",[DE]:"fire-fst-compat",[RE]:"fire-vertex","fire-js":"fire-js",[LE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=new Map,OE=new Map,Kd=new Map;function eg(t,e){try{t.container.addComponent(e)}catch(n){qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Wl(t){const e=t.name;if(Kd.has(e))return qn.debug(`There were multiple attempts to register component ${e}.`),!1;Kd.set(e,t);for(const n of Hl.values())eg(n,t);for(const n of OE.values())eg(n,t);return!0}function FE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function UE(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new Ry("app","Firebase",BE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=VE;function Yd(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Gd,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw vr.create("bad-app-name",{appName:String(s)});if(n||(n=Py()),!n)throw vr.create("no-options");const o=Hl.get(s);if(o){if(ql(n,o.options)&&ql(r,o.config))return o;throw vr.create("duplicate-app",{appName:s})}const a=new Wj(s);for(const u of Kd.values())a.addComponent(u);const c=new zE(n,r,a);return Hl.set(s,c),c}function qE(t=Gd){const e=Hl.get(t);if(!e&&t===Gd&&Py())return Yd();if(!e)throw vr.create("no-app",{appName:t});return e}function Qs(t,e,n){let r=ME[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qn.warn(a.join(" "));return}Wl(new Vo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="firebase-heartbeat-database",WE=1,Mo="firebase-heartbeat-store";let Fu=null;function My(){return Fu||(Fu=iE(HE,WE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mo)}catch(n){console.warn(n)}}}}).catch(t=>{throw vr.create("idb-open",{originalErrorMessage:t.message})})),Fu}async function QE(t){try{const n=(await My()).transaction(Mo),r=await n.objectStore(Mo).get(Oy(t));return await n.done,r}catch(e){if(e instanceof mi)qn.warn(e.message);else{const n=vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qn.warn(n.message)}}}async function tg(t,e){try{const r=(await My()).transaction(Mo,"readwrite");await r.objectStore(Mo).put(e,Oy(t)),await r.done}catch(n){if(n instanceof mi)qn.warn(n.message);else{const r=vr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qn.warn(r.message)}}}function Oy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=1024,KE=30;class YE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ng();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>KE){const a=ZE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){qn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ng(),{heartbeatsToSend:r,unsentEntries:s}=XE(this._heartbeatsCache.heartbeats),o=$l(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return qn.warn(n),""}}}function ng(){return new Date().toISOString().substring(0,10)}function XE(t,e=GE){const n=[];let r=t.slice();for(const s of t){const o=n.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),rg(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),rg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Oj()?Fj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function rg(t){return $l(JSON.stringify({version:2,heartbeats:t})).length}function ZE(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t){Wl(new Vo("platform-logger",e=>new lE(e),"PRIVATE")),Wl(new Vo("heartbeat",e=>new YE(e),"PRIVATE")),Qs(Qd,Zp,t),Qs(Qd,Zp,"esm2020"),Qs("fire-js","")}eb("");var tb="firebase",nb="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qs(tb,nb,"app");var sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wr,Fy;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,w){function T(){}T.prototype=w.prototype,y.F=w.prototype,y.prototype=new T,y.prototype.constructor=y,y.D=function(A,S,D){for(var N=Array(arguments.length-2),le=2;le<arguments.length;le++)N[le-2]=arguments[le];return w.prototype[S].apply(A,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(y,w,T){T||(T=0);const A=Array(16);if(typeof w=="string")for(var S=0;S<16;++S)A[S]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(S=0;S<16;++S)A[S]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;w=y.g[0],T=y.g[1],S=y.g[2];let D=y.g[3],N;N=w+(D^T&(S^D))+A[0]+3614090360&4294967295,w=T+(N<<7&4294967295|N>>>25),N=D+(S^w&(T^S))+A[1]+3905402710&4294967295,D=w+(N<<12&4294967295|N>>>20),N=S+(T^D&(w^T))+A[2]+606105819&4294967295,S=D+(N<<17&4294967295|N>>>15),N=T+(w^S&(D^w))+A[3]+3250441966&4294967295,T=S+(N<<22&4294967295|N>>>10),N=w+(D^T&(S^D))+A[4]+4118548399&4294967295,w=T+(N<<7&4294967295|N>>>25),N=D+(S^w&(T^S))+A[5]+1200080426&4294967295,D=w+(N<<12&4294967295|N>>>20),N=S+(T^D&(w^T))+A[6]+2821735955&4294967295,S=D+(N<<17&4294967295|N>>>15),N=T+(w^S&(D^w))+A[7]+4249261313&4294967295,T=S+(N<<22&4294967295|N>>>10),N=w+(D^T&(S^D))+A[8]+1770035416&4294967295,w=T+(N<<7&4294967295|N>>>25),N=D+(S^w&(T^S))+A[9]+2336552879&4294967295,D=w+(N<<12&4294967295|N>>>20),N=S+(T^D&(w^T))+A[10]+4294925233&4294967295,S=D+(N<<17&4294967295|N>>>15),N=T+(w^S&(D^w))+A[11]+2304563134&4294967295,T=S+(N<<22&4294967295|N>>>10),N=w+(D^T&(S^D))+A[12]+1804603682&4294967295,w=T+(N<<7&4294967295|N>>>25),N=D+(S^w&(T^S))+A[13]+4254626195&4294967295,D=w+(N<<12&4294967295|N>>>20),N=S+(T^D&(w^T))+A[14]+2792965006&4294967295,S=D+(N<<17&4294967295|N>>>15),N=T+(w^S&(D^w))+A[15]+1236535329&4294967295,T=S+(N<<22&4294967295|N>>>10),N=w+(S^D&(T^S))+A[1]+4129170786&4294967295,w=T+(N<<5&4294967295|N>>>27),N=D+(T^S&(w^T))+A[6]+3225465664&4294967295,D=w+(N<<9&4294967295|N>>>23),N=S+(w^T&(D^w))+A[11]+643717713&4294967295,S=D+(N<<14&4294967295|N>>>18),N=T+(D^w&(S^D))+A[0]+3921069994&4294967295,T=S+(N<<20&4294967295|N>>>12),N=w+(S^D&(T^S))+A[5]+3593408605&4294967295,w=T+(N<<5&4294967295|N>>>27),N=D+(T^S&(w^T))+A[10]+38016083&4294967295,D=w+(N<<9&4294967295|N>>>23),N=S+(w^T&(D^w))+A[15]+3634488961&4294967295,S=D+(N<<14&4294967295|N>>>18),N=T+(D^w&(S^D))+A[4]+3889429448&4294967295,T=S+(N<<20&4294967295|N>>>12),N=w+(S^D&(T^S))+A[9]+568446438&4294967295,w=T+(N<<5&4294967295|N>>>27),N=D+(T^S&(w^T))+A[14]+3275163606&4294967295,D=w+(N<<9&4294967295|N>>>23),N=S+(w^T&(D^w))+A[3]+4107603335&4294967295,S=D+(N<<14&4294967295|N>>>18),N=T+(D^w&(S^D))+A[8]+1163531501&4294967295,T=S+(N<<20&4294967295|N>>>12),N=w+(S^D&(T^S))+A[13]+2850285829&4294967295,w=T+(N<<5&4294967295|N>>>27),N=D+(T^S&(w^T))+A[2]+4243563512&4294967295,D=w+(N<<9&4294967295|N>>>23),N=S+(w^T&(D^w))+A[7]+1735328473&4294967295,S=D+(N<<14&4294967295|N>>>18),N=T+(D^w&(S^D))+A[12]+2368359562&4294967295,T=S+(N<<20&4294967295|N>>>12),N=w+(T^S^D)+A[5]+4294588738&4294967295,w=T+(N<<4&4294967295|N>>>28),N=D+(w^T^S)+A[8]+2272392833&4294967295,D=w+(N<<11&4294967295|N>>>21),N=S+(D^w^T)+A[11]+1839030562&4294967295,S=D+(N<<16&4294967295|N>>>16),N=T+(S^D^w)+A[14]+4259657740&4294967295,T=S+(N<<23&4294967295|N>>>9),N=w+(T^S^D)+A[1]+2763975236&4294967295,w=T+(N<<4&4294967295|N>>>28),N=D+(w^T^S)+A[4]+1272893353&4294967295,D=w+(N<<11&4294967295|N>>>21),N=S+(D^w^T)+A[7]+4139469664&4294967295,S=D+(N<<16&4294967295|N>>>16),N=T+(S^D^w)+A[10]+3200236656&4294967295,T=S+(N<<23&4294967295|N>>>9),N=w+(T^S^D)+A[13]+681279174&4294967295,w=T+(N<<4&4294967295|N>>>28),N=D+(w^T^S)+A[0]+3936430074&4294967295,D=w+(N<<11&4294967295|N>>>21),N=S+(D^w^T)+A[3]+3572445317&4294967295,S=D+(N<<16&4294967295|N>>>16),N=T+(S^D^w)+A[6]+76029189&4294967295,T=S+(N<<23&4294967295|N>>>9),N=w+(T^S^D)+A[9]+3654602809&4294967295,w=T+(N<<4&4294967295|N>>>28),N=D+(w^T^S)+A[12]+3873151461&4294967295,D=w+(N<<11&4294967295|N>>>21),N=S+(D^w^T)+A[15]+530742520&4294967295,S=D+(N<<16&4294967295|N>>>16),N=T+(S^D^w)+A[2]+3299628645&4294967295,T=S+(N<<23&4294967295|N>>>9),N=w+(S^(T|~D))+A[0]+4096336452&4294967295,w=T+(N<<6&4294967295|N>>>26),N=D+(T^(w|~S))+A[7]+1126891415&4294967295,D=w+(N<<10&4294967295|N>>>22),N=S+(w^(D|~T))+A[14]+2878612391&4294967295,S=D+(N<<15&4294967295|N>>>17),N=T+(D^(S|~w))+A[5]+4237533241&4294967295,T=S+(N<<21&4294967295|N>>>11),N=w+(S^(T|~D))+A[12]+1700485571&4294967295,w=T+(N<<6&4294967295|N>>>26),N=D+(T^(w|~S))+A[3]+2399980690&4294967295,D=w+(N<<10&4294967295|N>>>22),N=S+(w^(D|~T))+A[10]+4293915773&4294967295,S=D+(N<<15&4294967295|N>>>17),N=T+(D^(S|~w))+A[1]+2240044497&4294967295,T=S+(N<<21&4294967295|N>>>11),N=w+(S^(T|~D))+A[8]+1873313359&4294967295,w=T+(N<<6&4294967295|N>>>26),N=D+(T^(w|~S))+A[15]+4264355552&4294967295,D=w+(N<<10&4294967295|N>>>22),N=S+(w^(D|~T))+A[6]+2734768916&4294967295,S=D+(N<<15&4294967295|N>>>17),N=T+(D^(S|~w))+A[13]+1309151649&4294967295,T=S+(N<<21&4294967295|N>>>11),N=w+(S^(T|~D))+A[4]+4149444226&4294967295,w=T+(N<<6&4294967295|N>>>26),N=D+(T^(w|~S))+A[11]+3174756917&4294967295,D=w+(N<<10&4294967295|N>>>22),N=S+(w^(D|~T))+A[2]+718787259&4294967295,S=D+(N<<15&4294967295|N>>>17),N=T+(D^(S|~w))+A[9]+3951481745&4294967295,y.g[0]=y.g[0]+w&4294967295,y.g[1]=y.g[1]+(S+(N<<21&4294967295|N>>>11))&4294967295,y.g[2]=y.g[2]+S&4294967295,y.g[3]=y.g[3]+D&4294967295}r.prototype.v=function(y,w){w===void 0&&(w=y.length);const T=w-this.blockSize,A=this.C;let S=this.h,D=0;for(;D<w;){if(S==0)for(;D<=T;)s(this,y,D),D+=this.blockSize;if(typeof y=="string"){for(;D<w;)if(A[S++]=y.charCodeAt(D++),S==this.blockSize){s(this,A),S=0;break}}else for(;D<w;)if(A[S++]=y[D++],S==this.blockSize){s(this,A),S=0;break}}this.h=S,this.o+=w},r.prototype.A=function(){var y=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);y[0]=128;for(var w=1;w<y.length-8;++w)y[w]=0;w=this.o*8;for(var T=y.length-8;T<y.length;++T)y[T]=w&255,w/=256;for(this.v(y),y=Array(16),w=0,T=0;T<4;++T)for(let A=0;A<32;A+=8)y[w++]=this.g[T]>>>A&255;return y};function o(y,w){var T=c;return Object.prototype.hasOwnProperty.call(T,y)?T[y]:T[y]=w(y)}function a(y,w){this.h=w;const T=[];let A=!0;for(let S=y.length-1;S>=0;S--){const D=y[S]|0;A&&D==w||(T[S]=D,A=!1)}this.g=T}var c={};function u(y){return-128<=y&&y<128?o(y,function(w){return new a([w|0],w<0?-1:0)}):new a([y|0],y<0?-1:0)}function d(y){if(isNaN(y)||!isFinite(y))return p;if(y<0)return C(d(-y));const w=[];let T=1;for(let A=0;y>=T;A++)w[A]=y/T|0,T*=4294967296;return new a(w,0)}function m(y,w){if(y.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(y.charAt(0)=="-")return C(m(y.substring(1),w));if(y.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(w,8));let A=p;for(let D=0;D<y.length;D+=8){var S=Math.min(8,y.length-D);const N=parseInt(y.substring(D,D+S),w);S<8?(S=d(Math.pow(w,S)),A=A.j(S).add(d(N))):(A=A.j(T),A=A.add(d(N)))}return A}var p=u(0),f=u(1),v=u(16777216);t=a.prototype,t.m=function(){if(I(this))return-C(this).m();let y=0,w=1;for(let T=0;T<this.g.length;T++){const A=this.i(T);y+=(A>=0?A:4294967296+A)*w,w*=4294967296}return y},t.toString=function(y){if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(j(this))return"0";if(I(this))return"-"+C(this).toString(y);const w=d(Math.pow(y,6));var T=this;let A="";for(;;){const S=k(T,w).g;T=x(T,S.j(w));let D=((T.g.length>0?T.g[0]:T.h)>>>0).toString(y);if(T=S,j(T))return D+A;for(;D.length<6;)D="0"+D;A=D+A}},t.i=function(y){return y<0?0:y<this.g.length?this.g[y]:this.h};function j(y){if(y.h!=0)return!1;for(let w=0;w<y.g.length;w++)if(y.g[w]!=0)return!1;return!0}function I(y){return y.h==-1}t.l=function(y){return y=x(this,y),I(y)?-1:j(y)?0:1};function C(y){const w=y.g.length,T=[];for(let A=0;A<w;A++)T[A]=~y.g[A];return new a(T,~y.h).add(f)}t.abs=function(){return I(this)?C(this):this},t.add=function(y){const w=Math.max(this.g.length,y.g.length),T=[];let A=0;for(let S=0;S<=w;S++){let D=A+(this.i(S)&65535)+(y.i(S)&65535),N=(D>>>16)+(this.i(S)>>>16)+(y.i(S)>>>16);A=N>>>16,D&=65535,N&=65535,T[S]=N<<16|D}return new a(T,T[T.length-1]&-2147483648?-1:0)};function x(y,w){return y.add(C(w))}t.j=function(y){if(j(this)||j(y))return p;if(I(this))return I(y)?C(this).j(C(y)):C(C(this).j(y));if(I(y))return C(this.j(C(y)));if(this.l(v)<0&&y.l(v)<0)return d(this.m()*y.m());const w=this.g.length+y.g.length,T=[];for(var A=0;A<2*w;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(let S=0;S<y.g.length;S++){const D=this.i(A)>>>16,N=this.i(A)&65535,le=y.i(S)>>>16,ie=y.i(S)&65535;T[2*A+2*S]+=N*ie,_(T,2*A+2*S),T[2*A+2*S+1]+=D*ie,_(T,2*A+2*S+1),T[2*A+2*S+1]+=N*le,_(T,2*A+2*S+1),T[2*A+2*S+2]+=D*le,_(T,2*A+2*S+2)}for(y=0;y<w;y++)T[y]=T[2*y+1]<<16|T[2*y];for(y=w;y<2*w;y++)T[y]=0;return new a(T,0)};function _(y,w){for(;(y[w]&65535)!=y[w];)y[w+1]+=y[w]>>>16,y[w]&=65535,w++}function E(y,w){this.g=y,this.h=w}function k(y,w){if(j(w))throw Error("division by zero");if(j(y))return new E(p,p);if(I(y))return w=k(C(y),w),new E(C(w.g),C(w.h));if(I(w))return w=k(y,C(w)),new E(C(w.g),w.h);if(y.g.length>30){if(I(y)||I(w))throw Error("slowDivide_ only works with positive integers.");for(var T=f,A=w;A.l(y)<=0;)T=L(T),A=L(A);var S=P(T,1),D=P(A,1);for(A=P(A,2),T=P(T,2);!j(A);){var N=D.add(A);N.l(y)<=0&&(S=S.add(T),D=N),A=P(A,1),T=P(T,1)}return w=x(y,S.j(w)),new E(S,w)}for(S=p;y.l(w)>=0;){for(T=Math.max(1,Math.floor(y.m()/w.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),D=d(T),N=D.j(w);I(N)||N.l(y)>0;)T-=A,D=d(T),N=D.j(w);j(D)&&(D=f),S=S.add(D),y=x(y,N)}return new E(S,y)}t.B=function(y){return k(this,y).h},t.and=function(y){const w=Math.max(this.g.length,y.g.length),T=[];for(let A=0;A<w;A++)T[A]=this.i(A)&y.i(A);return new a(T,this.h&y.h)},t.or=function(y){const w=Math.max(this.g.length,y.g.length),T=[];for(let A=0;A<w;A++)T[A]=this.i(A)|y.i(A);return new a(T,this.h|y.h)},t.xor=function(y){const w=Math.max(this.g.length,y.g.length),T=[];for(let A=0;A<w;A++)T[A]=this.i(A)^y.i(A);return new a(T,this.h^y.h)};function L(y){const w=y.g.length+1,T=[];for(let A=0;A<w;A++)T[A]=y.i(A)<<1|y.i(A-1)>>>31;return new a(T,y.h)}function P(y,w){const T=w>>5;w%=32;const A=y.g.length-T,S=[];for(let D=0;D<A;D++)S[D]=w>0?y.i(D+T)>>>w|y.i(D+T+1)<<32-w:y.i(D+T);return new a(S,y.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Fy=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=m,wr=a}).apply(typeof sg<"u"?sg:typeof self<"u"?self:typeof window<"u"?window:{});var Ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Uy,Xi,By,dl,Xd,zy,$y,qy;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ha=="object"&&Ha];for(var h=0;h<l.length;++h){var g=l[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var g=r;l=l.split(".");for(var b=0;b<l.length-1;b++){var V=l[b];if(!(V in g))break e;g=g[V]}l=l[l.length-1],b=g[l],h=h(b),h!=b&&h!=null&&e(g,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var g=[],b;for(b in h)Object.prototype.hasOwnProperty.call(h,b)&&g.push([b,h[b]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,g){return l.call.apply(l.bind,arguments)}function d(l,h,g){return d=u,d.apply(null,arguments)}function m(l,h){var g=Array.prototype.slice.call(arguments,1);return function(){var b=g.slice();return b.push.apply(b,arguments),l.apply(this,b)}}function p(l,h){function g(){}g.prototype=h.prototype,l.Z=h.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(b,V,M){for(var H=Array(arguments.length-2),de=2;de<arguments.length;de++)H[de-2]=arguments[de];return h.prototype[V].apply(b,H)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function v(l){const h=l.length;if(h>0){const g=Array(h);for(let b=0;b<h;b++)g[b]=l[b];return g}return[]}function j(l,h){for(let b=1;b<arguments.length;b++){const V=arguments[b];var g=typeof V;if(g=g!="object"?g:V?Array.isArray(V)?"array":g:"null",g=="array"||g=="object"&&typeof V.length=="number"){g=l.length||0;const M=V.length||0;l.length=g+M;for(let H=0;H<M;H++)l[g+H]=V[H]}else l.push(V)}}class I{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function C(l){a.setTimeout(()=>{throw l},0)}function x(){var l=y;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class _{constructor(){this.h=this.g=null}add(h,g){const b=E.get();b.set(h,g),this.h?this.h.next=b:this.g=b,this.h=b}}var E=new I(()=>new k,l=>l.reset());class k{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let L,P=!1,y=new _,w=()=>{const l=Promise.resolve(void 0);L=()=>{l.then(T)}};function T(){for(var l;l=x();){try{l.h.call(l.g)}catch(g){C(g)}var h=E;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}P=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,h),a.removeEventListener("test",g,h)}catch{}return l}();function N(l){return/^[\s\xa0]*$/.test(l)}function le(l,h){S.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}p(le,S),le.prototype.init=function(l,h){const g=this.type=l.type,b=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(g=="mouseover"?h=l.fromElement:g=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&le.Z.h.call(this)},le.prototype.h=function(){le.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),ke=0;function ve(l,h,g,b,V){this.listener=l,this.proxy=null,this.src=h,this.type=g,this.capture=!!b,this.ha=V,this.key=++ke,this.da=this.fa=!1}function q(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function K(l,h,g){for(const b in l)h.call(g,l[b],b,l)}function re(l,h){for(const g in l)h.call(void 0,l[g],g,l)}function U(l){const h={};for(const g in l)h[g]=l[g];return h}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(l,h){let g,b;for(let V=1;V<arguments.length;V++){b=arguments[V];for(g in b)l[g]=b[g];for(let M=0;M<ee.length;M++)g=ee[M],Object.prototype.hasOwnProperty.call(b,g)&&(l[g]=b[g])}}function he(l){this.src=l,this.g={},this.h=0}he.prototype.add=function(l,h,g,b,V){const M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);const H=oe(l,h,b,V);return H>-1?(h=l[H],g||(h.fa=!1)):(h=new ve(h,this.src,M,!!b,V),h.fa=g,l.push(h)),h};function me(l,h){const g=h.type;if(g in l.g){var b=l.g[g],V=Array.prototype.indexOf.call(b,h,void 0),M;(M=V>=0)&&Array.prototype.splice.call(b,V,1),M&&(q(h),l.g[g].length==0&&(delete l.g[g],l.h--))}}function oe(l,h,g,b){for(let V=0;V<l.length;++V){const M=l[V];if(!M.da&&M.listener==h&&M.capture==!!g&&M.ha==b)return V}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),Or={};function xn(l,h,g,b,V){if(Array.isArray(h)){for(let M=0;M<h.length;M++)xn(l,h[M],g,b,V);return null}return g=sa(g),l&&l[ie]?l.J(h,g,c(b)?!!b.capture:!1,V):Rn(l,h,g,!1,b,V)}function Rn(l,h,g,b,V,M){if(!h)throw Error("Invalid event type");const H=c(V)?!!V.capture:!!V;let de=wi(l);if(de||(l[Me]=de=new he(l)),g=de.add(h,g,b,H,M),g.proxy)return g;if(b=qc(),g.proxy=b,b.src=l,b.listener=g,l.addEventListener)D||(V=H),V===void 0&&(V=!1),l.addEventListener(h.toString(),b,V);else if(l.attachEvent)l.attachEvent(vs(h.toString()),b);else if(l.addListener&&l.removeListener)l.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return g}function qc(){function l(g){return h.call(l.src,l.listener,g)}const h=Hc;return l}function ra(l,h,g,b,V){if(Array.isArray(h))for(var M=0;M<h.length;M++)ra(l,h[M],g,b,V);else b=c(b)?!!b.capture:!!b,g=sa(g),l&&l[ie]?(l=l.i,M=String(h).toString(),M in l.g&&(h=l.g[M],g=oe(h,g,b,V),g>-1&&(q(h[g]),Array.prototype.splice.call(h,g,1),h.length==0&&(delete l.g[M],l.h--)))):l&&(l=wi(l))&&(h=l.g[h.toString()],l=-1,h&&(l=oe(h,g,b,V)),(g=l>-1?h[l]:null)&&vi(g))}function vi(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[ie])me(h.i,l);else{var g=l.type,b=l.proxy;h.removeEventListener?h.removeEventListener(g,b,l.capture):h.detachEvent?h.detachEvent(vs(g),b):h.addListener&&h.removeListener&&h.removeListener(b),(g=wi(h))?(me(g,l),g.h==0&&(g.src=null,h[Me]=null)):q(l)}}}function vs(l){return l in Or?Or[l]:Or[l]="on"+l}function Hc(l,h){if(l.da)l=!0;else{h=new le(h,this);const g=l.listener,b=l.ha||l.src;l.fa&&vi(l),l=g.call(b,h)}return l}function wi(l){return l=l[Me],l instanceof he?l:null}var _i="__closure_events_fn_"+(Math.random()*1e9>>>0);function sa(l){return typeof l=="function"?l:(l[_i]||(l[_i]=function(h){return l.handleEvent(h)}),l[_i])}function ot(){A.call(this),this.i=new he(this),this.M=this,this.G=null}p(ot,A),ot.prototype[ie]=!0,ot.prototype.removeEventListener=function(l,h,g,b){ra(this,l,h,g,b)};function ht(l,h){var g,b=l.G;if(b)for(g=[];b;b=b.G)g.push(b);if(l=l.M,b=h.type||h,typeof h=="string")h=new S(h,l);else if(h instanceof S)h.target=h.target||l;else{var V=h;h=new S(b,l),X(h,V)}V=!0;let M,H;if(g)for(H=g.length-1;H>=0;H--)M=h.g=g[H],V=ws(M,b,!0,h)&&V;if(M=h.g=l,V=ws(M,b,!0,h)&&V,V=ws(M,b,!1,h)&&V,g)for(H=0;H<g.length;H++)M=h.g=g[H],V=ws(M,b,!1,h)&&V}ot.prototype.N=function(){if(ot.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const g=l.g[h];for(let b=0;b<g.length;b++)q(g[b]);delete l.g[h],l.h--}}this.G=null},ot.prototype.J=function(l,h,g,b){return this.i.add(String(l),h,!1,g,b)},ot.prototype.K=function(l,h,g,b){return this.i.add(String(l),h,!0,g,b)};function ws(l,h,g,b){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let V=!0;for(let M=0;M<h.length;++M){const H=h[M];if(H&&!H.da&&H.capture==g){const de=H.listener,tt=H.ha||H.src;H.fa&&me(l.i,H),V=de.call(tt,b)!==!1&&V}}return V&&!b.defaultPrevented}function Wc(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:a.setTimeout(l,h||0)}function ia(l){l.g=Wc(()=>{l.g=null,l.i&&(l.i=!1,ia(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class oa extends A{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ia(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fr(l){A.call(this),this.h=l,this.g={}}p(Fr,A);var aa=[];function la(l){K(l.g,function(h,g){this.g.hasOwnProperty(g)&&vi(h)},l),l.g={}}Fr.prototype.N=function(){Fr.Z.N.call(this),la(this)},Fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ji=a.JSON.stringify,Qc=a.JSON.parse,Gc=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function ca(){}function ua(){}var Ur={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ei(){S.call(this,"d")}p(Ei,S);function bi(){S.call(this,"c")}p(bi,S);var Dn={},da=null;function _s(){return da=da||new ot}Dn.Ia="serverreachability";function ha(l){S.call(this,Dn.Ia,l)}p(ha,S);function Br(l){const h=_s();ht(h,new ha(h))}Dn.STAT_EVENT="statevent";function fa(l,h){S.call(this,Dn.STAT_EVENT,l),this.stat=h}p(fa,S);function ft(l){const h=_s();ht(h,new fa(h,l))}Dn.Ja="timingevent";function ma(l,h){S.call(this,Dn.Ja,l),this.size=h}p(ma,S);function zr(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function $r(){this.g=!0}$r.prototype.ua=function(){this.g=!1};function Kc(l,h,g,b,V,M){l.info(function(){if(l.g)if(M){var H="",de=M.split("&");for(let Se=0;Se<de.length;Se++){var tt=de[Se].split("=");if(tt.length>1){const at=tt[0];tt=tt[1];const wn=at.split("_");H=wn.length>=2&&wn[1]=="type"?H+(at+"="+tt+"&"):H+(at+"=redacted&")}}}else H=null;else H=M;return"XMLHTTP REQ ("+b+") [attempt "+V+"]: "+h+`
`+g+`
`+H})}function O(l,h,g,b,V,M,H){l.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+V+"]: "+h+`
`+g+`
`+M+" "+H})}function z(l,h,g,b){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+Ce(l,g)+(b?" "+b:"")})}function W(l,h){l.info(function(){return"TIMEOUT: "+h})}$r.prototype.info=function(){};function Ce(l,h){if(!l.g)return h;if(!h)return null;try{const M=JSON.parse(h);if(M){for(l=0;l<M.length;l++)if(Array.isArray(M[l])){var g=M[l];if(!(g.length<2)){var b=g[1];if(Array.isArray(b)&&!(b.length<1)){var V=b[0];if(V!="noop"&&V!="stop"&&V!="close")for(let H=1;H<b.length;H++)b[H]=""}}}}return ji(M)}catch{return h}}var Yt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pa;function Ni(){}p(Ni,ca),Ni.prototype.g=function(){return new XMLHttpRequest},pa=new Ni;function qr(l){return encodeURIComponent(String(l))}function Yc(l){var h=1;l=l.split(":");const g=[];for(;h>0&&l.length;)g.push(l.shift()),h--;return l.length&&g.push(l.join(":")),g}function yn(l,h,g,b){this.j=l,this.i=h,this.l=g,this.S=b||1,this.V=new Fr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ga}function ga(){this.i=null,this.g="",this.h=!1}var xa={},ln={};function Xc(l,h,g){l.M=1,l.A=va(vn(h)),l.u=g,l.R=!0,Gf(l,null)}function Gf(l,h){l.F=Date.now(),ya(l),l.B=vn(l.A);var g=l.B,b=l.S;Array.isArray(b)||(b=[String(b)]),am(g.i,"t",b),l.C=0,g=l.j.L,l.h=new ga,l.g=Nm(l.j,g?h:null,!l.u),l.P>0&&(l.O=new oa(d(l.Y,l,l.g),l.P)),h=l.V,g=l.g,b=l.ba;var V="readystatechange";Array.isArray(V)||(V&&(aa[0]=V.toString()),V=aa);for(let M=0;M<V.length;M++){const H=xn(g,V[M],b||h.handleEvent,!1,h.h||h);if(!H)break;h.g[H.key]=H}h=l.J?U(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),Br(),Kc(l.i,l.v,l.B,l.l,l.S,l.u)}yn.prototype.ba=function(l){l=l.target;const h=this.O;h&&Xn(l)==3?h.j():this.Y(l)},yn.prototype.Y=function(l){try{if(l==this.g)e:{const de=Xn(this.g),tt=this.g.ya(),Se=this.g.ca();if(!(de<3)&&(de!=3||this.g&&(this.h.h||this.g.la()||mm(this.g)))){this.K||de!=4||tt==7||(tt==8||Se<=0?Br(3):Br(2)),Jc(this);var h=this.g.ca();this.X=h;var g=_1(this);if(this.o=h==200,O(this.i,this.v,this.B,this.l,this.S,de,h),this.o){if(this.U&&!this.L){t:{if(this.g){var b,V=this.g;if((b=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(b)){var M=b;break t}}M=null}if(l=M)z(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Zc(this,l);else{this.o=!1,this.m=3,ft(12),Hr(this),Ti(this);break e}}if(this.R){l=!0;let at;for(;!this.K&&this.C<g.length;)if(at=j1(this,g),at==ln){de==4&&(this.m=4,ft(14),l=!1),z(this.i,this.l,null,"[Incomplete Response]");break}else if(at==xa){this.m=4,ft(15),z(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else z(this.i,this.l,at,null),Zc(this,at);if(Kf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),de!=4||g.length!=0||this.h.h||(this.m=1,ft(16),l=!1),this.o=this.o&&l,!l)z(this.i,this.l,g,"[Invalid Chunked Response]"),Hr(this),Ti(this);else if(g.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),au(H),H.P=!0,ft(11))}}else z(this.i,this.l,g,null),Zc(this,g);de==4&&Hr(this),this.o&&!this.K&&(de==4?_m(this.j,this):(this.o=!1,ya(this)))}else V1(this.g),h==400&&g.indexOf("Unknown SID")>0?(this.m=3,ft(12)):(this.m=0,ft(13)),Hr(this),Ti(this)}}}catch{}finally{}};function _1(l){if(!Kf(l))return l.g.la();const h=mm(l.g);if(h==="")return"";let g="";const b=h.length,V=Xn(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Hr(l),Ti(l),"";l.h.i=new a.TextDecoder}for(let M=0;M<b;M++)l.h.h=!0,g+=l.h.i.decode(h[M],{stream:!(V&&M==b-1)});return h.length=0,l.h.g+=g,l.C=0,l.h.g}function Kf(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function j1(l,h){var g=l.C,b=h.indexOf(`
`,g);return b==-1?ln:(g=Number(h.substring(g,b)),isNaN(g)?xa:(b+=1,b+g>h.length?ln:(h=h.slice(b,b+g),l.C=b+g,h)))}yn.prototype.cancel=function(){this.K=!0,Hr(this)};function ya(l){l.T=Date.now()+l.H,Yf(l,l.H)}function Yf(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=zr(d(l.aa,l),h)}function Jc(l){l.D&&(a.clearTimeout(l.D),l.D=null)}yn.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(W(this.i,this.B),this.M!=2&&(Br(),ft(17)),Hr(this),this.m=2,Ti(this)):Yf(this,this.T-l)};function Ti(l){l.j.I==0||l.K||_m(l.j,l)}function Hr(l){Jc(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,la(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function Zc(l,h){try{var g=l.j;if(g.I!=0&&(g.g==l||eu(g.h,l))){if(!l.L&&eu(g.h,l)&&g.I==3){try{var b=g.Ba.g.parse(h)}catch{b=null}if(Array.isArray(b)&&b.length==3){var V=b;if(V[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)ba(g),ja(g);else break e;ou(g),ft(18)}}else g.xa=V[1],0<g.xa-g.K&&V[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=zr(d(g.Va,g),6e3));Zf(g.h)<=1&&g.ta&&(g.ta=void 0)}else Qr(g,11)}else if((l.L||g.g==l)&&ba(g),!N(h))for(V=g.Ba.g.parse(h),h=0;h<V.length;h++){let Se=V[h];const at=Se[0];if(!(at<=g.K))if(g.K=at,Se=Se[1],g.I==2)if(Se[0]=="c"){g.M=Se[1],g.ba=Se[2];const wn=Se[3];wn!=null&&(g.ka=wn,g.j.info("VER="+g.ka));const Gr=Se[4];Gr!=null&&(g.za=Gr,g.j.info("SVER="+g.za));const Jn=Se[5];Jn!=null&&typeof Jn=="number"&&Jn>0&&(b=1.5*Jn,g.O=b,g.j.info("backChannelRequestTimeoutMs_="+b)),b=g;const Zn=l.g;if(Zn){const Ta=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ta){var M=b.h;M.g||Ta.indexOf("spdy")==-1&&Ta.indexOf("quic")==-1&&Ta.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(tu(M,M.h),M.h=null))}if(b.G){const lu=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;lu&&(b.wa=lu,Pe(b.J,b.G,lu))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),b=g;var H=l;if(b.na=bm(b,b.L?b.ba:null,b.W),H.L){em(b.h,H);var de=H,tt=b.O;tt&&(de.H=tt),de.D&&(Jc(de),ya(de)),b.g=H}else vm(b);g.i.length>0&&Ea(g)}else Se[0]!="stop"&&Se[0]!="close"||Qr(g,7);else g.I==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Qr(g,7):iu(g):Se[0]!="noop"&&g.l&&g.l.qa(Se),g.A=0)}}Br(4)}catch{}}var E1=class{constructor(l,h){this.g=l,this.map=h}};function Xf(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Jf(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Zf(l){return l.h?1:l.g?l.g.size:0}function eu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function tu(l,h){l.g?l.g.add(h):l.h=h}function em(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Xf.prototype.cancel=function(){if(this.i=tm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function tm(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const g of l.g.values())h=h.concat(g.G);return h}return v(l.i)}var nm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function b1(l,h){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const b=l[g].indexOf("=");let V,M=null;b>=0?(V=l[g].substring(0,b),M=l[g].substring(b+1)):V=l[g],h(V,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Kn(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof Kn?(this.l=l.l,Si(this,l.j),this.o=l.o,this.g=l.g,Ci(this,l.u),this.h=l.h,nu(this,lm(l.i)),this.m=l.m):l&&(h=String(l).match(nm))?(this.l=!1,Si(this,h[1]||"",!0),this.o=Ii(h[2]||""),this.g=Ii(h[3]||"",!0),Ci(this,h[4]),this.h=Ii(h[5]||"",!0),nu(this,h[6]||"",!0),this.m=Ii(h[7]||"")):(this.l=!1,this.i=new ki(null,this.l))}Kn.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(Ai(h,rm,!0),":");var g=this.g;return(g||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Ai(h,rm,!0),"@"),l.push(qr(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Ai(g,g.charAt(0)=="/"?S1:T1,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Ai(g,I1)),l.join("")},Kn.prototype.resolve=function(l){const h=vn(this);let g=!!l.j;g?Si(h,l.j):g=!!l.o,g?h.o=l.o:g=!!l.g,g?h.g=l.g:g=l.u!=null;var b=l.h;if(g)Ci(h,l.u);else if(g=!!l.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var V=h.h.lastIndexOf("/");V!=-1&&(b=h.h.slice(0,V+1)+b)}if(V=b,V==".."||V==".")b="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){b=V.lastIndexOf("/",0)==0,V=V.split("/");const M=[];for(let H=0;H<V.length;){const de=V[H++];de=="."?b&&H==V.length&&M.push(""):de==".."?((M.length>1||M.length==1&&M[0]!="")&&M.pop(),b&&H==V.length&&M.push("")):(M.push(de),b=!0)}b=M.join("/")}else b=V}return g?h.h=b:g=l.i.toString()!=="",g?nu(h,lm(l.i)):g=!!l.m,g&&(h.m=l.m),h};function vn(l){return new Kn(l)}function Si(l,h,g){l.j=g?Ii(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Ci(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function nu(l,h,g){h instanceof ki?(l.i=h,A1(l.i,l.l)):(g||(h=Ai(h,C1)),l.i=new ki(h,l.l))}function Pe(l,h,g){l.i.set(h,g)}function va(l){return Pe(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Ii(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ai(l,h,g){return typeof l=="string"?(l=encodeURI(l).replace(h,N1),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function N1(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var rm=/[#\/\?@]/g,T1=/[#\?:]/g,S1=/[#\?]/g,C1=/[#\?@]/g,I1=/#/g;function ki(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Wr(l){l.g||(l.g=new Map,l.h=0,l.i&&b1(l.i,function(h,g){l.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=ki.prototype,t.add=function(l,h){Wr(this),this.i=null,l=js(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(h),this.h+=1,this};function sm(l,h){Wr(l),h=js(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function im(l,h){return Wr(l),h=js(l,h),l.g.has(h)}t.forEach=function(l,h){Wr(this),this.g.forEach(function(g,b){g.forEach(function(V){l.call(h,V,b,this)},this)},this)};function om(l,h){Wr(l);let g=[];if(typeof h=="string")im(l,h)&&(g=g.concat(l.g.get(js(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)g=g.concat(l[h]);return g}t.set=function(l,h){return Wr(this),this.i=null,l=js(this,l),im(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=om(this,l),l.length>0?String(l[0]):h):h};function am(l,h,g){sm(l,h),g.length>0&&(l.i=null,l.g.set(js(l,h),v(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let b=0;b<h.length;b++){var g=h[b];const V=qr(g);g=om(this,g);for(let M=0;M<g.length;M++){let H=V;g[M]!==""&&(H+="="+qr(g[M])),l.push(H)}}return this.i=l.join("&")};function lm(l){const h=new ki;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function js(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function A1(l,h){h&&!l.j&&(Wr(l),l.i=null,l.g.forEach(function(g,b){const V=b.toLowerCase();b!=V&&(sm(this,b),am(this,V,g))},l)),l.j=h}function k1(l,h){const g=new $r;if(a.Image){const b=new Image;b.onload=m(Yn,g,"TestLoadImage: loaded",!0,h,b),b.onerror=m(Yn,g,"TestLoadImage: error",!1,h,b),b.onabort=m(Yn,g,"TestLoadImage: abort",!1,h,b),b.ontimeout=m(Yn,g,"TestLoadImage: timeout",!1,h,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=l}else h(!1)}function P1(l,h){const g=new $r,b=new AbortController,V=setTimeout(()=>{b.abort(),Yn(g,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:b.signal}).then(M=>{clearTimeout(V),M.ok?Yn(g,"TestPingServer: ok",!0,h):Yn(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),Yn(g,"TestPingServer: error",!1,h)})}function Yn(l,h,g,b,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),b(g)}catch{}}function R1(){this.g=new Gc}function ru(l){this.i=l.Sb||null,this.h=l.ab||!1}p(ru,ca),ru.prototype.g=function(){return new wa(this.i,this.h)};function wa(l,h){ot.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(wa,ot),t=wa.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,Ri(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||a).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pi(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;cm(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function cm(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Pi(this):Ri(this),this.readyState==3&&cm(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Pi(this))},t.Na=function(l){this.g&&(this.response=l,Pi(this))},t.ga=function(){this.g&&Pi(this)};function Pi(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Ri(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=h.next();return l.join(`\r
`)};function Ri(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function um(l){let h="";return K(l,function(g,b){h+=b,h+=":",h+=g,h+=`\r
`}),h}function su(l,h,g){e:{for(b in g){var b=!1;break e}b=!0}b||(g=um(g),typeof l=="string"?g!=null&&qr(g):Pe(l,h,g))}function He(l){ot.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(He,ot);var D1=/^https?$/i,L1=["POST","PUT"];t=He.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,g,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pa.g(),this.g.onreadystatechange=f(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(M){dm(this,M);return}if(l=g||"",g=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var V in b)g.set(V,b[V]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const M of b.keys())g.set(M,b.get(M));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(g.keys()).find(M=>M.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(Array.prototype.indexOf.call(L1,h,void 0)>=0)||b||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,H]of g)this.g.setRequestHeader(M,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(M){dm(this,M)}};function dm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,hm(l),_a(l)}function hm(l){l.A||(l.A=!0,ht(l,"complete"),ht(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,ht(this,"complete"),ht(this,"abort"),_a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_a(this,!0)),He.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?fm(this):this.Xa())},t.Xa=function(){fm(this)};function fm(l){if(l.h&&typeof o<"u"){if(l.v&&Xn(l)==4)setTimeout(l.Ca.bind(l),0);else if(ht(l,"readystatechange"),Xn(l)==4){l.h=!1;try{const M=l.ca();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var b;if(b=M===0){let H=String(l.D).match(nm)[1]||null;!H&&a.self&&a.self.location&&(H=a.self.location.protocol.slice(0,-1)),b=!D1.test(H?H.toLowerCase():"")}g=b}if(g)ht(l,"complete"),ht(l,"success");else{l.o=6;try{var V=Xn(l)>2?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.ca()+"]",hm(l)}}finally{_a(l)}}}}function _a(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,h||ht(l,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Xn(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Xn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),Qc(h)}};function mm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function V1(l){const h={};l=(l.g&&Xn(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<l.length;b++){if(N(l[b]))continue;var g=Yc(l[b]);const V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const M=h[V]||[];h[V]=M,M.push(g)}re(h,function(b){return b.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Di(l,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||h}function pm(l){this.za=0,this.i=[],this.j=new $r,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Di("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Di("baseRetryDelayMs",5e3,l),this.Za=Di("retryDelaySeedMs",1e4,l),this.Ta=Di("forwardChannelMaxRetries",2,l),this.va=Di("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Xf(l&&l.concurrentRequestLimit),this.Ba=new R1,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=pm.prototype,t.ka=8,t.I=1,t.connect=function(l,h,g,b){ft(0),this.W=l,this.H=h||{},g&&b!==void 0&&(this.H.OSID=g,this.H.OAID=b),this.F=this.X,this.J=bm(this,null,this.W),Ea(this)};function iu(l){if(gm(l),l.I==3){var h=l.V++,g=vn(l.J);if(Pe(g,"SID",l.M),Pe(g,"RID",h),Pe(g,"TYPE","terminate"),Li(l,g),h=new yn(l,l.j,h),h.M=2,h.A=va(vn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(h.A.toString(),"")}catch{}!g&&a.Image&&(new Image().src=h.A,g=!0),g||(h.g=Nm(h.j,null),h.g.ea(h.A)),h.F=Date.now(),ya(h)}Em(l)}function ja(l){l.g&&(au(l),l.g.cancel(),l.g=null)}function gm(l){ja(l),l.v&&(a.clearTimeout(l.v),l.v=null),ba(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&a.clearTimeout(l.m),l.m=null)}function Ea(l){if(!Jf(l.h)&&!l.m){l.m=!0;var h=l.Ea;L||w(),P||(L(),P=!0),y.add(h,l),l.D=0}}function M1(l,h){return Zf(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=zr(d(l.Ea,l,h),jm(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const V=new yn(this,this.j,l);let M=this.o;if(this.U&&(M?(M=U(M),X(M,this.U)):M=this.U),this.u!==null||this.R||(V.J=M,M=null),this.S)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var b=this.i[g];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(h+=b,h>4096){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=ym(this,V,h),g=vn(this.J),Pe(g,"RID",l),Pe(g,"CVER",22),this.G&&Pe(g,"X-HTTP-Session-Id",this.G),Li(this,g),M&&(this.R?h="headers="+qr(um(M))+"&"+h:this.u&&su(g,this.u,M)),tu(this.h,V),this.Ra&&Pe(g,"TYPE","init"),this.S?(Pe(g,"$req",h),Pe(g,"SID","null"),V.U=!0,Xc(V,g,null)):Xc(V,g,h),this.I=2}}else this.I==3&&(l?xm(this,l):this.i.length==0||Jf(this.h)||xm(this))};function xm(l,h){var g;h?g=h.l:g=l.V++;const b=vn(l.J);Pe(b,"SID",l.M),Pe(b,"RID",g),Pe(b,"AID",l.K),Li(l,b),l.u&&l.o&&su(b,l.u,l.o),g=new yn(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),h&&(l.i=h.G.concat(l.i)),h=ym(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),tu(l.h,g),Xc(g,b,h)}function Li(l,h){l.H&&K(l.H,function(g,b){Pe(h,b,g)}),l.l&&K({},function(g,b){Pe(h,b,g)})}function ym(l,h,g){g=Math.min(l.i.length,g);const b=l.l?d(l.l.Ka,l.l,l):null;e:{var V=l.i;let de=-1;for(;;){const tt=["count="+g];de==-1?g>0?(de=V[0].g,tt.push("ofs="+de)):de=0:tt.push("ofs="+de);let Se=!0;for(let at=0;at<g;at++){var M=V[at].g;const wn=V[at].map;if(M-=de,M<0)de=Math.max(0,V[at].g-100),Se=!1;else try{M="req"+M+"_"||"";try{var H=wn instanceof Map?wn:Object.entries(wn);for(const[Gr,Jn]of H){let Zn=Jn;c(Jn)&&(Zn=ji(Jn)),tt.push(M+Gr+"="+encodeURIComponent(Zn))}}catch(Gr){throw tt.push(M+"type="+encodeURIComponent("_badmap")),Gr}}catch{b&&b(wn)}}if(Se){H=tt.join("&");break e}}H=void 0}return l=l.i.splice(0,g),h.G=l,H}function vm(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;L||w(),P||(L(),P=!0),y.add(h,l),l.A=0}}function ou(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=zr(d(l.Da,l),jm(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,wm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=zr(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ft(10),ja(this),wm(this))};function au(l){l.B!=null&&(a.clearTimeout(l.B),l.B=null)}function wm(l){l.g=new yn(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=vn(l.na);Pe(h,"RID","rpc"),Pe(h,"SID",l.M),Pe(h,"AID",l.K),Pe(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&Pe(h,"TO",l.ia),Pe(h,"TYPE","xmlhttp"),Li(l,h),l.u&&l.o&&su(h,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=va(vn(h)),g.u=null,g.R=!0,Gf(g,l)}t.Va=function(){this.C!=null&&(this.C=null,ja(this),ou(this),ft(19))};function ba(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function _m(l,h){var g=null;if(l.g==h){ba(l),au(l),l.g=null;var b=2}else if(eu(l.h,h))g=h.G,em(l.h,h),b=1;else return;if(l.I!=0){if(h.o)if(b==1){g=h.u?h.u.length:0,h=Date.now()-h.F;var V=l.D;b=_s(),ht(b,new ma(b,g)),Ea(l)}else vm(l);else if(V=h.m,V==3||V==0&&h.X>0||!(b==1&&M1(l,h)||b==2&&ou(l)))switch(g&&g.length>0&&(h=l.h,h.i=h.i.concat(g)),V){case 1:Qr(l,5);break;case 4:Qr(l,10);break;case 3:Qr(l,6);break;default:Qr(l,2)}}}function jm(l,h){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*h}function Qr(l,h){if(l.j.info("Error code "+h),h==2){var g=d(l.bb,l),b=l.Ua;const V=!b;b=new Kn(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Si(b,"https"),va(b),V?k1(b.toString(),g):P1(b.toString(),g)}else ft(2);l.I=0,l.l&&l.l.pa(h),Em(l),gm(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Em(l){if(l.I=0,l.ja=[],l.l){const h=tm(l.h);(h.length!=0||l.i.length!=0)&&(j(l.ja,h),j(l.ja,l.i),l.h.i.length=0,v(l.i),l.i.length=0),l.l.oa()}}function bm(l,h,g){var b=g instanceof Kn?vn(g):new Kn(g);if(b.g!="")h&&(b.g=h+"."+b.g),Ci(b,b.u);else{var V=a.location;b=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;const M=new Kn(null);b&&Si(M,b),h&&(M.g=h),V&&Ci(M,V),g&&(M.h=g),b=M}return g=l.G,h=l.wa,g&&h&&Pe(b,g,h),Pe(b,"VER",l.ka),Li(l,b),b}function Nm(l,h,g){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new He(new ru({ab:g})):new He(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tm(){}t=Tm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Na(){}Na.prototype.g=function(l,h){return new Ut(l,h)};function Ut(l,h){ot.call(this),this.g=new pm(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!N(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!N(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Es(this)}p(Ut,ot),Ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){iu(this.g)},Ut.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=ji(l),l=g);h.i.push(new E1(h.Ya++,l)),h.I==3&&Ea(h)},Ut.prototype.N=function(){this.g.l=null,delete this.j,iu(this.g),delete this.g,Ut.Z.N.call(this)};function Sm(l){Ei.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const g in h){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}p(Sm,Ei);function Cm(){bi.call(this),this.status=1}p(Cm,bi);function Es(l){this.g=l}p(Es,Tm),Es.prototype.ra=function(){ht(this.g,"a")},Es.prototype.qa=function(l){ht(this.g,new Sm(l))},Es.prototype.pa=function(l){ht(this.g,new Cm)},Es.prototype.oa=function(){ht(this.g,"b")},Na.prototype.createWebChannel=Na.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,qy=function(){return new Na},$y=function(){return _s()},zy=Dn,Xd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yt.NO_ERROR=0,Yt.TIMEOUT=8,Yt.HTTP_ERROR=6,dl=Yt,Xt.COMPLETE="complete",By=Xt,ua.EventType=Ur,Ur.OPEN="a",Ur.CLOSE="b",Ur.ERROR="c",Ur.MESSAGE="d",ot.prototype.listen=ot.prototype.J,Xi=ua,He.prototype.listenOnce=He.prototype.K,He.prototype.getLastError=He.prototype.Ha,He.prototype.getLastErrorCode=He.prototype.ya,He.prototype.getStatus=He.prototype.ca,He.prototype.getResponseJson=He.prototype.La,He.prototype.getResponseText=He.prototype.la,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Fa,Uy=He}).apply(typeof Ha<"u"?Ha:typeof self<"u"?self:typeof window<"u"?window:{});const ig="@firebase/firestore",og="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pi="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Dy("@firebase/firestore");function Ns(){return us.logLevel}function Q(t,...e){if(us.logLevel<=ye.DEBUG){const n=e.map(xf);us.debug(`Firestore (${pi}): ${t}`,...n)}}function Hn(t,...e){if(us.logLevel<=ye.ERROR){const n=e.map(xf);us.error(`Firestore (${pi}): ${t}`,...n)}}function ri(t,...e){if(us.logLevel<=ye.WARN){const n=e.map(xf);us.warn(`Firestore (${pi}): ${t}`,...n)}}function xf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Hy(t,r,n)}function Hy(t,e,n){let r=`FIRESTORE (${pi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Hn(r),new Error(r)}function Ee(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Hy(e,s,r)}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends mi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class sb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ib{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new _r,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new _r)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new Wy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new Et(e)}}class ob{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ab{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ob(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ag{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lb{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,UE(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ee(this.o===void 0,3512);const r=o=>{o.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ag(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ag(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=cb(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function Jd(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),o=e.charAt(r);if(s!==o)return Uu(s)===Uu(o)?pe(s,o):Uu(s)?1:-1}return pe(t.length,e.length)}const ub=55296,db=57343;function Uu(t){const e=t.charCodeAt(0);return e>=ub&&e<=db}function si(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="__name__";class En{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return En.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof En?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=En.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return pe(e.length,n.length)}static compareSegments(e,n){const r=En.isNumericId(e),s=En.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?En.extractNumericId(e).compare(En.extractNumericId(n)):Jd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wr.fromString(e.substring(4,e.length-2))}}class De extends En{construct(e,n,r){return new De(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new De(n)}static emptyPath(){return new De([])}}const hb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends En{construct(e,n,r){return new gt(e,n,r)}static isValidIdentifier(e){return hb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lg}static keyField(){return new gt([lg])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Y(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Y(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(o(),s++)}if(o(),a)throw new Y(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(n)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(De.fromString(e))}static fromName(e){return new Z(De.fromString(e).popFirst(5))}static empty(){return new Z(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&De.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return De.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new De(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t,e,n){if(!n)throw new Y(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fb(t,e,n,r){if(e===!0&&r===!0)throw new Y(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cg(t){if(!Z.isDocumentKey(t))throw new Y(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ug(t){if(Z.isDocumentKey(t))throw new Y(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gy(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function sn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vf(t);throw new Y(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ko(t,e){if(!Gy(t))throw new Y(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new Y(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg=-62135596800,hg=1e6;class Le{static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hg);return new Le(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dg)throw new Y(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hg}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ko(e,Le._jsonSchema))return new Le(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Le._jsonSchemaVersion="firestore/timestamp/1.0",Le._jsonSchema={type:et("string",Le._jsonSchemaVersion),seconds:et("number"),nanoseconds:et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{static fromTimestamp(e){return new se(e)}static min(){return new se(new Le(0,0))}static max(){return new se(new Le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=-1;function mb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new Le(n+1,0):new Le(n,r));return new Nr(s,Z.empty(),e)}function pb(t){return new Nr(t.readTime,t.key,Oo)}class Nr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Nr(se.min(),Z.empty(),Oo)}static max(){return new Nr(se.max(),Z.empty(),Oo)}}function gb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gi(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==xb)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,o=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++o,a&&o===s&&n()},u=>r(u))}),a=!0,o===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const o=e.length,a=new Array(o);let c=0;for(let u=0;u<o;u++){const d=u;n(e[d]).next(m=>{a[d]=m,++c,c===o&&r(a)},m=>s(m))}})}static doWhile(e,n){return new F((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function vb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=-1;function Nc(t){return t==null}function Ql(t){return t===0&&1/t==-1/0}function wb(t){return typeof t=="number"&&Number.isInteger(t)&&!Ql(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="";function _b(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fg(e)),e=jb(t.get(n),e);return fg(e)}function jb(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case Ky:n+="";break;default:n+=o}}return n}function fg(t){return t+Ky+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Yy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){this.comparator=e,this.root=n||pt.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wa(this.root,e,this.comparator,!0)}}class Wa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??pt.RED,this.left=s??pt.EMPTY,this.right=o??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new pt(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return pt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pg(this.data.getIterator())}getIteratorFrom(e){return new pg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class pg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new $t([])}unionWith(e){let n=new it(gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return si(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Xy("Invalid base64 string: "+o):o}}(e);return new vt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(e);return new vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const Eb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tr(t){if(Ee(!!t,39018),typeof t=="string"){let e=0;const n=Eb.exec(t);if(Ee(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sr(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="server_timestamp",Zy="__type__",ev="__previous_value__",tv="__local_write_time__";function _f(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Zy])==null?void 0:r.stringValue)===Jy}function Tc(t){const e=t.mapValue.fields[ev];return _f(e)?Tc(e):e}function Fo(t){const e=Tr(t.mapValue.fields[tv].timestampValue);return new Le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n,r,s,o,a,c,u,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const Gl="(default)";class Uo{constructor(e,n){this.projectId=e,this.database=n||Gl}static empty(){return new Uo("","")}get isDefaultDatabase(){return this.database===Gl}isEqual(e){return e instanceof Uo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="__type__",Nb="__max__",Qa={mapValue:{}},rv="__vector__",Kl="value";function Cr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_f(t)?4:Sb(t)?9007199254740991:Tb(t)?10:11:te(28295,{value:t})}function kn(t,e){if(t===e)return!0;const n=Cr(t);if(n!==Cr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fo(t).isEqual(Fo(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=Tr(s.timestampValue),c=Tr(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Sr(s.bytesValue).isEqual(Sr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return Qe(s.geoPointValue.latitude)===Qe(o.geoPointValue.latitude)&&Qe(s.geoPointValue.longitude)===Qe(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Qe(s.integerValue)===Qe(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=Qe(s.doubleValue),c=Qe(o.doubleValue);return a===c?Ql(a)===Ql(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return si(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},c=o.mapValue.fields||{};if(mg(a)!==mg(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!kn(a[u],c[u])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Bo(t,e){return(t.values||[]).find(n=>kn(n,e))!==void 0}function ii(t,e){if(t===e)return 0;const n=Cr(t),r=Cr(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(o,a){const c=Qe(o.integerValue||o.doubleValue),u=Qe(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return gg(t.timestampValue,e.timestampValue);case 4:return gg(Fo(t),Fo(e));case 5:return Jd(t.stringValue,e.stringValue);case 6:return function(o,a){const c=Sr(o),u=Sr(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const c=o.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=pe(c[d],u[d]);if(m!==0)return m}return pe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const c=pe(Qe(o.latitude),Qe(a.latitude));return c!==0?c:pe(Qe(o.longitude),Qe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return xg(t.arrayValue,e.arrayValue);case 10:return function(o,a){var f,v,j,I;const c=o.fields||{},u=a.fields||{},d=(f=c[Kl])==null?void 0:f.arrayValue,m=(v=u[Kl])==null?void 0:v.arrayValue,p=pe(((j=d==null?void 0:d.values)==null?void 0:j.length)||0,((I=m==null?void 0:m.values)==null?void 0:I.length)||0);return p!==0?p:xg(d,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Qa.mapValue&&a===Qa.mapValue)return 0;if(o===Qa.mapValue)return 1;if(a===Qa.mapValue)return-1;const c=o.fields||{},u=Object.keys(c),d=a.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const f=Jd(u[p],m[p]);if(f!==0)return f;const v=ii(c[u[p]],d[m[p]]);if(v!==0)return v}return pe(u.length,m.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function gg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=Tr(t),r=Tr(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function xg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=ii(n[s],r[s]);if(o)return o}return pe(n.length,r.length)}function oi(t){return Zd(t)}function Zd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Tr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Sr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=Zd(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${Zd(n.fields[a])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function hl(t){switch(Cr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tc(t);return e?16+hl(e):16;case 5:return 2*t.stringValue.length;case 6:return Sr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+hl(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Vr(r.fields,(o,a)=>{s+=o.length+hl(a)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function eh(t){return!!t&&"integerValue"in t}function jf(t){return!!t&&"arrayValue"in t}function yg(t){return!!t&&"nullValue"in t}function vg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fl(t){return!!t&&"mapValue"in t}function Tb(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[nv])==null?void 0:r.stringValue)===rv}function ho(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Vr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ho(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ho(t.arrayValue.values[n]);return e}return{...t}}function Sb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Nb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ho(n)}setAll(e){let n=gt.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=ho(a):s.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());fl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];fl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Vr(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Dt(ho(this.value))}}function sv(t){const e=[];return Vr(t.fields,(n,r)=>{const s=new gt([n]);if(fl(r)){const o=sv(r.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,r,s,o,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Nt(e,0,se.min(),se.min(),se.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,s){return new Nt(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new Nt(e,2,n,se.min(),se.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new Nt(e,3,n,se.min(),se.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n){this.position=e,this.inclusive=n}}function wg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],a=t.position[s];if(o.field.isKeyField()?r=Z.comparator(Z.fromName(a.referenceValue),n.key):r=ii(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function _g(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n="asc"){this.field=e,this.dir=n}}function Cb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{}class rt extends iv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Ab(e,n,r):n==="array-contains"?new Rb(e,r):n==="in"?new Db(e,r):n==="not-in"?new Lb(e,r):n==="array-contains-any"?new Vb(e,r):new rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new kb(e,r):new Pb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ii(n,this.value)):n!==null&&Cr(this.value)===Cr(n)&&this.matchesComparison(ii(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pn extends iv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Pn(e,n)}matches(e){return ov(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ov(t){return t.op==="and"}function av(t){return Ib(t)&&ov(t)}function Ib(t){for(const e of t.filters)if(e instanceof Pn)return!1;return!0}function th(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+oi(t.value);if(av(t))return t.filters.map(e=>th(e)).join(",");{const e=t.filters.map(n=>th(n)).join(",");return`${t.op}(${e})`}}function lv(t,e){return t instanceof rt?function(r,s){return s instanceof rt&&r.op===s.op&&r.field.isEqual(s.field)&&kn(r.value,s.value)}(t,e):t instanceof Pn?function(r,s){return s instanceof Pn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,a,c)=>o&&lv(a,s.filters[c]),!0):!1}(t,e):void te(19439)}function cv(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${oi(n.value)}`}(t):t instanceof Pn?function(n){return n.op.toString()+" {"+n.getFilters().map(cv).join(" ,")+"}"}(t):"Filter"}class Ab extends rt{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class kb extends rt{constructor(e,n){super(e,"in",n),this.keys=uv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Pb extends rt{constructor(e,n){super(e,"not-in",n),this.keys=uv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function uv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class Rb extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jf(n)&&Bo(n.arrayValue,this.value)}}class Db extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bo(this.value.arrayValue,n)}}class Lb extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bo(this.value.arrayValue,n)}}class Vb extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n=null,r=[],s=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=a,this.endAt=c,this.Te=null}}function jg(t,e=null,n=[],r=[],s=null,o=null,a=null){return new Mb(t,e,n,r,s,o,a)}function Ef(t){const e=ae(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>th(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Nc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>oi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>oi(r)).join(",")),e.Te=n}return e.Te}function bf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Cb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_g(t.startAt,e.startAt)&&_g(t.endAt,e.endAt)}function nh(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n=null,r=[],s=[],o=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ob(t,e,n,r,s,o,a,c){return new Sc(t,e,n,r,s,o,a,c)}function Cc(t){return new Sc(t)}function Eg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Fb(t){return t.collectionGroup!==null}function fo(t){const e=ae(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new it(gt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Xl(o,r))}),n.has(gt.keyField().canonicalString())||e.Ie.push(new Xl(gt.keyField(),r))}return e.Ie}function Sn(t){const e=ae(t);return e.Ee||(e.Ee=Ub(e,fo(t))),e.Ee}function Ub(t,e){if(t.limitType==="F")return jg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Xl(s.field,o)});const n=t.endAt?new Yl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yl(t.startAt.position,t.startAt.inclusive):null;return jg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rh(t,e,n){return new Sc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ic(t,e){return bf(Sn(t),Sn(e))&&t.limitType===e.limitType}function dv(t){return`${Ef(Sn(t))}|lt:${t.limitType}`}function Ts(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>cv(s)).join(", ")}]`),Nc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>oi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>oi(s)).join(",")),`Target(${r})`}(Sn(t))}; limitType=${t.limitType})`}function Ac(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of fo(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=wg(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,fo(r),s)||r.endAt&&!function(a,c,u){const d=wg(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,fo(r),s))}(t,e)}function Bb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hv(t){return(e,n)=>{let r=!1;for(const s of fo(t)){const o=zb(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function zb(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(o,a,c){const u=a.data.field(o),d=c.data.field(o);return u!==null&&d!==null?ii(u,d):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Vr(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return Yy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=new qe(Z.comparator);function Wn(){return $b}const fv=new qe(Z.comparator);function Ji(...t){let e=fv;for(const n of t)e=e.insert(n.key,n);return e}function mv(t){let e=fv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ts(){return mo()}function pv(){return mo()}function mo(){return new xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const qb=new qe(Z.comparator),Hb=new it(Z.comparator);function ge(...t){let e=Hb;for(const n of t)e=e.add(n);return e}const Wb=new it(pe);function Qb(){return Wb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ql(e)?"-0":e}}function gv(t){return{integerValue:""+t}}function Gb(t,e){return wb(e)?gv(e):Nf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(){this._=void 0}}function Kb(t,e,n){return t instanceof Jl?function(s,o){const a={fields:{[Zy]:{stringValue:Jy},[tv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&_f(o)&&(o=Tc(o)),o&&(a.fields[ev]=o),{mapValue:a}}(n,e):t instanceof zo?yv(t,e):t instanceof $o?vv(t,e):function(s,o){const a=xv(s,o),c=bg(a)+bg(s.Ae);return eh(a)&&eh(s.Ae)?gv(c):Nf(s.serializer,c)}(t,e)}function Yb(t,e,n){return t instanceof zo?yv(t,e):t instanceof $o?vv(t,e):n}function xv(t,e){return t instanceof Zl?function(r){return eh(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Jl extends kc{}class zo extends kc{constructor(e){super(),this.elements=e}}function yv(t,e){const n=wv(e);for(const r of t.elements)n.some(s=>kn(s,r))||n.push(r);return{arrayValue:{values:n}}}class $o extends kc{constructor(e){super(),this.elements=e}}function vv(t,e){let n=wv(e);for(const r of t.elements)n=n.filter(s=>!kn(s,r));return{arrayValue:{values:n}}}class Zl extends kc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function bg(t){return Qe(t.integerValue||t.doubleValue)}function wv(t){return jf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Xb(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof zo&&s instanceof zo||r instanceof $o&&s instanceof $o?si(r.elements,s.elements,kn):r instanceof Zl&&s instanceof Zl?kn(r.Ae,s.Ae):r instanceof Jl&&s instanceof Jl}(t.transform,e.transform)}class Jb{constructor(e,n){this.version=e,this.transformResults=n}}class Ft{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ft}static exists(e){return new Ft(void 0,e)}static updateTime(e){return new Ft(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ml(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pc{}function _v(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rc(t.key,Ft.none()):new Yo(t.key,t.data,Ft.none());{const n=t.data,r=Dt.empty();let s=new it(gt.comparator);for(let o of e.fields)if(!s.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),s=s.add(o)}return new Mr(t.key,r,new $t(s.toArray()),Ft.none())}}function Zb(t,e,n){t instanceof Yo?function(s,o,a){const c=s.value.clone(),u=Tg(s.fieldTransforms,o,a.transformResults);c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Mr?function(s,o,a){if(!ml(s.precondition,o))return void o.convertToUnknownDocument(a.version);const c=Tg(s.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(jv(s)),u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function po(t,e,n,r){return t instanceof Yo?function(o,a,c,u){if(!ml(o.precondition,a))return c;const d=o.value.clone(),m=Sg(o.fieldTransforms,u,a);return d.setAll(m),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mr?function(o,a,c,u){if(!ml(o.precondition,a))return c;const d=Sg(o.fieldTransforms,u,a),m=a.data;return m.setAll(jv(o)),m.setAll(d),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,a,c){return ml(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function eN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=xv(r.transform,s||null);o!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,o))}return n||null}function Ng(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&si(r,s,(o,a)=>Xb(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yo extends Pc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Mr extends Pc{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function jv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Tg(t,e,n){const r=new Map;Ee(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],a=o.transform,c=e.data.field(o.field);r.set(o.field,Yb(a,c,n[s]))}return r}function Sg(t,e,n){const r=new Map;for(const s of t){const o=s.transform,a=n.data.field(s.field);r.set(s.field,Kb(o,a,e))}return r}class Rc extends Pc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tN extends Pc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&Zb(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=po(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=po(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pv();return this.mutations.forEach(s=>{const o=e.get(s.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=n.has(s.key)?null:c;const u=_v(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&si(this.mutations,e.mutations,(n,r)=>Ng(n,r))&&si(this.baseMutations,e.baseMutations,(n,r)=>Ng(n,r))}}class Tf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ee(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return qb}();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,r[a].version);return new Tf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,xe;function iN(t){switch(t){case B.OK:return te(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function Ev(t){if(t===void 0)return Hn("GRPC error has no .code"),B.UNKNOWN;switch(t){case Je.OK:return B.OK;case Je.CANCELLED:return B.CANCELLED;case Je.UNKNOWN:return B.UNKNOWN;case Je.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Je.INTERNAL:return B.INTERNAL;case Je.UNAVAILABLE:return B.UNAVAILABLE;case Je.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Je.NOT_FOUND:return B.NOT_FOUND;case Je.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Je.ABORTED:return B.ABORTED;case Je.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Je.DATA_LOSS:return B.DATA_LOSS;default:return te(39323,{code:t})}}(xe=Je||(Je={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new wr([4294967295,4294967295],0);function Cg(t){const e=oN().encode(t),n=new Fy;return n.update(e),new Uint8Array(n.digest())}function Ig(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wr([n,r],0),new wr([s,o],0)]}class Sf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zi(`Invalid padding: ${n}`);if(r<0)throw new Zi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=wr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(wr.fromNumber(r)));return s.compare(aN)===1&&(s=new wr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Cg(e),[r,s]=Ig(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(r,s,o);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Sf(o,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.ge===0)return;const n=Cg(e),[r,s]=Ig(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(r,s,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Xo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dc(se.min(),s,new qe(pe),Wn(),ge())}}class Xo{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xo(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class bv{constructor(e,n){this.targetId=e,this.Ce=n}}class Nv{constructor(e,n,r=vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ag{constructor(){this.ve=0,this.Fe=kg(),this.Me=vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ge(),n=ge(),r=ge();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:o})}}),new Xo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=kg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Wn(),this.Je=Ga(),this.He=Ga(),this.Ye=new qe(pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(nh(o))if(r===0){const a=new Z(o.path);this.et(n,a,Nt.newNoDocument(a,se.min()))}else Ee(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let a,c;try{a=Sr(r).toUint8Array()}catch(u){if(u instanceof Xy)return ri("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Sf(a,s,o)}catch(u){return ri(u instanceof Zi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(n,o,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const c=this.ot(a);if(c){if(o.current&&nh(c.target)){const u=new Z(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Nt.newNoDocument(u,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let r=ge();this.He.forEach((o,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const s=new Dc(e,n,this.Ye,this.je,r);return this.je=Wn(),this.Je=Ga(),this.He=Ga(),this.Ye=new qe(pe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ag,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new it(pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new it(pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ag),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ga(){return new qe(Z.comparator)}function kg(){return new qe(Z.comparator)}const cN={asc:"ASCENDING",desc:"DESCENDING"},uN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dN={and:"AND",or:"OR"};class hN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sh(t,e){return t.useProto3Json||Nc(e)?e:{value:e}}function ec(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fN(t,e){return ec(t,e.toTimestamp())}function Cn(t){return Ee(!!t,49232),se.fromTimestamp(function(n){const r=Tr(n);return new Le(r.seconds,r.nanos)}(t))}function Cf(t,e){return ih(t,e).canonicalString()}function ih(t,e){const n=function(s){return new De(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Sv(t){const e=De.fromString(t);return Ee(Pv(e),10190,{key:e.toString()}),e}function oh(t,e){return Cf(t.databaseId,e.path)}function Bu(t,e){const n=Sv(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(Iv(n))}function Cv(t,e){return Cf(t.databaseId,e)}function mN(t){const e=Sv(t);return e.length===4?De.emptyPath():Iv(e)}function ah(t){return new De(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Iv(t){return Ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Pg(t,e,n){return{name:oh(t,e),fields:n.value.mapValue.fields}}function pN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(d,m){return d.useProto3Json?(Ee(m===void 0||typeof m=="string",58123),vt.fromBase64String(m||"")):(Ee(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),vt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const m=d.code===void 0?B.UNKNOWN:Ev(d.code);return new Y(m,d.message||"")}(a);n=new Nv(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Bu(t,r.document.name),o=Cn(r.document.updateTime),a=r.document.createTime?Cn(r.document.createTime):se.min(),c=new Dt({mapValue:{fields:r.document.fields}}),u=Nt.newFoundDocument(s,o,a,c),d=r.targetIds||[],m=r.removedTargetIds||[];n=new pl(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Bu(t,r.document),o=r.readTime?Cn(r.readTime):se.min(),a=Nt.newNoDocument(s,o),c=r.removedTargetIds||[];n=new pl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Bu(t,r.document),o=r.removedTargetIds||[];n=new pl([],o,s,null)}else{if(!("filter"in e))return te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,a=new sN(s,o),c=r.targetId;n=new bv(c,a)}}return n}function gN(t,e){let n;if(e instanceof Yo)n={update:Pg(t,e.key,e.value)};else if(e instanceof Rc)n={delete:oh(t,e.key)};else if(e instanceof Mr)n={update:Pg(t,e.key,e.data),updateMask:NN(e.fieldMask)};else{if(!(e instanceof tN))return te(16599,{Vt:e.type});n={verify:oh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const c=a.transform;if(c instanceof Jl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof zo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof $o)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Zl)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw te(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:fN(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:te(27497)}(t,e.precondition)),n}function xN(t,e){return t&&t.length>0?(Ee(e!==void 0,14353),t.map(n=>function(s,o){let a=s.updateTime?Cn(s.updateTime):Cn(o);return a.isEqual(se.min())&&(a=Cn(o)),new Jb(a,s.transformResults||[])}(n,e))):[]}function yN(t,e){return{documents:[Cv(t,e.path)]}}function vN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Cv(t,s);const o=function(d){if(d.length!==0)return kv(Pn.create(d,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(d){if(d.length!==0)return d.map(m=>function(f){return{field:Ss(f.field),direction:jN(f.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=sh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function wN(t){let e=mN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ee(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(p){const f=Av(p);return f instanceof Pn&&av(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(f=>function(j){return new Xl(Cs(j.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(f))}(n.orderBy));let c=null;n.limit&&(c=function(p){let f;return f=typeof p=="object"?p.value:p,Nc(f)?null:f}(n.limit));let u=null;n.startAt&&(u=function(p){const f=!!p.before,v=p.values||[];return new Yl(v,f)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const f=!p.before,v=p.values||[];return new Yl(v,f)}(n.endAt)),Ob(e,s,a,o,c,"F",u,d)}function _N(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Av(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Cs(n.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Cs(n.unaryFilter.field);return rt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Cs(n.unaryFilter.field);return rt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Cs(n.unaryFilter.field);return rt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return rt.create(Cs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pn.create(n.compositeFilter.filters.map(r=>Av(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function jN(t){return cN[t]}function EN(t){return uN[t]}function bN(t){return dN[t]}function Ss(t){return{fieldPath:t.canonicalString()}}function Cs(t){return gt.fromServerFormat(t.fieldPath)}function kv(t){return t instanceof rt?function(n){if(n.op==="=="){if(vg(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NAN"}};if(yg(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vg(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NOT_NAN"}};if(yg(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ss(n.field),op:EN(n.op),value:n.value}}}(t):t instanceof Pn?function(n){const r=n.getFilters().map(s=>kv(s));return r.length===1?r[0]:{compositeFilter:{op:bN(n.op),filters:r}}}(t):te(54877,{filter:t})}function NN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Pv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n,r,s,o=se.min(),a=se.min(),c=vt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.yt=e}}function SN(t){const e=wN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.Cn=new IN}addToCollectionParentIndex(e,n){return this.Cn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Nr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class IN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new it(De.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new it(De.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rv=41943040;class Pt{static withCacheSize(e){return new Pt(e,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(Rv,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ai(0)}static cr(){return new ai(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="LruGarbageCollector",AN=1048576;function Lg([t,e],[n,r]){const s=pe(t,n);return s===0?pe(e,r):s}class kN{constructor(e){this.Ir=e,this.buffer=new it(Lg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Lg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class PN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Q(Dg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xi(n)?Q(Dg,"Ignoring IndexedDB error during garbage collection: ",n):await gi(n)}await this.Vr(3e5)})}}class RN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(bc.ce);const r=new kN(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Rg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rg):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,o,a,c,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Ns()<=ye.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:p})))}}function DN(t,e){return new RN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.changes=new xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&po(r.mutation,s,$t.empty(),Le.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=ts();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let a=Ji();return o.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let o=Wn();const a=mo(),c=function(){return mo()}();return n.forEach((u,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof Mr)?o=o.insert(d.key,d):m!==void 0?(a.set(d.key,m.mutation.getFieldMask()),po(m.mutation,d,m.mutation.getFieldMask(),Le.now())):a.set(d.key,$t.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,m)=>a.set(d,m)),n.forEach((d,m)=>c.set(d,new VN(m,a.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=mo();let s=new qe((a,c)=>a-c),o=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||$t.empty();m=c.applyToLocalView(d,m),r.set(u,m);const p=(s.get(c.batchId)||ge()).add(u);s=s.insert(c.batchId,p)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,p=pv();m.forEach(f=>{if(!o.has(f)){const v=_v(n.get(f),r.get(f));v!==null&&p.set(f,v),o=o.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return F.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return Z.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Fb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):F.resolve(ts());let c=Oo,u=o;return a.next(d=>F.forEach(d,(m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(m)?F.resolve():this.remoteDocumentCache.getEntry(e,m).next(f=>{u=u.insert(m,f)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,ge())).next(m=>({batchId:c,changes:mv(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let s=Ji();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let a=Ji();return this.indexManager.getCollectionParents(e,o).next(c=>F.forEach(c,u=>{const d=function(p,f){return new Sc(f,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((p,f)=>{a=a.insert(p,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(a=>{o.forEach((u,d)=>{const m=d.getKey();a.get(m)===null&&(a=a.insert(m,Nt.newInvalidDocument(m)))});let c=Ji();return a.forEach((u,d)=>{const m=o.get(u);m!==void 0&&po(m.mutation,d,$t.empty(),Le.now()),Ac(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return F.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Cn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:SN(s.bundledQuery),readTime:Cn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.overlays=new qe(Z.comparator),this.qr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ts();return F.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=ts(),o=n.length+1,a=new Z(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new qe((d,m)=>d-m);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=o.get(d.largestBatchId);m===null&&(m=ts(),o=o.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=ts(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=s)););return F.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new rN(n,r));let o=this.qr.get(n);o===void 0&&(o=ge(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this.Qr=new it(lt.$r),this.Ur=new it(lt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new lt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new lt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Z(new De([])),r=new lt(n,e),s=new lt(n,e+1),o=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Z(new De([])),r=new lt(n,e),s=new lt(n,e+1);let o=ge();return this.Ur.forEachInRange([r,s],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new lt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class lt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Z.comparator(e.key,n.key)||pe(e.Yr,n.Yr)}static Kr(e,n){return pe(e.Yr,n.Yr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new it(lt.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new nN(o,n,r,s);this.mutationQueue.push(a);for(const c of s)this.Zr=this.Zr.add(new lt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),o=s<0?0:s;return F.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?wf:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new lt(n,0),s=new lt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],a=>{const c=this.Xr(a.Yr);o.push(c)}),F.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(pe);return n.forEach(s=>{const o=new lt(s,0),a=new lt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],c=>{r=r.add(c.Yr)})}),F.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Z.isDocumentKey(o)||(o=o.child(""));const a=new lt(new Z(o),0);let c=new it(pe);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},a),F.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ee(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return F.forEach(n.mutations,s=>{const o=new lt(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new lt(n,0),s=this.Zr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.ri=e,this.docs=function(){return new qe(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Nt.newInvalidDocument(n))}getEntries(e,n){let r=Wn();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Nt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Wn();const a=n.path,c=new Z(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||gb(pb(m),r)<=0||(s.has(m.key)||Ac(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return F.resolve(o)}getAllFromCollectionGroup(e,n,r,s){te(9500)}ii(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $N(this)}getSize(e){return F.resolve(this.size)}}class $N extends LN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.persistence=e,this.si=new xs(n=>Ef(n),bf),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.oi=0,this._i=new If,this.targetCount=0,this.ai=ai.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),F.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ai(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Pr(n),F.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.si.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),F.waitFor(o).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(a=>{o.push(s.markPotentiallyOrphaned(e,a))}),F.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,n){this.ui={},this.overlays={},this.ci=new bc(0),this.li=!1,this.li=!0,this.hi=new UN,this.referenceDelegate=e(this),this.Pi=new qN(this),this.indexManager=new CN,this.remoteDocumentCache=function(s){return new zN(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new TN(n),this.Ii=new ON(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new FN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new BN(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new HN(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(e,n){return F.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class HN extends yb{constructor(e){super(),this.currentSequenceNumber=e}}class Af{constructor(e){this.persistence=e,this.Ri=new If,this.Vi=null}static mi(e){return new Af(e)}get fi(){if(this.Vi)return this.Vi;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,r=>{const s=Z.fromPath(r);return this.gi(e,s).next(o=>{o||n.removeEntry(s,se.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class tc{constructor(e,n){this.persistence=e,this.pi=new xs(r=>_b(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=DN(this,n)}static mi(e,n){return new tc(e,n)}Ei(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return F.forEach(this.pi,(r,s)=>this.br(e,r,s).next(o=>o?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(c=>{c||(r++,o.removeEntry(a,se.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=hl(e.data.value)),n}br(e,n,r){return F.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ge(),s=ge();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new kf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Mj()?8:vb(Lj())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,s,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new WN;return this.Ss(e,n,a).next(c=>{if(o.result=c,this.Vs)return this.bs(e,n,a,c.size)})}).next(()=>o.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ns()<=ye.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Ts(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(Ns()<=ye.DEBUG&&Q("QueryEngine","Query:",Ts(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ns()<=ye.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Ts(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(n))):F.resolve())}ys(e,n){if(Eg(n))return F.resolve(null);let r=Sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=rh(n,null,"F"),r=Sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=ge(...o);return this.ps.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,a,u.readTime)?this.ys(e,rh(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return Eg(n)||s.isEqual(se.min())?F.resolve(null):this.ps.getDocuments(e,r).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,r,s)?F.resolve(null):(Ns()<=ye.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ts(n)),this.vs(e,a,n,mb(s,Oo)).next(c=>c))})}Ds(e,n){let r=new it(hv(e));return n.forEach((s,o)=>{Ac(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return Ns()<=ye.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Ts(n)),this.ps.getDocumentsMatchingQuery(e,n,Nr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="LocalStore",GN=3e8;class KN{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new qe(pe),this.xs=new xs(o=>Ef(o),bf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function YN(t,e,n,r){return new KN(t,e,n,r)}async function Lv(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],c=[];let u=ge();for(const d of s){a.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of o){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:c}))})})}function XN(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,m){const p=d.batch,f=p.keys();let v=F.resolve();return f.forEach(j=>{v=v.next(()=>m.getEntry(u,j)).next(I=>{const C=d.docVersions.get(j);Ee(C!==null,48541),I.version.compareTo(C)<0&&(p.applyToRemoteDocument(I,d),I.isValidDocument()&&(I.setReadTime(d.commitVersion),m.addEntry(I)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ge();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Vv(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function JN(t,e){const n=ae(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((m,p)=>{const f=s.get(p);if(!f)return;c.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,p)));let v=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(vt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):m.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(m.resumeToken,r)),s=s.insert(p,v),function(I,C,x){return I.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=GN?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,v,m)&&c.push(n.Pi.updateTargetData(o,v))});let u=Wn(),d=ge();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(ZN(o,a,e.documentUpdates).next(m=>{u=m.ks,d=m.qs})),!r.isEqual(se.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return F.waitFor(c).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(n.Ms=s,o))}function ZN(t,e,n){let r=ge(),s=ge();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let a=Wn();return n.forEach((c,u)=>{const d=o.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):Q(Pf,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:a,qs:s}})}function eT(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tT(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(o=>o?(s=o,F.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new lr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function lh(t,e,n){const r=ae(t),s=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!xi(a))throw a;Q(Pf,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Vg(t,e,n){const r=ae(t);let s=se.min(),o=ge();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,m){const p=ae(u),f=p.xs.get(m);return f!==void 0?F.resolve(p.Ms.get(f)):p.Pi.getTargetData(d,m)}(r,a,Sn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,c.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:se.min(),n?o:ge())).next(c=>(nT(r,Bb(e),c),{documents:c,Qs:o})))}function nT(t,e,n){let r=t.Os.get(e)||se.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class Mg{constructor(){this.activeTargetIds=Qb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rT{constructor(){this.Mo=new Mg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="ConnectivityMonitor";class Fg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Q(Og,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Q(Og,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka=null;function ch(){return Ka===null?Ka=function(){return 268435456+Math.round(2147483648*Math.random())}():Ka++,"0x"+Ka.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu="RestConnection",iT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oT{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Gl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,o){const a=ch(),c=this.zo(e,n.toUriEncodedString());Q(zu,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,o);const{host:d}=new URL(c),m=pf(d);return this.Jo(e,c,u,r,m).then(p=>(Q(zu,`Received RPC '${e}' ${a}: `,p),p),p=>{throw ri(zu,`RPC '${e}' ${a} failed with error: `,p,"url: ",c,"request:",r),p})}Ho(e,n,r,s,o,a){return this.Go(e,n,r,s,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}zo(e,n){const r=iT[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class lT extends oT{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const a=ch();return new Promise((c,u)=>{const d=new Uy;d.setWithCredentials(!0),d.listenOnce(By.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case dl.NO_ERROR:const p=d.getResponseJson();Q(jt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),c(p);break;case dl.TIMEOUT:Q(jt,`RPC '${e}' ${a} timed out`),u(new Y(B.DEADLINE_EXCEEDED,"Request time out"));break;case dl.HTTP_ERROR:const f=d.getStatus();if(Q(jt,`RPC '${e}' ${a} failed with status:`,f,"response text:",d.getResponseText()),f>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const j=v==null?void 0:v.error;if(j&&j.status&&j.message){const I=function(x){const _=x.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(_)>=0?_:B.UNKNOWN}(j.status);u(new Y(I,j.message))}else u(new Y(B.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Y(B.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Q(jt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(s);Q(jt,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",m,r,15)})}T_(e,n,r){const s=ch(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=qy(),c=$y(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=o.join("");Q(jt,`Creating RPC '${e}' stream ${s}: ${m}`,u);const p=a.createWebChannel(m,u);this.I_(p);let f=!1,v=!1;const j=new aT({Yo:C=>{v?Q(jt,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(f||(Q(jt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),f=!0),Q(jt,`RPC '${e}' stream ${s} sending:`,C),p.send(C))},Zo:()=>p.close()}),I=(C,x,_)=>{C.listen(x,E=>{try{_(E)}catch(k){setTimeout(()=>{throw k},0)}})};return I(p,Xi.EventType.OPEN,()=>{v||(Q(jt,`RPC '${e}' stream ${s} transport opened.`),j.o_())}),I(p,Xi.EventType.CLOSE,()=>{v||(v=!0,Q(jt,`RPC '${e}' stream ${s} transport closed`),j.a_(),this.E_(p))}),I(p,Xi.EventType.ERROR,C=>{v||(v=!0,ri(jt,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),j.a_(new Y(B.UNAVAILABLE,"The operation could not be completed")))}),I(p,Xi.EventType.MESSAGE,C=>{var x;if(!v){const _=C.data[0];Ee(!!_,16349);const E=_,k=(E==null?void 0:E.error)||((x=E[0])==null?void 0:x.error);if(k){Q(jt,`RPC '${e}' stream ${s} received error:`,k);const L=k.status;let P=function(T){const A=Je[T];if(A!==void 0)return Ev(A)}(L),y=k.message;P===void 0&&(P=B.INTERNAL,y="Unknown error status: "+L+" with message "+k.message),v=!0,j.a_(new Y(P,y)),p.close()}else Q(jt,`RPC '${e}' stream ${s} received:`,_),j.u_(_)}}),I(c,zy.STAT_EVENT,C=>{C.stat===Xd.PROXY?Q(jt,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===Xd.NOPROXY&&Q(jt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{j.__()},0),j}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function $u(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(t){return new hN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="PersistentStream";class Ov{constructor(e,n,r,s,o,a,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Mv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Hn(n.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Y(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Q(Ug,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Q(Ug,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cT extends Ov{constructor(e,n,r,s,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=pN(this.serializer,e),r=function(o){if(!("targetChange"in o))return se.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?se.min():a.readTime?Cn(a.readTime):se.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=ah(this.serializer),n.addTarget=function(o,a){let c;const u=a.target;if(c=nh(u)?{documents:yN(o,u)}:{query:vN(o,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Tv(o,a.resumeToken);const d=sh(o,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(se.min())>0){c.readTime=ec(o,a.snapshotVersion.toTimestamp());const d=sh(o,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=_N(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=ah(this.serializer),n.removeTarget=e,this.q_(n)}}class uT extends Ov{constructor(e,n,r,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=xN(e.writeResults,e.commitTime),r=Cn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ah(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>gN(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{}class hT extends dT{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Y(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,ih(n,r),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(B.UNKNOWN,o.toString())})}Ho(e,n,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Ho(e,ih(n,r),s,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Y(B.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class fT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hn(n),this.aa=!1):Q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="RemoteStore";class mT{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{ys(this)&&(Q(ds,"Restarting streams for network reachability change."),await async function(u){const d=ae(u);d.Ea.add(4),await Jo(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Vc(d)}(this))})}),this.Ra=new fT(r,s)}}async function Vc(t){if(ys(t))for(const e of t.da)await e(!0)}async function Jo(t){for(const e of t.da)await e(!1)}function Fv(t,e){const n=ae(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Vf(n)?Lf(n):yi(n).O_()&&Df(n,e))}function Rf(t,e){const n=ae(t),r=yi(n);n.Ia.delete(e),r.O_()&&Uv(n,e),n.Ia.size===0&&(r.O_()?r.L_():ys(n)&&n.Ra.set("Unknown"))}function Df(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yi(t).Y_(e)}function Uv(t,e){t.Va.Ue(e),yi(t).Z_(e)}function Lf(t){t.Va=new lN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),yi(t).start(),t.Ra.ua()}function Vf(t){return ys(t)&&!yi(t).x_()&&t.Ia.size>0}function ys(t){return ae(t).Ea.size===0}function Bv(t){t.Va=void 0}async function pT(t){t.Ra.set("Online")}async function gT(t){t.Ia.forEach((e,n)=>{Df(t,e)})}async function xT(t,e){Bv(t),Vf(t)?(t.Ra.ha(e),Lf(t)):t.Ra.set("Unknown")}async function yT(t,e,n){if(t.Ra.set("Online"),e instanceof Nv&&e.state===2&&e.cause)try{await async function(s,o){const a=o.cause;for(const c of o.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){Q(ds,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nc(t,r)}else if(e instanceof pl?t.Va.Ze(e):e instanceof bv?t.Va.st(e):t.Va.tt(e),!n.isEqual(se.min()))try{const r=await Vv(t.localStore);n.compareTo(r)>=0&&await function(o,a){const c=o.Va.Tt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=o.Ia.get(d);m&&o.Ia.set(d,m.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const m=o.Ia.get(u);if(!m)return;o.Ia.set(u,m.withResumeToken(vt.EMPTY_BYTE_STRING,m.snapshotVersion)),Uv(o,u);const p=new lr(m.target,u,d,m.sequenceNumber);Df(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Q(ds,"Failed to raise snapshot:",r),await nc(t,r)}}async function nc(t,e,n){if(!xi(e))throw e;t.Ea.add(1),await Jo(t),t.Ra.set("Offline"),n||(n=()=>Vv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(ds,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Vc(t)})}function zv(t,e){return e().catch(n=>nc(t,n,e))}async function Mc(t){const e=ae(t),n=Ir(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wf;for(;vT(e);)try{const s=await eT(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,wT(e,s)}catch(s){await nc(e,s)}$v(e)&&qv(e)}function vT(t){return ys(t)&&t.Ta.length<10}function wT(t,e){t.Ta.push(e);const n=Ir(t);n.O_()&&n.X_&&n.ea(e.mutations)}function $v(t){return ys(t)&&!Ir(t).x_()&&t.Ta.length>0}function qv(t){Ir(t).start()}async function _T(t){Ir(t).ra()}async function jT(t){const e=Ir(t);for(const n of t.Ta)e.ea(n.mutations)}async function ET(t,e,n){const r=t.Ta.shift(),s=Tf.from(r,e,n);await zv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Mc(t)}async function bT(t,e){e&&Ir(t).X_&&await async function(r,s){if(function(a){return iN(a)&&a!==B.ABORTED}(s.code)){const o=r.Ta.shift();Ir(r).B_(),await zv(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Mc(r)}}(t,e),$v(t)&&qv(t)}async function Bg(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),Q(ds,"RemoteStore received new credentials");const r=ys(n);n.Ea.add(3),await Jo(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Vc(n)}async function NT(t,e){const n=ae(t);e?(n.Ea.delete(2),await Vc(n)):e||(n.Ea.add(2),await Jo(n),n.Ra.set("Unknown"))}function yi(t){return t.ma||(t.ma=function(n,r,s){const o=ae(n);return o.sa(),new cT(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:pT.bind(null,t),t_:gT.bind(null,t),r_:xT.bind(null,t),H_:yT.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Vf(t)?Lf(t):t.Ra.set("Unknown")):(await t.ma.stop(),Bv(t))})),t.ma}function Ir(t){return t.fa||(t.fa=function(n,r,s){const o=ae(n);return o.sa(),new uT(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_T.bind(null,t),r_:bT.bind(null,t),ta:jT.bind(null,t),na:ET.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Mc(t)):(await t.fa.stop(),t.Ta.length>0&&(Q(ds,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const a=Date.now()+r,c=new Mf(e,n,a,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Of(t,e){if(Hn("AsyncQueue",`${e}: ${t}`),xi(t))return new Y(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{static emptySet(e){return new Gs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=Ji(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Gs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Gs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(){this.ga=new qe(Z.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class li{constructor(e,n,r,s,o,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,o){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new li(e,n,Gs.emptySet(n),a,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ic(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class ST{constructor(){this.queries=$g(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ae(n),o=s.queries;s.queries=$g(),o.forEach((a,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new Y(B.ABORTED,"Firestore shutting down"))}}function $g(){return new xs(t=>dv(t),Ic)}async function Hv(t,e){const n=ae(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new TT,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=Of(a,`Initialization of query '${Ts(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Ff(n)}async function Wv(t,e){const n=ae(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function CT(t,e){const n=ae(t);let r=!1;for(const s of e){const o=s.query,a=n.queries.get(o);if(a){for(const c of a.Sa)c.Fa(s)&&(r=!0);a.wa=s}}r&&Ff(n)}function IT(t,e,n){const r=ae(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function Ff(t){t.Ca.forEach(e=>{e.next()})}var uh,qg;(qg=uh||(uh={})).Ma="default",qg.Cache="cache";class Qv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new li(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=li.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==uh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e){this.key=e}}class Kv{constructor(e){this.key=e}}class AT{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ge(),this.mutatedKeys=ge(),this.eu=hv(e),this.tu=new Gs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new zg,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const f=s.get(m),v=Ac(this.query,p)?p:null,j=!!f&&this.mutatedKeys.has(f.key),I=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let C=!1;f&&v?f.data.isEqual(v.data)?j!==I&&(r.track({type:3,doc:v}),C=!0):this.su(f,v)||(r.track({type:2,doc:v}),C=!0,(u&&this.eu(v,u)>0||d&&this.eu(v,d)<0)&&(c=!0)):!f&&v?(r.track({type:0,doc:v}),C=!0):f&&!v&&(r.track({type:1,doc:f}),C=!0,(u||d)&&(c=!0)),C&&(v?(a=a.add(v),o=I?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:a,iu:r,Cs:c,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,p)=>function(v,j){const I=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Rt:C})}};return I(v)-I(j)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,a.length!==0||d?{snapshot:new li(this.query,e.tu,o,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Kv(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Gv(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return li.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Uf="SyncEngine";class kT{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class PT{constructor(e){this.key=e,this.hu=!1}}class RT{constructor(e,n,r,s,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new xs(c=>dv(c),Ic),this.Iu=new Map,this.Eu=new Set,this.du=new qe(Z.comparator),this.Au=new Map,this.Ru=new If,this.Vu={},this.mu=new Map,this.fu=ai.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function DT(t,e,n=!0){const r=t1(t);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await Yv(r,e,n,!0),s}async function LT(t,e){const n=t1(t);await Yv(n,e,!0,!1)}async function Yv(t,e,n,r){const s=await tT(t.localStore,Sn(e)),o=s.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let c;return r&&(c=await VT(t,e,o,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Fv(t.remoteStore,s),c}async function VT(t,e,n,r,s){t.pu=(p,f,v)=>async function(I,C,x,_){let E=C.view.ru(x);E.Cs&&(E=await Vg(I.localStore,C.query,!1).then(({documents:y})=>C.view.ru(y,E)));const k=_&&_.targetChanges.get(C.targetId),L=_&&_.targetMismatches.get(C.targetId)!=null,P=C.view.applyChanges(E,I.isPrimaryClient,k,L);return Wg(I,C.targetId,P.au),P.snapshot}(t,p,f,v);const o=await Vg(t.localStore,e,!0),a=new AT(e,o.Qs),c=a.ru(o.documents),u=Xo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);Wg(t,n,d.au);const m=new kT(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function MT(t,e,n){const r=ae(t),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter(a=>!Ic(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await lh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Rf(r.remoteStore,s.targetId),dh(r,s.targetId)}).catch(gi)):(dh(r,s.targetId),await lh(r.localStore,s.targetId,!0))}async function OT(t,e){const n=ae(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rf(n.remoteStore,r.targetId))}async function FT(t,e,n){const r=WT(t);try{const s=await function(a,c){const u=ae(a),d=Le.now(),m=c.reduce((v,j)=>v.add(j.key),ge());let p,f;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let j=Wn(),I=ge();return u.Ns.getEntries(v,m).next(C=>{j=C,j.forEach((x,_)=>{_.isValidDocument()||(I=I.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,j)).next(C=>{p=C;const x=[];for(const _ of c){const E=eN(_,p.get(_.key).overlayedDocument);E!=null&&x.push(new Mr(_.key,E,sv(E.value.mapValue),Ft.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,x,c)}).next(C=>{f=C;const x=C.applyToLocalDocumentSet(p,I);return u.documentOverlayCache.saveOverlays(v,C.batchId,x)})}).then(()=>({batchId:f.batchId,changes:mv(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Vu[a.currentUser.toKey()];d||(d=new qe(pe)),d=d.insert(c,u),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await Zo(r,s.changes),await Mc(r.remoteStore)}catch(s){const o=Of(s,"Failed to persist write");n.reject(o)}}async function Xv(t,e){const n=ae(t);try{const r=await JN(n.localStore,e);e.targetChanges.forEach((s,o)=>{const a=n.Au.get(o);a&&(Ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Ee(a.hu,14607):s.removedDocuments.size>0&&(Ee(a.hu,42227),a.hu=!1))}),await Zo(n,r,e)}catch(r){await gi(r)}}function Hg(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((o,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=ae(a);u.onlineState=c;let d=!1;u.queries.forEach((m,p)=>{for(const f of p.Sa)f.va(c)&&(d=!0)}),d&&Ff(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UT(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),o=s&&s.key;if(o){let a=new qe(Z.comparator);a=a.insert(o,Nt.newNoDocument(o,se.min()));const c=ge().add(o),u=new Dc(se.min(),new Map,new qe(pe),a,c);await Xv(r,u),r.du=r.du.remove(o),r.Au.delete(e),Bf(r)}else await lh(r.localStore,e,!1).then(()=>dh(r,e,n)).catch(gi)}async function BT(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await XN(n.localStore,e);Zv(n,r,null),Jv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zo(n,s)}catch(s){await gi(s)}}async function zT(t,e,n){const r=ae(t);try{const s=await function(a,c){const u=ae(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(Ee(p!==null,37113),m=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);Zv(r,e,n),Jv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Zo(r,s)}catch(s){await gi(s)}}function Jv(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Zv(t,e,n){const r=ae(t);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function dh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||e1(t,r)})}function e1(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Rf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Bf(t))}function Wg(t,e,n){for(const r of n)r instanceof Gv?(t.Ru.addReference(r.key,e),$T(t,r)):r instanceof Kv?(Q(Uf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||e1(t,r.key)):te(19791,{wu:r})}function $T(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Q(Uf,"New document in limbo: "+n),t.Eu.add(r),Bf(t))}function Bf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Z(De.fromString(e)),r=t.fu.next();t.Au.set(r,new PT(n)),t.du=t.du.insert(n,r),Fv(t.remoteStore,new lr(Sn(Cc(n.path)),r,"TargetPurposeLimboResolution",bc.ce))}}async function Zo(t,e,n){const r=ae(t),s=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{a.push(r.pu(u,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=kf.As(u.targetId,d);o.push(p)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(u,d){const m=ae(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(d,f=>F.forEach(f.Es,v=>m.persistence.referenceDelegate.addReference(p,f.targetId,v)).next(()=>F.forEach(f.ds,v=>m.persistence.referenceDelegate.removeReference(p,f.targetId,v)))))}catch(p){if(!xi(p))throw p;Q(Pf,"Failed to update sequence numbers: "+p)}for(const p of d){const f=p.targetId;if(!p.fromCache){const v=m.Ms.get(f),j=v.snapshotVersion,I=v.withLastLimboFreeSnapshotVersion(j);m.Ms=m.Ms.insert(f,I)}}}(r.localStore,o))}async function qT(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){Q(Uf,"User change. New user:",e.toKey());const r=await Lv(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new Y(B.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Zo(n,r.Ls)}}function HT(t,e){const n=ae(t),r=n.Au.get(e);if(r&&r.hu)return ge().add(r.key);{let s=ge();const o=n.Iu.get(e);if(!o)return s;for(const a of o){const c=n.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function t1(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UT.bind(null,e),e.Pu.H_=CT.bind(null,e.eventManager),e.Pu.yu=IT.bind(null,e.eventManager),e}function WT(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zT.bind(null,e),e}class rc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return YN(this.persistence,new QN,e.initialUser,this.serializer)}Cu(e){return new Dv(Af.mi,this.serializer)}Du(e){return new rT}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rc.provider={build:()=>new rc};class QT extends rc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ee(this.persistence.referenceDelegate instanceof tc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new PN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new Dv(r=>tc.mi(r,n),this.serializer)}}class hh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qT.bind(null,this.syncEngine),await NT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ST}()}createDatastore(e){const n=Lc(e.databaseInfo.databaseId),r=function(o){return new lT(o)}(e.databaseInfo);return function(o,a,c,u){return new hT(o,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,a,c){return new mT(r,s,o,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Hg(this.syncEngine,n,0),function(){return Fg.v()?new Fg:new sT}())}createSyncEngine(e,n){return function(s,o,a,c,u,d,m){const p=new RT(s,o,a,c,u,d);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=ae(s);Q(ds,"RemoteStore shutting down."),o.Ea.add(5),await Jo(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}hh.provider={build:()=>new hh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="FirestoreClient";class GT{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Et.UNAUTHENTICATED,this.clientId=yf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{Q(Ar,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Q(Ar,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Of(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qu(t,e){t.asyncQueue.verifyOperationInProgress(),Q(Ar,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Lv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Qg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await KT(t);Q(Ar,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Bg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Bg(e.remoteStore,s)),t._onlineComponents=e}async function KT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(Ar,"Using user provided OfflineComponentProvider");try{await qu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ri("Error using user provided cache. Falling back to memory cache: "+n),await qu(t,new rc)}}else Q(Ar,"Using default OfflineComponentProvider"),await qu(t,new QT(void 0));return t._offlineComponents}async function r1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(Ar,"Using user provided OnlineComponentProvider"),await Qg(t,t._uninitializedComponentsProvider._online)):(Q(Ar,"Using default OnlineComponentProvider"),await Qg(t,new hh))),t._onlineComponents}function YT(t){return r1(t).then(e=>e.syncEngine)}async function fh(t){const e=await r1(t),n=e.eventManager;return n.onListen=DT.bind(null,e.syncEngine),n.onUnlisten=MT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=LT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OT.bind(null,e.syncEngine),n}function XT(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,c,u,d){const m=new n1({next:f=>{m.Nu(),a.enqueueAndForget(()=>Wv(o,p));const v=f.docs.has(c);!v&&f.fromCache?d.reject(new Y(B.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&f.fromCache&&u&&u.source==="server"?d.reject(new Y(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(f)},error:f=>d.reject(f)}),p=new Qv(Cc(c.path),m,{includeMetadataChanges:!0,qa:!0});return Hv(o,p)}(await fh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="firestore.googleapis.com",Kg=!0;class Yg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=i1,this.ssl=Kg}else this.host=e.host,this.ssl=e.ssl??Kg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Rv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AN)throw new Y(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=s1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Oc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rb;switch(r.type){case"firstParty":return new ab(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gg.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Gg.delete(n),r.terminate())}(this),Promise.resolve()}}function JT(t,e,n,r={}){var d;t=sn(t,Oc);const s=pf(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Aj(`https://${c}`),Dj("Firestore",!0)),o.host!==i1&&o.host!==c&&ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:c,ssl:s,emulatorOptions:r};if(!ql(u,a)&&(t._setSettings(u),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=Et.MOCK_USER;else{m=kj(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Y(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Et(f)}t._authCredentials=new sb(new Wy(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fc(this.firestore,e,this._query)}}class Ke{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ke(this.firestore,e,this._key)}toJSON(){return{type:Ke._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ko(n,Ke._jsonSchema))return new Ke(e,r||null,new Z(De.fromString(n.referencePath)))}}Ke._jsonSchemaVersion="firestore/documentReference/1.0",Ke._jsonSchema={type:et("string",Ke._jsonSchemaVersion),referencePath:et("string")};class jr extends Fc{constructor(e,n,r){super(e,n,Cc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ke(this.firestore,null,new Z(e))}withConverter(e){return new jr(this.firestore,e,this._path)}}function ZT(t,e,...n){if(t=gn(t),Qy("collection","path",e),t instanceof Oc){const r=De.fromString(e,...n);return ug(r),new jr(t,null,r)}{if(!(t instanceof Ke||t instanceof jr))throw new Y(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(De.fromString(e,...n));return ug(r),new jr(t.firestore,null,r)}}function qi(t,e,...n){if(t=gn(t),arguments.length===1&&(e=yf.newId()),Qy("doc","path",e),t instanceof Oc){const r=De.fromString(e,...n);return cg(r),new Ke(t,null,new Z(r))}{if(!(t instanceof Ke||t instanceof jr))throw new Y(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(De.fromString(e,...n));return cg(r),new Ke(t.firestore,t instanceof jr?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="AsyncQueue";class Jg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Mv(this,"async_queue_retry"),this._c=()=>{const r=$u();r&&Q(Xg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=$u();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=$u();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new _r;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xi(e))throw e;Q(Xg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Hn("INTERNAL UNHANDLED ERROR: ",Zg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Mf.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&te(47125,{Pc:Zg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Zg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1}(t,["next","error","complete"])}class kr extends Oc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Jg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jg(e),this._firestoreClient=void 0,await e}}}function t0(t,e){const n=typeof t=="object"?t:qE(),r=typeof t=="string"?t:Gl,s=FE(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=Cj("firestore");o&&JT(s,...o)}return s}function Uc(t){if(t._terminated)throw new Y(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eS(t),t._firestoreClient}function eS(t){var r,s,o;const e=t._freezeSettings(),n=function(c,u,d,m){return new bb(c,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,s1(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new GT(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this._byteString=e}static fromBase64String(e){try{return new en(vt.fromBase64String(e))}catch(n){throw new Y(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new en(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:en._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ko(e,en._jsonSchema))return en.fromBase64String(e.bytes)}}en._jsonSchemaVersion="firestore/bytes/1.0",en._jsonSchema={type:et("string",en._jsonSchemaVersion),bytes:et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:In._jsonSchemaVersion}}static fromJSON(e){if(Ko(e,In._jsonSchema))return new In(e.latitude,e.longitude)}}In._jsonSchemaVersion="firestore/geoPoint/1.0",In._jsonSchema={type:et("string",In._jsonSchemaVersion),latitude:et("number"),longitude:et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:An._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ko(e,An._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new An(e.vectorValues);throw new Y(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}An._jsonSchemaVersion="firestore/vectorValue/1.0",An._jsonSchema={type:et("string",An._jsonSchemaVersion),vectorValues:et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=/^__.*__$/;class nS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yo(e,this.data,n,this.fieldTransforms)}}class o1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function a1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ac:t})}}class $f{constructor(e,n,r,s,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $f({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return sc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(a1(this.Ac)&&tS.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rS{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lc(e)}Cc(e,n,r,s=!1){return new $f({Ac:e,methodName:n,Dc:r,path:gt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qf(t){const e=t._freezeSettings(),n=Lc(t._databaseId);return new rS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function l1(t,e,n,r,s,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);Hf("Data must be an object, but it was:",a,r);const c=d1(r,a);let u,d;if(o.merge)u=new $t(a.fieldMask),d=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const p of o.mergeFields){const f=mh(e,p,n);if(!a.contains(f))throw new Y(B.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);f1(m,f)||m.push(f)}u=new $t(m),d=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=a.fieldTransforms;return new nS(new Dt(c),u,d)}class Bc extends zf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bc}}function c1(t,e,n,r){const s=t.Cc(1,e,n);Hf("Data must be an object, but it was:",s,r);const o=[],a=Dt.empty();Vr(r,(u,d)=>{const m=Wf(e,u,n);d=gn(d);const p=s.yc(m);if(d instanceof Bc)o.push(m);else{const f=zc(d,p);f!=null&&(o.push(m),a.set(m,f))}});const c=new $t(o);return new o1(a,c,s.fieldTransforms)}function u1(t,e,n,r,s,o){const a=t.Cc(1,e,n),c=[mh(e,r,n)],u=[s];if(o.length%2!=0)throw new Y(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)c.push(mh(e,o[f])),u.push(o[f+1]);const d=[],m=Dt.empty();for(let f=c.length-1;f>=0;--f)if(!f1(d,c[f])){const v=c[f];let j=u[f];j=gn(j);const I=a.yc(v);if(j instanceof Bc)d.push(v);else{const C=zc(j,I);C!=null&&(d.push(v),m.set(v,C))}}const p=new $t(d);return new o1(m,p,a.fieldTransforms)}function zc(t,e){if(h1(t=gn(t)))return Hf("Unsupported field value:",e,t),d1(t,e);if(t instanceof zf)return function(r,s){if(!a1(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const o=[];let a=0;for(const c of r){let u=zc(c,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=gn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Gb(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Le.fromDate(r);return{timestampValue:ec(s.serializer,o)}}if(r instanceof Le){const o=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ec(s.serializer,o)}}if(r instanceof In)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof en)return{bytesValue:Tv(s.serializer,r._byteString)};if(r instanceof Ke){const o=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Cf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof An)return function(a,c){return{mapValue:{fields:{[nv]:{stringValue:rv},[Kl]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return Nf(c.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${vf(r)}`)}(t,e)}function d1(t,e){const n={};return Yy(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vr(t,(r,s)=>{const o=zc(s,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function h1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof In||t instanceof en||t instanceof Ke||t instanceof zf||t instanceof An)}function Hf(t,e,n){if(!h1(n)||!Gy(n)){const r=vf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function mh(t,e,n){if((e=gn(e))instanceof ea)return e._internalPath;if(typeof e=="string")return Wf(t,e);throw sc("Field path arguments must be of type string or ",t,!1,void 0,n)}const sS=new RegExp("[~\\*/\\[\\]]");function Wf(t,e,n){if(e.search(sS)>=0)throw sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ea(...e.split("."))._internalPath}catch{throw sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sc(t,e,n,r,s){const o=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new Y(B.INVALID_ARGUMENT,c+t+u)}function f1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(p1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iS extends m1{data(){return super.data()}}function p1(t,e){return typeof e=="string"?Wf(t,e):e instanceof ea?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aS{convertValue(e,n="none"){switch(Cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Vr(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,s,o;const n=(o=(s=(r=e.fields)==null?void 0:r[Kl].arrayValue)==null?void 0:s.values)==null?void 0:o.map(a=>Qe(a.doubleValue));return new An(n)}convertGeoPoint(e){return new In(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fo(e));default:return null}}convertTimestamp(e){const n=Tr(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=De.fromString(e);Ee(Pv(r),9688,{name:e});const s=new Uo(r.get(1),r.get(3)),o=new Z(r.popFirst(5));return s.isEqual(n)||Hn(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class eo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ss extends m1{constructor(e,n,r,s,o,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new gl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(p1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ss._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",ss._jsonSchema={type:et("string",ss._jsonSchemaVersion),bundleSource:et("string","DocumentSnapshot"),bundleName:et("string"),bundle:et("string")};class gl extends ss{data(e={}){return super.data(e)}}class Ks{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new eo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new gl(this._firestore,this._userDataWriter,r.key,r,new eo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new gl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new eo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const u=new gl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new eo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:lS(c.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ks._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(t){t=sn(t,Ke);const e=sn(t.firestore,kr);return XT(Uc(e),t._key).then(n=>y1(e,t,n))}Ks._jsonSchemaVersion="firestore/querySnapshot/1.0",Ks._jsonSchema={type:et("string",Ks._jsonSchemaVersion),bundleSource:et("string","QuerySnapshot"),bundleName:et("string"),bundle:et("string")};class x1 extends aS{constructor(e){super(),this.firestore=e}convertBytes(e){return new en(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ke(this.firestore,null,n)}}function uS(t,e,n){t=sn(t,Ke);const r=sn(t.firestore,kr),s=g1(t.converter,e,n);return $c(r,[l1(qf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ft.none())])}function dS(t,e,n,...r){t=sn(t,Ke);const s=sn(t.firestore,kr),o=qf(s);let a;return a=typeof(e=gn(e))=="string"||e instanceof ea?u1(o,"updateDoc",t._key,e,n,r):c1(o,"updateDoc",t._key,e),$c(s,[a.toMutation(t._key,Ft.exists(!0))])}function hS(t){return $c(sn(t.firestore,kr),[new Rc(t._key,Ft.none())])}function fS(t,...e){var u,d,m;t=gn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||e0(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(e0(e[r])){const p=e[r];e[r]=(u=p.next)==null?void 0:u.bind(p),e[r+1]=(d=p.error)==null?void 0:d.bind(p),e[r+2]=(m=p.complete)==null?void 0:m.bind(p)}let o,a,c;if(t instanceof Ke)a=sn(t.firestore,kr),c=Cc(t._key.path),o={next:p=>{e[r]&&e[r](y1(a,t,p))},error:e[r+1],complete:e[r+2]};else{const p=sn(t,Fc);a=sn(p.firestore,kr),c=p._query;const f=new x1(a);o={next:v=>{e[r]&&e[r](new Ks(a,f,p,v))},error:e[r+1],complete:e[r+2]},oS(t._query)}return function(f,v,j,I){const C=new n1(I),x=new Qv(v,C,j);return f.asyncQueue.enqueueAndForget(async()=>Hv(await fh(f),x)),()=>{C.Nu(),f.asyncQueue.enqueueAndForget(async()=>Wv(await fh(f),x))}}(Uc(a),c,s,o)}function $c(t,e){return function(r,s){const o=new _r;return r.asyncQueue.enqueueAndForget(async()=>FT(await YT(r),s,o)),o.promise}(Uc(t),e)}function y1(t,e,n){const r=n.docs.get(e._key),s=new x1(t);return new ss(t,s,e._key,r,new eo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=qf(e)}set(e,n,r){this._verifyNotCommitted();const s=Hu(e,this._firestore),o=g1(s.converter,n,r),a=l1(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,Ft.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=Hu(e,this._firestore);let a;return a=typeof(n=gn(n))=="string"||n instanceof ea?u1(this._dataReader,"WriteBatch.update",o._key,n,r,s):c1(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(a.toMutation(o._key,Ft.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Hu(e,this._firestore);return this._mutations=this._mutations.concat(new Rc(n._key,Ft.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hu(t,e){if((t=gn(t)).firestore!==e)throw new Y(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t){return Uc(t=sn(t,kr)),new mS(t,e=>$c(t,e))}(function(e,n=!0){(function(s){pi=s})($E),Wl(new Vo("firestore",(r,{instanceIdentifier:s,options:o})=>{const a=r.getProvider("app").getImmediate(),c=new kr(new ib(r.getProvider("auth-internal")),new lb(a,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Y(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uo(d.options.projectId,m)}(a,s),a);return o={useFetchStreams:n,...o},c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Qs(ig,og,e),Qs(ig,og,"esm2020")})();const Ya="SPR_TECHFORGE_FIREBASE_CONFIG",n0={apiKey:"AIzaSyDWiI7gQ-sCLiMfoNPAmbqrT_XNAH2SxL8",authDomain:"sprtechforge.firebaseapp.com",projectId:"sprtechforge",storageBucket:"sprtechforge.firebasestorage.app",messagingSenderId:"576106145208",appId:"1:576106145208:web:fcd3c869f30544efca2bcd",measurementId:"G-JN6S6L5KH5"};class gS{constructor(){Sa(this,"app",null);Sa(this,"db",null);Sa(this,"isInitialized",!1);this.tryInit()}tryInit(){try{const e=localStorage.getItem(Ya);let n=n0;if(e&&(n=JSON.parse(e)),n.projectId&&n.apiKey)try{this.app=Yd(n),this.db=t0(this.app),this.isInitialized=!0,console.log("Firebase Firestore Initialized")}catch(r){console.error("Firebase initialization failed:",r),this.isInitialized=!1}}catch(e){console.error("Failed to initialize firebase",e)}}saveConfig(e){localStorage.setItem(Ya,JSON.stringify(e)),window.location.reload()}clearConfig(){localStorage.removeItem(Ya),window.location.reload()}isConfigured(){return this.isInitialized&&!!this.db}getConfig(){const e=localStorage.getItem(Ya);return e?JSON.parse(e):n0}async testConfig(e){try{const n=JSON.parse(e);if(!n.projectId||!n.apiKey||!n.appId)return{success:!1,error:"Invalid Configuration object. Missing projectId, apiKey, or appId."};const r=Yd(n,"testApp"),s=t0(r);try{const o=qi(s,"system_check","connection_test");await cS(o)}catch(o){if(o.code==="unavailable"||o.code==="failed-precondition")return{success:!1,error:"Could not reach Firebase. Check your internet connection."}}return{success:!0}}catch(n){return{success:!1,error:n.message||"Invalid JSON format."}}}sanitizeData(e){if(e==null)return e;if(Array.isArray(e))return e.map(n=>this.sanitizeData(n));if(typeof e=="object"){if(typeof e.toDate=="function")return e.toDate().toISOString();if("seconds"in e&&"nanoseconds"in e&&Object.keys(e).length<=2)return new Date(e.seconds*1e3).toISOString();if(e.firestore&&typeof e.path=="string")return e.path;const n={};return Object.keys(e).forEach(r=>{n[r]=this.sanitizeData(e[r])}),n}return e}cleanForSave(e){return JSON.parse(JSON.stringify(e))}subscribe(e,n,r){if(!this.db)return()=>{};const s=ZT(this.db,e);return fS(s,a=>{const c=[];a.forEach(u=>{const d=u.data(),m=this.sanitizeData(d);c.push({...m,id:u.id})}),console.log(`Sync: Received ${c.length} items from ${e}`),n(c)},a=>{console.error(`Error subscribing to ${e}:`,a),r&&r(a)})}async saveItem(e,n){if(!this.db)throw new Error("DB not configured");if(!n.id)throw new Error("Item must have an ID");const r=this.cleanForSave(n);await uS(qi(this.db,e,n.id),r)}async updateItem(e,n,r){if(!this.db)throw new Error("DB not configured");if(!n)throw new Error("ID required for update");const s=this.cleanForSave(r),o=qi(this.db,e,n);await dS(o,s)}async deleteItem(e,n){if(!this.db)throw new Error("DB not configured");await hS(qi(this.db,e,n))}async uploadBatch(e,n){if(!this.db)throw new Error("DB not configured");if(n.length===0)return;const r=500;for(let s=0;s<n.length;s+=r){const o=n.slice(s,s+r),a=pS(this.db);o.forEach(c=>{const u=qi(this.db,e,c.id),d=this.cleanForSave(c);a.set(u,d)}),await a.commit(),console.log(`Uploaded batch of ${o.length} to ${e}`)}}getSchemaSQL(){return"Firestore is a NoSQL database. No Schema definition is required. Collections are created automatically when you add data."}}const Ue=new gS,v1=R.createContext(void 0),je=()=>{const t=R.useContext(v1);if(!t)throw new Error("useApp must be used within an AppProvider");return t},r0="SPR_TECHFORGE_FRESH_V8",Wu="SPR_TECHFORGE_SESSION_V4",xS=60*60*1e3,Xa={id:"admin-01",name:"Thirumal Reddy",username:"thirumalreddy@sprtechforge.com",password:"Shooter@2026",role:"admin",modules:["candidates","finance","users","training"],authProvider:"local",isPasswordChanged:!0},Ja=[{id:"cash-01",name:"Office Cash",type:Ie.Cash,openingBalance:0,isSystem:!0}],yS=[ut.Training,ut.ReadyForInterview,ut.Placed,ut.Discontinued],vS=({children:t})=>{const[e,n]=R.useState(null),[r,s]=R.useState(!1),[o,a]=R.useState([Xa]),[c,u]=R.useState([]),[d,m]=R.useState([]),[p,f]=R.useState([]),[v,j]=R.useState(Ja),[I,C]=R.useState([]),[x,_]=R.useState(yS),[E,k]=R.useState([]),[L,P]=R.useState([]),[y,w]=R.useState([]),[T,A]=R.useState([]),[S,D]=R.useState([]),[N,le]=R.useState([]),[ie,ke]=R.useState([]),[ve,q]=R.useState(null),[K,re]=R.useState(null),[U,ee]=R.useState(!1),X=Ue.isConfigured(),he=(O,z="success")=>{const W=Date.now().toString();q({id:W,message:O,type:z}),setTimeout(()=>{q(Ce=>(Ce==null?void 0:Ce.id)===W?null:Ce)},3e3)},me=(O,z)=>{X&&Ue.saveItem(O,z).catch(W=>console.error(W))},oe=(O,z,W)=>{X&&Ue.updateItem(O,z,W).catch(Ce=>console.error(Ce))},Me=(O,z)=>{X&&Ue.deleteItem(O,z).catch(W=>console.error(W))};R.useEffect(()=>{if(X){const O=ln=>{re(ln.message),ee(!0)},z=Ue.subscribe("users",ln=>{ln.length>0?a(ln):a([Xa]),ee(!0)},O),W=Ue.subscribe("candidates",u),Ce=Ue.subscribe("candidateProfiles",m),Yt=Ue.subscribe("interviews",f),Xt=Ue.subscribe("accounts",ln=>{ln.length>0?j(ln):j(Ja)}),pa=Ue.subscribe("transactions",C),Ni=Ue.subscribe("trainingModules",w),qr=Ue.subscribe("trainingTopics",A),Yc=Ue.subscribe("trainingLogs",D),yn=Ue.subscribe("interviewModules",le),ga=Ue.subscribe("interviewQuestions",ke),xa=Ue.subscribe("activityLogs",P);return()=>{z(),W(),Ce(),Yt(),Xt(),pa(),Ni(),qr(),Yc(),yn(),ga(),xa()}}else{try{const O=localStorage.getItem(r0);if(O){const z=JSON.parse(O);a(z.users||[Xa]),u(z.candidates||[]),m(z.candidateProfiles||[]),f(z.interviews||[]),j(z.accounts||Ja),C(z.transactions||[]),w(z.trainingModules||[]),A(z.trainingTopics||[]),D(z.trainingLogs||[]),le(z.interviewModules||[]),ke(z.interviewQuestions||[]),P(z.activityLogs||[])}else a([Xa]),j(Ja)}catch{}ee(!0)}},[X]),R.useEffect(()=>{if(U&&!e){const O=localStorage.getItem(Wu);if(O)try{const z=JSON.parse(O);if(Date.now()-z.timestamp<xS){const W=o.find(Ce=>Ce.id===z.userId);W&&n(W)}}catch{}s(!0)}},[U,o]),R.useEffect(()=>{!X&&U&&localStorage.setItem(r0,JSON.stringify({users:o,candidates:c,candidateProfiles:d,interviews:p,accounts:v,transactions:I,trainingModules:y,trainingTopics:T,trainingLogs:S,interviewModules:N,interviewQuestions:ie,activityLogs:L}))},[o,c,d,p,v,I,y,T,S,N,ie,L,X,U]);const Or=async(O,z)=>{if(!O||!z)return{success:!1,message:"Missing credentials"};const W=o.find(Ce=>Ce.username.toLowerCase()===O.toLowerCase());return W&&W.password===z?(n(W),localStorage.setItem(Wu,JSON.stringify({userId:W.id,timestamp:Date.now()})),{success:!0}):{success:!1,message:"Invalid credentials"}},xn=()=>{n(null),localStorage.removeItem(Wu)},Rn=O=>{a(z=>[...z,O]),me("users",O)},qc=O=>{a(z=>z.map(W=>W.id===O.id?O:W)),oe("users",O.id,O),(e==null?void 0:e.id)===O.id&&n(O)},ra=O=>{a(z=>z.filter(W=>W.id!==O)),Me("users",O)},vi=O=>{u(z=>[...z,O]),me("candidates",O)},vs=O=>{u(z=>z.map(W=>W.id===O.id?O:W)),oe("candidates",O.id,O)},Hc=O=>{u(z=>z.filter(W=>W.id!==O)),Me("candidates",O)},wi=O=>{d.find(W=>W.candidateId===O.candidateId)?(m(W=>W.map(Ce=>Ce.candidateId===O.candidateId?O:Ce)),X&&Ue.saveItem("candidateProfiles",{...O,id:O.candidateId})):(m(W=>[...W,O]),X&&Ue.saveItem("candidateProfiles",{...O,id:O.candidateId}))},_i=O=>{f(z=>[...z,O]),me("interviews",O)},sa=O=>{f(z=>z.map(W=>W.id===O.id?O:W)),oe("interviews",O.id,O)},ot=O=>{f(z=>z.filter(W=>W.id!==O)),Me("interviews",O)},ht=O=>{j(z=>[...z,O]),me("accounts",O)},ws=O=>{j(z=>z.map(W=>W.id===O.id?O:W)),oe("accounts",O.id,O)},Wc=O=>{j(z=>z.filter(W=>W.id!==O)),Me("accounts",O)},ia=O=>{C(z=>[...z,O]),me("transactions",O)},oa=O=>{C(z=>z.map(W=>W.id===O.id?O:W)),oe("transactions",O.id,O)},Fr=O=>{C(z=>z.filter(W=>W.id!==O)),Me("transactions",O)},aa=O=>{const z=I.find(W=>W.id===O);z&&oa({...z,isLocked:!0})},la=O=>{w(z=>[...z,O]),me("trainingModules",O)},ji=O=>{A(z=>[...z,O]),me("trainingTopics",O)},Qc=O=>{D(z=>[...z,O]),me("trainingLogs",O)},Gc=O=>{D(z=>{const W=[...z];return O.forEach(Ce=>{const Yt=W.findIndex(Xt=>Xt.id===Ce.id);Yt>=0?W[Yt]=Ce:W.push(Ce)}),W}),X&&Ue.uploadBatch("trainingLogs",O)},ca=O=>{le(z=>[...z,O]),me("interviewModules",O)},ua=O=>{le(z=>z.map(W=>W.id===O.id?O:W)),oe("interviewModules",O.id,O)},Ur=O=>{le(z=>z.filter(W=>W.id!==O)),Me("interviewModules",O)},Ei=O=>{ke(z=>[...z,O]),me("interviewQuestions",O)},bi=O=>{ke(z=>z.map(W=>W.id===O.id?O:W)),oe("interviewQuestions",O.id,O)},Dn=O=>{ke(z=>z.filter(W=>W.id!==O)),Me("interviewQuestions",O)},da=O=>{x.includes(O)||_(z=>[...z,O])},_s=O=>vs({...c.find(z=>z.id===O),agreementSentDate:new Date().toISOString()}),ha=O=>vs({...c.find(z=>z.id===O),agreementAcceptedDate:new Date().toISOString()}),Br=O=>{},fa=O=>{},ft=(O,z)=>{var W,Ce,Yt;return z==="Account"?((W=v.find(Xt=>Xt.id===O))==null?void 0:W.name)||"Unknown":z==="Candidate"?((Ce=c.find(Xt=>Xt.id===O))==null?void 0:Ce.name)||"Unknown":((Yt=o.find(Xt=>Xt.id===O))==null?void 0:Yt.name)||"Unknown"},ma=(O,z)=>{var W;return Yi(O,z,I,((W=v.find(Ce=>Ce.id===O))==null?void 0:W.openingBalance)||0)},zr=()=>{xj({users:o,candidates:c,accounts:v,transactions:I},"backup.json")},$r=async O=>{},Kc=async()=>{};return i.jsx(v1.Provider,{value:{user:e,login:Or,logout:xn,isInitialized:r,toast:ve,showToast:he,users:o,addUser:Rn,updateUser:qc,deleteUser:ra,candidates:c,addCandidate:vi,updateCandidate:vs,deleteCandidate:Hc,candidateProfiles:d,updateCandidateProfile:wi,interviews:p,addInterview:_i,updateInterview:sa,deleteInterview:ot,accounts:v,addAccount:ht,updateAccount:ws,deleteAccount:Wc,transactions:I,addTransaction:ia,updateTransaction:oa,deleteTransaction:Fr,lockTransaction:aa,trainingModules:y,addTrainingModule:la,trainingTopics:T,addTrainingTopic:ji,trainingLogs:S,addTrainingLog:Qc,batchUpdateTrainingLogs:Gc,interviewModules:N,addInterviewModule:ca,updateInterviewModule:ua,deleteInterviewModule:Ur,interviewQuestions:ie,addInterviewQuestion:Ei,updateInterviewQuestion:bi,deleteInterviewQuestion:Dn,candidateStatuses:x,addCandidateStatus:da,passwordResetRequests:E,addPasswordResetRequest:Br,resolvePasswordResetRequest:fa,activityLogs:L,markAgreementSent:_s,markAgreementAccepted:ha,getEntityName:ft,getEntityBalance:ma,exportData:zr,importDatabase:$r,isCloudEnabled:X,syncLocalToCloud:Kc,cloudError:K},children:t})},ce=({children:t,className:e="",title:n,action:r})=>i.jsxs("div",{className:`bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden ${e}`,children:[(n||r)&&i.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[n&&i.jsx("h3",{className:"text-lg font-bold text-gray-800",children:n}),r&&i.jsx("div",{children:r})]}),i.jsx("div",{className:"p-6 text-gray-600",children:t})]}),J=({children:t,variant:e="primary",className:n="",...r})=>{const s="px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white shadow-sm",o={primary:"bg-spr-accent hover:bg-spr-accent_hover text-white focus:ring-blue-500",secondary:"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-gray-200",danger:"bg-spr-danger hover:bg-red-700 text-white focus:ring-red-500",success:"bg-spr-success hover:bg-emerald-700 text-white focus:ring-emerald-500"};return i.jsx("button",{className:`${s} ${o[e]} ${n} disabled:opacity-50 disabled:cursor-not-allowed`,...r,children:t})},ta=({className:t=""})=>{const e=St();return i.jsxs("button",{onClick:()=>e(-1),className:`flex items-center text-gray-500 hover:text-gray-800 transition-colors ${t}`,title:"Go Back",children:[i.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),i.jsx("span",{className:"text-sm font-medium",children:"Back"})]})},ne=({label:t,numericOnly:e,className:n="",onChange:r,...s})=>{const[o,a]=R.useState(!1),c=()=>s.type==="number"&&o&&Number(s.value)===0?"":s.value,u=d=>{if(e){const m=d.target.value.replace(/[^0-9]/g,"");d.target.value!==m&&(d.target.value=m)}r&&r(d)};return i.jsxs("div",{className:"mb-4",children:[t&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),i.jsx("input",{className:`w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 placeholder-gray-400 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors shadow-sm ${n}`,...s,onChange:u,value:c(),onFocus:d=>{a(!0),s.onFocus&&s.onFocus(d)},onBlur:d=>{a(!1),s.onBlur&&s.onBlur(d)}})]})},ic=({label:t,children:e,className:n="",...r})=>i.jsxs("div",{className:"mb-4",children:[t&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),i.jsx("select",{className:`w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors shadow-sm ${n}`,...r,children:e})]}),Qf=({currentPage:t,totalPages:e,onPageChange:n})=>e<=1?null:i.jsxs("div",{className:"flex justify-center items-center gap-2 mt-6",children:[i.jsx(J,{variant:"secondary",disabled:t===1,onClick:()=>n(t-1),className:"px-3 py-1 text-sm",children:"Prev"}),i.jsxs("span",{className:"text-gray-600 text-sm font-medium",children:["Page ",t," of ",e]}),i.jsx(J,{variant:"secondary",disabled:t===e,onClick:()=>n(t+1),className:"px-3 py-1 text-sm",children:"Next"})]}),Ht=({isOpen:t,onClose:e,title:n,children:r,size:s="md"})=>{if(R.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const o={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl","2xl":"max-w-6xl",full:"max-w-[95vw]"}[s];return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:i.jsxs("div",{className:`bg-white border border-gray-200 rounded-xl shadow-2xl w-full ${o} max-h-[90vh] overflow-y-auto transform transition-all scale-100 flex flex-col`,children:[i.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 sticky top-0 bg-white z-10 shrink-0",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n}),i.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors p-1 rounded hover:bg-gray-100",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"p-6 text-gray-600 flex-1 overflow-y-auto",children:r})]})})},na=({isOpen:t,onClose:e,onConfirm:n,title:r,message:s})=>i.jsx(Ht,{isOpen:t,onClose:e,title:r,children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:s}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(J,{variant:"secondary",onClick:e,children:"Cancel"}),i.jsx(J,{variant:"danger",onClick:()=>{n(),e()},children:"Delete"})]})]})}),wS=()=>{const{toast:t}=je();if(!t)return null;const e=t.type==="success"?"bg-emerald-600":t.type==="error"?"bg-red-600":"bg-blue-600",n=t.type==="success"?i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):t.type==="error"?i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});return i.jsx("div",{className:"fixed top-4 right-4 z-[100] animate-fade-in",children:i.jsxs("div",{className:`${e} text-white px-4 py-3 rounded-lg shadow-xl flex items-center gap-3 min-w-[300px]`,children:[i.jsx("div",{className:"shrink-0",children:n}),i.jsx("span",{className:"font-medium text-sm",children:t.message})]})})},ci=({size:t="sm"})=>i.jsxs("div",{className:`flex items-center gap-3 ${t==="lg"?"flex-col":""}`,children:[i.jsx("div",{className:`relative flex items-center justify-center bg-gradient-to-br from-blue-600 to-indigo-900 rounded-lg shadow-lg shadow-blue-200 transform rotate-3 transition-transform ${t==="lg"?"w-20 h-20":"w-10 h-10"}`,children:i.jsx("svg",{className:"text-white w-3/5 h-3/5 transform -rotate-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),i.jsxs("div",{className:`font-bold tracking-tight text-gray-900 ${t==="lg"?"text-3xl":"text-xl"}`,children:["SPR ",i.jsx("span",{className:"text-spr-accent",children:"Techforge"})]})]}),Xe=({to:t,icon:e,label:n,onClick:r})=>{const s=ps();s.pathname===t||s.pathname.startsWith(t);const o=s.pathname===t;return i.jsxs(rn,{to:t,onClick:r,className:`flex items-center gap-3 px-4 py-2.5 rounded-lg transition-colors mb-1 font-medium text-sm ${o?"bg-spr-accent text-white shadow-md":"text-gray-600 hover:bg-spr-50 hover:text-spr-900"}`,children:[e&&i.jsx("span",{className:"shrink-0",children:e}),i.jsx("span",{children:n})]})},Hi=({title:t,icon:e,initialOpen:n,children:r})=>{const[s,o]=R.useState(n);return i.jsxs("div",{className:"mb-2",children:[i.jsxs("button",{onClick:()=>o(!s),className:`w-full flex items-center justify-between px-4 py-3 text-gray-700 hover:bg-spr-50 rounded-lg transition-colors group ${s?"bg-spr-50":""}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`text-gray-500 group-hover:text-spr-600 ${s?"text-spr-600":""}`,children:e}),i.jsx("span",{className:`text-sm ${s?"font-bold text-gray-900":"font-medium"}`,children:t})]}),i.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${s?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i.jsx("div",{className:`overflow-hidden transition-all duration-300 ${s?"max-h-[500px] opacity-100 mt-1":"max-h-0 opacity-0"}`,children:i.jsx("div",{className:"pl-4 border-l-2 border-spr-100 ml-6 space-y-1",children:r})})]})},Te=({children:t})=>{const{user:e,logout:n}=je(),[r,s]=R.useState(!1);ps();const o=St();if(!e)return i.jsx(i.Fragment,{children:t});const a=()=>s(!1),c=()=>{n(),o("/")};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col md:flex-row",children:[i.jsxs("div",{className:"md:hidden bg-white border-b border-gray-200 p-4 flex justify-between items-center sticky top-0 z-20",children:[i.jsx(ci,{size:"sm"}),i.jsx("button",{onClick:()=>s(!r),className:"text-gray-600",children:i.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:r?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]}),i.jsxs("aside",{className:`bg-white border-r border-gray-200 flex-shrink-0 fixed md:static inset-y-0 left-0 z-30 w-64 transform transition-transform duration-300 ${r?"translate-x-0 shadow-2xl":"-translate-x-full md:translate-x-0"}`,children:[i.jsx("div",{className:"p-6 border-b border-gray-100 hidden md:block",children:i.jsx(ci,{})}),i.jsxs("nav",{className:"p-4 overflow-y-auto h-[calc(100vh-80px)]",children:[e.role!=="candidate"?i.jsxs(i.Fragment,{children:[i.jsxs(Hi,{title:"Overview",icon:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),initialOpen:!1,children:[i.jsx(Xe,{to:"/dashboard",label:"Dashboard",onClick:a}),i.jsx(Xe,{to:"/address-book",label:"Address Book",onClick:a})]}),i.jsxs(Hi,{title:"Candidates",icon:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),initialOpen:!1,children:[i.jsx(Xe,{to:"/candidates",label:"Candidate List",onClick:a}),i.jsx(Xe,{to:"/candidates/info",label:"Candidate Info (Profile)",onClick:a})]}),i.jsxs(Hi,{title:"Training & Placement",icon:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),initialOpen:!1,children:[i.jsx(Xe,{to:"/training/interviews",label:"Interviews & Resumes",onClick:a}),i.jsx(Xe,{to:"/training/monitor",label:"Progress Monitor",onClick:a}),i.jsx(Xe,{to:"/training/attendance",label:"Class Attendance",onClick:a}),i.jsx(Xe,{to:"/training/curriculum",label:"Curriculum",onClick:a}),i.jsx(Xe,{to:"/training/interview-questions",label:"Interview Prep",onClick:a})]}),i.jsxs(Hi,{title:"Finance",icon:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),initialOpen:!1,children:[i.jsx(Xe,{to:"/finance/transactions",label:"Transactions",onClick:a}),i.jsx(Xe,{to:"/finance/accounts",label:"Ledger Accounts",onClick:a}),i.jsx(Xe,{to:"/finance/payroll",label:"Payroll",onClick:a}),i.jsx(Xe,{to:"/finance/financial-statements",label:"Reports",onClick:a})]}),i.jsxs(Hi,{title:"Administration",icon:i.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),initialOpen:!1,children:[i.jsx(Xe,{to:"/admin/users",label:"User Management",onClick:a}),i.jsx(Xe,{to:"/admin/logs",label:"System Logs",onClick:a}),i.jsx(Xe,{to:"/admin/cloud",label:"Cloud Setup",onClick:a})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"px-4 mb-2 text-xs font-bold text-gray-400 uppercase",children:"Student Portal"}),i.jsx(Xe,{to:"/candidates/info",label:"My Profile",onClick:a}),i.jsx(Xe,{to:"/training/dashboard",label:"Training Dashboard",onClick:a}),i.jsx(Xe,{to:"/training/interview-questions",label:"Interview Prep",onClick:a}),i.jsx(Xe,{to:"/training/curriculum",label:"Curriculum",onClick:a})]}),i.jsxs("div",{className:"mt-8 px-4 pb-4",children:[i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-100 mb-3",children:[i.jsx("p",{className:"text-sm font-bold text-gray-800 truncate",children:e.name}),i.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e.role})]}),i.jsx(J,{variant:"danger",className:"w-full text-sm",onClick:c,children:"Sign Out"})]})]})]}),i.jsx("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto h-[calc(100vh-64px)] md:h-screen w-full",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:t})})]})},_S=()=>{const{login:t,updateUser:e,user:n,isCloudEnabled:r,cloudError:s,addPasswordResetRequest:o,showToast:a}=je(),c=St(),[u,d]=R.useState(""),[m,p]=R.useState(""),[f,v]=R.useState(""),[j,I]=R.useState(!1),[C,x]=R.useState(!1),[_,E]=R.useState(""),[k,L]=R.useState(""),[P,y]=R.useState(!1),[w,T]=R.useState(""),[A,S]=R.useState("");R.useEffect(()=>{n&&n.isPasswordChanged!==!1?c("/dashboard"):n&&n.isPasswordChanged===!1&&x(!0)},[n,c]);const D=async ie=>{ie.preventDefault(),I(!0),v("");const ke=await t(u,m);ke.success?(a("Login successful"),I(!1)):(v(ke.message||"Login failed"),I(!1))},N=ie=>{if(ie.preventDefault(),_!==k){v("Passwords do not match");return}if(_.length<4){v("Password is too short");return}if(_===(n==null?void 0:n.name)){v("New password cannot be the same as your name");return}n&&(e({...n,password:_,isPasswordChanged:!0}),a("Password updated successfully. You are now logged in."))},le=ie=>{ie.preventDefault(),w.trim()&&(o(w),S("Request sent to Admin. Please contact Thirumal Reddy for your new password."),setTimeout(()=>{y(!1),S(""),T("")},4e3))};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4 relative overflow-hidden",children:[i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 bg-slate-50",children:[i.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-96 h-96 bg-blue-200/50 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-96 h-96 bg-indigo-200/50 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute top-[40%] left-[40%] w-72 h-72 bg-sky-100/40 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"w-full max-w-md z-20",children:[i.jsx("div",{className:"mb-4",children:i.jsxs(rn,{to:"/",className:"inline-flex items-center text-gray-500 hover:text-spr-600 transition-colors text-sm font-medium",children:[i.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Website"]})}),s&&i.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-lg shadow-sm animate-fade-in",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("svg",{className:"w-6 h-6 text-red-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-red-800 font-bold text-sm",children:"Connectivity Issue"}),i.jsx("p",{className:"text-red-600 text-sm",children:s}),s.includes("Permission")&&i.jsx("button",{onClick:()=>c("/admin/cloud"),className:"text-xs text-red-700 underline mt-1",children:"Go to Cloud Setup for fix"})]})]})}),i.jsxs("div",{className:"bg-white/80 border border-white/50 p-8 rounded-2xl shadow-2xl relative backdrop-blur-md",children:[i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx(ci,{size:"lg"})}),C?i.jsxs("div",{className:"animate-fade-in",children:[i.jsx("h2",{className:"text-2xl font-bold text-center text-slate-800 mb-2",children:"Secure Your Account"}),i.jsx("p",{className:"text-center text-slate-500 mb-6 text-sm",children:"This is your first login. Please set a new, secure password to continue to the dashboard."}),i.jsxs("form",{onSubmit:N,children:[i.jsx(ne,{label:"New Password",type:"password",value:_,onChange:ie=>E(ie.target.value),required:!0}),i.jsx(ne,{label:"Confirm Password",type:"password",value:k,onChange:ie=>L(ie.target.value),required:!0}),f&&i.jsx("p",{className:"text-red-500 text-sm mb-4 text-center",children:f}),i.jsx(J,{type:"submit",className:"w-full py-3 text-lg shadow-lg shadow-blue-100",children:"Update Password & Login"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("h2",{className:"text-2xl font-bold text-center text-slate-800 mb-2",children:"Portal Login"}),i.jsx("p",{className:"text-center text-slate-500 mb-6",children:"Sign in to manage SPR Techforge"}),i.jsxs("form",{onSubmit:D,children:[i.jsx(ne,{label:"Username / Login ID",value:u,onChange:ie=>d(ie.target.value),placeholder:"e.g. name@sprtechforge.com"}),i.jsx(ne,{label:"Password",type:"password",value:m,onChange:ie=>p(ie.target.value),placeholder:"Enter password"}),f&&i.jsx("p",{className:"text-red-500 text-sm mb-4 text-center",children:f}),i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsx("button",{type:"button",onClick:()=>y(!0),className:"text-sm text-spr-accent hover:text-spr-accent_hover hover:underline font-medium",children:"Forgot Password?"})}),i.jsx(J,{type:"submit",className:"w-full py-3 text-lg shadow-lg shadow-blue-100 hover:shadow-blue-200",disabled:j,children:j?"Authenticating...":"Login"})]})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-xs text-slate-400",children:[" 2025 SPR Techforge Pvt Ltd. All rights reserved.",r&&i.jsxs("span",{className:"block mt-1 text-slate-500 font-bold flex items-center justify-center gap-1",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})," Cloud Connected"]})]})})]})]}),i.jsx(Ht,{isOpen:P,onClose:()=>y(!1),title:"Reset Password",children:A?i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"text-spr-accent font-bold text-lg mb-2",children:"Request Sent"}),i.jsx("p",{className:"text-gray-600",children:A})]}):i.jsxs("form",{onSubmit:le,children:[i.jsx("p",{className:"text-gray-600 mb-4",children:"Enter your Login ID below. The administrator will be notified to reset your password."}),i.jsx(ne,{label:"Your Username / Login ID",value:w,onChange:ie=>T(ie.target.value),placeholder:"e.g. john@sprtechforge.com",required:!0}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(J,{type:"button",variant:"secondary",onClick:()=>y(!1),children:"Cancel"}),i.jsx(J,{type:"submit",children:"Send Request"})]})]})})]})},jS=()=>{const t=St(),[e,n]=R.useState(!1),[r,s]=R.useState(null);R.useEffect(()=>{const a=()=>{n(window.scrollY>20)};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[]);const o=()=>{var a;(a=document.getElementById("contact"))==null||a.scrollIntoView({behavior:"smooth"})};return i.jsxs("div",{className:"min-h-screen bg-white font-sans text-gray-900",children:[i.jsx("nav",{className:`fixed w-full z-50 transition-all duration-300 ${e?"bg-white shadow-md py-2":"bg-transparent py-4"}`,children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:"flex items-center",children:i.jsx(ci,{size:"sm"})}),i.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[i.jsx("a",{href:"#",className:"text-sm font-medium text-gray-700 hover:text-spr-600 transition-colors",children:"Services"}),i.jsx("a",{href:"#",className:"text-sm font-medium text-gray-700 hover:text-spr-600 transition-colors",children:"Industries"}),i.jsx("a",{href:"#",className:"text-sm font-medium text-gray-700 hover:text-spr-600 transition-colors",children:"Insights"}),i.jsx("button",{onClick:()=>s("careers"),className:"text-sm font-medium text-gray-700 hover:text-spr-600 transition-colors",children:"Careers"})]}),i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("button",{onClick:o,className:"text-sm font-bold text-gray-900 hover:text-spr-600 transition-colors uppercase tracking-wide",children:"Contact Us"}),i.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),i.jsx(J,{onClick:()=>t("/login"),className:"bg-spr-900 hover:bg-spr-800 text-white px-6 rounded-full shadow-lg transform hover:scale-105 transition-all",children:"Login"})]})]})})}),i.jsxs("header",{className:"relative bg-spr-900 h-[600px] flex items-center overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-spr-900 via-blue-900 to-indigo-900 opacity-90"}),i.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-30"}),i.jsx("div",{className:"absolute top-0 right-0 w-2/3 h-full bg-gradient-to-l from-blue-500/20 to-transparent transform skew-x-12 translate-x-20"})]}),i.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full pt-16",children:i.jsxs("div",{className:"max-w-3xl animate-fade-in",children:[i.jsx("h2",{className:"text-spr-300 font-bold tracking-widest uppercase mb-4 text-sm",children:"Engineering Digital Future"}),i.jsxs("h1",{className:"text-5xl md:text-6xl font-extrabold text-white leading-tight mb-6",children:["Accelerating Business Velocity with ",i.jsx("span",{className:"text-blue-400",children:"Quality Engineering"})]}),i.jsx("p",{className:"text-xl text-gray-300 mb-8 leading-relaxed max-w-2xl",children:"SPR Techforge empowers enterprises to deliver flawless digital experiences through advanced Software Testing, Cloud Transformation, and Strategic Consulting."}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{className:"bg-white text-spr-900 font-bold px-8 py-3 rounded-md hover:bg-gray-100 transition-colors shadow-lg",children:"Explore Services"}),i.jsx("button",{onClick:o,className:"border-2 border-white text-white font-bold px-8 py-3 rounded-md hover:bg-white/10 transition-colors",children:"Partner With Us"})]})]})})]}),i.jsx("section",{className:"bg-spr-50 py-12 border-b border-gray-200",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-4xl font-bold text-spr-700",children:"50+"}),i.jsx("p",{className:"text-sm text-gray-600 font-medium uppercase mt-1",children:"Enterprise Clients"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-4xl font-bold text-spr-700",children:"100%"}),i.jsx("p",{className:"text-sm text-gray-600 font-medium uppercase mt-1",children:"Project Delivery"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-4xl font-bold text-spr-700",children:"24/7"}),i.jsx("p",{className:"text-sm text-gray-600 font-medium uppercase mt-1",children:"Global Support"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-4xl font-bold text-spr-700",children:"1M+"}),i.jsx("p",{className:"text-sm text-gray-600 font-medium uppercase mt-1",children:"Test Cases Executed"})]})]})})}),i.jsx("section",{className:"py-20 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Our Core Capabilities"}),i.jsx("div",{className:"w-20 h-1 bg-spr-600 mx-auto rounded"}),i.jsx("p",{className:"mt-4 text-gray-600 max-w-2xl mx-auto",children:"We combine deep domain expertise with cutting-edge technology to drive innovation and efficiency."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"group bg-white p-8 rounded-xl border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-blue-50 rounded-lg flex items-center justify-center mb-6 group-hover:bg-blue-600 transition-colors",children:i.jsx("svg",{className:"w-8 h-8 text-blue-600 group-hover:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Quality Engineering"}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:"End-to-end testing services including Automation, Performance, and Security testing to ensure zero-defect delivery."}),i.jsx("a",{href:"#",className:"inline-block mt-4 text-spr-600 font-bold hover:underline",children:"Learn More "})]}),i.jsxs("div",{className:"group bg-white p-8 rounded-xl border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-indigo-50 rounded-lg flex items-center justify-center mb-6 group-hover:bg-indigo-600 transition-colors",children:i.jsx("svg",{className:"w-8 h-8 text-indigo-600 group-hover:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Cloud Consulting"}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Strategic cloud migration, architecture design, and DevOps implementation to accelerate your digital transformation."}),i.jsx("a",{href:"#",className:"inline-block mt-4 text-spr-600 font-bold hover:underline",children:"Learn More "})]}),i.jsxs("div",{className:"group bg-white p-8 rounded-xl border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[i.jsx("div",{className:"w-14 h-14 bg-emerald-50 rounded-lg flex items-center justify-center mb-6 group-hover:bg-emerald-600 transition-colors",children:i.jsx("svg",{className:"w-8 h-8 text-emerald-600 group-hover:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Staffing & Training"}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Providing top-tier technical talent and corporate training programs to bridge the skills gap in your organization."}),i.jsx("a",{href:"#",className:"inline-block mt-4 text-spr-600 font-bold hover:underline",children:"Learn More "})]})]})]})}),i.jsxs("section",{className:"bg-gray-900 py-20 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-spr-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse"}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center relative z-10",children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:"Ready to Transform Your Business?"}),i.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"Join hands with SPR Techforge to leverage the power of next-gen technology and expert consulting."}),i.jsx("button",{onClick:o,className:"bg-spr-600 hover:bg-spr-500 text-white font-bold px-10 py-4 rounded-md shadow-lg transition-all",children:"Get a Free Consultation"})]})]}),i.jsx("footer",{id:"contact",className:"bg-gray-50 border-t border-gray-200 pt-16 pb-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12 mb-12",children:[i.jsxs("div",{className:"col-span-1 md:col-span-1",children:[i.jsx(ci,{size:"sm"}),i.jsx("p",{className:"mt-6 text-sm text-gray-500 leading-relaxed",children:"SPR Techforge is a premier software testing and consulting firm dedicated to delivering excellence in digital engineering."})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4",children:"Services"}),i.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-spr-600",children:"Quality Assurance"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-spr-600",children:"Test Automation"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-spr-600",children:"Performance Engineering"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"hover:text-spr-600",children:"DevOps Solutions"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4",children:"Company"}),i.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[i.jsx("li",{children:i.jsx("button",{onClick:()=>s("about"),className:"hover:text-spr-600 text-left",children:"About Us"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>s("careers"),className:"hover:text-spr-600 text-left",children:"Careers"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>s("leadership"),className:"hover:text-spr-600 text-left",children:"Leadership"})}),i.jsx("li",{children:i.jsx("button",{onClick:o,className:"hover:text-spr-600 text-left",children:"Contact"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider mb-4",children:"Contact Us"}),i.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[i.jsxs("li",{className:"flex items-start gap-3",children:[i.jsxs("svg",{className:"w-5 h-5 text-spr-600 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),i.jsxs("span",{children:["SPR Techforge Pvt Ltd",i.jsx("br",{}),"Sri Godha Nilayam, 9th Phase Rd, KPHB phase 6, Kukatpally, Hyderabad, Telangana 500085"]})]}),i.jsxs("li",{className:"flex items-center gap-3",children:[i.jsx("svg",{className:"w-5 h-5 text-spr-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("a",{href:"mailto:contact@sprtechforge.com",className:"hover:text-spr-600",children:"contact@sprtechforge.com"})]})]})]})]}),i.jsxs("div",{className:"border-t border-gray-200 pt-8 flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsx("p",{className:"text-xs text-gray-500",children:" 2025 SPR Techforge Pvt Ltd. All rights reserved."}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("a",{href:"#",className:"text-gray-400 hover:text-gray-600",children:[i.jsx("span",{className:"sr-only",children:"LinkedIn"}),i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})]}),i.jsxs("a",{href:"#",className:"text-gray-400 hover:text-gray-600",children:[i.jsx("span",{className:"sr-only",children:"Twitter"}),i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})]})]})]})]})}),i.jsx(Ht,{isOpen:r==="about",onClose:()=>s(null),title:"About SPR Techforge",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-lg text-gray-800 leading-relaxed",children:"We are a dedicated consultancy and training organization specializing in Automation Testing and Manual Testing."}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Over the past three years, weve successfully trained and placed 30+ skilled professionals across leading companies. Our focus is to provide training, expert guidance and support after joining one month."}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mt-4",children:[i.jsx("h4",{className:"font-bold text-blue-900 mb-2",children:"Our Mission"}),i.jsx("p",{className:"text-sm text-blue-800",children:"To empower individuals with industry-ready skills and connect enterprises with top-tier engineering talent, fostering innovation and excellence in the tech ecosystem."})]})]})}),i.jsx(Ht,{isOpen:r==="careers",onClose:()=>s(null),title:"Careers at SPR Techforge",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"Join our dynamic team! We are always looking for skilled professionals passionate about Quality Engineering and Digital Transformation."}),i.jsxs("div",{className:"space-y-3 mt-4",children:[i.jsxs("div",{className:"border border-gray-200 p-3 rounded hover:bg-gray-50",children:[i.jsx("h4",{className:"font-bold text-gray-900",children:"Automation Test Engineer"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Experience: 2-5 Years  Skills: Java, Selenium, Cucumber"})]}),i.jsxs("div",{className:"border border-gray-200 p-3 rounded hover:bg-gray-50",children:[i.jsx("h4",{className:"font-bold text-gray-900",children:"Performance Tester"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Experience: 3+ Years  Skills: JMeter, LoadRunner"})]})]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["Send your resume to ",i.jsx("a",{href:"mailto:careers@sprtechforge.com",className:"text-spr-600 font-bold hover:underline",children:"careers@sprtechforge.com"})]})]})}),i.jsx(Ht,{isOpen:r==="leadership",onClose:()=>s(null),title:"Our Leadership",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-spr-900 text-white flex items-center justify-center text-xl font-bold",children:"TR"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Thirumal Reddy"}),i.jsx("p",{className:"text-spr-600 font-medium text-sm mb-2",children:"Founder & Principal Consultant"}),i.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"An industry veteran with extensive experience in Software Quality Assurance and Corporate Training. Thirumal Reddy leads SPR Techforge with a vision to bridge the gap between academic knowledge and industry requirements, ensuring every professional we train is ready to make an immediate impact."})]})]}),i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg text-sm text-gray-600 italic border-l-4 border-spr-500",children:`"We don't just teach technology; we engineer careers."`})]})})]})},ES=()=>{const{candidates:t,accounts:e,transactions:n,getEntityBalance:r}=je(),s=e.filter(P=>P.type===Ie.Cash),o=e.filter(P=>P.type===Ie.Bank),a=s.reduce((P,y)=>P+r(y.id,"Account"),0),c=o.reduce((P,y)=>P+r(y.id,"Account"),0),u=t.length,d=t.filter(P=>P.status===ut.Placed),m=n.filter(P=>P.type===be.Expense).reduce((P,y)=>P+y.amount,0),p=n.filter(P=>P.type===be.Income).reduce((P,y)=>P+y.amount,0),f=P=>{const y=n.filter(T=>T.fromEntityId===P&&T.type===be.Income).reduce((T,A)=>T+A.amount,0),w=n.filter(T=>T.toEntityId===P&&T.type===be.Refund).reduce((T,A)=>T+A.amount,0);return y-w},v=d.reduce((P,y)=>P+f(y.id),0),I=t.filter(P=>P.status!==ut.Placed&&P.status!==ut.Discontinued&&P.isActive).reduce((P,y)=>P+f(y.id),0),C=t.filter(P=>P.isActive),x=C.reduce((P,y)=>{const w=f(y.id),T=y.agreedAmount-w;return P+(T>0?T:0)},0),E=e.filter(P=>P.type===Ie.Debtor).reduce((P,y)=>{const w=r(y.id,"Account");return P+(w>0?w:0)},0),L=e.filter(P=>P.type===Ie.Creditor).reduce((P,y)=>{const w=r(y.id,"Account");return P+(w<0?Math.abs(w):0)},0);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Welcome back, oversee your consultancy metrics."})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-gray-500 uppercase font-bold",children:"Net Liquidity"}),i.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:ue(a+c)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsx(ce,{className:"bg-white border-emerald-200 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-emerald-100 rounded-full text-emerald-600",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Cash in Hand"}),i.jsx("p",{className:"text-xl font-bold text-gray-900",children:ue(a)}),i.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["Total of ",s.length," Cash A/c"]})]})]})}),i.jsx(ce,{className:"bg-white border-blue-200 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-blue-100 rounded-full text-blue-600",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Bank Balance"}),i.jsx("p",{className:"text-xl font-bold text-gray-900",children:ue(c)}),i.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["Total of ",o.length," Bank A/c"]})]})]})}),i.jsx(ce,{className:"bg-white border-indigo-200 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-indigo-100 rounded-full text-indigo-600",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Total Income"}),i.jsx("p",{className:"text-xl font-bold text-gray-900",children:ue(p)})]})]})}),i.jsx(ce,{className:"bg-white border-red-200 border shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-red-100 rounded-full text-red-600",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Total Expenses"}),i.jsx("p",{className:"text-xl font-bold text-gray-900",children:ue(m)})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx(ce,{title:"Candidate Financials",className:"lg:col-span-2",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 pt-2",children:[i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wider font-bold",children:"Total Candidates"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:u}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[C.length," Active"]})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsx("p",{className:"text-emerald-600 text-xs uppercase tracking-wider font-bold",children:"From Placed"}),i.jsx("p",{className:"text-xl font-bold text-emerald-600 mt-1",children:ue(v)}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Received"})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsx("p",{className:"text-blue-600 text-xs uppercase tracking-wider font-bold",children:"From Existing"}),i.jsx("p",{className:"text-xl font-bold text-blue-600 mt-1",children:ue(I)}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Received (Advances)"})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 col-span-2 md:col-span-3 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-amber-600 text-xs uppercase tracking-wider font-bold",children:"Pending Collectibles (Active Candidates)"}),i.jsx("p",{className:"text-2xl font-bold text-amber-600 mt-1",children:ue(x)})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:"text-xs text-gray-500 block",children:"Potential Revenue"})})]})]})}),i.jsx(ce,{title:"Personal Ledger",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"My Debtors"}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:"Receivables"})]}),i.jsx("span",{className:"bg-emerald-100 text-emerald-700 text-xs px-2 py-1 rounded font-medium",children:"Assets"})]}),i.jsx("p",{className:"text-2xl font-bold text-emerald-600 mt-2",children:ue(E)}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"People owe me"})]}),i.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"My Creditors"}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:"Payables"})]}),i.jsx("span",{className:"bg-red-100 text-red-700 text-xs px-2 py-1 rounded font-medium",children:"Liabilities"})]}),i.jsx("p",{className:"text-2xl font-bold text-red-600 mt-2",children:ue(L)}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"I owe people"})]})]})})]}),i.jsx(ce,{title:"Profit & Loss Estimation",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total Income (Realized)"}),i.jsx("span",{className:"text-emerald-600 font-bold",children:ue(p)})]}),i.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total Expenses (Realized)"}),i.jsxs("span",{className:"text-red-600 font-bold",children:["- ",ue(m)]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-1",children:[i.jsx("span",{className:"text-gray-900 text-lg font-bold",children:"Net Profit / Loss"}),i.jsx("span",{className:`text-xl font-bold ${p-m>=0?"text-emerald-600":"text-red-600"}`,children:ue(p-m)})]})]})})]})},bS=()=>{const{candidates:t,deleteCandidate:e,updateCandidate:n,transactions:r,candidateStatuses:s,users:o,addUser:a,showToast:c}=je(),[u,d]=R.useState(1),[m,p]=R.useState(""),[f,v]=R.useState("All"),[j,I]=R.useState(null),[C,x]=R.useState(null);St();const _=10,E=t.filter(S=>{const D=m.toLowerCase(),N=S.name.toLowerCase().includes(D)||S.batchId.toLowerCase().includes(D)||S.referredBy&&S.referredBy.toLowerCase().includes(D),le=f==="All"||S.status===f;return N&&le}),k=Math.ceil(E.length/_),L=E.slice((u-1)*_,u*_),P=S=>{if(r.some(N=>N.fromEntityId===S||N.toEntityId===S)){alert("Unable to delete candidate due to existing financial entries. Mark as Inactive instead.");return}I(S)},y=()=>{j&&(e(j),I(null))},w=S=>n({...S,isActive:!S.isActive}),T=S=>{const D=o.find(N=>N.linkedCandidateId===S.id||N.username===S.email);if(D){alert(`Account exists: ${D.username}`);return}if(!S.email){alert("Email required.");return}a({id:Qt(),name:S.name,username:S.email,password:S.phone||"pass123",role:"candidate",modules:[],linkedCandidateId:S.id,isPasswordChanged:!1,authProvider:"local"}),c("User account created","success")},A=S=>{switch(S){case ut.Placed:return"bg-emerald-100 text-emerald-800";case ut.Training:return"bg-blue-100 text-blue-800";case ut.ReadyForInterview:return"bg-amber-100 text-amber-800";default:return"bg-gray-100 text-gray-800"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ta,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Candidates"})]}),i.jsx(rn,{to:"/candidates/new",children:i.jsx(J,{children:"+ Add Candidate"})})]}),i.jsxs(ce,{children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[i.jsx("input",{placeholder:"Search...",className:"border rounded-lg px-4 py-2 flex-1",value:m,onChange:S=>p(S.target.value)}),i.jsxs("select",{className:"border rounded-lg px-4 py-2",value:f,onChange:S=>v(S.target.value),children:[i.jsx("option",{value:"All",children:"All Statuses"}),s.map(S=>i.jsx("option",{value:S,children:S},S))]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm text-gray-600",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"py-3 px-4",children:"Batch"}),i.jsx("th",{className:"py-3 px-4",children:"Name"}),i.jsx("th",{className:"py-3 px-4",children:"Status"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Active"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Agreed Amt"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:L.map(S=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"bg-blue-50 text-blue-800 px-2 py-1 rounded font-mono",children:S.batchId})}),i.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900",children:[S.name,i.jsx("div",{className:"text-xs text-gray-400",children:S.phone})]}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${A(S.status)}`,children:S.status})}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsx("button",{onClick:()=>w(S),className:`w-10 h-5 rounded-full relative transition-colors ${S.isActive?"bg-emerald-500":"bg-gray-300"}`,children:i.jsx("span",{className:`absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform ${S.isActive?"translate-x-5":""}`})})}),i.jsx("td",{className:"py-3 px-4 text-right font-bold",children:ue(S.agreedAmount)}),i.jsxs("td",{className:"py-3 px-4 text-center flex justify-center gap-2",children:[i.jsx("button",{onClick:()=>x(S),className:"text-gray-500 hover:text-gray-800 p-1",title:"View",children:i.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),i.jsx(rn,{to:`/candidates/edit/${S.id}`,className:"text-blue-500 hover:text-blue-700 p-1",title:"Edit",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),i.jsx(rn,{to:`/candidates/agreement/${S.id}`,className:"text-purple-500 hover:text-purple-700 p-1",title:"Send Agreement",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx("button",{onClick:()=>T(S),className:"text-amber-500 hover:text-amber-700 p-1",title:"Create Login",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),i.jsx("button",{onClick:()=>P(S.id),className:"text-red-500 hover:text-red-700 p-1",title:"Delete",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},S.id))})]})}),i.jsx(Qf,{currentPage:u,totalPages:k,onPageChange:d})]}),i.jsx(Ht,{isOpen:!!C,onClose:()=>x(null),title:"Candidate Details",children:C&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-bold",children:C.name}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Email"}),i.jsx("p",{children:C.email})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Phone"}),i.jsx("p",{children:C.phone})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Batch"}),i.jsx("p",{children:C.batchId})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Status"}),i.jsx("p",{children:C.status})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(J,{variant:"secondary",onClick:()=>x(null),children:"Close"})})]})}),i.jsx(na,{isOpen:!!j,onClose:()=>I(null),onConfirm:y,title:"Delete Candidate",message:"Confirm deletion?"})]})},NS=()=>{const{user:t,candidates:e,candidateProfiles:n,updateCandidateProfile:r,showToast:s}=je(),[o,a]=R.useState("Personal"),c=t==null?void 0:t.linkedCandidateId,u=e.find(f=>f.id===c),[d,m]=R.useState({candidateId:c||""});R.useEffect(()=>{if(c){const f=n.find(v=>v.candidateId===c);m(f||{candidateId:c})}},[c,n]);const p=f=>{f.preventDefault(),c&&(r(d),s("Profile updated successfully"))};return!u||!c?i.jsx("div",{className:"p-8 text-center text-gray-500",children:"No candidate profile linked to this account."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ta,{}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Candidate Profile"}),i.jsxs("p",{className:"text-gray-500",children:[u.name," (",u.batchId,")"]})]})]}),i.jsx("div",{className:"flex gap-2 border-b border-gray-200",children:["Personal","Education","Experience"].map(f=>i.jsxs("button",{onClick:()=>a(f),className:`px-4 py-2 font-medium transition-colors ${o===f?"border-b-2 border-spr-600 text-spr-600":"text-gray-500 hover:text-gray-800"}`,children:[f," Details"]},f))}),i.jsx(ce,{children:i.jsxs("form",{onSubmit:p,children:[o==="Personal"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[i.jsx(ne,{label:"Date of Birth",type:"date",value:d.dob||"",onChange:f=>m({...d,dob:f.target.value})}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),i.jsxs("select",{className:"w-full border rounded-lg px-4 py-2",value:d.gender||"",onChange:f=>m({...d,gender:f.target.value}),children:[i.jsx("option",{value:"",children:"Select"}),i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"})]})]}),i.jsx(ne,{label:"Nationality",value:d.nationality||"",onChange:f=>m({...d,nationality:f.target.value})}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Permanent Address"}),i.jsx("textarea",{className:"w-full border rounded-lg p-2",rows:2,value:d.permanentAddress||"",onChange:f=>m({...d,permanentAddress:f.target.value})})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Address"}),i.jsx("textarea",{className:"w-full border rounded-lg p-2",rows:2,value:d.currentAddress||"",onChange:f=>m({...d,currentAddress:f.target.value})})]})]}),o==="Education"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[i.jsx(ne,{label:"Highest Degree",value:d.degree||"",onChange:f=>m({...d,degree:f.target.value}),placeholder:"e.g. B.Tech CSE"}),i.jsx(ne,{label:"University / College",value:d.university||"",onChange:f=>m({...d,university:f.target.value})}),i.jsx(ne,{label:"Passing Year",value:d.passingYear||"",onChange:f=>m({...d,passingYear:f.target.value})}),i.jsx(ne,{label:"Percentage / CGPA",value:d.percentage||"",onChange:f=>m({...d,percentage:f.target.value})})]}),o==="Experience"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[i.jsxs("div",{className:"col-span-2 flex items-center gap-2 mb-4",children:[i.jsx("input",{type:"checkbox",checked:d.hasExperience||!1,onChange:f=>m({...d,hasExperience:f.target.checked}),id:"exp"}),i.jsx("label",{htmlFor:"exp",className:"text-sm font-medium",children:"I have previous work experience"})]}),d.hasExperience&&i.jsxs(i.Fragment,{children:[i.jsx(ne,{label:"Last Company",value:d.lastCompany||"",onChange:f=>m({...d,lastCompany:f.target.value})}),i.jsx(ne,{label:"Designation",value:d.designation||"",onChange:f=>m({...d,designation:f.target.value})}),i.jsx(ne,{label:"Years of Experience",type:"number",value:d.yearsOfExperience||0,onChange:f=>m({...d,yearsOfExperience:parseFloat(f.target.value)})})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Technical Skills"}),i.jsx("textarea",{className:"w-full border rounded-lg p-2",rows:3,value:d.skills||"",onChange:f=>m({...d,skills:f.target.value}),placeholder:"Java, Selenium, SQL..."})]})]}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx(J,{type:"submit",children:"Save Changes"})})]})})]})},s0=()=>{const{addCandidate:t,updateCandidate:e,candidates:n,candidateStatuses:r,addCandidateStatus:s,showToast:o,transactions:a}=je(),c=St(),{id:u}=gs(),[d,m]=R.useState(null),p=`CANDIDATURE AGREEMENT

1. I, [CANDIDATE NAME], agree to join SPR Techforge for the training program.
2. I agree to pay the total sum of [AMOUNT] as discussed.
3. I understand that the advance payment is non-refundable unless specified otherwise.
4. I will maintain professional conduct during the training period.
5. Upon placement, I agree to fulfill the financial obligations as per the agreement.

Date: _________________
Signature: _________________`,[f,v]=R.useState({name:"",batchId:"",email:"",phone:"",alternatePhone:"",referredBy:"",address:"",agreedAmount:0,paidAmount:0,status:ut.Training,placedCompany:"",packageDetails:"",isActive:!0,notes:"",agreementText:p,workSupportStatus:"None",workSupportMonthlyAmount:0,workSupportStartDate:""});R.useEffect(()=>{if(u){const x=n.find(_=>_.id===u);if(x){let _=x.paidAmount;if(_===void 0){const E=a.filter(L=>L.fromEntityId===u&&L.type===be.Income).reduce((L,P)=>L+P.amount,0),k=a.filter(L=>L.toEntityId===u&&L.type===be.Refund).reduce((L,P)=>L+P.amount,0);_=Math.abs(E)-k}v({...x,paidAmount:_,agreementText:x.agreementText||p.replace("[CANDIDATE NAME]",x.name).replace("[AMOUNT]",x.agreedAmount.toString())})}}},[u,n,a]);const j=(f.agreedAmount||0)-(f.paidAmount||0),I=x=>{if(x.preventDefault(),m(null),!f.name||!f.name.trim()){m("Full Name is required");return}if(!f.batchId||!f.batchId.trim()){m("Batch ID is required");return}if(!f.email||!f.email.trim()){m("Email Address is required");return}if(!f.phone||!f.phone.trim()){m("Phone Number is required");return}if(f.agreedAmount===void 0||f.agreedAmount<0){m("Agreed Amount is required");return}if(f.workSupportStatus==="Active"){if(!f.workSupportStartDate){m("Start Date is required for Active Work Support");return}if(!f.workSupportMonthlyAmount||f.workSupportMonthlyAmount<=0){m("Monthly Amount is required for Active Work Support");return}}if(n.some(k=>{var L,P;return k.id!==(u||"")&&(k.email&&k.email.trim().toLowerCase()===((L=f.email)==null?void 0:L.trim().toLowerCase())||k.phone&&k.phone.trim()===((P=f.phone)==null?void 0:P.trim()))})){m("A candidate with this Email or Phone Number already exists.");return}const E={...f,id:u||Qt(),joinedDate:f.joinedDate||new Date().toISOString()};u?(e(E),o("Candidate updated successfully")):(t(E),o("Candidate added successfully")),c("/candidates")},C=()=>{const x=window.prompt("Enter new status name:");x&&x.trim()&&(s(x.trim()),v({...f,status:x.trim()}))};return i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:u?"Edit Candidate":"Add New Candidate"}),d&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded shadow-sm animate-fade-in",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm text-red-700 font-bold",children:d})})})}),i.jsxs("form",{onSubmit:I,children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ce,{title:"Personal & Contact Details",children:[i.jsx("div",{className:"flex justify-end mb-4",children:i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer bg-gray-50 px-4 py-2 rounded-lg border border-spr-700 hover:bg-gray-100",children:[i.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Active Status"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"checkbox",className:"sr-only peer",checked:f.isActive,onChange:x=>v({...f,isActive:x.target.checked})}),i.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-spr-accent"})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Full Name"}),i.jsx(ne,{value:f.name,onChange:x=>v({...f,name:x.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Batch ID"}),i.jsx(ne,{value:f.batchId,onChange:x=>v({...f,batchId:x.target.value}),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Phone Number"}),i.jsx(ne,{value:f.phone,onChange:x=>v({...f,phone:x.target.value}),required:!0,numericOnly:!0,maxLength:15,placeholder:"Digits only"})]}),i.jsx(ne,{label:"Alternate Phone",value:f.alternatePhone||"",onChange:x=>v({...f,alternatePhone:x.target.value}),numericOnly:!0,maxLength:15,placeholder:"Digits only"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Email Address"}),i.jsx(ne,{type:"email",value:f.email,onChange:x=>v({...f,email:x.target.value}),required:!0})]}),i.jsx(ne,{label:"Referred By",value:f.referredBy||"",onChange:x=>v({...f,referredBy:x.target.value}),placeholder:"Name of referrer (Optional)"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Complete Address"}),i.jsx("textarea",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",rows:3,value:f.address,onChange:x=>v({...f,address:x.target.value}),placeholder:"Enter full address"})]})]})]}),i.jsx(ce,{title:"Work Support Services",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Track monthly recurring payments from the candidate for support services."}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Support Status"}),i.jsxs("select",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",value:f.workSupportStatus||"None",onChange:x=>v({...f,workSupportStatus:x.target.value}),children:[i.jsx("option",{value:"None",children:"No Support"}),i.jsx("option",{value:"Active",children:"Active Support (Monthly Billing)"}),i.jsx("option",{value:"Ended",children:"Support Ended"})]})]}),f.workSupportStatus==="Active"&&i.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-fade-in p-4 bg-purple-50 rounded border border-purple-100",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Start Date"}),i.jsx(ne,{type:"date",value:f.workSupportStartDate||"",onChange:x=>v({...f,workSupportStartDate:x.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Monthly Amount ()"}),i.jsx(ne,{type:"number",value:f.workSupportMonthlyAmount||0,onChange:x=>v({...f,workSupportMonthlyAmount:parseFloat(x.target.value)||0})})]})]})]})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ce,{title:"Training & Placement Info",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Agreed Total Amount ()"}),i.jsx(ne,{type:"number",value:f.agreedAmount,onChange:x=>v({...f,agreedAmount:parseFloat(x.target.value)||0}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Paid ()"}),i.jsx(ne,{type:"number",value:f.paidAmount,onChange:x=>v({...f,paidAmount:parseFloat(x.target.value)||0}),className:"bg-white font-bold"}),i.jsx("div",{className:`text-xs mt-1 font-bold ${j>0?"text-amber-600":"text-emerald-600"}`,children:j>0?`Due: ${ue(j)}`:"Fully Paid"})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 required-label",children:"Current Status"}),i.jsx("button",{type:"button",onClick:C,className:"text-xs text-spr-accent hover:underline font-medium",children:"+ Add Status"})]}),i.jsx("select",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors",value:f.status,onChange:x=>v({...f,status:x.target.value}),required:!0,children:r.map(x=>i.jsx("option",{value:x,children:x},x))})]}),f.status===ut.Placed&&i.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200 mb-4 space-y-3 animate-fade-in",children:[i.jsx("h4",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wide",children:"Placement Details"}),i.jsx(ne,{label:"Company Name",value:f.placedCompany||"",onChange:x=>v({...f,placedCompany:x.target.value}),placeholder:"e.g. Google, Microsoft"}),i.jsx(ne,{label:"Package / Salary Details",value:f.packageDetails||"",onChange:x=>v({...f,packageDetails:x.target.value}),placeholder:"e.g. 12 LPA"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),i.jsx("textarea",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",rows:2,value:f.notes,onChange:x=>v({...f,notes:x.target.value})})]})]}),i.jsxs(ce,{title:"Candidature Agreement",children:[i.jsx("div",{className:"mb-2 text-xs text-gray-500",children:"Edit the terms below for this candidate. This text will be used when generating the agreement."}),i.jsx("textarea",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-800 font-mono text-sm focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",rows:8,value:f.agreementText,onChange:x=>v({...f,agreementText:x.target.value})})]})]})]}),i.jsxs("div",{className:"mt-6 flex gap-4 justify-end pb-10",children:[i.jsx(J,{type:"button",variant:"secondary",onClick:()=>c("/candidates"),children:"Cancel"}),i.jsx(J,{type:"submit",children:u?"Update Candidate":"Save Candidate"})]})]})]})},TS=()=>{const{candidates:t,markAgreementSent:e,markAgreementAccepted:n,isCloudEnabled:r}=je(),{id:s}=gs(),o=St(),a=t.find(d=>d.id===s);if(!a)return i.jsx("div",{className:"p-8 text-white",children:"Candidate not found"});const c=()=>{if(!a.email){alert("No email address found for this candidate.");return}const m=`${window.location.href.split("#")[0]}#/portal/agreement/${a.id}`,p=encodeURIComponent(`Training Agreement - ${a.name} (${a.batchId})`),f=`Dear ${a.name},

Please review and accept your training agreement with SPR Techforge using the link below:

CLICK HERE TO ACCEPT AGREEMENT:
${m}

--------------------------------------------------
Alternatively, the text is provided below for your reference:

${a.agreementText}

Regards,
SPR Techforge Pvt Ltd`,v=encodeURIComponent(f);e(a.id),window.open(`mailto:${a.email}?subject=${p}&body=${v}`)},u=()=>{window.confirm("Confirm that the candidate has physically signed or accepted the agreement?")&&n(a.id)};return i.jsxs("div",{className:"bg-white min-h-screen text-black p-8",children:[i.jsxs("div",{className:"print:hidden mb-8 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center bg-gray-100 p-4 rounded-lg border border-gray-300",children:[i.jsx(J,{variant:"secondary",onClick:()=>o(-1),className:"text-gray-800",children:"Back"}),i.jsxs("div",{className:"flex gap-2",children:[a.agreementAcceptedDate?i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-100 text-emerald-800 rounded-lg font-bold border border-emerald-200",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Accepted on ",new Date(a.agreementAcceptedDate).toLocaleDateString()]}):i.jsxs(i.Fragment,{children:[i.jsx(J,{variant:"secondary",onClick:c,className:"border-blue-300 text-blue-700 bg-blue-50 hover:bg-blue-100",children:"Email Agreement & Link"}),i.jsx(J,{variant:"success",onClick:u,children:"Mark as Accepted"})]}),i.jsx(J,{onClick:()=>window.print(),children:"Print / Save PDF"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:`p-3 rounded border ${a.agreementSentDate?"bg-blue-50 border-blue-200 text-blue-800":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[i.jsx("span",{className:"font-bold text-xs uppercase block",children:"Status: Sent"}),a.agreementSentDate?new Date(a.agreementSentDate).toLocaleString():"Not Sent yet"]}),i.jsxs("div",{className:`p-3 rounded border ${a.agreementAcceptedDate?"bg-emerald-50 border-emerald-200 text-emerald-800":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[i.jsx("span",{className:"font-bold text-xs uppercase block",children:"Status: Accepted"}),a.agreementAcceptedDate?new Date(a.agreementAcceptedDate).toLocaleString():"Pending"]})]}),!r&&i.jsxs("div",{className:"bg-amber-50 text-amber-800 text-xs p-2 rounded border border-amber-200",children:[i.jsx("strong",{children:"Note:"}),' Online Acceptance Link only works when Cloud Sync is enabled. If offline, please use "Mark as Accepted" manually.']})]}),i.jsxs("div",{className:"max-w-3xl mx-auto print:w-full",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8 border-b-2 border-indigo-600 pb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-indigo-600 rounded-lg",children:i.jsx("svg",{className:"text-white w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-indigo-900",children:"SPR Techforge Pvt Ltd"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Excellence in Training & Placement"})]})]}),i.jsxs("div",{className:"text-right text-sm text-gray-600",children:[i.jsxs("p",{children:["Date: ",new Date().toLocaleDateString()]}),i.jsxs("p",{children:["Ref: ",a.batchId]})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-center uppercase underline mb-6",children:"Candidature Training Agreement"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 bg-gray-50 p-4 rounded border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Candidate Name"}),i.jsx("p",{className:"font-bold text-lg",children:a.name})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Batch ID"}),i.jsx("p",{className:"font-bold text-lg",children:a.batchId})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Contact"}),i.jsx("p",{children:a.phone}),i.jsx("p",{children:a.email})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Address"}),i.jsx("p",{className:"whitespace-pre-wrap",children:a.address||"N/A"})]})]}),i.jsx("div",{className:"prose max-w-none",children:i.jsx("div",{className:"whitespace-pre-wrap font-serif text-justify leading-relaxed text-gray-800",children:a.agreementText||"No agreement text provided."})})]}),i.jsxs("div",{className:"mt-20 grid grid-cols-2 gap-10",children:[i.jsxs("div",{className:"border-t border-black pt-2 text-center",children:[i.jsx("p",{className:"font-bold",children:"SPR Techforge Representative"}),i.jsx("p",{className:"text-xs text-gray-500",children:"(Authorized Signatory)"})]}),i.jsxs("div",{className:"border-t border-black pt-2 text-center relative",children:[i.jsx("p",{className:"font-bold",children:a.name}),i.jsx("p",{className:"text-xs text-gray-500",children:"(Candidate Signature)"}),a.agreementAcceptedDate&&i.jsxs("div",{className:"absolute top-[-40px] left-1/2 transform -translate-x-1/2 border-2 border-emerald-600 text-emerald-600 px-4 py-1 font-bold rounded opacity-80 rotate-[-10deg]",children:["DIGITALLY ACCEPTED",i.jsx("div",{className:"text-[8px] text-center",children:new Date(a.agreementAcceptedDate).toLocaleDateString()})]})]})]}),i.jsx("div",{className:"mt-12 text-center text-xs text-gray-400 print:fixed print:bottom-4 print:w-full",children:i.jsx("p",{children:"SPR Techforge Pvt Ltd | Registered Office Address Here | Contact: contact@sprtechforge.com"})})]})]})},SS=()=>{const{transactions:t,getEntityName:e,deleteTransaction:n,user:r,accounts:s,candidates:o}=je(),[a,c]=R.useState(1),[u,d]=R.useState(""),[m,p]=R.useState("All"),[f,v]=R.useState("All"),[j,I]=R.useState(""),[C,x]=R.useState(""),[_,E]=R.useState(""),[k,L]=R.useState(""),[P,y]=R.useState(null),[w,T]=R.useState(null),A=St(),S=10,N=[...t].sort((U,ee)=>new Date(ee.date).getTime()-new Date(U.date).getTime()).filter(U=>{const ee=m==="All"||U.type===m,X=f==="All"||f==="Locked"&&U.isLocked||f==="Unlocked"&&!U.isLocked,he=j===""||U.fromEntityId===j,me=C===""||U.toEntityId===C,oe=e(U.fromEntityId,U.fromEntityType).toLowerCase(),Me=e(U.toEntityId,U.toEntityType).toLowerCase(),Or=U.description.toLowerCase().includes(u.toLowerCase())||oe.includes(u.toLowerCase())||Me.includes(u.toLowerCase());let xn=!0;if(_){const Rn=new Date(_);Rn.setHours(0,0,0,0),xn=xn&&new Date(U.date)>=Rn}if(k){const Rn=new Date(k);Rn.setHours(23,59,59,999),xn=xn&&new Date(U.date)<=Rn}return ee&&Or&&xn&&X&&he&&me}),le=Math.ceil(N.length/S),ie=N.slice((a-1)*S,a*S),ke=U=>{if(U.isLocked&&(r==null?void 0:r.role)!=="admin"){alert("This transaction is locked.");return}T(U.id)},ve=()=>{w&&(n(w),T(null))},q=()=>{const U=N.map(ee=>({Date:new Date(ee.date).toLocaleDateString(),Type:ee.type,Description:ee.description,From:e(ee.fromEntityId,ee.fromEntityType),To:e(ee.toEntityId,ee.toEntityType),Amount:ee.amount,Locked:ee.isLocked?"Yes":"No"}));zl(U,"transactions.csv")},K=[...s].sort((U,ee)=>U.name.localeCompare(ee.name)),re=[...o].sort((U,ee)=>U.name.localeCompare(ee.name));return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Transactions"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(J,{variant:"secondary",onClick:q,children:"Export CSV"}),i.jsx(rn,{to:"/finance/transactions/new",children:i.jsx(J,{children:"+ New Entry"})})]})]}),i.jsxs(ce,{children:[i.jsxs("div",{className:"mb-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx("input",{placeholder:"Search description...",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none placeholder-gray-400",value:u,onChange:U=>d(U.target.value)}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:m,onChange:U=>p(U.target.value),children:[i.jsx("option",{value:"All",children:"All Types"}),Object.values(be).map(U=>i.jsx("option",{value:U,children:U},U))]}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:f,onChange:U=>v(U.target.value),children:[i.jsx("option",{value:"All",children:"All Statuses"}),i.jsx("option",{value:"Locked",children:"Locked"}),i.jsx("option",{value:"Unlocked",children:"Unlocked"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-gray-100 pt-4",children:[i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:j,onChange:U=>I(U.target.value),children:[i.jsx("option",{value:"",children:"All Sources (From)"}),i.jsx("optgroup",{label:"Accounts",children:K.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))}),i.jsx("optgroup",{label:"Candidates",children:re.map(U=>i.jsxs("option",{value:U.id,children:[U.name," (",U.batchId,")"]},U.id))})]}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:C,onChange:U=>x(U.target.value),children:[i.jsx("option",{value:"",children:"All Destinations (To)"}),i.jsx("optgroup",{label:"Accounts",children:K.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))}),i.jsx("optgroup",{label:"Candidates",children:re.map(U=>i.jsxs("option",{value:U.id,children:[U.name," (",U.batchId,")"]},U.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-gray-100 pt-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold w-12",children:"From"}),i.jsx("input",{type:"date",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none placeholder-gray-400",value:_,onChange:U=>E(U.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold w-12",children:"To"}),i.jsx("input",{type:"date",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none placeholder-gray-400",value:k,onChange:U=>L(U.target.value)})]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase tracking-wider text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-3 px-4 w-28",children:"Date"}),i.jsx("th",{className:"py-3 px-4",children:"Description"}),i.jsx("th",{className:"py-3 px-4",children:"From (Source)"}),i.jsx("th",{className:"py-3 px-4",children:"To (Dest)"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Amount"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:ie.length>0?ie.map(U=>{const ee=U.isLocked,X=!ee||(r==null?void 0:r.role)==="admin";return i.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ee?"bg-gray-50/50":""}`,children:[i.jsx("td",{className:"py-3 px-4 text-sm text-gray-500",children:new Date(U.date).toLocaleDateString()}),i.jsxs("td",{className:"py-3 px-4 cursor-pointer group",onClick:()=>y(U),children:[i.jsxs("div",{className:`font-medium flex items-center gap-2 transition-colors ${ee?"text-gray-500":"text-gray-900 hover:text-indigo-600"}`,children:[U.description,ee?i.jsxs("svg",{className:"w-4 h-4 text-amber-600/70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("title",{children:"Locked Transaction"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]}):i.jsxs("svg",{className:"w-3 h-3 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("title",{children:"Editable"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})]})]}),i.jsx("div",{className:"text-xs text-gray-500 inline-block px-1 rounded bg-gray-100 border border-gray-200",children:U.type})]}),i.jsx("td",{className:"py-3 px-4 text-sm",children:e(U.fromEntityId,U.fromEntityType)}),i.jsx("td",{className:"py-3 px-4 text-sm",children:e(U.toEntityId,U.toEntityType)}),i.jsx("td",{className:`py-3 px-4 text-right font-mono font-bold ${U.type==="Income"?"text-emerald-600":U.type==="Expense"?"text-red-600":"text-gray-700"}`,children:ue(U.amount)}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsx("button",{onClick:()=>y(U),className:"text-gray-400 hover:text-gray-900 p-1 rounded hover:bg-gray-100",title:"View Details",children:i.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),X?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>A(`/finance/transactions/edit/${U.id}`),className:"text-blue-500 hover:text-blue-700 p-1 rounded hover:bg-blue-50",title:"Edit",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),i.jsx("button",{onClick:()=>ke(U),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50",title:"Delete",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}):i.jsx("div",{className:"p-1 px-2",title:"Locked",children:i.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]})})]},U.id)}):i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"py-8 text-center text-gray-500",children:"No transactions found matching your criteria."})})})]})}),i.jsx(Qf,{currentPage:a,totalPages:le,onPageChange:c})]}),i.jsx(Ht,{isOpen:!!P,onClose:()=>y(null),title:"Transaction Details",children:P&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center pb-4 border-b border-spr-700",children:[i.jsx("p",{className:"text-gray-500 text-sm uppercase tracking-wider font-bold",children:"Amount"}),i.jsx("p",{className:`text-4xl font-bold mt-2 ${P.type==="Income"?"text-emerald-600":P.type==="Expense"?"text-red-600":"text-gray-900"}`,children:ue(P.amount)}),i.jsx("div",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-gray-200 text-gray-700",children:P.type})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1 font-bold",children:"Date"}),i.jsx("p",{className:"text-gray-900 font-medium",children:new Date(P.date).toDateString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1 font-bold",children:"Transaction ID"}),i.jsx("p",{className:"text-gray-600 font-mono text-sm truncate",title:P.id,children:P.id})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1 font-bold",children:"Description"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"text-gray-900 text-lg leading-relaxed",children:P.description}),P.isLocked&&i.jsxs("svg",{className:"w-5 h-5 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("title",{children:"Locked"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-spr-700 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"From (Source)"}),i.jsx("p",{className:"text-indigo-600 font-bold",children:e(P.fromEntityId,P.fromEntityType)})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-white text-gray-500 border border-spr-700 font-medium",children:P.fromEntityType})})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"To (Destination)"}),i.jsx("p",{className:"text-indigo-600 font-bold",children:e(P.toEntityId,P.toEntityType)})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-white text-gray-500 border border-spr-700 font-medium",children:P.toEntityType})})]})]}),P.isLocked&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded text-amber-800 text-sm",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"This transaction is locked and cannot be modified by staff."]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(J,{variant:"secondary",onClick:()=>y(null),children:"Close"})})]})}),i.jsx(na,{isOpen:!!w,onClose:()=>T(null),onConfirm:ve,title:"Delete Transaction",message:"Are you sure you want to delete this transaction? This will affect account balances."})]})},i0=()=>{const{addTransaction:t,updateTransaction:e,transactions:n,accounts:r,candidates:s,users:o,user:a,showToast:c}=je(),u=St(),{id:d}=gs(),[m,p]=R.useState(null),[f,v]=R.useState(be.Income),[j,I]=R.useState(new Date().toISOString().split("T")[0]),[C,x]=R.useState(""),[_,E]=R.useState(""),[k,L]=R.useState(""),[P,y]=R.useState(""),w=N=>{const le=[],ie=ve=>{r.filter(ve).forEach(q=>{le.push({id:q.id,name:q.name,type:"Account",category:q.type})})},ke=()=>{[...s].sort((q,K)=>q.name.localeCompare(K.name)).forEach(q=>{const K=q.isActive?"":" (Inactive)";le.push({id:q.id,name:`${q.name} (${q.batchId})${K}`,type:"Candidate",category:"Candidate"})})};return N==="from"?f===be.Income?(ke(),ie(ve=>ve.type===Ie.Debtor||ve.type===Ie.Income)):(f===be.Expense||f===be.Transfer||f===be.Refund)&&ie(ve=>ve.type===Ie.Bank||ve.type===Ie.Cash):f===be.Income||f===be.Transfer?ie(ve=>ve.type===Ie.Bank||ve.type===Ie.Cash):f===be.Expense?ie(ve=>ve.type===Ie.Expense||ve.type===Ie.Creditor||ve.type===Ie.Salary):f===be.Refund&&(ke(),ie(ve=>ve.type===Ie.Debtor)),le},T=w("from"),A=w("to");R.useEffect(()=>{if(d){const N=n.find(le=>le.id===d);N&&(v(N.type),I(N.date.split("T")[0]),x(N.amount.toString()),E(N.description),L(N.fromEntityId),y(N.toEntityId))}},[d,n]);const S=N=>{var q;if(N.preventDefault(),p(null),!j){p("Date is required");return}if(!C||parseFloat(C)<=0){p("Valid amount is required");return}if(!k){p("Source (From) is required");return}if(!P){p("Destination (To) is required");return}const le=_&&_.trim()?_:`${f} Transaction`,ie=T.find(K=>K.id===k),ke=A.find(K=>K.id===P);if(!ie||!ke){p("Invalid Source or Destination for selected transaction type.");return}if(k===P&&ie.type===ke.type){p("Source and Destination cannot be the same.");return}const ve={id:d||Qt(),date:new Date(j).toISOString(),type:f,amount:parseFloat(C),description:le,fromEntityId:k,fromEntityType:ie.type,toEntityId:P,toEntityType:ke.type,isLocked:!1};if(d){if((q=n.find(K=>K.id===d))!=null&&q.isLocked&&(a==null?void 0:a.role)!=="admin"){p("Cannot edit locked transaction");return}e(ve),c("Transaction updated successfully")}else t(ve),c("Transaction added successfully");u("/finance/transactions")},D=N=>{v(N),L(""),y(""),p(null)};return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:d?"Edit Transaction":"Record Transaction"}),m&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded shadow-sm animate-fade-in",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm text-red-700 font-bold",children:m})})})}),i.jsx(ce,{children:i.jsxs("form",{onSubmit:S,children:[i.jsx("div",{className:"grid grid-cols-1 gap-4 mb-4",children:i.jsx("div",{className:"flex bg-gray-100 p-1 rounded-lg border border-gray-200",children:Object.values(be).map(N=>i.jsx("button",{type:"button",onClick:()=>D(N),className:`flex-1 py-2 rounded-md text-sm font-medium transition-colors ${f===N?"bg-spr-accent text-white shadow-sm font-bold":"text-gray-500 hover:text-gray-900 hover:bg-gray-200"}`,children:N},N))})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Date"}),i.jsx(ne,{type:"date",value:j,onChange:N=>I(N.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Amount ()"}),i.jsx(ne,{type:"number",step:"0.01",value:C,onChange:N=>x(N.target.value),required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:f==="Income"?"Received From (Payer)":"Paid From (Source)"}),i.jsxs(ic,{value:k,onChange:N=>L(N.target.value),required:!0,children:[i.jsx("option",{value:"",children:"-- Select Source --"}),T.map(N=>i.jsxs("option",{value:N.id,children:[N.name," ",N.type==="Candidate"?"":`[${N.category}]`]},N.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:f==="Expense"?"Paid To (Expense/Vendor/Salary A/c)":"Deposit To (Dest)"}),i.jsxs(ic,{value:P,onChange:N=>y(N.target.value),required:!0,children:[i.jsx("option",{value:"",children:"-- Select Destination --"}),A.map(N=>i.jsxs("option",{value:N.id,children:[N.name," ",N.type==="Candidate"?"":`[${N.category}]`]},N.id))]})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description / Reference"}),i.jsx(ne,{value:_,onChange:N=>E(N.target.value),placeholder:f==="Income"?"e.g., Advance Payment for Java Batch":"e.g., Salary Payment Jan 2025"})]}),i.jsxs("div",{className:"mt-6 flex gap-4 justify-end",children:[i.jsx(J,{type:"button",variant:"secondary",onClick:()=>u("/finance/transactions"),children:"Cancel"}),i.jsx(J,{type:"submit",children:"Save Record"})]})]})})]})},CS=()=>{const{accounts:t,getEntityBalance:e,deleteAccount:n}=je(),r=St(),[s,o]=R.useState(""),[a,c]=R.useState(null),u=(v,j)=>{if(j){alert("Cannot delete system accounts");return}c(v)},d=()=>{a&&(n(a),c(null))},m=v=>v>0?"text-emerald-600":v<0?"text-red-600":"text-gray-400",f=t.filter(v=>v.name.toLowerCase().includes(s.toLowerCase())||v.subType&&v.subType.toLowerCase().includes(s.toLowerCase())).reduce((v,j)=>{const I=j.type;return v[I]||(v[I]=[]),v[I].push(j),v},{});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ledger Accounts"}),i.jsx(rn,{to:"/finance/accounts/new",children:i.jsx(J,{children:"+ Add Account"})})]}),i.jsx(ce,{className:"p-0",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),i.jsx("input",{placeholder:"Search accounts by name or sub-type...",className:"w-full bg-white border-none rounded-lg px-2 py-1 text-gray-900 focus:ring-0 outline-none placeholder-gray-400",value:s,onChange:v=>o(v.target.value)})]})}),Object.keys(f).length>0?Object.entries(f).map(([v,j])=>i.jsx(ce,{title:`${v} Accounts`,className:"mb-6",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-2 px-4",children:"Account Name"}),i.jsx("th",{className:"py-2 px-4",children:"Sub Type"}),i.jsx("th",{className:"py-2 px-4 text-right",children:"Current Balance"}),i.jsx("th",{className:"py-2 px-4 text-center",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:j.map(I=>{const C=e(I.id,"Account");return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:I.name}),i.jsx("td",{className:"py-3 px-4 text-sm",children:I.subType||"-"}),i.jsx("td",{className:`py-3 px-4 text-right font-mono font-bold ${m(C)}`,children:ue(C)}),i.jsxs("td",{className:"py-3 px-4 text-center flex justify-center gap-2",children:[i.jsx("button",{onClick:()=>r(`/finance/statement/Account/${I.id}`),className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"Stmt"}),i.jsx("button",{onClick:()=>r(`/finance/accounts/edit/${I.id}`),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),!I.isSystem&&i.jsx("button",{onClick:()=>u(I.id,I.isSystem),className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"Del"})]})]},I.id)})})]})})},v)):i.jsx("div",{className:"text-center text-gray-500 py-12 bg-white rounded-xl border border-gray-300 border-dashed",children:i.jsxs("p",{children:['No ledger accounts found matching "',s,'".']})}),i.jsx(na,{isOpen:!!a,onClose:()=>c(null),onConfirm:d,title:"Delete Account",message:"Are you sure you want to delete this account? History will be preserved but the account name will be lost in filters."})]})},o0=()=>{const{addAccount:t,updateAccount:e,accounts:n,showToast:r}=je(),s=St(),{id:o}=gs(),[a,c]=R.useState({name:"",type:Ie.Expense,subType:"",openingBalance:0,description:"",recurringAmount:0,recurringStartDate:""});R.useEffect(()=>{if(o){const m=n.find(p=>p.id===o);m&&c(m)}},[o,n]);const u=m=>{if(m.preventDefault(),!a.name)return alert("Account Name is required");const p={...a,id:o||Qt()};o?(e(p),r("Ledger Account updated successfully")):(t(p),r("Ledger Account created successfully")),s("/finance/accounts")},d=a.type===Ie.Salary||a.type===Ie.Expense;return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:o?"Edit Account":"Add New Account"}),i.jsx(ce,{children:i.jsxs("form",{onSubmit:u,children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx("div",{className:"col-span-2",children:i.jsx(ne,{label:"Account / Ledger Name",value:a.name,onChange:m=>c({...a,name:m.target.value}),placeholder:a.type==="Salary"?"e.g. John Doe Salary A/c":"e.g. Axis Bank, Office Rent",required:!0})}),i.jsx(ic,{label:"Account Type",value:a.type,onChange:m=>c({...a,type:m.target.value}),children:Object.values(Ie).map(m=>i.jsx("option",{value:m,children:m},m))}),i.jsx(ne,{label:"Sub Ledger / Grouping",value:a.subType,onChange:m=>c({...a,subType:m.target.value}),placeholder:"e.g. Utilities, Employee, HDFC"}),i.jsx(ne,{label:"Opening Balance ()",type:"number",value:a.openingBalance,onChange:m=>c({...a,openingBalance:parseFloat(m.target.value)||0})})]}),d&&i.jsxs("div",{className:"mt-6 bg-blue-50 p-4 rounded-lg border border-blue-200 animate-fade-in",children:[i.jsx("h3",{className:"text-sm font-bold text-blue-900 uppercase mb-3",children:"Fixed Monthly Obligations"}),i.jsx("p",{className:"text-xs text-blue-800 mb-3",children:"Configure this if you have a fixed monthly payment for this account (e.g., Employee Salary, Office Rent)."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fixed Monthly Amount ()"}),i.jsx(ne,{type:"number",value:a.recurringAmount||0,onChange:m=>c({...a,recurringAmount:parseFloat(m.target.value)||0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),i.jsx(ne,{type:"date",value:a.recurringStartDate||"",onChange:m=>c({...a,recurringStartDate:m.target.value})})]})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx(ne,{label:"Description",value:a.description||"",onChange:m=>c({...a,description:m.target.value})})}),i.jsxs("div",{className:"mt-6 flex gap-4 justify-end",children:[i.jsx(J,{type:"button",variant:"secondary",onClick:()=>s("/finance/accounts"),children:"Cancel"}),i.jsx(J,{type:"submit",children:"Save Account"})]})]})})]})},IS=()=>{var f,v;const{transactions:t,getEntityName:e,accounts:n,candidates:r}=je(),{type:s,id:o}=gs(),a=St();if(!s||!o)return i.jsx("div",{children:"Invalid Parameters"});const c=s==="Candidate"?(f=r.find(j=>j.id===o))==null?void 0:f.name:(v=n.find(j=>j.id===o))==null?void 0:v.name;if(!c)return i.jsx("div",{className:"text-gray-900 p-4",children:"Entity not found."});const d=[...t.filter(j=>j.fromEntityId===o&&j.fromEntityType===s||j.toEntityId===o&&j.toEntityType===s).sort((j,I)=>new Date(I.date).getTime()-new Date(j.date).getTime())].reverse();let m=0;if(s==="Account"){const j=n.find(I=>I.id===o);j&&(m=j.openingBalance)}const p=d.map(j=>{let I=0;return j.toEntityId===o&&j.toEntityType===s?I=j.amount:I=-j.amount,m+=I,{...j,impact:I,runningBalance:m}}).reverse();return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx(J,{variant:"secondary",onClick:()=>a(-1),className:"mb-2 text-xs",children:"Back"}),i.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Statement: ",c]}),i.jsx("p",{className:"text-gray-500 text-sm font-medium",children:s})]}),i.jsx(J,{onClick:()=>zl(p,`${c}_Statement.csv`),children:"Download CSV"})]}),i.jsx(ce,{children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-3 px-4",children:"Date"}),i.jsx("th",{className:"py-3 px-4",children:"Description"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Credit (+)"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Debit (-)"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Balance"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:p.length>0?p.map(j=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4 text-sm font-medium",children:new Date(j.date).toLocaleDateString()}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("div",{className:"text-gray-900",children:j.description}),i.jsx("div",{className:"text-xs text-gray-500",children:j.impact>0?`From: ${e(j.fromEntityId,j.fromEntityType)}`:`To: ${e(j.toEntityId,j.toEntityType)}`})]}),i.jsx("td",{className:"py-3 px-4 text-right text-emerald-600 font-medium",children:j.impact>0?ue(j.amount):"-"}),i.jsx("td",{className:"py-3 px-4 text-right text-red-600 font-medium",children:j.impact<0?ue(j.amount):"-"}),i.jsx("td",{className:"py-3 px-4 text-right font-mono font-bold text-gray-900",children:ue(j.runningBalance)})]},j.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"text-center py-8 text-gray-500",children:"No transactions recorded for this entity."})})})]})})]})},AS=()=>{const{transactions:t,accounts:e,candidates:n,getEntityBalance:r}=je(),[s,o]=R.useState("BS"),a=t.filter(y=>y.type===be.Income),c=t.filter(y=>y.type===be.Expense),u=a.reduce((y,w)=>y+w.amount,0),d=c.reduce((y,w)=>y+w.amount,0),m=u-d,p=c.reduce((y,w)=>{let T="General Expense";if(w.toEntityType==="Account"){const A=e.find(S=>S.id===w.toEntityId);A&&(T=A.subType||A.name)}return y[T]=(y[T]||0)+w.amount,y},{}),f=e.filter(y=>y.type===Ie.Cash),v=e.filter(y=>y.type===Ie.Bank),j=e.filter(y=>y.type===Ie.Debtor),I=f.reduce((y,w)=>y+r(w.id,"Account"),0),C=v.reduce((y,w)=>y+r(w.id,"Account"),0),x=j.reduce((y,w)=>y+r(w.id,"Account"),0),_=n.reduce((y,w)=>{if(!w.isActive&&w.status==="Discontinued")return y;const T=t.filter(N=>N.fromEntityId===w.id&&N.type===be.Income).reduce((N,le)=>N+le.amount,0),A=t.filter(N=>N.toEntityId===w.id&&N.type===be.Refund).reduce((N,le)=>N+le.amount,0),S=T-A,D=w.agreedAmount-S;return y+(D>0?D:0)},0),E=I+C+x+_,L=e.filter(y=>y.type===Ie.Creditor).reduce((y,w)=>{const T=r(w.id,"Account");return y+(T<0?Math.abs(T):0)},0),P=E-L;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center print:hidden",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Financial Statements"}),i.jsx(J,{onClick:()=>window.print(),children:"Print / Save PDF"})]}),i.jsxs("div",{className:"print:hidden flex space-x-4 border-b border-gray-200",children:[i.jsx("button",{className:`py-2 px-4 font-medium border-b-2 transition-colors ${s==="BS"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>o("BS"),children:"Balance Sheet"}),i.jsx("button",{className:`py-2 px-4 font-medium border-b-2 transition-colors ${s==="PL"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>o("PL"),children:"Profit & Loss"})]}),i.jsxs("div",{className:"bg-white p-8 min-h-screen shadow-sm border border-gray-200 print:shadow-none print:border-none print:p-0",children:[i.jsxs("div",{className:"text-center border-b-2 border-gray-800 pb-6 mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 uppercase tracking-widest",children:"SPR Techforge Pvt Ltd"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Consultancy & Training Services"}),i.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Generated on: ",new Date().toLocaleDateString()]})]}),(s==="BS"||typeof window<"u")&&i.jsxs("div",{className:s==="BS"?"block":"hidden print:block print:break-after-page",children:[i.jsx("h3",{className:"text-xl font-bold text-center underline mb-6",children:"BALANCE SHEET"}),i.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 mb-2",children:[i.jsx("span",{className:"font-bold text-emerald-800",children:"ASSETS"}),i.jsx("span",{className:"font-bold text-emerald-800",children:"Amount ()"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsx("div",{className:"flex justify-between font-semibold text-gray-700",children:i.jsx("span",{children:"Current Assets"})}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Cash on Hand"}),i.jsx("span",{children:ue(I)})]}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Bank Accounts"}),i.jsx("span",{children:ue(C)})]}),i.jsx("div",{className:"flex justify-between font-semibold text-gray-700 mt-4",children:i.jsx("span",{children:"Receivables"})}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Candidate Fees Pending"}),i.jsx("span",{children:ue(_)})]}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Sundry Debtors"}),i.jsx("span",{children:ue(x)})]})]}),i.jsxs("div",{className:"flex justify-between border-t border-gray-800 pt-2 mt-8 font-bold text-gray-900 text-lg",children:[i.jsx("span",{children:"TOTAL ASSETS"}),i.jsx("span",{children:ue(E)})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 mb-2",children:[i.jsx("span",{className:"font-bold text-red-800",children:"LIABILITIES"}),i.jsx("span",{className:"font-bold text-red-800",children:"Amount ()"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsx("div",{className:"flex justify-between font-semibold text-gray-700",children:i.jsx("span",{children:"Current Liabilities"})}),i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Sundry Creditors"}),i.jsx("span",{children:ue(L)})]})]}),i.jsxs("div",{className:"flex justify-between border-t border-gray-300 pt-2 mt-8 font-bold text-gray-700",children:[i.jsx("span",{children:"Total Liabilities"}),i.jsx("span",{children:ue(L)})]}),i.jsxs("div",{className:"mt-8",children:[i.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 mb-2",children:[i.jsx("span",{className:"font-bold text-indigo-800",children:"EQUITY"}),i.jsx("span",{className:"font-bold text-indigo-800",children:"Amount ()"})]}),i.jsx("div",{className:"space-y-2 text-sm",children:i.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[i.jsx("span",{children:"Owners Capital / Net Value"}),i.jsx("span",{children:ue(P)})]})})]}),i.jsxs("div",{className:"flex justify-between border-t border-gray-800 pt-2 mt-8 font-bold text-gray-900 text-lg",children:[i.jsx("span",{children:"TOTAL LIABILITIES & EQUITY"}),i.jsx("span",{children:ue(L+P)})]})]})]})]}),(s==="PL"||typeof window<"u")&&i.jsxs("div",{className:`${s==="PL"?"block":"hidden print:block"} print:mt-8`,children:[i.jsx("h3",{className:"text-xl font-bold text-center underline mb-6",children:"PROFIT & LOSS ACCOUNT"}),i.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-gray-100 text-gray-900 font-bold",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3 border-r border-gray-300 w-2/3",children:"Particulars"}),i.jsx("th",{className:"p-3 text-right",children:"Amount ()"})]})}),i.jsxs("tbody",{className:"divide-y divide-gray-200",children:[i.jsxs("tr",{className:"bg-emerald-50/50 font-bold text-emerald-800",children:[i.jsx("td",{className:"p-3 border-r border-gray-200",children:"INCOME (Revenue)"}),i.jsx("td",{className:"p-3 text-right"})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"p-3 pl-8 border-r border-gray-200 text-gray-700",children:"Consultancy Fees Received"}),i.jsx("td",{className:"p-3 text-right text-gray-900",children:ue(u)})]}),i.jsxs("tr",{className:"font-bold bg-gray-50",children:[i.jsx("td",{className:"p-3 border-r border-gray-200 text-right",children:"Total Income (A)"}),i.jsx("td",{className:"p-3 text-right text-emerald-700",children:ue(u)})]}),i.jsxs("tr",{className:"bg-red-50/50 font-bold text-red-800",children:[i.jsx("td",{className:"p-3 border-r border-gray-200",children:"EXPENSES"}),i.jsx("td",{className:"p-3 text-right"})]}),Object.entries(p).map(([y,w])=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-3 pl-8 border-r border-gray-200 text-gray-700",children:y}),i.jsx("td",{className:"p-3 text-right text-gray-900",children:ue(w)})]},y)),i.jsxs("tr",{className:"font-bold bg-gray-50",children:[i.jsx("td",{className:"p-3 border-r border-gray-200 text-right",children:"Total Expenses (B)"}),i.jsx("td",{className:"p-3 text-right text-red-700",children:ue(d)})]}),i.jsxs("tr",{className:`text-lg font-bold ${m>=0?"bg-emerald-100 text-emerald-900":"bg-red-100 text-red-900"}`,children:[i.jsx("td",{className:"p-4 border-r border-gray-300 text-right uppercase",children:m>=0?"Net Profit (A - B)":"Net Loss (A - B)"}),i.jsx("td",{className:"p-4 text-right",children:ue(m)})]})]})]})})]}),i.jsx("div",{className:"mt-12 text-center text-xs text-gray-400",children:i.jsx("p",{children:"This is a computer-generated statement."})})]})]})},kS=()=>{const{accounts:t,transactions:e}=je(),n=t.filter(s=>(s.type===Ie.Salary||s.recurringAmount!==void 0&&s.recurringAmount>0)&&s.recurringStartDate),r=(s,o)=>{const a=new Date(s),c=o?new Date(o):new Date;let u=(c.getFullYear()-a.getFullYear())*12+(c.getMonth()-a.getMonth());return u<0&&(u=0),u+1};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Payroll & Fixed Expenses"}),i.jsx("p",{className:"text-gray-500",children:"Track monthly salaries, office rent, and other recurring fixed obligations."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(rn,{to:"/finance/accounts/new",children:i.jsx(J,{variant:"secondary",children:"+ New Ledger"})}),i.jsx(rn,{to:"/finance/transactions/new",children:i.jsx(J,{children:"+ Pay Expense"})})]})]}),i.jsx(ce,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-3 px-4",children:"Ledger / Employee"}),i.jsx("th",{className:"py-3 px-4",children:"Type"}),i.jsx("th",{className:"py-3 px-4",children:"Start Date"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Fixed Monthly ()"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Months"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Total Payable"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Total Paid"}),i.jsx("th",{className:"py-3 px-4 text-right",children:"Pending"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:n.length>0?n.map(s=>{const o=r(s.recurringStartDate,s.recurringEndDate),a=o*(s.recurringAmount||0),c=e.filter(d=>d.toEntityId===s.id&&d.toEntityType==="Account"&&d.type===be.Expense).reduce((d,m)=>d+m.amount,0),u=a-c;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900",children:[s.name,s.subType&&i.jsx("div",{className:"text-xs text-gray-400",children:s.subType})]}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`text-xs px-2 py-1 rounded border ${s.type==="Salary"?"bg-indigo-50 text-indigo-700 border-indigo-200":"bg-gray-100 border-gray-200"}`,children:s.type})}),i.jsx("td",{className:"py-3 px-4 text-sm",children:new Date(s.recurringStartDate).toLocaleDateString()}),i.jsx("td",{className:"py-3 px-4 text-right text-gray-900",children:ue(s.recurringAmount||0)}),i.jsx("td",{className:"py-3 px-4 text-center",children:o}),i.jsx("td",{className:"py-3 px-4 text-right font-medium",children:ue(a)}),i.jsx("td",{className:"py-3 px-4 text-right text-emerald-600 font-medium",children:ue(c)}),i.jsx("td",{className:`py-3 px-4 text-right font-bold ${u>0?"text-red-600":"text-emerald-600"}`,children:ue(u)}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsx(rn,{to:`/finance/accounts/edit/${s.id}`,className:"text-blue-600 hover:underline text-xs",children:"Edit"})})]},s.id)}):i.jsx("tr",{children:i.jsxs("td",{colSpan:9,className:"py-8 text-center text-gray-500",children:["No fixed recurring expenses found. ",i.jsx("br",{}),'Create a Ledger Account (Type: Salary or Expense) and set a "Fixed Monthly Amount" to see it here.']})})})]})})})]})},PS=()=>{const{exportData:t,importDatabase:e,isCloudEnabled:n,transactions:r}=je(),s=R.useRef(null),[o,a]=R.useState("Data"),c=p=>{var j;const f=(j=p.target.files)==null?void 0:j[0];if(!f)return;const v=new FileReader;v.onload=async I=>{var C;try{const x=JSON.parse((C=I.target)==null?void 0:C.result);let _="You are about to restore the database from a backup file. This will OVERWRITE current local data.";n&&(_+=" Since Cloud is enabled, this will also upload the backup data to Firebase, potentially overwriting or adding to existing records."),window.confirm(_+`

Are you sure you want to proceed?`)&&await e(x)}catch{alert("Invalid JSON File. Please upload a valid backup file.")}s.current&&(s.current.value="")},v.readAsText(f)},d=Array.from({length:6},(p,f)=>{const v=new Date;return v.setMonth(v.getMonth()-(5-f)),v}).map(p=>{`${p.getFullYear()}${p.getMonth()}`;const f=p.toLocaleString("default",{month:"short",year:"2-digit"}),v=r.filter(I=>I.type===be.Income&&new Date(I.date).getMonth()===p.getMonth()&&new Date(I.date).getFullYear()===p.getFullYear()).reduce((I,C)=>I+C.amount,0),j=r.filter(I=>I.type===be.Expense&&new Date(I.date).getMonth()===p.getMonth()&&new Date(I.date).getFullYear()===p.getFullYear()).reduce((I,C)=>I+C.amount,0);return{label:f,income:v,expense:j}}),m=Math.max(...d.map(p=>Math.max(p.income,p.expense)),1e3);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Data & Analytics"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>a("Data"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${o==="Data"?"bg-spr-accent text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Backup & Restore"}),i.jsx("button",{onClick:()=>a("Info"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${o==="Info"?"bg-spr-accent text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Database Info"})]})]}),o==="Data"&&i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs(ce,{title:"Financial Trends (Last 6 Months)",children:[i.jsx("div",{className:"h-64 flex items-end justify-between gap-2 px-2 pb-2 pt-6",children:d.map((p,f)=>i.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center gap-2 group",children:[i.jsxs("div",{className:"w-full flex justify-center gap-1 h-full items-end relative",children:[i.jsxs("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-gray-800 text-white text-xs p-2 rounded shadow-lg z-10 whitespace-nowrap",children:["Income: ",ue(p.income),i.jsx("br",{}),"Expense: ",ue(p.expense)]}),i.jsx("div",{className:"w-1/3 bg-emerald-500 hover:bg-emerald-600 rounded-t transition-all duration-500",style:{height:`${p.income/m*100}%`}}),i.jsx("div",{className:"w-1/3 bg-red-500 hover:bg-red-600 rounded-t transition-all duration-500",style:{height:`${p.expense/m*100}%`}})]}),i.jsx("span",{className:"text-xs text-gray-500 font-medium",children:p.label})]},f))}),i.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-3 h-3 bg-emerald-500 rounded"}),i.jsx("span",{className:"text-xs text-gray-600",children:"Income"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-3 h-3 bg-red-500 rounded"}),i.jsx("span",{className:"text-xs text-gray-600",children:"Expenses"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(ce,{title:"Backup (Export)",className:"h-full",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"Download a complete copy of the system database. This JSON file contains all Candidates, Accounts, Transactions, Users, and Logs."}),i.jsx("div",{className:"pt-4",children:i.jsx(J,{onClick:t,children:"Download Full Database"})})]})}),i.jsx(ce,{title:"Restore (Import)",className:"h-full",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"Upload a previously exported JSON file to restore the system state."}),i.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-3 rounded text-sm text-amber-800",children:[i.jsx("strong",{children:"Warning:"})," This action updates your current database with the data from the file."]}),i.jsxs("div",{className:"pt-4",children:[i.jsx("input",{type:"file",accept:".json",ref:s,style:{display:"none"},onChange:c}),i.jsx(J,{variant:"secondary",onClick:()=>{var p;return(p=s.current)==null?void 0:p.click()},children:"Upload & Restore Backup"})]})]})})]})]}),o==="Info"&&i.jsx("div",{className:"animate-fade-in",children:i.jsx(ce,{title:"Database Structure",children:i.jsxs("div",{className:"text-gray-600 space-y-4",children:[i.jsx("p",{children:"The application currently uses a NoSQL structure (JSON-based)."}),n?i.jsxs("div",{className:"bg-orange-50 border border-orange-200 p-4 rounded text-orange-900",children:[i.jsx("strong",{children:"Cloud Provider:"})," Google Firebase (Firestore)",i.jsx("br",{}),i.jsx("strong",{children:"Status:"})," Connected",i.jsx("br",{}),i.jsx("p",{className:"mt-2 text-sm",children:"Data is synced in real-time. Collections are created automatically (Schemaless)."})]}):i.jsxs("div",{className:"bg-gray-100 border border-gray-300 p-4 rounded",children:[i.jsx("strong",{children:"Storage:"})," Local Browser Storage",i.jsx("br",{}),i.jsx("strong",{children:"Status:"})," Offline Mode"]})]})})})]})},RS=()=>{const{users:t,candidates:e}=je(),[n,r]=R.useState(""),[s,o]=R.useState("All"),c=[...t.map(u=>({id:u.id,name:u.name||u.username,role:u.role==="admin"?"Administrator":"Staff",email:u.email||u.username,phone:"",type:"Staff"})),...e.filter(u=>u.isActive).map(u=>({id:u.id,name:u.name,role:`Candidate (${u.batchId})`,email:u.email,phone:u.phone,type:"Candidate"}))].filter(u=>{const d=u.name.toLowerCase().includes(n.toLowerCase())||u.email.toLowerCase().includes(n.toLowerCase())||u.role.toLowerCase().includes(n.toLowerCase()),m=s==="All"||u.type===s;return d&&m});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Address Book"}),i.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[i.jsx("input",{placeholder:"Search contacts...",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none flex-1",value:n,onChange:u=>r(u.target.value)}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:s,onChange:u=>o(u.target.value),children:[i.jsx("option",{value:"All",children:"All Contacts"}),i.jsx("option",{value:"Candidate",children:"Candidates"}),i.jsx("option",{value:"Staff",children:"Staff"})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(u=>i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold text-white ${u.type==="Staff"?"bg-indigo-600":"bg-emerald-500"}`,children:u.name.charAt(0).toUpperCase()}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-gray-900",children:u.name}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${u.type==="Staff"?"bg-indigo-50 text-indigo-700 border-indigo-100":"bg-emerald-50 text-emerald-700 border-emerald-100"}`,children:u.role})]})]}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-600 flex-1",children:[u.phone&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),i.jsx("span",{children:u.phone})]}),u.email&&i.jsxs("div",{className:"flex items-center gap-2 break-all",children:[i.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("span",{children:u.email})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-100",children:[u.phone&&i.jsx("a",{href:`tel:${u.phone}`,className:"flex-1 py-2 text-center rounded-lg bg-green-50 text-green-700 font-medium hover:bg-green-100 transition-colors text-sm",children:"Call"}),u.email&&i.jsx("a",{href:`mailto:${u.email}`,className:"flex-1 py-2 text-center rounded-lg bg-blue-50 text-blue-700 font-medium hover:bg-blue-100 transition-colors text-sm",children:"Mail"})]})]},u.id))})]})},DS=()=>{const{users:t,deleteUser:e,user:n,passwordResetRequests:r,resolvePasswordResetRequest:s}=je(),[o,a]=R.useState(null),[c,u]=R.useState(!1),d=St(),m=j=>{if(j===(n==null?void 0:n.id)){alert("You cannot delete yourself.");return}a(j)},p=()=>{o&&(e(o),a(null))},f=(j,I)=>{s(j),I?d(`/admin/users/edit/${I}`):alert("User not found. The request was dismissed.")},v=(n==null?void 0:n.role)==="admin";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),i.jsx(rn,{to:"/admin/users/new",children:i.jsx(J,{children:"+ Add User"})})]}),v&&r&&r.length>0&&i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 animate-fade-in",children:[i.jsxs("h3",{className:"text-lg font-bold text-amber-800 mb-3 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),"Pending Password Reset Requests (",r.length,")"]}),i.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map(j=>{const I=t.find(C=>C.username===j.username);return i.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-amber-200 shadow-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-gray-900",children:j.username}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Requested: ",new Date(j.requestDate).toLocaleString()]}),!I&&i.jsx("span",{className:"text-xs text-red-500 font-bold",children:"User not found in system"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(J,{variant:"secondary",onClick:()=>s(j.id),className:"text-xs px-3 py-1",children:"Dismiss"}),i.jsx(J,{onClick:()=>f(j.id,(I==null?void 0:I.id)||""),className:"text-xs px-3 py-1",disabled:!I,children:"Reset Password"})]})]},j.id)})})]}),i.jsx(ce,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-3 px-4",children:"Full Name"}),i.jsx("th",{className:"py-3 px-4",children:"Login ID"}),v&&i.jsxs("th",{className:"py-3 px-4 flex items-center gap-2",children:["Password",i.jsx("button",{onClick:()=>u(!c),className:"text-indigo-600 hover:text-indigo-800",children:c?i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):i.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),i.jsx("th",{className:"py-3 px-4",children:"Role"}),i.jsx("th",{className:"py-3 px-4",children:"Access Modules"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:t.map(j=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900",children:[j.name||j.username,j.id===(n==null?void 0:n.id)&&i.jsx("span",{className:"ml-2 text-xs bg-indigo-100 text-indigo-700 px-1 rounded border border-indigo-200",children:"You"})]}),i.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 font-mono",children:j.username}),v&&i.jsxs("td",{className:"py-3 px-4 text-sm font-mono text-amber-600",children:[c?j.password:"********",j.isPasswordChanged===!1&&i.jsx("span",{className:"ml-2 text-[10px] text-red-500 font-bold uppercase",children:"(Default)"})]}),i.jsx("td",{className:"py-3 px-4 capitalize",children:j.role}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("div",{className:"flex gap-1 flex-wrap",children:j.role==="admin"?i.jsx("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded border border-emerald-200 font-medium",children:"All Access"}):j.modules.length>0?j.modules.map(I=>i.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded border border-gray-200 capitalize",children:I},I)):i.jsx("span",{className:"text-xs text-gray-400",children:"No Access"})})}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsx(rn,{to:`/admin/users/edit/${j.id}`,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),j.id!==(n==null?void 0:n.id)&&i.jsx("button",{onClick:()=>m(j.id),className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"Del"})]})})]},j.id))})]})})}),i.jsx(na,{isOpen:!!o,onClose:()=>a(null),onConfirm:p,title:"Delete User",message:"Are you sure you want to delete this user? This action cannot be undone."})]})},a0=()=>{var v,j,I;const{users:t,addUser:e,updateUser:n,showToast:r}=je(),s=St(),{id:o}=gs(),[a,c]=R.useState(null),[u,d]=R.useState({name:"",username:"",password:"",role:"staff",modules:["candidates"]});R.useEffect(()=>{if(o){const C=t.find(x=>x.id===o);C&&d(C)}},[o,t]);const m=C=>{if(o)d({...u,name:C});else{const x=C.replace(/\s+/g,"").toLowerCase()+"@sprtechforge.com";d({...u,name:C,username:x,password:C})}},p=C=>{if(C.preventDefault(),c(null),!u.name||!u.name.trim()){c("Full Name is required");return}if(!u.username||!u.username.trim()){c("Login ID is required");return}if(t.some(E=>{var k;return E.username.toLowerCase()===((k=u.username)==null?void 0:k.toLowerCase().trim())&&E.id!==o})){c("A user with this Login ID already exists. Please choose another.");return}const _={id:o||Qt(),name:u.name,username:u.username.trim()||"",password:u.password||u.name||"password",role:u.role,modules:u.role==="admin"?["candidates","finance","users"]:u.modules||[],authProvider:"local",isPasswordChanged:o?u.isPasswordChanged:!1};o?(n(_),r("User updated successfully")):(e(_),r("User added successfully")),s("/admin/users")},f=C=>{var x;(x=u.modules)!=null&&x.includes(C)?d({...u,modules:u.modules.filter(_=>_!==C)}):d({...u,modules:[...u.modules||[],C]})};return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:o?"Edit User":"Add New User"}),a&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded shadow-sm animate-fade-in",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm text-red-700 font-bold",children:a})})})}),i.jsx(ce,{children:i.jsxs("form",{onSubmit:p,children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Full Name"}),i.jsx(ne,{value:u.name,onChange:C=>m(C.target.value),placeholder:"e.g. Ravi Kumar",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 p-4 bg-gray-50 rounded-lg border border-spr-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1 required-label",children:"Auto-Generated Login ID"}),i.jsx(ne,{value:u.username,onChange:C=>d({...u,username:C.target.value}),required:!0,className:"font-mono"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1 required-label",children:"Default Password"}),i.jsx("div",{className:"text-gray-900 font-mono mt-2",children:o?"********":u.password||"-"}),!o&&i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Same as Full Name"})]}),!o&&i.jsxs("div",{className:"col-span-2 mt-2 text-xs text-amber-600 font-medium flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"User will be forced to change this password on first login."]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Role"}),i.jsxs(ic,{value:u.role,onChange:C=>d({...u,role:C.target.value}),required:!0,children:[i.jsx("option",{value:"staff",children:"Staff"}),i.jsx("option",{value:"admin",children:"Admin"})]})]}),u.role==="staff"&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Access Modules"}),i.jsxs("div",{className:"flex flex-col gap-2 bg-gray-50 p-3 rounded border border-spr-700",children:[i.jsxs("label",{className:"flex items-center gap-2 text-gray-700 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(v=u.modules)==null?void 0:v.includes("candidates"),onChange:()=>f("candidates")}),"Training (Candidates)"]}),i.jsxs("label",{className:"flex items-center gap-2 text-gray-700 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(j=u.modules)==null?void 0:j.includes("finance"),onChange:()=>f("finance")}),"Finance (Transactions, Accounts, Reports)"]}),i.jsxs("label",{className:"flex items-center gap-2 text-gray-700 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(I=u.modules)==null?void 0:I.includes("users"),onChange:()=>f("users")}),"User Management"]})]})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Note: Payroll settings are now managed in the ",i.jsx("strong",{children:"Finance > Ledger Accounts"}),' section. Create a "Salary" type account for this user to track payments.']}),i.jsxs("div",{className:"mt-6 flex gap-4 justify-end",children:[i.jsx(J,{type:"button",variant:"secondary",onClick:()=>s("/admin/users"),children:"Cancel"}),i.jsx(J,{type:"submit",children:"Save User"})]})]})})]})},LS=()=>{const{activityLogs:t,exportData:e}=je(),[n,r]=R.useState(1),[s,o]=R.useState(""),[a,c]=R.useState("All"),[u,d]=R.useState("All"),m=15,p=Array.from(new Set(t.map(C=>C.entityType))),f=t.filter(C=>{const x=C.description.toLowerCase().includes(s.toLowerCase())||C.actorName.toLowerCase().includes(s.toLowerCase()),_=a==="All"||C.action===a,E=u==="All"||C.entityType===u;return x&&_&&E}),v=Math.ceil(f.length/m),j=f.slice((n-1)*m,n*m),I=C=>{switch(C){case"CREATE":return"text-emerald-600 bg-emerald-100";case"UPDATE":return"text-blue-600 bg-blue-100";case"DELETE":return"text-red-600 bg-red-100";case"LOGIN":return"text-gray-600 bg-gray-100";case"RESTORE":return"text-amber-600 bg-amber-100";default:return"text-gray-600 bg-gray-100"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Audit Logs"}),i.jsx("p",{className:"text-gray-500",children:"Track all changes made within the application."})]}),i.jsx(J,{variant:"secondary",onClick:e,children:"Export Full Logs"})]}),i.jsxs(ce,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsx("input",{placeholder:"Search description or user...",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:s,onChange:C=>o(C.target.value)}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:a,onChange:C=>c(C.target.value),children:[i.jsx("option",{value:"All",children:"All Actions"}),i.jsx("option",{value:"CREATE",children:"Create"}),i.jsx("option",{value:"UPDATE",children:"Update"}),i.jsx("option",{value:"DELETE",children:"Delete"}),i.jsx("option",{value:"LOGIN",children:"Login"}),i.jsx("option",{value:"RESTORE",children:"Restore"})]}),i.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:u,onChange:C=>d(C.target.value),children:[i.jsx("option",{value:"All",children:"All Entities"}),p.map(C=>i.jsx("option",{value:C,children:C},C))]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[i.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),i.jsx("th",{className:"py-3 px-4",children:"User (Actor)"}),i.jsx("th",{className:"py-3 px-4",children:"Action"}),i.jsx("th",{className:"py-3 px-4",children:"Entity"}),i.jsx("th",{className:"py-3 px-4",children:"Description"})]})}),i.jsx("tbody",{className:"divide-y divide-spr-700",children:j.length>0?j.map(C=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4 text-sm font-mono whitespace-nowrap",children:new Date(C.timestamp).toLocaleString()}),i.jsx("td",{className:"py-3 px-4 text-sm font-medium text-gray-900",children:C.actorName}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${I(C.action)}`,children:C.action})}),i.jsxs("td",{className:"py-3 px-4 text-sm",children:[C.entityType,C.entityId&&i.jsx("span",{className:"block text-xs text-gray-400 font-mono",children:C.entityId})]}),i.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:C.description})]},C.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"py-8 text-center text-gray-500",children:"No logs found."})})})]})}),i.jsx(Qf,{currentPage:n,totalPages:v,onPageChange:r})]})]})},VS=()=>{const t=je(),[e,n]=R.useState([]),[r,s]=R.useState(!1),[o,a]=R.useState({total:0,passed:0,failed:0,time:0}),c=(d,m,p,f=0)=>{n(v=>[...v,{id:Date.now()+Math.random(),name:d,status:m,message:p,duration:f}])},u=async()=>{s(!0),n([]),a({total:0,passed:0,failed:0,time:0});const d=performance.now();let m=0,p=0,f=0;const v=async(k,L)=>{f++;const P=performance.now();try{await L();const y=performance.now()-P;c(k,"PASS","Test execution successful",y),m++}catch(y){const w=performance.now()-P;c(k,"FAIL",y.message||"Unknown error",w),p++}};await v("Unit: Currency Formatting",()=>{const k=ue(1500.5);if(!k.includes("1,500.50")&&!k.includes("1,500.5"))throw new Error(`Formatting failed: ${k}`)}),await v("Unit: ID Generation",()=>{const k=Qt(),L=Qt();if(k===L)throw new Error("ID collision detected");if(k.length<5)throw new Error("ID too short")}),await v("Unit: Balance Calculation Logic",()=>{const k=[{id:"t1",amount:1e3,type:be.Income,fromEntityId:"C1",fromEntityType:"Candidate",toEntityId:"A1",toEntityType:"Account",date:"",description:"",isLocked:!1},{id:"t2",amount:200,type:be.Expense,fromEntityId:"A1",fromEntityType:"Account",toEntityId:"V1",toEntityType:"Account",date:"",description:"",isLocked:!1}],L=Yi("A1","Account",k,0);if(L!==800)throw new Error(`Account Balance calc failed. Expected 800, got ${L}`);const P=Yi("C1","Candidate",k,0);if(P!==-1e3)throw new Error(`Candidate Balance calc failed. Expected -1000, got ${P}`)});const j=Date.now(),I=`test-user-${j}`,C=`test-cand-${j}`,x=`test-acc-${j}`;await v("API: User Creation",()=>{t.addUser({id:I,name:`User ${j}`,username:`u${j}`,password:"123",role:"staff",modules:[]})}),await v("API: User Update",()=>{t.updateUser({id:I,name:`User ${j} Updated`,username:`u${j}_updated`,password:"123",role:"staff",modules:["finance"]})}),await v("API: Candidate Creation",()=>{t.addCandidate({id:C,name:"API Tester",batchId:"API-01",email:"test@api.com",phone:"9999999999",agreedAmount:1e4,status:ut.Training,isActive:!0,joinedDate:new Date().toISOString()})}),await v("API: Candidate Update",()=>{t.updateCandidate({id:C,name:"API Tester (Updated)",batchId:"API-01",email:"test@api.com",phone:"9999999999",agreedAmount:15e3,status:ut.ReadyForInterview,isActive:!0,joinedDate:new Date().toISOString()})}),await v("API: Account Creation",()=>{t.addAccount({id:x,name:"API Test Bank",type:Ie.Bank,openingBalance:5e3})});const _=`test-tx-${j}`;await v("API: Transaction Record",()=>{t.addTransaction({id:_,date:new Date().toISOString(),type:be.Income,amount:2e3,fromEntityId:C,fromEntityType:"Candidate",toEntityId:x,toEntityType:"Account",description:"API Test Fee",isLocked:!1})}),await v("E2E: Payment Logic Verification",()=>{const k=[{id:"x",date:"",type:be.Income,amount:2e3,fromEntityId:C,fromEntityType:"Candidate",toEntityId:x,toEntityType:"Account",description:"",isLocked:!1}],L=Yi(x,"Account",k,5e3);if(L!==7e3)throw new Error(`E2E Balance Check Failed: Expected 7000, Got ${L}`);const w=15e3-Math.abs(Yi(C,"Candidate",k,0));if(w!==13e3)throw new Error(`E2E Due Check Failed: Expected 13000, Got ${w}`)}),await v("Negative: Delete System Account",()=>{try{throw t.deleteAccount("cash-01"),new Error("Failed to block system account deletion")}catch(k){if(!k.message.includes("Cannot delete a System Account"))throw k}}),await v("Negative: Delete Last User",()=>{if(t.users.length===1)try{throw t.deleteUser(t.users[0].id),new Error("Failed to block last user deletion")}catch(k){if(!k.message.includes("Cannot delete the last user"))throw k}}),await v("Cleanup: Remove Test Data",()=>{t.deleteTransaction(_),t.deleteCandidate(C),t.deleteAccount(x),t.deleteUser(I)});const E=performance.now()-d;a({total:f,passed:m,failed:p,time:E}),s(!1)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Diagnostics & API Testing"}),i.jsx("p",{className:"text-gray-600",children:"Automated testing suite for internal logic, integration flows, and negative scenarios."})]}),i.jsx(J,{onClick:u,disabled:r,children:r?"Running Tests...":"Run Full Test Suite"})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs(ce,{className:"text-center py-4",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Tests"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.total})]}),i.jsxs(ce,{className:"text-center py-4 border-emerald-200 bg-emerald-50",children:[i.jsx("p",{className:"text-xs text-emerald-700 uppercase font-bold",children:"Passed"}),i.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:o.passed})]}),i.jsxs(ce,{className:"text-center py-4 border-red-200 bg-red-50",children:[i.jsx("p",{className:"text-xs text-red-700 uppercase font-bold",children:"Failed"}),i.jsx("p",{className:"text-2xl font-bold text-red-700",children:o.failed})]}),i.jsxs(ce,{className:"text-center py-4",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Duration"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o.time.toFixed(2)," ms"]})]})]}),i.jsx(ce,{title:"Execution Log",children:i.jsxs("div",{className:"h-96 overflow-y-auto space-y-2 font-mono text-sm bg-gray-50 p-4 rounded border border-spr-700",children:[e.length===0&&i.jsx("p",{className:"text-gray-400 text-center italic",children:"Ready to start diagnostics..."}),e.map(d=>i.jsxs("div",{className:`flex items-start gap-3 p-2 rounded border ${d.status==="PASS"?"bg-white border-emerald-200":d.status==="FAIL"?"bg-red-50 border-red-200":"bg-gray-100 border-gray-200"}`,children:[i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold w-16 text-center shrink-0 ${d.status==="PASS"?"bg-emerald-100 text-emerald-700":d.status==="FAIL"?"bg-red-100 text-red-700":"bg-gray-200 text-gray-600"}`,children:d.status}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-bold text-gray-900",children:d.name}),i.jsx("p",{className:"text-gray-600",children:d.message})]}),i.jsxs("span",{className:"text-gray-400 text-xs shrink-0",children:[d.duration.toFixed(2),"ms"]})]},d.id))]})}),i.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200 text-sm text-blue-800",children:[i.jsx("strong",{children:"Note on Testing:"})," This runner executes commands against the live Application Context. Integration tests create temporary entities prefixed with ",i.jsx("code",{children:"TEST_"})," and attempt to clean them up immediately. Negative testing purposefully attempts invalid operations to ensure the API blocks them correctly."]})]})},MS=()=>{const{isCloudEnabled:t,syncLocalToCloud:e,cloudError:n}=je(),[r,s]=R.useState(""),[o,a]=R.useState("unknown"),[c,u]=R.useState(""),[d,m]=R.useState(!1),[p,f]=R.useState(!1);R.useEffect(()=>{const I=Ue.getConfig();I&&(s(JSON.stringify(I,null,2)),a("connected")),n&&(a("error"),u(n),n.includes("Permission")&&f(!0))},[n]);const v=async()=>{var C;if(u(""),a("unknown"),!r.trim()){u("Please paste the Firebase Configuration JSON."),a("error");return}m(!0);const I=await Ue.testConfig(r);if(m(!1),I.success)try{const x=JSON.parse(r);Ue.saveConfig(x),a("connected"),u("Configuration Saved. App will reload.")}catch{a("error"),u("Invalid JSON syntax.")}else a("error"),u(I.error||"Connection verification failed."),(C=I.error)!=null&&C.includes("permission")&&f(!0)},j=()=>{window.confirm("Are you sure? This will disconnect the app from Firebase and revert to Local Storage.")&&Ue.clearConfig()};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Cloud Setup"}),i.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M3.89 15.67L6.47 4.08C6.56 3.66 7.11 3.55 7.36 3.89L10.94 8.89L3.89 15.67Z",fill:"#FFC107"}),i.jsx("path",{d:"M15.56 8.89L19.14 3.89C19.39 3.55 19.94 3.66 20.03 4.08L22.61 15.67H3.89L15.56 8.89Z",fill:"#FFC107"}),i.jsx("path",{d:"M13.25 2.3L11.81 0.32C11.56 -0.02 11.09 -0.02 10.84 0.32L9.4 2.3C9.23 2.54 9.29 2.86 9.53 3.02L10.94 3.96L12.35 3.02C12.59 2.86 12.65 2.54 12.48 2.3H13.25Z",fill:"#FFC107"}),i.jsx("path",{d:"M3.89 15.67H22.61L14.62 20.23C13.98 20.59 13.2 20.67 12.5 20.45L11.73 20.21L3.89 15.67Z",fill:"#FFA000"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[o==="connected"&&i.jsxs("span",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-bold border border-orange-200 flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 bg-orange-600 rounded-full animate-pulse"})," Firebase Connected"]}),o==="error"&&i.jsx("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-bold border border-red-200",children:"Connection Failed"})]})]}),p&&i.jsxs("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded shadow-sm animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-amber-900 font-bold text-lg mb-2",children:"Missing Permissions?"}),i.jsxs("p",{className:"text-amber-800 text-sm mb-2",children:["It looks like your Firestore Security Rules are blocking the application. Since this app manages users internally, you need to enable ",i.jsx("strong",{children:"Test Mode"})," or allow public read/write in the Firebase Console."]}),i.jsx("p",{className:"text-amber-800 text-sm font-bold mb-2",children:"Go to Firebase Console > Firestore Database > Rules and paste this:"})]}),i.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),i.jsxs("div",{className:"bg-gray-900 p-3 rounded text-gray-100 font-mono text-xs overflow-x-auto relative group",children:[i.jsx("pre",{children:`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}`}),i.jsx("button",{onClick:()=>navigator.clipboard.writeText(`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}`),className:"absolute top-2 right-2 bg-white text-gray-900 px-2 py-1 rounded text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity",children:"Copy"})]})]}),i.jsx(ce,{title:"Firebase Configuration",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-gray-600",children:["Connect this application to ",i.jsx("strong",{children:"Google Firebase (Firestore)"})," for real-time data synchronization and cloud backup."]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded text-sm text-blue-900",children:[i.jsx("strong",{children:"How to get configuration:"}),i.jsxs("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:[i.jsxs("li",{children:["Go to ",i.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",className:"underline font-bold",children:"Firebase Console"}),"."]}),i.jsx("li",{children:"Open your Project Settings (Gear Icon)."}),i.jsx("li",{children:'Scroll down to "Your apps" and select the Web App.'}),i.jsxs("li",{children:["Copy the ",i.jsx("code",{children:"firebaseConfig"})," object (the part inside the curly braces)."]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Config Object (JSON)"}),i.jsx("textarea",{className:"w-full bg-gray-900 text-green-400 font-mono text-xs border border-spr-700 rounded-lg px-4 py-4 focus:ring-1 focus:ring-spr-accent outline-none h-64",value:r,onChange:I=>s(I.target.value),placeholder:`{
  "apiKey": "AIza...",
  "authDomain": "project-id.firebaseapp.com",
  "projectId": "project-id",
  "storageBucket": "project-id.appspot.com",
  "messagingSenderId": "...",
  "appId": "..."
}`})]}),o==="error"&&i.jsxs("div",{className:"bg-red-50 border border-red-200 p-3 rounded mt-2 text-red-700 text-sm",children:[i.jsx("strong",{children:"Error:"})," ",c]}),i.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[i.jsx(J,{variant:"secondary",onClick:()=>f(!p),children:p?"Hide Rules Help":"Troubleshoot Permissions"}),t&&i.jsx(J,{variant:"danger",onClick:j,children:"Disconnect"}),i.jsx(J,{onClick:v,disabled:d,children:d?"Verifying...":t?"Update & Reconnect":"Connect & Save"})]})]})}),t&&o==="connected"&&!n&&i.jsx(ce,{title:"Data Synchronization",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-gray-900",children:"Upload Local Data"}),i.jsxs("p",{className:"text-sm text-gray-500",children:["Push your current local browser data to Firestore.",i.jsx("br",{}),i.jsx("span",{className:"text-xs text-orange-600 font-bold",children:"Note: Firestore creates collections automatically. No SQL setup required."})]})]}),i.jsx(J,{variant:"secondary",onClick:e,children:"Sync Local -> Cloud"})]})})]})},OS=()=>{const{candidates:t,markAgreementAccepted:e,isCloudEnabled:n}=je(),{id:r}=gs(),[s,o]=R.useState(!1),[a,c]=R.useState(null),u=t.find(m=>m.id===r);R.useEffect(()=>{u!=null&&u.agreementAcceptedDate&&o(!0)},[u]);const d=()=>{if(r&&u){if(!n){c("The system is currently in Offline Mode. Acceptance cannot be recorded. Please contact admin.");return}try{e(r),o(!0)}catch{c("Failed to record acceptance. Please try again.")}}};return u?i.jsx("div",{className:"min-h-screen bg-gray-100 py-10 px-4",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx(ci,{size:"lg"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Training Candidature Agreement"}),i.jsx("p",{className:"text-gray-600",children:"SPR Techforge Pvt Ltd"})]}),a&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded text-red-700",children:a}),i.jsxs(ce,{className:"mb-6",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mb-6",children:[i.jsx("h3",{className:"text-sm font-bold text-blue-800 uppercase mb-2",children:"Candidate Details"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Name:"})," ",i.jsx("span",{className:"font-bold text-gray-900",children:u.name})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Batch ID:"})," ",i.jsx("span",{className:"font-bold text-gray-900",children:u.batchId})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Email:"})," ",i.jsx("span",{className:"text-gray-900",children:u.email})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Phone:"})," ",i.jsx("span",{className:"text-gray-900",children:u.phone})]})]})]}),i.jsx("div",{className:"prose max-w-none border-t border-b border-gray-100 py-6 my-6",children:i.jsx("div",{className:"whitespace-pre-wrap font-serif text-justify leading-relaxed text-gray-800",children:u.agreementText||"Agreement text not available."})}),i.jsx("div",{className:"flex flex-col items-center gap-4 mt-8",children:s?i.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-6 text-center w-full",children:[i.jsx("svg",{className:"w-16 h-16 text-emerald-500 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:"Agreement Accepted"}),i.jsxs("p",{className:"text-emerald-600 text-sm mt-1",children:["Recorded on ",new Date(u.agreementAcceptedDate).toLocaleString()]}),i.jsx("p",{className:"text-gray-500 text-xs mt-4",children:"You may close this window."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-start gap-3 bg-amber-50 p-4 rounded text-sm text-amber-800",children:[i.jsx("input",{type:"checkbox",className:"mt-1 w-5 h-5 accent-amber-600",id:"consent"}),i.jsxs("label",{htmlFor:"consent",children:["I, ",i.jsx("strong",{children:u.name}),', have read and understood the terms and conditions mentioned above. By clicking "Accept", I agree to abide by the rules and regulations of SPR Techforge Pvt Ltd.']})]}),i.jsx(J,{className:"w-full md:w-auto px-12 py-3 text-lg",onClick:()=>{const m=document.getElementById("consent");m&&m.checked?d():alert("Please check the box to confirm you have read the agreement.")},children:"I Accept & Sign"})]})})]}),i.jsx("div",{className:"text-center text-xs text-gray-400 mt-8 pb-8",children:" 2025 SPR Techforge Pvt Ltd. All rights reserved."})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-xl font-bold text-gray-400",children:"Loading Agreement..."}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"If this takes too long, the link may be invalid or the system is offline."})]})})},FS=()=>{const{trainingModules:t,addTrainingModule:e,trainingTopics:n,addTrainingTopic:r,showToast:s}=je(),[o,a]=R.useState(!1),[c,u]=R.useState(""),[d,m]=R.useState(""),[p,f]=R.useState(!1),[v,j]=R.useState(null),[I,C]=R.useState(""),[x,_]=R.useState(1),E=[...t].sort((y,w)=>y.order-w.order),k=y=>{y.preventDefault(),c.trim()&&(e({id:Qt(),title:c,description:d,order:t.length+1}),s("Module created successfully"),a(!1),u(""),m(""))},L=y=>{y.preventDefault(),!(!I.trim()||!v)&&(r({id:Qt(),moduleId:v,title:I,estimatedHours:x}),s("Topic added successfully"),f(!1),C(""),_(1))},P=y=>{j(y),f(!0)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Curriculum Manager"}),i.jsx("p",{className:"text-gray-500",children:"Define training modules, topics, and syllabus structure."})]}),i.jsx(J,{onClick:()=>a(!0),children:"+ New Module"})]}),i.jsx("div",{className:"grid grid-cols-1 gap-6",children:E.map(y=>i.jsxs(ce,{className:"border-l-4 border-l-spr-600",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-gray-100 pb-2",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[i.jsxs("span",{className:"bg-spr-100 text-spr-800 text-xs px-2 py-1 rounded-full",children:["Module ",y.order]}),y.title]}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:y.description})]}),i.jsx(J,{variant:"secondary",className:"text-xs",onClick:()=>P(y.id),children:"+ Add Topic"})]}),i.jsxs("div",{className:"space-y-2",children:[n.filter(w=>w.moduleId===y.id).map((w,T)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border border-gray-200 hover:bg-white hover:shadow-sm transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-gray-400 font-mono text-xs",children:[T+1,"."]}),i.jsx("span",{className:"text-gray-800 font-medium",children:w.title})]}),i.jsxs("span",{className:"text-xs text-gray-500 bg-white px-2 py-1 rounded border border-gray-200",children:[w.estimatedHours," hrs"]})]},w.id)),n.filter(w=>w.moduleId===y.id).length===0&&i.jsx("p",{className:"text-sm text-gray-400 italic p-2",children:"No topics defined yet."})]})]},y.id))}),i.jsx(Ht,{isOpen:o,onClose:()=>a(!1),title:"Add Training Module",children:i.jsxs("form",{onSubmit:k,children:[i.jsx(ne,{label:"Module Title",value:c,onChange:y=>u(y.target.value),required:!0,placeholder:"e.g. Automation Testing"}),i.jsx(ne,{label:"Description",value:d,onChange:y=>m(y.target.value),placeholder:"Short summary..."}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(J,{type:"button",variant:"secondary",onClick:()=>a(!1),children:"Cancel"}),i.jsx(J,{type:"submit",children:"Create Module"})]})]})}),i.jsx(Ht,{isOpen:p,onClose:()=>f(!1),title:"Add Topic",children:i.jsxs("form",{onSubmit:L,children:[i.jsx(ne,{label:"Topic Title",value:I,onChange:y=>C(y.target.value),required:!0,placeholder:"e.g. Writing Test Scripts"}),i.jsx(ne,{type:"number",label:"Estimated Hours",value:x,onChange:y=>_(parseInt(y.target.value)),required:!0}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(J,{type:"button",variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),i.jsx(J,{type:"submit",children:"Add Topic"})]})]})})]})},US=()=>{const{user:t,candidates:e,trainingModules:n,trainingTopics:r,trainingLogs:s}=je(),o=e.find(p=>p.id===(t==null?void 0:t.linkedCandidateId)),a=s.filter(p=>p.candidateId===(o==null?void 0:o.id)),c=a.reduce((p,f)=>p+f.timeSpentMinutes/60,0),u=new Set(a.map(p=>p.topicId)).size,d=r.length,m=d>0?Math.round(u/d*100):0;return o?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome, ",o.name]}),i.jsxs("p",{className:"text-gray-500",children:["Batch: ",o.batchId]})]}),i.jsxs("div",{className:"bg-white px-4 py-2 rounded-lg shadow-sm border border-gray-200 flex gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Hours"}),i.jsxs("p",{className:"text-xl font-bold text-indigo-600",children:[c.toFixed(1),"h"]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Progress"}),i.jsxs("p",{className:"text-xl font-bold text-emerald-600",children:[m,"%"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:i.jsx(ce,{title:"My Attendance & Progress History",children:i.jsxs("div",{className:"space-y-3",children:[a.sort((p,f)=>new Date(f.date).getTime()-new Date(p.date).getTime()).map(p=>{var v;const f=((v=r.find(j=>j.id===p.topicId))==null?void 0:v.title)||"Unknown Topic";return i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-gray-900 text-sm",children:f}),i.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(p.date).toDateString(),"  ",p.timeSpentMinutes," min"]})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded border ${p.attendanceStatus==="Present"?"bg-emerald-100 text-emerald-700 border-emerald-200":p.attendanceStatus==="Absent"?"bg-red-100 text-red-700 border-red-200":"bg-amber-100 text-amber-800 border-amber-200"}`,children:p.attendanceStatus})})]},p.id)}),a.length===0&&i.jsx("p",{className:"text-gray-400 text-center italic py-8",children:"No attendance records found."})]})})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsx(ce,{title:"Your Syllabus",className:"h-full max-h-[80vh] overflow-y-auto",children:i.jsxs("div",{className:"space-y-4",children:[n.sort((p,f)=>p.order-f.order).map(p=>i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-2",children:p.title}),i.jsx("div",{className:"space-y-1 ml-2 border-l-2 border-gray-200 pl-3",children:r.filter(f=>f.moduleId===p.id).map(f=>{const v=a.some(j=>j.topicId===f.id);return i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[v?i.jsx("span",{className:"text-emerald-500 font-bold",children:""}):i.jsx("span",{className:"text-gray-300",children:""}),i.jsx("span",{className:v?"text-gray-500 line-through":"text-gray-700",children:f.title})]},f.id)})})]},p.id)),n.length===0&&i.jsx("p",{className:"text-xs text-gray-400 italic",children:"Syllabus not yet defined by admin."})]})})})]})]}):i.jsx("div",{className:"p-8 text-center text-red-600",children:"No candidate profile linked to this user account. Please contact admin."})},BS=()=>{const{candidates:t,trainingLogs:e,trainingTopics:n}=je(),[r,s]=R.useState(""),o=t.filter(c=>c.isActive&&c.name.toLowerCase().includes(r.toLowerCase())),a=n.length;return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ta,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Progress Monitor"})]})}),i.jsxs(ce,{children:[i.jsx("div",{className:"mb-4",children:i.jsx("input",{placeholder:"Search candidate...",className:"border rounded px-4 py-2 w-full md:w-1/3",value:r,onChange:c=>s(c.target.value)})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm text-gray-600",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Candidate"}),i.jsx("th",{className:"p-3",children:"Status"}),i.jsx("th",{className:"p-3 text-center",children:"Topics %"}),i.jsx("th",{className:"p-3 text-center",children:"Attendance (Present/Total)"}),i.jsx("th",{className:"p-3 text-center",children:"Last Active"})]})}),i.jsx("tbody",{className:"divide-y",children:o.map(c=>{const u=e.filter(j=>j.candidateId===c.id),d=u.filter(j=>j.attendanceStatus==="Present").length,m=u.length,p=new Set(u.map(j=>j.topicId)).size,f=a>0?Math.round(p/a*100):0,v=u.sort((j,I)=>new Date(I.date).getTime()-new Date(j.date).getTime())[0];return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsxs("td",{className:"p-3 font-medium text-gray-900",children:[c.name," ",i.jsxs("span",{className:"text-gray-400 text-xs",children:["(",c.batchId,")"]})]}),i.jsx("td",{className:"p-3",children:c.status}),i.jsxs("td",{className:"p-3 text-center",children:[i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 max-w-[100px] mx-auto",children:i.jsx("div",{className:"bg-spr-600 h-2 rounded-full",style:{width:`${f}%`}})}),i.jsxs("span",{className:"text-xs",children:[f,"% (",p,"/",a,")"]})]}),i.jsxs("td",{className:"p-3 text-center",children:[i.jsx("span",{className:"text-emerald-600 font-bold",children:d})," / ",m]}),i.jsx("td",{className:"p-3 text-center text-xs",children:v?new Date(v.date).toLocaleDateString():"-"})]},c.id)})})]})})]})]})},zS=()=>{const{candidates:t,trainingModules:e,trainingTopics:n,trainingLogs:r,batchUpdateTrainingLogs:s,showToast:o}=je(),[a,c]=R.useState(new Date().toISOString().split("T")[0]),[u,d]=R.useState(""),[m,p]=R.useState({}),f=t.filter(x=>x.isActive&&x.status!==ut.Placed&&x.status!==ut.Discontinued);R.useEffect(()=>{const x={};f.forEach(_=>{const E=r.find(k=>k.date===a&&k.candidateId===_.id);E?(x[_.id]=E.attendanceStatus==="No Class"?"Excused":E.attendanceStatus,!u&&E.topicId&&d(E.topicId)):x[_.id]="Present"}),p(x)},[a,f.length,r.length]);const v=(x,_)=>{p(E=>({...E,[x]:_}))},j=()=>{if(!u){o("Please select the Topic covered today before saving.","error");return}const x=n.find(k=>k.id===u),_=x?x.estimatedHours*60:60,E=[];f.forEach(k=>{const L=m[k.id],P=r.find(w=>w.date===a&&w.candidateId===k.id),y={id:P?P.id:Qt(),candidateId:k.id,date:a,topicId:u,timeSpentMinutes:L==="Present"?_:0,assignmentStatus:P?P.assignmentStatus:"N/A",attendanceStatus:L==="Excused"?"No Class":L,notes:P?P.notes:""};E.push(y)}),s(E),o("Attendance saved successfully for "+E.length+" candidates.")},I=()=>{const x=f.map(_=>{const E=r.filter(P=>P.candidateId===_.id).sort((P,y)=>new Date(P.date).getTime()-new Date(y.date).getTime()),k=E.filter(P=>P.attendanceStatus==="Present").length,L=E.filter(P=>P.attendanceStatus==="Absent").length;return{"Candidate Name":_.name,Batch:_.batchId,Status:_.status,"Total Present":k,"Total Absent":L,[`Status on ${a}`]:m[_.id]||"N/A"}});zl(x,`Attendance_Summary_${a}.csv`),o("Attendance Summary Exported")},C=()=>{const x=[];if(f.forEach(_=>{r.filter(k=>k.candidateId===_.id).forEach(k=>{var P;const L=((P=n.find(y=>y.id===k.topicId))==null?void 0:P.title)||"Unknown";x.push({Date:k.date,"Candidate Name":_.name,Batch:_.batchId,Topic:L,Attendance:k.attendanceStatus,"Time Spent (Mins)":k.timeSpentMinutes})})}),x.length===0){o("No attendance records found to export.","info");return}x.sort((_,E)=>new Date(E.Date).getTime()-new Date(_.Date).getTime()),zl(x,"Detailed_Attendance_Logs.csv"),o("Full History Exported")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Class Attendance"}),i.jsx("p",{className:"text-gray-500",children:"Mark daily attendance and topics for active candidates."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(J,{variant:"secondary",onClick:C,children:"Export Full History"}),i.jsx(J,{variant:"secondary",onClick:I,children:"Export Today's Summary"})]})]}),i.jsxs(ce,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Date"}),i.jsx(ne,{type:"date",value:a,onChange:x=>c(x.target.value)})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Topic Covered Today"}),i.jsxs("select",{className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:u,onChange:x=>d(x.target.value),children:[i.jsx("option",{value:"",children:"-- Select Topic from Curriculum --"}),e.sort((x,_)=>x.order-_.order).map(x=>i.jsx("optgroup",{label:x.title,children:n.filter(_=>_.moduleId===x.id).map(_=>i.jsxs("option",{value:_.id,children:[_.title," (",_.estimatedHours,"h)"]},_.id))},x.id))]}),e.length===0&&i.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No curriculum found. Please add Modules & Topics in Curriculum Manager first."})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-gray-600",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 text-xs uppercase text-gray-500 bg-gray-100",children:[i.jsx("th",{className:"py-3 px-4",children:"Candidate Name"}),i.jsx("th",{className:"py-3 px-4",children:"Batch"}),i.jsx("th",{className:"py-3 px-4 text-center",children:"Attendance Status"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:f.length>0?f.map(x=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:x.name}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs border border-blue-100",children:x.batchId})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsxs("label",{className:`cursor-pointer px-3 py-1.5 rounded border text-sm font-medium transition-colors ${m[x.id]==="Present"?"bg-emerald-500 text-white border-emerald-600":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[i.jsx("input",{type:"radio",className:"sr-only",checked:m[x.id]==="Present",onChange:()=>v(x.id,"Present")}),"Present"]}),i.jsxs("label",{className:`cursor-pointer px-3 py-1.5 rounded border text-sm font-medium transition-colors ${m[x.id]==="Absent"?"bg-red-500 text-white border-red-600":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[i.jsx("input",{type:"radio",className:"sr-only",checked:m[x.id]==="Absent",onChange:()=>v(x.id,"Absent")}),"Absent"]}),i.jsxs("label",{className:`cursor-pointer px-3 py-1.5 rounded border text-sm font-medium transition-colors ${m[x.id]==="Excused"?"bg-amber-400 text-white border-amber-500":"bg-white text-gray-600 hover:bg-gray-100"}`,children:[i.jsx("input",{type:"radio",className:"sr-only",checked:m[x.id]==="Excused",onChange:()=>v(x.id,"Excused")}),"Excused"]})]})})]},x.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"py-8 text-center text-gray-500",children:"No active candidates found for training."})})})]})}),i.jsx("div",{className:"mt-6 flex justify-end border-t border-gray-100 pt-4",children:i.jsx(J,{onClick:j,className:"w-full md:w-auto px-8",children:"Save Attendance"})})]})]})},$S=[{label:"Orange",value:"border-l-orange-500"},{label:"Green",value:"border-l-green-500"},{label:"Blue",value:"border-l-blue-500"},{label:"Purple",value:"border-l-purple-500"},{label:"Red",value:"border-l-red-500"},{label:"Indigo",value:"border-l-indigo-500"}],qS=()=>{const{user:t,showToast:e,interviewModules:n,addInterviewModule:r,updateInterviewModule:s,deleteInterviewModule:o,interviewQuestions:a,addInterviewQuestion:c,deleteInterviewQuestion:u}=je(),[d,m]=R.useState(!1),[p,f]=R.useState(null),[v,j]=R.useState(""),[I,C]=R.useState("border-l-blue-500"),[x,_]=R.useState(!1),[E,k]=R.useState(null),[L,P]=R.useState(""),[y,w]=R.useState(null),[T,A]=R.useState([]),S=(t==null?void 0:t.role)==="admin",D=async X=>{const he=`${X} Explain this interview question in detail with examples.`;try{await navigator.clipboard.writeText(he),e("Copied! Please paste (Ctrl+V) in ChatGPT if it does not auto-fill.","info")}catch(oe){console.error("Copy failed",oe)}const me=encodeURIComponent(he);window.open(`https://chatgpt.com/?q=${me}&hints=search`,"_blank")},N=X=>{if(X.preventDefault(),!!v.trim()){if(p){const he=n.find(me=>me.id===p);he&&(s({...he,title:v,color:I}),e("Module updated successfully"))}else r({id:Qt(),title:v,color:I,order:n.length+1}),e("Module created successfully");m(!1),ve()}},le=()=>{y&&(o(y),w(null),e("Module deleted"))},ie=()=>{ve(),m(!0)},ke=X=>{f(X.id),j(X.title),C(X.color),m(!0)},ve=()=>{f(null),j(""),C("border-l-blue-500")},q=X=>{k(X),P(""),_(!0)},K=X=>{if(X.preventDefault(),!L.trim()||!E)return;const he=a.filter(oe=>oe.moduleId===E),me=he.length>0?Math.max(...he.map(oe=>oe.order)):0;c({id:Qt(),moduleId:E,question:L,order:me+1}),e("Question added"),_(!1),P("")},re=X=>{A(he=>he.includes(X)?he.filter(me=>me!==X):[...he,X])},U=X=>{if(!window.confirm("Delete selected questions?"))return;const he=T.filter(me=>{const oe=a.find(Me=>Me.id===me);return oe&&oe.moduleId===X});he.forEach(me=>u(me)),A(me=>me.filter(oe=>!he.includes(oe))),e(`${he.length} questions deleted`)},ee=[...n].sort((X,he)=>X.order-he.order);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ta,{}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Interview Preparation"}),i.jsx("p",{className:"text-gray-500",children:"Click on any question to ask ChatGPT AI for a detailed answer."})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[S&&i.jsx(J,{onClick:ie,children:"+ Add Module"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-emerald-600 bg-emerald-50 px-3 py-1 rounded-full border border-emerald-100",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),i.jsx("span",{children:"Powered by ChatGPT 5.1"})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ee.map(X=>{const he=a.filter(oe=>oe.moduleId===X.id).sort((oe,Me)=>oe.order-Me.order),me=he.some(oe=>T.includes(oe.id));return i.jsxs(ce,{className:`border-l-4 ${X.color} relative group-card h-full flex flex-col`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-4 pb-2 border-b border-gray-100",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800",children:X.title}),S&&i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{type:"button",onClick:()=>ke(X),className:"text-blue-500 hover:text-blue-700 p-1 rounded hover:bg-blue-50",title:"Edit Module",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),i.jsx("button",{type:"button",onClick:()=>w(X.id),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50",title:"Delete Module",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),i.jsxs("div",{className:"space-y-3 flex-1",children:[he.map(oe=>i.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden bg-white hover:shadow-md transition-all duration-200",children:[S&&i.jsx("div",{className:"pl-3 pr-1 py-3 bg-gray-50 border-r border-gray-100 flex items-center",children:i.jsx("input",{type:"checkbox",className:"w-4 h-4 text-spr-600 rounded border-gray-300 focus:ring-spr-500 cursor-pointer",checked:T.includes(oe.id),onChange:()=>re(oe.id),onClick:Me=>Me.stopPropagation()})}),i.jsxs("button",{onClick:()=>D(oe.question),className:"flex-1 text-left p-3 flex justify-between items-center group hover:bg-gray-50 transition-colors focus:outline-none",title:"Click to ask ChatGPT",children:[i.jsx("span",{className:"font-medium text-gray-800 text-sm pr-2 group-hover:text-emerald-700 transition-colors",children:oe.question}),i.jsx("span",{className:"text-gray-300 group-hover:text-emerald-500 transition-colors shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})})]})]},oe.id)),he.length===0&&i.jsx("p",{className:"text-gray-400 italic text-sm text-center py-4",children:"No questions added yet."})]}),S&&i.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-3 border-t border-gray-100",children:[me&&i.jsx("button",{onClick:()=>U(X.id),className:"w-8 h-8 flex items-center justify-center rounded-full bg-red-100 text-red-600 hover:bg-red-600 hover:text-white transition-all shadow-sm border border-red-200 animate-fade-in",title:"Delete Selected Questions",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),i.jsx("button",{onClick:()=>q(X.id),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 text-gray-600 hover:bg-spr-600 hover:text-white transition-all shadow-sm border border-gray-300",title:"Add Question",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]},X.id)})}),i.jsx(Ht,{isOpen:d,onClose:()=>m(!1),title:p?"Edit Module":"Add New Module",children:i.jsxs("form",{onSubmit:N,children:[i.jsx(ne,{label:"Module Title",value:v,onChange:X=>j(X.target.value),required:!0,placeholder:"e.g. Advanced Python"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Theme"}),i.jsx("div",{className:"flex gap-3 flex-wrap",children:$S.map(X=>i.jsx("button",{type:"button",onClick:()=>C(X.value),className:`w-8 h-8 rounded-full border-2 ${X.value.replace("border-l-","bg-")} ${I===X.value?"border-gray-800 scale-110 ring-2 ring-offset-2 ring-gray-400":"border-transparent opacity-70 hover:opacity-100"}`,title:X.label},X.value))})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx(J,{type:"button",variant:"secondary",onClick:()=>m(!1),children:"Cancel"}),i.jsx(J,{type:"submit",children:"Save Module"})]})]})}),i.jsx(Ht,{isOpen:x,onClose:()=>_(!1),title:"Add Question",children:i.jsxs("form",{onSubmit:K,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),i.jsx("textarea",{className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none h-32",value:L,onChange:X=>P(X.target.value),placeholder:"Type your interview question here...",required:!0})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(J,{type:"button",variant:"secondary",onClick:()=>_(!1),children:"Cancel"}),i.jsx(J,{type:"submit",children:"Add Question"})]})]})}),i.jsx(na,{isOpen:!!y,onClose:()=>w(null),onConfirm:le,title:"Delete Module",message:"Are you sure you want to delete this module? All contained questions will be lost."})]})},HS=()=>{const{candidates:t,updateCandidate:e,interviews:n,addInterview:r,updateInterview:s,deleteInterview:o,showToast:a}=je(),[c,u]=R.useState("ReadyCandidates"),[d,m]=R.useState(null),p=(E,k)=>{var y;const L=(y=E.target.files)==null?void 0:y[0];if(!L)return;if(L.size>5*1024*1024){a("Max 5MB","error");return}const P=new FileReader;P.onload=w=>{var A;const T=t.find(S=>S.id===k);T&&e({...T,resume:(A=w.target)==null?void 0:A.result,resumeName:L.name}),a("Resume uploaded")},P.readAsDataURL(L)},f=E=>{var L;if(!E.resume)return;const k=(L=E.resumeName)==null?void 0:L.endsWith(".pdf");m({type:k?"pdf":"docx",data:E.resume,name:E.resumeName||"Resume"})},[v,j]=R.useState({}),[I,C]=R.useState(!1),x=E=>{if(E.preventDefault(),!v.candidateId||!v.date||!v.companyName)return;const k={id:v.id||Qt(),candidateId:v.candidateId,date:v.date,time:v.time||"10:00",companyName:v.companyName,interviewType:v.interviewType||"Zoom",round:v.round||"L1",supportPerson:v.supportPerson,status:"Scheduled",notes:v.notes};v.id?s(k):r(k),a("Interview scheduled"),C(!1),j({})},_=t.filter(E=>E.status===ut.ReadyForInterview&&E.isActive);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ta,{}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Interviews & Placements"})]}),i.jsx(J,{onClick:()=>{j({}),C(!0)},children:"+ Schedule Interview"})]}),i.jsxs("div",{className:"flex gap-4 border-b border-gray-200",children:[i.jsx("button",{onClick:()=>u("ReadyCandidates"),className:`pb-2 px-4 font-medium ${c==="ReadyCandidates"?"border-b-2 border-spr-600 text-spr-600":"text-gray-500"}`,children:"Ready Candidates"}),i.jsx("button",{onClick:()=>u("DailyView"),className:`pb-2 px-4 font-medium ${c==="DailyView"?"border-b-2 border-spr-600 text-spr-600":"text-gray-500"}`,children:"Interview Schedule"})]}),c==="ReadyCandidates"&&i.jsx(ce,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm text-gray-600",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Candidate"}),i.jsx("th",{className:"p-3",children:"Batch"}),i.jsx("th",{className:"p-3",children:"Resume"}),i.jsx("th",{className:"p-3 text-center",children:"Action"})]})}),i.jsxs("tbody",{className:"divide-y",children:[_.map(E=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-3 font-medium text-gray-900",children:E.name}),i.jsx("td",{className:"p-3",children:E.batchId}),i.jsx("td",{className:"p-3",children:E.resume?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded truncate max-w-[150px]",children:E.resumeName}),i.jsx("button",{onClick:()=>f(E),className:"text-blue-600 hover:underline text-xs",children:"View"})]}):i.jsx("span",{className:"text-gray-400 italic",children:"Missing"})}),i.jsxs("td",{className:"p-3 text-center flex justify-center gap-2",children:[i.jsxs("label",{className:"cursor-pointer text-xs bg-gray-100 px-2 py-1 rounded hover:bg-gray-200",children:["Upload",i.jsx("input",{type:"file",className:"hidden",accept:".pdf,.docx",onChange:k=>p(k,E.id)})]}),i.jsx("button",{onClick:()=>{j({candidateId:E.id}),C(!0)},className:"text-xs bg-spr-600 text-white px-2 py-1 rounded hover:bg-spr-700",children:"Book Interview"})]})]},E.id)),_.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"No candidates currently marked as 'Ready for Interview'."})})]})]})})}),c==="DailyView"&&i.jsxs("div",{className:"space-y-4",children:[Object.entries(n.reduce((E,k)=>{const L=E[k.date]||[];return L.push(k),E[k.date]=L,E},{})).sort().map(([E,k])=>i.jsx(ce,{title:new Date(E).toDateString(),children:i.jsx("div",{className:"space-y-2",children:k.map(L=>{const P=t.find(y=>y.id===L.candidateId);return i.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded border border-gray-100",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-gray-900",children:[L.time," - ",P==null?void 0:P.name," ",i.jsxs("span",{className:"text-gray-400 font-normal",children:["(",P==null?void 0:P.batchId,")"]})]}),i.jsxs("p",{className:"text-sm text-indigo-700 font-medium",children:[L.companyName," (",L.round,") - ",L.interviewType]}),L.supportPerson&&i.jsxs("p",{className:"text-xs text-amber-700 mt-1",children:["Support: ",L.supportPerson]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-white border border-gray-200 block mb-1",children:L.status}),i.jsx("button",{onClick:()=>{j(L),C(!0)},className:"text-blue-600 text-xs hover:underline",children:"Edit"})]})]},L.id)})})},E)),n.length===0&&i.jsx("p",{className:"text-center text-gray-500",children:"No interviews scheduled."})]}),i.jsx(Ht,{isOpen:I,onClose:()=>C(!1),title:"Schedule Interview",children:i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Candidate"}),i.jsxs("select",{className:"w-full border rounded px-3 py-2",value:v.candidateId||"",onChange:E=>j({...v,candidateId:E.target.value}),required:!0,children:[i.jsx("option",{value:"",children:"Select Candidate"}),_.map(E=>i.jsx("option",{value:E.id,children:E.name},E.id))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(ne,{type:"date",label:"Date",value:v.date||"",onChange:E=>j({...v,date:E.target.value}),required:!0}),i.jsx(ne,{type:"time",label:"Time",value:v.time||"",onChange:E=>j({...v,time:E.target.value}),required:!0})]}),i.jsx(ne,{label:"Company Name",value:v.companyName||"",onChange:E=>j({...v,companyName:E.target.value}),required:!0}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),i.jsxs("select",{className:"w-full border rounded px-3 py-2",value:v.interviewType||"Zoom",onChange:E=>j({...v,interviewType:E.target.value}),children:[i.jsx("option",{children:"Zoom"}),i.jsx("option",{children:"Teams"}),i.jsx("option",{children:"F2F"}),i.jsx("option",{children:"Telephonic"})]})]}),i.jsx(ne,{label:"Round",value:v.round||"",onChange:E=>j({...v,round:E.target.value}),placeholder:"e.g. L1, Managerial"})]}),i.jsx(ne,{label:"Support Person (if any)",value:v.supportPerson||"",onChange:E=>j({...v,supportPerson:E.target.value})}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx(J,{type:"submit",children:"Save Schedule"})})]})}),i.jsx(Ht,{isOpen:!!d,onClose:()=>m(null),title:`View Resume: ${d==null?void 0:d.name}`,children:i.jsxs("div",{className:"h-[80vh] flex flex-col",children:[i.jsx("div",{className:"flex justify-end mb-2",children:i.jsx("a",{href:d==null?void 0:d.data,download:d==null?void 0:d.name,className:"text-blue-600 font-bold hover:underline",children:"Download"})}),i.jsx("div",{className:"flex-1 bg-gray-100 rounded",children:(d==null?void 0:d.type)==="pdf"?i.jsx("object",{data:d.data,type:"application/pdf",className:"w-full h-full",children:i.jsx("p",{children:"Preview not supported."})}):i.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Preview only available for PDF. Please download."})})]})})]})},Fe=({children:t})=>{const{user:e,isInitialized:n}=je();return n?e?i.jsx(i.Fragment,{children:t}):i.jsx(Lo,{to:"/login",replace:!0}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:"Loading..."})},Qu=({children:t})=>{const{user:e,isInitialized:n}=je();return n?e?e.role==="admin"||e.modules.includes("users")?i.jsx(i.Fragment,{children:t}):i.jsx(Lo,{to:"/dashboard",replace:!0}):i.jsx(Lo,{to:"/login",replace:!0}):null},Gu=({children:t})=>{const{user:e,isInitialized:n}=je();return n?e?e.id!=="admin-01"?i.jsx(Lo,{to:"/dashboard",replace:!0}):i.jsx(i.Fragment,{children:t}):i.jsx(Lo,{to:"/login",replace:!0}):null},WS=()=>i.jsxs(oj,{children:[i.jsx(we,{path:"/",element:i.jsx(jS,{})}),i.jsx(we,{path:"/login",element:i.jsx(_S,{})}),i.jsx(we,{path:"/portal/agreement/:id",element:i.jsx(OS,{})}),i.jsx(we,{path:"/dashboard",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(ES,{})})})}),i.jsx(we,{path:"/candidates",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(bS,{})})})}),i.jsx(we,{path:"/candidates/info",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(NS,{})})})}),i.jsx(we,{path:"/candidates/new",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(s0,{})})})}),i.jsx(we,{path:"/candidates/edit/:id",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(s0,{})})})}),i.jsx(we,{path:"/candidates/agreement/:id",element:i.jsx(Fe,{children:i.jsx(TS,{})})}),i.jsx(we,{path:"/address-book",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(RS,{})})})}),i.jsx(we,{path:"/finance/transactions",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(SS,{})})})}),i.jsx(we,{path:"/finance/transactions/new",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(i0,{})})})}),i.jsx(we,{path:"/finance/transactions/edit/:id",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(i0,{})})})}),i.jsx(we,{path:"/finance/accounts",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(CS,{})})})}),i.jsx(we,{path:"/finance/accounts/new",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(o0,{})})})}),i.jsx(we,{path:"/finance/accounts/edit/:id",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(o0,{})})})}),i.jsx(we,{path:"/finance/statement/:type/:id",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(IS,{})})})}),i.jsx(we,{path:"/finance/financial-statements",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(AS,{})})})}),i.jsx(we,{path:"/finance/payroll",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(kS,{})})})}),i.jsx(we,{path:"/finance/reports",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(PS,{})})})}),i.jsx(we,{path:"/admin/users",element:i.jsx(Qu,{children:i.jsx(Te,{children:i.jsx(DS,{})})})}),i.jsx(we,{path:"/admin/users/new",element:i.jsx(Qu,{children:i.jsx(Te,{children:i.jsx(a0,{})})})}),i.jsx(we,{path:"/admin/users/edit/:id",element:i.jsx(Qu,{children:i.jsx(Te,{children:i.jsx(a0,{})})})}),i.jsx(we,{path:"/training/curriculum",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(FS,{})})})}),i.jsx(we,{path:"/training/monitor",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(BS,{})})})}),i.jsx(we,{path:"/training/dashboard",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(US,{})})})}),i.jsx(we,{path:"/training/attendance",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(zS,{})})})}),i.jsx(we,{path:"/training/interview-questions",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(qS,{})})})}),i.jsx(we,{path:"/training/interviews",element:i.jsx(Fe,{children:i.jsx(Te,{children:i.jsx(HS,{})})})}),i.jsx(we,{path:"/admin/logs",element:i.jsx(Gu,{children:i.jsx(Te,{children:i.jsx(LS,{})})})}),i.jsx(we,{path:"/admin/test-runner",element:i.jsx(Gu,{children:i.jsx(Te,{children:i.jsx(VS,{})})})}),i.jsx(we,{path:"/admin/cloud",element:i.jsx(Gu,{children:i.jsx(Te,{children:i.jsx(MS,{})})})})]});function QS(){return i.jsx(vS,{children:i.jsxs(fj,{children:[i.jsx(wS,{}),i.jsx(WS,{})]})})}const w1=document.getElementById("root");if(!w1)throw new Error("Could not find root element to mount to");const GS=Ku.createRoot(w1);GS.render(i.jsx(y0.StrictMode,{children:i.jsx(QS,{})}));
